System.register("chunks:///_virtual/achievement.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./save.ts","./singleton.ts","./data-core.ts"],(function(e){var t,n,c,a,i,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,c=e._decorator},function(e){a=e.UtilTime},function(e){i=e.Save},function(e){r=e.Singleton},function(e){o=e.DataGameInst}],execute:function(){var s;n._RF.push({},"40889rxchBBdKZtoFL6Fbxb","achievement",void 0);var u=c.ccclass;c.property,e("Achievement",u("Achievement")(s=function(e){function n(){for(var t,n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(t=e.call.apply(e,[this].concat(c))||this).percent=0,t.unlockAllAchi=!1,t}t(n,e);var c=n.prototype;return c.init=function(){var e=o._data.achievement,t=i.Instance.get("achievement");i.Instance._cur.achievement={},t=i.Instance.get("achievement");for(var n=0;n<e.length;n++){var c=e[n];void 0===t[c.name]&&(t[c.name]={name:c.name,condition:c.condition,value:c.value,percent:0,stat_value:0})}i.Instance._cur.achievement=t,this.updateData()},c.totalTime=function(){var e=i.Instance.statisticsValue("level_playTime");return void 0===e&&(e=0),""+(e=a.toHours(e))},c.totalPercent=function(){return this.percent},c.getAchi=function(e){return i.Instance.get("achievement")[e]},c.updateData=function(){var e=i.Instance.get("achievement"),t=i.Instance.get("statistics");if(1!==i.Instance.get("achi_percent")){var n=1;for(var c in e){var r=e[c];if(1!==r.percent){var o=t[r.value];if(void 0===o)continue;o>r.condition&&(o=r.condition),r.stat_value=o;var s=o/r.condition;r.percent=s,r.unlock_time=a.yearMonth()}this.percent+=r.percent,n++}this.percent/=n,this.unlockAllAchi=1===this.percent,i.Instance._cur.achi_percent=this.percent}},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/action.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sound.ts","./msg.ts","./res-cache.ts","./g-scene.ts","./data-structure.ts","./res.ts","./fun.ts","./local.ts","./res-pool.ts"],(function(t){var n,i,o,e,a,c,s,f,u,_,r,d;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,o=t.randomRangeInt},function(t){e=t.Sound},function(t){a=t.Msg},function(t){c=t.ResCache},function(t){s=t.GScene},function(t){f=t.Queue},function(t){u=t.Res},function(t){_=t.fun},function(t){r=t.Local},function(t){d=t.ResPool}],execute:function(){i._RF.push({},"5afefP7ANpMSK26z0CCzDoz","action",void 0);var h=t("Action",function(){function t(t){this._data={},this._time=0,this._index=0,this._queue=Object.create(null),this._act=void 0,this._data=c.Instance.getJson(t).json,this._queue=new f(5)}var n=t.prototype;return n.on=function(t){this.push(t,"start"),a.emit("msg_stat_times",t)},n.off=function(t){this.push(t,"end")},n.push=function(t,n){var i=this._data[t];if(void 0!==i){var o=i[n];if(void 0!==o){var e=new l(o);this._queue.push(e)}}else console.warn("Undefined action:",t)},n.pop=function(){this._act=this._queue.pop()},n.update=function(t){if(!s.isLoadScene)if(this._act){var n;this._act.time+=t;var i,o=null==(n=this._act)?void 0:n.data[this._act.idx];if(void 0===o||void 0===this._act)throw new Error("Error actor action index: "+(null==(i=this._act)?void 0:i.idx));this._act.time>=o.time&&(v.do(o.name,o.data),this._act.idx+=1,this._act.idx>=this._act.data.length&&(this._act=void 0))}else this._queue.empty()||this.pop()},t}()),l=(t("ActionParallel",function(){function t(t){this._data={},this._time=0,this._index=0,this._act=void 0,this._actions=[],this._data=c.Instance.getJson(t).json}var n=t.prototype;return n.on=function(t){this.push(t,"start"),a.emit("msg_stat_times",t)},n.off=function(t){this.push(t,"end")},n.push=function(t,n){var i=this._data[t];if(void 0!==i){var o=i[n],e=new l(o);this._actions.push(e)}else console.error("Undefined action:",t)},n.update=function(t){var n=this._actions.length;if(!(n<=0))for(var i=n-1;i>=0;i--){var o=this._actions[i];o.time+=t;var e=o.data[o.idx];o.time>=e.time&&(v.do(e.name,e.data),o.idx+=1,o.idx>=o.data.length&&this._actions.splice(i,1))}},t}()),t("ActionActor",function(t){function i(n,i){var o;return(o=t.call(this,n)||this)._actor=void 0,o._actor=i,o}n(i,t);var o=i.prototype;return o.on=function(n){t.prototype.on.call(this,n),a.emit("msg_stat_times",n)},o.update=function(t){if(!s.isLoadScene)if(this._act){this._act.time+=t;for(var n=this._act.data.length,i=this._act.idx;i<n&&this.checkRunAction();i++);}else this._queue.empty()||this.pop()},o.checkRunAction=function(){var t,n,i=this,o=null==(t=this._act)?void 0:t.data[this._act.idx];if(void 0===o||void 0===this._act)throw new Error("Error actor action index: "+(null==(n=this._act)?void 0:n.idx));return this._act.time>=o.time&&(o.delay>0?_.delay((function(){v.do(o.name,o.data,i._actor)}),o.delay):v.do(o.name,o.data,this._actor),this._act.idx+=1,this._act.idx>=this._act.data.length&&(this._act=void 0),this._actor.actionEnd(),!0)},i}(h)),t("ActionActorEquip",function(t){function i(n,i){var o;return(o=t.call(this,n)||this)._actor=void 0,o._actor=i,o}n(i,t);var o=i.prototype;return o.on=function(n){t.prototype.on.call(this,n),this._actor.isPlayer&&a.emit("msg_stat_times",n)},o.update=function(t){if(!s.isLoadScene)if(this._act){this._act.time+=t;for(var n=this._act.data.length,i=this._act.idx;i<n&&this.checkRunAction();i++);}else this._queue.empty()||this.pop()},o.checkRunAction=function(){var t,n,i=this,o=null==(t=this._act)?void 0:t.data[this._act.idx];if(void 0===o||void 0===this._act)throw new Error("Error actor action index: "+(null==(n=this._act)?void 0:n.idx));return this._act.time>=o.time&&(o.delay>0?_.delay((function(){m.do(o.name,o.data,i._actor)}),o.delay):m.do(o.name,o.data,this._actor),this._act.idx+=1,this._act.idx>=this._act.data.length&&(this._act=void 0),this._actor.actionEnd(),!0)},i}(h)),t("ActionQueue",function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.update=function(t){if(!s.isLoadScene)if(this._act){this._act.time+=t;var n=this._act.data[this._act.idx];this._act.time>=n.time&&(v.do(n.name,n.data),this._act.idx+=1,this._act.idx>=this._act.data.length&&(this._act=void 0))}else this._queue.empty()||this.pop()},i}(h)),t("ActionGroup",(function(t){this.data=void 0,this.time=0,this.idx=0,this.data=t}))),v=t("UtilAction",function(){function t(){}return t.do=function(t,n,i){void 0===i&&(i=void 0);var o=this[t];o?o(n,i):console.warn("Not defined action:"+t)},t.on_check_preload=function(){s.isPreload&&(s.isLoadScene=!0)},t.on_scene=function(t){s.Load(t,(function(){}))},t.off_scene=function(t){},t.on_ui=function(t){a.emit("msg_ui_on",t)},t.off_ui=function(t){a.emit("msg_ui_off",t)},t.on_sfx=function(t,n){n?e.onByDistance(t,n.node.worldPosition):e.on(t)},t.off_sfx=function(t){e.off(t)},t.on_sfxing=function(t,n){void 0===n&&(n=1),e.playLoop(t,n)},t.off_sfxing=function(t){e.offing(t)},t.on_bgm=function(t){e.onBGM(t)},t.off_bgm=function(t){e.offBGM(t)},t.update_bgm=function(){e.updateBGM()},t.on_msg=function(t){a.emit(t)},t.on_msg_num=function(t,n){a.emit(t.key,t.value)},t.on_msg_str=function(t){a.emit(t.key,t.value)},t.on_msg_str_local=function(t,n){a.emit(t.key,r.Instance.get(t.value))},t.on_inst_scene=function(t){var n=c.Instance.getPrefab(t);u.inst(n,d.Instance._objectNode).setPosition(0,0,0)},t.on_inst=function(t,n){var i=c.Instance.getPrefab(t),o=u.inst(i,d.Instance._objectNode);void 0!==n&&n._view&&(o.parent=n._view,o.setPosition(0,0,0))},t.on_inst_pool=function(t){var n=c.Instance.getPrefab(t);u.inst(n,d.Instance._poolNode).setPosition(0,0,0)},t.off_inst=function(t,n){},t.on_inst_fx=function(t,n){var i=t.res,o=t.bone,e=c.Instance.getPrefab(i),a=u.inst(e,d.Instance._objectNode);if(void 0!==n&&n._view){var s=n.node.getChildByName(o);a.parent=s,a.setPosition(0,0,0)}},t.off_inst_fx=function(t,n){var i=t.res,o=t.bone;if(void 0!==n&&null!==n._view){var e,a=null==(e=n.node.getChildByName(o))?void 0:e.getChildByName(i);a&&a.emit("setDestroy")}},t.on_active=function(t,n){n.setActive(t)},t.on_fx=function(t,n){n.node.emit("on_fx",t)},t.off_fx=function(t,n){n.node.emit("off_fx",t)},t.on_buff=function(t,n){},t.set_fx=function(t,n){n.setFx(t)},t.on_ani=function(t,n){n._anim?n._anim.play(t):console.log("Not register SkeletalAnimation")},t.on_anig=function(t,n){n._animationGraph&&n._animationGraph.play?n._animationGraph.play(t.key,t.value):console.log("Not register animationGraph.")},t.on_set=function(t,n){n._data[t.key]=t.value},t.off_set=function(t,n){n._data[t]=!1},t.on_add=function(t,n){for(var i in t)console.log(i),n._data[i]+=t[i]},t.on_mul=function(t,n){for(var i in t)console.log(i),n._data[i]*=t[i]},t.on_com=function(t,n){n.node.addComponent(t)},t.on_call=function(t,n){n[t]()},t}()),m=t("UtilActionEquip",function(){function t(){}return t.do=function(t,n,i){void 0===i&&(i=void 0);var o=this[t];o?o(n,i):console.warn("Not defined action:"+t)},t.on_check_preload=function(){s.isPreload&&(s.isLoadScene=!0)},t.on_scene=function(t){s.Load(t,(function(){}))},t.off_scene=function(t){},t.on_ui=function(t){a.emit("msg_ui_on",t)},t.off_ui=function(t){a.emit("msg_ui_off",t)},t.on_sfx=function(t,n){n?e.onByDistance(t,n.node.worldPosition):e.on(t)},t.on_sfx_random=function(t){var n=t.key,i=t.value,a=n+"_"+o(0,i);e.on(a)},t.off_sfx=function(t){e.off(t)},t.off_sfxing=function(t){e.offing(t)},t.on_bgm=function(t){e.onBGM(t)},t.off_bgm=function(t){e.offBGM(t)},t.update_bgm=function(){e.updateBGM()},t.on_msg=function(t){a.emit(t)},t.on_msg_num=function(t,n){a.emit(t.key,t.value)},t.on_msg_str=function(t){a.emit(t.key,t.value)},t.on_msg_str_local=function(t,n){a.emit(t.key,r.Instance.get(t.value))},t.on_inst_scene=function(t){var n=c.Instance.getPrefab(t);u.inst(n,d.Instance._objectNode).setPosition(0,0,0)},t.on_inst=function(t,n){var i=c.Instance.getPrefab(t),o=u.inst(i,d.Instance._objectNode);n&&n._viewRoot&&(o.parent=n._viewRoot,o.setPosition(0,0,0))},t.off_inst=function(t,n){},t.on_inst_fx=function(t,n){var i=t.res,o=t.bone,e=c.Instance.getPrefab(i),a=u.inst(e,d.Instance._objectNode);if(void 0!==n&&null!==n._view){var s=n.node.getChildByName(o);a.parent=s,a.setPosition(0,0,0)}},t.off_inst_fx=function(t,n){var i=t.res,o=t.bone;if(void 0!==n&&null!==n._view){var e,a=null==(e=n.node.getChildByName(o))?void 0:e.getChildByName(i);a&&a.emit("setDestroy")}},t.on_active=function(t,n){n.setActive(t)},t.on_fx=function(t,n){n.onFx(t)},t.on_buff=function(t,n){},t.set_fx=function(t,n){n.setFx(t)},t.on_anig=function(t,n){var i;null!=(i=n._actor)&&i._animationGraph?n._actor._animationGraph.play(t.key,t.value):console.log("name:",null==n?void 0:n.name,"Not register animationGraph.",t.key,t.value)},t.on_set=function(t,n){n._data[t.key]=t.value},t.off_set=function(t,n){n._data[t]=!1},t.on_add=function(t,n){for(var i in t)console.log(i),n._data[i]+=t[i]},t.on_mul=function(t,n){for(var i in t)console.log(i),n._data[i]*=t[i]},t.on_call=function(t,n){n[t]()},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/actor-aim.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){var i,r,e,a,o,n,l,c,s,m,u,h,p,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,r=t.inheritsLoose,e=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,n=t._decorator,l=t.v3,c=t.quat,s=t.Node,m=t.animation,u=t.Vec3,h=t.math,p=t.Component},function(t){d=t.Gizmo}],execute:function(){var f,y,z,A,b,g,H,V,v;o._RF.push({},"842baiXwxpDbLL5IAHlyRPE","actor-aim",void 0);var w=n.ccclass,N=n.property,_=(l(0,0,0),l(0,0,0)),P=(c(0,0,0,1),l(0,0,0)),x=l(0,0,0);t("ActorAim",(f=w("ActorAim"),y=N({type:s}),z=N({type:s}),f((g=i((b=function(t){function i(){for(var i,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return i=t.call.apply(t,[this].concat(o))||this,e(i,"headNode",g,a(i)),e(i,"smooth",H,a(i)),e(i,"turnThreshold",V,a(i)),i.aimPoint=l(0,0,0),i.aimHorizontal=0,i.aimVertical=0,i.currentAimHorizontal=0,i.currentAimVertical=0,i.anim=void 0,e(i,"cameraNode",v,a(i)),i}r(i,t);var o=i.prototype;return o.start=function(){this.anim=this.getComponent(m.AnimationController)},o.lookAtPoint=function(t){u.copy(x,this.node.forward),x.multiplyScalar(-1),u.copy(_,this.cameraNode.forward),_.y=0,_.normalize();var i=u.cross(P,_,x),r=h.toDegree(u.angle(_,x));this.aimHorizontal=h.clamp(r,0,90),i.y<=0&&(r*=-1),this.aimHorizontal=(r+90)/180,this.aimVertical=(this.cameraNode.eulerAngles.x+45)/90,d.drawLine(this.headNode.worldPosition,t)},o.update=function(t){Math.abs(this.currentAimHorizontal-this.aimHorizontal)>this.turnThreshold&&(this.currentAimHorizontal=h.lerp(this.currentAimHorizontal,this.aimHorizontal,t*this.smooth),this.anim.setValue_experimental("aim_horizontal",this.currentAimHorizontal)),Math.abs(this.currentAimVertical-this.aimVertical)>this.turnThreshold&&(this.currentAimVertical=h.lerp(this.currentAimVertical,this.aimVertical,t*this.smooth),this.anim.setValue_experimental("aim_vertical",this.currentAimVertical))},i}(p)).prototype,"headNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(b.prototype,"smooth",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),V=i(b.prototype,"turnThreshold",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.01}}),v=i(b.prototype,"cameraNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=b))||A));o._RF.pop()}}}));

System.register("chunks:///_virtual/actor-animation-graph-group.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-animation-graph.ts"],(function(o){var r,n,t,i,a;return{setters:[function(o){r=o.inheritsLoose},function(o){n=o.cclegacy,t=o._decorator,i=o.Component},function(o){a=o.ActorAnimationGraph}],execute:function(){var p;n._RF.push({},"a16cfECKupHAYIDleIbLuiL","actor-animation-graph-group",void 0);var e=t.ccclass;t.property,o("ActorAnimationGraphGroup",e("ActorAnimationGraphGroup")(p=function(o){function n(){for(var r,n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];return(r=o.call.apply(o,[this].concat(t))||this)._groups=void 0,r}r(n,o);var t=n.prototype;return t.__preload=function(){if(this._groups=this.getComponentsInChildren(a),void 0===this._groups||null===this._groups)throw new Error(this.node.name+" node not find ActorAnimationGraph")},t.play=function(o,r){console.log("ActorAnimationGraphGroup",o,r);for(var n=0;n<this._groups.length;n++)this._groups[n].play(o,r)},n}(i))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/actor-animation-graph.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i,r,a,o,s,c,l;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.CCBoolean,c=t.animation,l=t.Component}],execute:function(){var p,u,h,f,g;a._RF.push({},"fbeacJjQuZEAbtmtlaKymUK","actor-animation-graph",void 0);var m=o.ccclass,y=o.property;t("ActorAnimationGraph",(p=m("ActorAnimationGraph"),u=y(s),p((g=n((f=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return(n=t.call.apply(t,[this].concat(a))||this)._graph=void 0,i(n,"isPose",g,r(n)),n}e(n,t);var a=n.prototype;return a.start=function(){if(this._graph=this.getComponent(c.AnimationController),void 0===this._graph||null===this._graph)throw new Error(this.node.name+" can not find AnimationController")},a.play=function(t,n){this.setValue(t,n)},a.setValue=function(t,n){var e;this.isPose?this._graph.setValue_experimental(t,n):null==(e=this._graph)||e.setValue(t,n)},a.setLayer=function(t,n){this._graph.setLayerWeight(t,n)},a.update=function(t){},n}(l)).prototype,"isPose",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=f))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/actor-animator-contorller.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,n,o,a,e;return{setters:[function(t){r=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,a=t.SkeletalAnimation,e=t.Component}],execute:function(){var c;n._RF.push({},"7acb11oPfRMPYvENyeWzZHr","actor-animator-contorller",void 0);var i=o.ccclass;o.property,t("ActorAnimatorController",i("ActorAnimatorController")(c=function(t){function n(){for(var r,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(r=t.call.apply(t,[this].concat(o))||this)._anim=Object.create(null),r._data=Object.create(null),r}r(n,t);var o=n.prototype;return o.init=function(t){this._data=t,this._anim=this.getComponent(a)},o.play=function(t){var r=this._data[t];this._anim.play(r[0])},n}(e))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/actor-auto-check-aim.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-animation-graph.ts","./msg.ts"],(function(t){var e,i,r,n,o,a,c,s,p,l,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.input,s=t.Input,p=t.KeyCode,l=t.Component},function(t){u=t.ActorAnimationGraph},function(t){h=t.Msg}],execute:function(){var y,m,f,_,g;o._RF.push({},"fb6abiIYRROW7ipekfWE6WD","actor-auto-check-aim",void 0);var k=a.ccclass,A=a.property;t("ActorAutoCheckAim",(y=k("ActorAutoCheckAim"),m=A({type:u}),y((g=e((_=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"animGraph",g,n(e)),e.layer=0,e}i(e,t);var o=e.prototype;return o.start=function(){this.animGraph=this.getComponent(u),c.on(s.EventType.KEY_DOWN,this.onKeyDown,this)},o.onKeyDown=function(t){t.keyCode==p.KEY_E&&(this.layer=1==this.layer?0:1,this.animGraph.setLayer(1,this.layer),0==this.layer?h.emit("msg_player_ik_off"):h.emit("msg_player_ik_on"))},e}(l)).prototype,"animGraph",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=_))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/actor-axe.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts","./damage-core.ts"],(function(t){var e,a,o,r,s,c,n;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,o=t._decorator,r=t.geometry,s=t.PhysicsSystem},function(t){c=t.ActorEquipBase},function(t){n=t.calculateDamage}],execute:function(){var i;a._RF.push({},"87a46XACzNEdpKUTmrMIVs4","actor-axe",void 0);var u=o.ccclass;o.property,t("ActorAxe",u("ActorAxe")(i=function(t){function a(){return t.apply(this,arguments)||this}return e(a,t),a.prototype.onFire=function(){this._bagData.bulletCount--;var t=this._actor._forwardNode,e=t.worldPosition,a=t.forward,o=new r.Ray(e.x,e.y,e.z,a.x,a.y,a.z),c=this._data.damage.distance,i=void 0;s.instance.raycastClosest(o,24,c)&&(i=s.instance.raycastClosestResult),n(this._data,i)},a}(c))||i);a._RF.pop()}}}));

System.register("chunks:///_virtual/actor-bag.ts",["cc","./data-core.ts","./msg.ts"],(function(t){var a,e,i,n;return{setters:[function(t){a=t.cclegacy,e=t.game},function(t){i=t.DataEquipInst},function(t){n=t.Msg}],execute:function(){a._RF.push({},"31aaeyr2DFMfrMfzAwNQLNe","actor-bag",void 0);t("ActorBag",function(){function t(t){this._actor=void 0,this._capacity=0,this._usageCount=0,this._actor=t,this._capacity=this._actor._data.bag_capacity,this._actor._data.equipment_name_list=new Array(this._capacity);for(var a=0;a<this._capacity;a++)this._actor._data.equipment_name_list[a]="",this._actor.node.emit("equip",a,!1);for(var e=t._data.bags,n=0;n<e.length;n++){this.pickedItem(e[n]);var r=i._data[e[n]].id;this._actor.node.emit("equip",r,!0)}}var a=t.prototype;return a.getEmptySlot=function(){for(var t=0;t<this._actor._data.equipment_name_list.length;t++){if(this._actor._data.equipment_name_list[t].length<=0)return t}return-1},a.pickedSameWeaponIncreaseClips=function(t){return!!this._actor._data.items[t]&&(this._actor.bulletBox++,!0)},a.pickedBulletBox=function(){var t;return!!(null==(t=this._actor._actorEquipment)?void 0:t.currentEquipItem)&&(this._actor.bulletBox+=2,!0)},a.pickedItem=function(t){var a=this._actor._data.items[t],e=i.get(t);if(a&&e.stackable)this.stackItem(e.bullet_count);else{var n=this.getEmptySlot();if(-1===n)return!1;this.createItem(e,t),this._actor._data.equipment_name_list[n]=t,this._usageCount++}return!0},a.dropItem=function(){var t,a,e=this._actor._data.current_equipment_index;if(e>=this._capacity||e<=0)return!1;var i=this._actor._data.equipment_name_list,r=i[e];if(!r||r.length<=0)return!1;null==(t=this._actor._actorEquipment)||t.unEquip(),this._actor._data.items[r]=void 0;var c=this._actor.node.worldPosition;return n.emit("msg_add_item",{res:r,pos:c}),i[e]="",this._actor._data.current_equipment_index=0,null==(a=this._actor._actorEquipment)||a.equip(0),this._usageCount--,!0},a.createItem=function(t,a){var i={name:a,actor:this._actor,stackable:void 0!==t.stackable,count:1,data:t,bulletClipCount:t.bullet_clip_count,bulletCount:t.bullet_count,lastUseTime:e.totalTime};this._actor._data.items[a]=i},a.stackItem=function(t){t.count++,t.bulletCount+=t.data.bullet_count},t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/actor-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./action.ts","./local.ts","./msg.ts","./res-cache.ts","./util2.ts","./res-pool.ts","./fx.ts"],(function(t){var i,n,o,e,s,d,a,h,u,c,f,_,r,l;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,e=t.Vec3,s=t.Component},function(t){d=t.ActionActor},function(t){a=t.Local},function(t){h=t.Msg},function(t){u=t.ResCache},function(t){c=t.Util,f=t.UtilNode,_=t.UtilVec3},function(t){r=t.ResPool},function(t){l=t.fx}],execute:function(){var p;n._RF.push({},"d0fffR4zwBGa7zh9DgsAkms","actor-base",void 0);var v=o.ccclass;t("ActorBase",v("ActorBase")(p=function(t){function n(){for(var i,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(i=t.call.apply(t,[this].concat(o))||this)._action=void 0,i._data={},i._updates=[],i._dir=new e(0,0,0),i._curDir=new e(0,0,0),i._angleVertical=0,i._groupIndex=-1,i.isPlayer=!1,i._anim=void 0,i._animationGraph=void 0,i._view=void 0,i.viewPointHead=void 0,i._actionUpdate=function(){},i}i(n,t);var o=n.prototype;return o.__preload=function(){this.onBind()},o.init=function(t){this._data=c.deepCopy(u.Instance.getJson(t).json),null==this._action&&(this._action=new d(this._data.action,this)),null==this._view&&(this._view=f.find(this.node,"view")),null==this.viewPointHead&&(this.viewPointHead=f.find(this.node,"view_point_head")),this.initView()},o.initView=function(){},o.onBind=function(){this.node.on("do",this.do,this),this.node.on("onGround",this.onGround,this),this.node.on("offGround",this.offGround,this),this.node.on("moveToSky",this.moveToSky,this),h.on("guide_end",this.onGuideEnd.bind(this))},o.offBind=function(){this.node.off("do",this.do,this),this.node.off("onGround",this.onGround,this),this.node.off("offGround",this.offGround,this),this.node.off("moveToSky",this.moveToSky,this),h.on("guide_end",this.onGuideEnd.bind(this))},o.onGuideEnd=function(){this.do("play")},o.moveToSky=function(){this._data.is_jump||this.do("move_to_sky")},o.onGround=function(){this._data.is_jump&&this.do("jump_to_ground"),this.do("on_ground")},o.offGround=function(){this.do("off_ground")},o.onUpdate=function(){},o.offUpdate=function(){this._updates=[]},o.updateAttribute=function(){},o.onDestroy=function(){this.offBind()},o.do=function(t){this._action&&this._action.on(t)},o.update=function(t){this._action&&this._action.update(t);for(var i=this._updates.length,n=0;n<i;n++)this._updates[n](t);this._data.jumping&&this._data.is_ground&&this.do("jump_to_ground")},o.setActive=function(t){var i,n=this.node.getChildByName(t.key);n?n.active=t.value:console.warn(" You want set undefined node active. "+(null==(i=this.node)?void 0:i.name)+"/"+t.key)},o.setFx=function(t){l.playLoop(this.node,t.key,t.value)},o.onFx=function(t){l.play(this.node,t)},o.actionEnd=function(){},o.setDir=function(t){_.copy(this._dir,t)},o.updateHP=function(){var t=this._data.hp/this._data.max_hp;this._data.is_low_hp=t<this._data.low_hp_percent,h.emit("fil_hp",t)},o.onHidden=function(){this.setVisible(!1)},o.onCameraFollow=function(){h.emit("msg_set_camera_node",this.node)},o.onShow=function(){this.setVisible(!0)},o.setVisible=function(t){this._view.active=t},o.onDead=function(){this.isPlayer||(-1!==this._groupIndex&&(h.emit("msg_remove_level_enemy",this.node),h.emit("msg_remove_enemy",this._groupIndex),h.emit("msg_tips",""+a.Instance.get("killed_one"))),r.Instance.push(this.node))},n}(s))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/actor-brain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sensor-rays-angle.ts","./util2.ts","./navigation-system.ts","./actor-input-brain.ts","./level.ts","./actor.ts","./data-core.ts","./guide.ts","./navigation-paths-test.ts","./msg.ts","./fun.ts"],(function(t){var i,o,n,e,s,a,r,h,c,l,u,d,_,f,p,v,y,P,g,m,w;return{setters:[function(t){i=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,e=t.v3,s=t.game,a=t.randomRange,r=t.Vec3,h=t.randomRangeInt,c=t.math,l=t.Component},function(t){u=t.SensorRaysAngle},function(t){d=t.UtilVec3},function(t){_=t.NavSystem},function(t){f=t.ActorInputBrain},function(t){p=t.Level},function(t){v=t.Actor},function(t){y=t.DataLevelInst},function(t){P=t.Guide},function(t){g=t.NavTest},function(t){m=t.Msg},function(t){w=t.fun}],execute:function(){var F;o._RF.push({},"2fdf6FtIJFKYJiADMcY5lJ3","actor-brain",void 0);var x=n.ccclass,D=(e(0,0,0),e(0,0,0)),S=e(0,0,0),I=(t("ActorBrain",x("ActorBrain")(F=function(t){function o(){for(var i,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this)._actor=void 0,i._wayPoints=new Array,i._moveDir=e(0,0,0),i.targetDirection=e(0,0,0),i.input=void 0,i.sensorRays=void 0,i.isFollowWayPointsMove=!1,i.currentWaypointsIndex=1,i.closestNavigationPoint=-1,i._targetNode=void 0,i.targetPosition=e(0,0,0),i.waypointsFireIndex=-1,i.waypointsFire=new Array,i.fireDirection=e(0,0,0),i.reloadTime=0,i.followPathsDirection=1,i.fireWaitTime=2,i.hateTime=0,i.brainState=I.none,i._actionUpdate=function(){},i.targetPos=void 0,i.waitBrainTime=1.5,i.pursuitIndex=0,i.pursuitTimes=1,i.eventPosition=e(0,-1e3,0),i.ghostTime=0,i.nextGhostTime=0,i}i(o,t);var n=o.prototype;return n.start=function(){this._actor=this.getComponent(v),this.input=this.getComponent(f);var t=this.node.getChildByName("sensor_target");if(this.sensorRays=t.getComponent(u),this.closestNavigationPoint=this._actor._data.nearest,this.targetPos=null==g?void 0:g.getTarget(),m.on("msg_sound_position",this.heartGunshot.bind(this)),void 0===this._actor||void 0===this.input||void 0===this.sensorRays)throw new Error(this.node.name+" node lose components : ActorBase or ActorInputBrain.");this.onNoneState()},n.onDestroy=function(){m.off("msg_sound_position",this.heartGunshot.bind(this))},n.onEnable=function(){this.waitBrainTime=1.5},n.onMove=function(){this.input.onMove(this._moveDir),this.input.onDir(this.targetDirection.x,this.targetDirection.y,this.targetDirection.z),this.onGhostMove()},n.onGhostMove=function(){var t=this,i=this._actor._data;i.is_ghost&&s.totalTime>this.nextGhostTime&&(this._actor.do("teleport"),w.delay((function(){t.input.onMoveToPoint(t.targetPosition)}),.3),this.nextGhostTime=a(i.ghost_min_time,i.ghost_max_time)+s.totalTime)},n.onJump=function(){var t;null==(t=this.input)||t.onJump()},n.onCrouch=function(){var t;null==(t=this.input)||t.onCrouch()},n.onProne=function(){var t;null==(t=this.input)||t.onProne()},n.onFire=function(){var t;null==(t=this.input)||t.onFire()},n.update=function(t){var i;this.waitBrainTime>0?this.waitBrainTime-=t:P.Instance.isGuide||y.stop||this._actor.isReady&&(null!=(i=this._actor)&&i._data.is_dead||(this.checkFire(),this._actionUpdate()))},n.heartGunshot=function(t){var i;r.distance(this.eventPosition,t)<10||this.brainState==I.free&&r.distance(t,this.node.worldPosition)<(null==(i=this._actor)?void 0:i._data.ai_hear_range)&&(d.copy(this.eventPosition,t),this._actor._data.ai_hate+=1)},n.checkFire=function(){var t,i=p.Instance._player;if(!i||null!=(t=p.Instance._player)&&t._data.is_dead)return this.onFreeState(),!1;var o,n=this._actor._data,e=r.distance(i.node.worldPosition,this._actor.node.worldPosition),a=n.ai_nearby_distance*(1+n.ai_hate);if(this.brainState!=I.fire&&e<a||this.brainState==I.fire&&e<a+3)return this._targetNode=i.node,void this.onFireState();if(this._targetNode=void 0,(null==(o=this._actor)?void 0:o._data.ai_hate)>0||this.brainState==I.fire?this.onPursuitState():this.brainState!=I.pursuit&&this.onFreeState(),n.ai_hate>0&&(this.hateTime-=s.deltaTime,this.hateTime<0)){var h=this._actor._data;h.ai_hate=h.ai_hate-1,h.ai_hate<=0&&(h.ai_hate=0),this.hateTime=h.ai_hate_clear_time}},n.onNoneState=function(){this.brainState!=I.none&&(this._actionUpdate=this.noneState,this.brainState=I.none)},n.noneState=function(){},n.onFreeState=function(){var t;this.brainState!=I.free&&(null==(t=this.input)||t.onAim(!1),this.isFollowWayPointsMove=!1,this.waypointsFireIndex=-1,this._actionUpdate=this.freeState,this.brainState=I.free)},n.freeState=function(){this.isFollowWayPointsMove?this.PathsFollowing():(_.randomPaths(this._wayPoints,this._actor.node.worldPosition,h(5,10),-1),this.isFollowWayPointsMove=!0,this.currentWaypointsIndex=0)},n.onFleeState=function(){var t;this.brainState!=I.flee&&(null==(t=this.input)||t.onAim(!1),this.isFollowWayPointsMove=!1,this._actionUpdate=this.fleeState,this.waypointsFireIndex=-1,this.brainState=I.flee)},n.fleeState=function(){this.isFollowWayPointsMove?this.PathsFollowing():(_.findPaths(this._wayPoints,this._actor.node.worldPosition,this.closestNavigationPoint,p.Instance._player.node.worldPosition),this.isFollowWayPointsMove=!0,this.currentWaypointsIndex=0)},n.onPursuitState=function(){var t;this.brainState!=I.pursuit&&(null==(t=this.input)||t.onAim(!1),this.isFollowWayPointsMove=!1,this._actionUpdate=this.pursuitState,this.waypointsFireIndex=-1,this.hateTime=this._actor._data.ai_hate_clear_time,this.brainState=I.pursuit,this.pursuitIndex=0)},n.pursuitState=function(){if(this.isFollowWayPointsMove)this.PathsFollowing();else{if(this.pursuitIndex>=this.pursuitTimes)return void(this.brainState=I.none);if(_.findPaths(this._wayPoints,this._actor.node.worldPosition,this.closestNavigationPoint,p.Instance._player.node.worldPosition),!this._wayPoints||this._wayPoints.length<=0)return void console.warn("can not find way paths.");this.isFollowWayPointsMove=!0,this.currentWaypointsIndex=0,this.pursuitIndex++}},n.PathsFollowing=function(){var t;this._actor._actorMove.faceMove=!0;var i=this._actor.node.worldPosition;d.copy(S,i);var o=this._wayPoints[this.currentWaypointsIndex];this.targetPosition.x=o.x,this.targetPosition.y=o.y,this.targetPosition.z=o.z,S.y=o.y,null==(t=this.targetPos)||t.setWorldPosition(o.x,o.y,o.z);if(r.distance(S,this.targetPosition)<=.1)if(this.currentWaypointsIndex+=this.followPathsDirection,this.currentWaypointsIndex>=this._wayPoints.length||this.currentWaypointsIndex<0)this.isFollowWayPointsMove=!1;else{var n;this.closestNavigationPoint=this._wayPoints[this.currentWaypointsIndex].id;var e=this._wayPoints[this.currentWaypointsIndex];this.targetPosition.x=e.x,this.targetPosition.y=e.y,this.targetPosition.z=e.z,null==(n=this.targetPos)||n.setWorldPosition(e.x,e.y,e.z)}else d.copy(this.targetDirection,this.targetPosition),this.targetDirection.subtract(i).normalize(),this._moveDir.x=this.targetDirection.x,this._moveDir.y=this.targetDirection.y,this._moveDir.z=this.targetDirection.z,this.lookAtTarget(this._moveDir),this._moveDir.x=0,this._moveDir.y=0,this._moveDir.z=1,this.onMove()},n.onFireState=function(){this.brainState!==I.fire&&(this._actionUpdate=this.fireState,this.brainState=I.fire)},n.fireState=function(){var t,i,o,n,e,h,l,u,_=p.Instance._player,f=null==(t=this._actor)?void 0:t.node.forward;d.copy(this.fireDirection,_.node.worldPosition),this.fireDirection.subtract(this._actor.node.worldPosition);var v=c.toDegree(r.angle(f,this.fireDirection));if(this.followPathFire(v),this.reloadTime>0)this.reloadTime-=s.deltaTime;else{var y;if(null!=(i=this._actor)&&null!=(o=i._actorEquipment)&&null!=(n=o.currentEquip)&&n.isBulletEmpty)return null==(y=this.input)||y.onReload(),void(this.reloadTime=3);if(null==(e=this.input)||e.onAim(!0),this.fireWaitTime-=s.deltaTime,!(this.fireWaitTime>0)){var P=null==(h=this._actor)||null==(l=h._actorEquipment)||null==(u=l.currentEquip)?void 0:u._data;this.fireWaitTime=a(P.ai_fire_wait_time_min,P.ai_fire_wait_time_max),this.onFire()}}},n.followPathFire=function(t){var i;this._actor._actorMove.faceMove=!1,-1===this.waypointsFireIndex&&(this.closestNavigationPoint=_.findNearest(this._actor.node.worldPosition),_.randomFirePath(this.waypointsFire,this.closestNavigationPoint),this.waypointsFireIndex=0);var o=this._actor.node.worldPosition,n=this.waypointsFire[this.waypointsFireIndex];d.copy(S,o),d.copy(this.targetPosition,n),S.y=n.y,r.distance(S,this.targetPosition)<=.5&&(this.waypointsFireIndex++,this.waypointsFireIndex>=this.waypointsFire.length&&(this.closestNavigationPoint=_.findNearest(this._actor.node.worldPosition),_.randomFirePath(this.waypointsFire,this.closestNavigationPoint),this.waypointsFireIndex=0,n=this.waypointsFire[this.waypointsFireIndex])),d.copy(this.targetDirection,this.targetPosition),null==(i=this.targetPos)||i.setWorldPosition(this.targetPosition.x,this.targetPosition.y,this.targetPosition.z),this.targetDirection.y=o.y,this.targetDirection.subtract(o).normalize(),this._moveDir.x=-this.targetDirection.x,this._moveDir.y=0,this._moveDir.z=-this.targetDirection.z;var e=p.Instance._player;d.copy(this.targetDirection,e.node.worldPosition),this.targetDirection.subtract(this.node.worldPosition).normalize(),d.copy(D,e.node.worldPosition),D.subtract(this.node.worldPosition);var s=c.toDegree(r.angle(D,this.node.forward)),a=e.node.worldPosition.y<this.node.worldPosition.y?-1:1;this.targetDirection.y=s*a,this.onMove()},n.lookAtTarget=function(t){d.copy(this.targetDirection,t)},o}(l))||F),function(t){return t[t.none=0]="none",t[t.free=1]="free",t[t.flee=2]="flee",t[t.pursuit=3]="pursuit",t[t.fire=4]="fire",t}(I||{}));o._RF.pop()}}}));

System.register("chunks:///_virtual/actor-crossbow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts"],(function(o){var t,r,n,c;return{setters:[function(o){t=o.inheritsLoose},function(o){r=o.cclegacy,n=o._decorator},function(o){c=o.ActorEquipBase}],execute:function(){var e;r._RF.push({},"5e88bG7rXpPQpQXM9RcthFZ","actor-crossbow",void 0);var s=n.ccclass;n.property,o("ActorCrossbow",s("ActorCrossbow")(e=function(o){function r(){for(var t,r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(t=o.call.apply(o,[this].concat(n))||this)._pointShoot=void 0,t}t(r,o);var n=r.prototype;return n.start=function(){this._pointShoot=this.node.getChildByName("point_shoot")},n.onDestroy=function(){},n.update=function(o){},r}(c))||e);r._RF.pop()}}}));

System.register("chunks:///_virtual/actor-effect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fx.ts"],(function(o){var t,e,n,i,s;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o._decorator,i=o.Component},function(o){s=o.fx}],execute:function(){var f;e._RF.push({},"1555aomBxZKapknmVGOVA1A","actor-effect",void 0);var a=n.ccclass;n.property,o("ActorEffect",a("ActorEffect")(f=function(o){function e(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(t=o.call.apply(o,[this].concat(n))||this)._map={},t}t(e,o);var n=e.prototype;return n.__preload=function(){this.node.on("on_fx",this.onFx,this),this.node.on("off_fx",this.offFx,this)},n.onDestroy=function(){this.node.off("on_fx",this.onFx,this),this.node.off("off_fx",this.offFx,this)},n.onFx=function(o){if("child"==o.state)s.play(this.node,o.name);else if("loop"==o.state)s.playLoop(this.node,o.key,o.value);else if("new"==o.state){var t=o.is_follow?this.node:void 0,e=s.on(o.name,this.node.position,void 0,t);this._map[o.name]=e}},n.offFx=function(o){"child"==o.state?s.play(this.node,o.name):"loop"==o.state?s.playLoop(this.node,o.key,o.value):"new"==o.state&&(null!=o.is_follow&&this._map[o.name].emit("setFollow",o.is_follow),this._map[o.name]=void 0)},e}(i))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/actor-enemy-gun.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts","./damage-core.ts","./util2.ts"],(function(t){var e,o,a,r,c,n,s,i;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,a=t._decorator,r=t.geometry,c=t.PhysicsSystem},function(t){n=t.ActorEquipBase},function(t){s=t.calculateDamage},function(t){i=t.UtilVec3}],execute:function(){var u;o._RF.push({},"e3635TDq7ZKc7JAm2Ip1xHk","actor-enemy-gun",void 0);var l=a.ccclass,y=(a.property,new r.Ray);t("ActorEnemyGun",l("ActorEnemyGun")(u=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.onFire=function(){var t;if(null!=(t=this._actor)&&t._forwardNode){this._bagData.bulletCount--;var e=this._actor._forwardNode,o=e.worldPosition,a=e.forward;i.copy(y.o,o),i.copy(y.d,a);var r,n=this._data.damage.distance;c.instance.raycastClosest(y,this.mask,n)&&(r=c.instance.raycastClosestResult),this.showTracer(r,a),s(this._data,r,this._actor)}},o}(n))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/actor-equip-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./action.ts","./util2.ts","./msg.ts","./fx-base.ts","./fx.ts","./local.ts"],(function(t){var i,o,a,e,n,s,c,l,h,r,_,u,d,f,p;return{setters:[function(t){i=t.inheritsLoose},function(t){o=t.cclegacy,a=t._decorator,e=t.v3,n=t.game,s=t.math,c=t.randomRange,l=t.Component},function(t){h=t.ActionActorEquip},function(t){r=t.UtilNode,_=t.UtilVec3},function(t){u=t.Msg},function(t){d=t.FxBase},function(t){f=t.fx},function(t){p=t.Local}],execute:function(){var m;o._RF.push({},"e03a7kAZPFDNqTbtmPEpmKL","actor-equip-base",void 0);var v=a.ccclass,g=(a.property,e(0,0,0));t("ActorEquipBase",v("ActorEquipBase")(m=function(t){function o(){for(var i,o=arguments.length,a=new Array(o),e=0;e<o;e++)a[e]=arguments[e];return(i=t.call.apply(t,[this].concat(a))||this).point_shoot=void 0,i._animationGraph=void 0,i._view=void 0,i._bagData=void 0,i._data={},i._action=void 0,i._actor=void 0,i.isPlayer=!1,i.fxMuzzle=void 0,i.isBulletEmpty=!1,i._recoilX=0,i._recoilY=0,i.mask=28,i}i(o,t);var a=o.prototype;return a.__preload=function(){this.point_shoot=this.node.getChildByName("point_shoot"),this.fxMuzzle=r.find(this.node,"fx_muzzle").getComponent(d),this._view=this.node.getChildByName("view"),this.node.on("do",this.do,this),this.node.on("init",this.init,this)},a.init=function(t){this._actor=t.actor,this._bagData=t,this._data=this._bagData.data,this._action=new h(this._data.action,this),this._bagData.lastUseTime=n.totalTime/1e3,this.isPlayer=this._actor.isPlayer,this._animationGraph=this._actor._animationGraph},a.onDestroy=function(){this.node.off("do",this.do,this),this.node.off("init",this.init,this)},a.do=function(t){if(this._action){if("fire"===t&&!this.checkUse())return;this._action.on(t)}},a.checkAutoFire=function(){var t;null!=(t=this._actor)&&t._data.is_auto_fire&&this.do("fire")},a.update=function(t){var i;null==(i=this._action)||i.update(t),this.updateRecoilBack(t)},a.setActive=function(t){var i,o=this.node.getChildByName(t.key);o?o.active=t.value:console.warn(" You want set undefined node active. "+(null==(i=this.node)?void 0:i.name)+"/"+t.key)},a.hiddenWeapon=function(){this.node.children[0].active=!1,this.node.active=!1},a.showWeapon=function(){this.node.children[0].active=!0},a.setFx=function(t){f.playLoop(this.node,t.key,t.value)},a.showMuzzle=function(){var t;null==(t=this.fxMuzzle)||t.play(void 0)},a.onFx=function(t){f.play(this.node,t)},a.updateRecoilBack=function(t){if(0!=this._recoilX&&0!=this._recoilY){var i,o=this._recoilX,a=this._recoilY;this._recoilX=s.lerp(this._recoilX,0,t*this._data.recoil_back_smooth),this._recoilY=s.lerp(this._recoilY,0,t*this._data.recoil_back_smooth);var e=o-this._recoilX,n=a-this._recoilY;null==(i=this._actor)||i.onRotation(-e,-n),Math.abs(this._recoilX)<.001&&(this._recoilX=0),Math.abs(this._recoilY)<.001&&(this._recoilY=0)}},a.onEquip=function(){this._actor._data.is_equip=!0},a.offEquip=function(){this._actor._data.is_equip=!1},a.onRecoil=function(){var t,i=this._actor._data.is_aim?this._data.recoil_aim_rate:1;this._recoilX=c(this._data.recoil_x[0],this._data.recoil_x[1])*i,this._recoilY=c(this._data.recoil_y[0],this._data.recoil_y[1])*i,null==(t=this._actor)||t.onRotation(this._recoilX,this._recoilY),u.emit("msg_camera_shake",{time:this._data.fire_shake_time,size:this._data.fire_shake_range})},a.showTracer=function(t,i){var o=this.fxMuzzle.node.worldPosition;null!=t&&t.hitPoint?_.copy(g,t.hitPoint):(_.copy(g,o),g.add3f(100*i.x,100*i.y,100*i.z)),u.emit("msg_set_tracer",{start:o,end:g})},a.actionEnd=function(){},a.checkUse=function(){if(this.isBulletEmpty=this._bagData.bulletCount<=0&&-1!==this._bagData.data.bullet_count,this.isBulletEmpty)return this.do("fire_empty"),!1;var t=this._bagData.lastUseTime;return(n.totalTime-t)/1e3>=this._data.damage.cooling},a.updateCooling=function(){this._bagData.lastUseTime=n.totalTime},a.checkFullBullet=function(){var t;return this._bagData.bulletCount==(null==(t=this._bagData)?void 0:t.data.bullet_count)&&(u.emit("msg_tips",""+p.Instance.get("bullet_is_full")),!0)},a.onReload=function(){var t;this._actor&&(this._actor._data.is_reload=!0,this._actor.bulletBox>0?(this._actor.bulletBox--,this._actor.bulletBox<0&&(this._actor.bulletBox=0),this._bagData.bulletCount=null==(t=this._bagData)?void 0:t.data.bullet_count,this.isBulletEmpty=!1):u.emit("msg_tips",""+p.Instance.get("clip_is_null")))},a.offReload=function(){this._actor._data.is_reload=!1},a.onUse=function(){},o}(l))||m);o._RF.pop()}}}));

System.register("chunks:///_virtual/actor-equip-view.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(t){var i,e,o,n,s,r,c,f,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,c=t.Node,f=t.Component},function(t){u=t.Msg}],execute:function(){var a,p,h,l,g,d;s._RF.push({},"8ff03xMX69MIaYYSK+VAq0S","actor-equip-view",void 0);var y=r.ccclass,m=r.property;t("ActorEquipView",(a=y("ActorEquipView"),p=m({type:[c]}),a((g=i((l=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,o(i,"slots",g,n(i)),o(i,"msg",d,n(i)),i}e(i,t);var s=i.prototype;return s.__preload=function(){this.node.on("equip",this.set,this),u.on(this.msg+"_on",this.on.bind(this)),u.on(this.msg+"_off",this.off.bind(this))},s.onDestroy=function(){this.node.off("equip",this.set,this),u.off(this.msg+"_on",this.on.bind(this)),u.off(this.msg+"_off",this.off.bind(this))},s.on=function(t){this.set(t,!0)},s.off=function(t){this.set(t,!1)},s.set=function(t,i){void 0===i&&(i=!1),this.slots[t].active=i},i}(f)).prototype,"slots",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=i(l.prototype,"msg",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"msg_player_equip"}}),h=l))||h));s._RF.pop()}}}));

System.register("chunks:///_virtual/actor-equipment.ts",["cc","./msg.ts","./res.ts","./res-cache.ts","./util2.ts","./fun.ts","./actor-equip-base.ts"],(function(t){var e,i,a,u,n,r,s,o,c;return{setters:[function(t){e=t.cclegacy,i=t.math,a=t.game},function(t){u=t.Msg},function(t){n=t.Res},function(t){r=t.ResCache},function(t){s=t.UtilNode},function(t){o=t.fun},function(t){c=t.ActorEquipBase}],execute:function(){e._RF.push({},"74f98UsRHZC9pmTPSWWn7y/","actor-equipment",void 0);t("ActorEquipment",function(){function t(t){this._actor=void 0,this.equipPool={},this.equipBoneNode={},this.currentEquipNode=void 0,this.currentEquipItem=void 0,this.currentEquip=void 0,this.stableValue=1,this._actor=t,this.equipBoneNode=s.getChildrenByNameBlur(this._actor.node,"weapon_root");for(var e=this._actor._data.cache_equipment_list,i=e.length,a=0;a<i;a++){var u=e[a],o=r.Instance.getPrefab(u+"_tps"),c=this.equipBoneNode[this._actor._data.weapon_bone],_=n.inst(o,c);this.equipPool[u]=_,_.active=!1}this.equip(t._data.default_equip_index)}var e=t.prototype;return e.equip=function(t){var e=this;if(this._actor._data.current_equipment_index!==t){var i=this._actor._data.equipment_name_list[t];if(!i||i.length<=0)return!1;this.unEquip();var a=this;return o.delay((function(){var n,r=a._actor._data.items;a.currentEquipNode=a.equipPool[i],a.currentEquipItem=r[i],a.currentEquipNode.active=!0,a.currentEquipNode.emit("init",e.currentEquipItem),a.currentEquipNode.emit("do","take_out"),a._actor._data.current_equipment_index=t,a.currentEquip=null==(n=a.currentEquipNode)?void 0:n.getComponent(c),e._actor.isPlayer&&(u.emit("msg_change_equip"),u.emit("msg_update_equip_info"),u.emit("msg_refresh_change_equip"),u.emit("msg_hidden_change_equip_panel"))}),.33),!0}return!1},e.unEquip=function(){var t=this._actor._data.current_equipment_index;if(-1!==t){var e,i=this._actor._data.equipment_name_list[t];if(!i)return void console.warn("The equipment index that does not exist, the index id is "+t+", the object is "+(null==(e=this._actor)?void 0:e.node.name));var a=this.equipPool[i];a?a.emit("do","take_back"):console.warn("")}},e.do=function(t){var e;null==(e=this.currentEquipNode)||e.emit("do",t)},e.updateAim=function(t,e){if(void 0===e&&(e=!1),void 0===this.currentEquipItem)0!==this.stableValue&&(this.stableValue=0,this._actor.isPlayer&&u.emit("msg_update_aim",this.stableValue));else{var n=this.currentEquipItem.data,r=n.stable_max_value,s=0;e?(this.stableValue=n.stable_max_value,s=n.stable_max_value):(0!==r&&(s=Math.abs(t)<=.001?n.stable_min_value:n.stable_max_value*t,s=Math.max(n.stable_min_value,s)),this.stableValue=i.lerp(this.stableValue,s,a.deltaTime*n.stable_smooth)),this._actor.isPlayer&&u.emit("msg_update_aim",this.stableValue)}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/actor-face.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./actor-move-cct.ts"],(function(t){var e,o,r,i,n,a,c,l,s,u,g,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,c=t.Node,l=t.CCFloat,s=t.v3,u=t.math,g=t.Component},function(t){p=t.UtilVec3},function(t){h=t.ActorMoveCCT}],execute:function(){var f,A,m,y,v,b,d,w,F,N,z;n._RF.push({},"d7147wbmLFMe7umNHco0sw5","actor-face",void 0);var M=a.ccclass,P=a.property;t("ActorFace",(f=M("ActorFace"),A=P(c),m=P({type:h,tooltip:"Test actor move."}),y=P(l),v=P(l),f((w=e((d=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,r(e,"rotationNode",w,i(e)),r(e,"actorMove",F,i(e)),r(e,"smoothAngle",N,i(e)),r(e,"smoothHeight",z,i(e)),e.targetAngle=s(0,0,0),e.currentAngle=s(0,0,0),e.targetPosition=s(0,0,0),e.currentPosition=s(0,0,0),e}o(e,t);var n=e.prototype;return n.start=function(){p.copy(this.targetAngle,this.rotationNode.eulerAngles),p.copy(this.currentAngle,this.targetAngle),p.copy(this.targetPosition,this.rotationNode.position),p.copy(this.currentAngle,this.targetPosition)},n.update=function(t){var e;this.rotationX(this.actorMove.angleVertical),this.currentAngle.x=u.lerp(this.currentAngle.x,this.targetAngle.x,this.smoothAngle*t),null==(e=this.rotationNode)||e.setRotationFromEuler(this.currentAngle)},n.rotationX=function(t){this.targetAngle.x=t},e}(g)).prototype,"rotationNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(d.prototype,"actorMove",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(d.prototype,"smoothAngle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),z=e(d.prototype,"smoothHeight",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=d))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/actor-follow-path-move.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,e,r,c;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,r=o._decorator,c=o.Component}],execute:function(){var n;e._RF.push({},"11a17e44/ZM8pmh7+TPj4bj","actor-follow-path-move",void 0);var l=r.ccclass;o("ActorFollowPathMove",l("ActorFollowPathMove")(n=function(o){function e(){return o.apply(this,arguments)||this}return t(e,o),e}(c))||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/actor-foot-ik.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./actor-move-cct.ts"],(function(t){var o,i,e,a,n,r,s,l,u,h,c,p,f,m,b,d,y,P,w,g,v;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,s=t.v3,l=t.animation,u=t.Node,h=t.Vec3,c=t.CCFloat,p=t.quat,f=t.Quat,m=t.Color,b=t.PhysicsSystem,d=t.game,y=t.Component},function(t){P=t.UtilTmp,w=t.Const,g=t.Gizmo},function(t){v=t.ActorMoveCCT}],execute:function(){var F,B,_,z,D,K,k,Q,I,M,x,N,L,R,V,C,H,E,T,A,q,G,U,W,S,Y,O,j,J,X;n._RF.push({},"dc3cd9/z7RCvJhYysbsvF6k","actor-foot-ik",void 0);var Z=r.ccclass,$=r.property,tt=s(0,0,0),ot=s(0,0,0);t("ActorFootIK",(F=Z("ActorFootIK"),B=$({type:l.AnimationController}),_=$(u),z=$(u),D=$(u),K=$(u),k=$(u),Q=$({type:v}),I=$(h),M=$(u),x=$([c]),F((R=o((L=function(t){function o(){for(var o,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return o=t.call.apply(t,[this].concat(n))||this,e(o,"anim",R,a(o)),e(o,"root",V,a(o)),e(o,"footBone",C,a(o)),e(o,"midBone",H,a(o)),e(o,"vbMidBone",E,a(o)),e(o,"moveRoot",T,a(o)),e(o,"actorMove",A,a(o)),e(o,"valueFootIKName",q,a(o)),e(o,"quatFootKey",G,a(o)),e(o,"poleFootName",U,a(o)),e(o,"footIKPos",W,a(o)),e(o,"checkDistance",S,a(o)),e(o,"heelHeight",Y,a(o)),e(o,"ballBone",O,a(o)),e(o,"masks",j,a(o)),o.targetPos=s(0,0,0),o.midIKPos=s(0,0,0),e(o,"smoothHeight",J,a(o)),o.finalHeight=0,o.footHeight=0,o.finalPos=s(0,0,0),o.originFootQuat=p(0,0,0,1),o.targetFootQuat=p(0,0,0,1),o.footQuat=p(0,0,0,1),o.polePos=s(0,0,0),o._mask=0,o.footToGroundDistance=0,e(o,"thresholdMove",X,a(o)),o.prePos=s(0,0,0),o}i(o,t);var n=o.prototype;return n.start=function(){for(var t=0;t<this.masks.length;t++)this._mask=this._mask|1<<this.masks[t];this.node.setWorldPosition(this.footBone.worldPosition),this.resetBonePos()},n.resetBonePos=function(){h.copy(this.finalPos,this.node.worldPosition),h.copy(this.footIKPos,this.node.worldPosition),this.anim.setValue_experimental(this.valueFootIKName,this.footIKPos),f.copy(this.targetFootQuat,this.footBone.worldRotation),f.copy(this.footQuat,this.targetFootQuat),this.anim.setValue_experimental(this.quatFootKey,this.footQuat),h.copy(this.polePos,this.vbMidBone.worldPosition),this.vbMidBone.setWorldPosition(this.polePos),this.anim.setValue_experimental(this.poleFootName,this.polePos)},n.lateUpdate=function(t){var o=P.Ray;if(h.copy(ot,this.node.worldPosition),ot.y+=1,h.copy(o.o,ot),h.copy(o.d,w.V3Down),g.drawLineDirection(o.o,w.V3Down,this.checkDistance+1,m.YELLOW),this.finalPos.set(this.node.worldPosition),this.finalPos.y+=this.heelHeight,b.instance.raycastClosest(o,this._mask,this.checkDistance+1,!1)){var i=b.instance.raycastClosestResult;this.finalPos.set(i.hitPoint),this.finalPos.y+=this.heelHeight,this.footToGroundDistance=this.footBone.worldPosition.y+i.hitPoint.y,g.drawBox(i.hitPoint,s(.02,.02,.02),m.BLUE),Math.abs(i.hitNormal.x)+Math.abs(i.hitNormal.z)>.2?this.calculateSlope(i.hitNormal):f.copy(this.targetFootQuat,this.node.worldRotation),g.drawLineDirection(ot,w.V3Down,this.checkDistance+1,m.RED)}else f.copy(this.targetFootQuat,this.node.worldRotation),this.footToGroundDistance=0,g.drawLineDirection(ot,w.V3Down,this.checkDistance+.5,m.YELLOW);f.slerp(this.footQuat,this.footQuat,this.targetFootQuat,10*d.deltaTime),this.anim.setValue_experimental(this.quatFootKey,this.footQuat),this.footIKPos=h.lerp(this.footIKPos,this.footIKPos,this.finalPos,t*this.smoothHeight),this.anim.setValue_experimental(this.valueFootIKName,this.footIKPos),g.drawBox(this.footIKPos,s(.05,.05,.05),m.YELLOW),g.drawBox(this.midBone.worldPosition,s(.05,.05,.05),m.BLUE),g.drawBox(this.vbMidBone.worldPosition,s(.05,.05,.05),m.GREEN),h.copy(this.polePos,this.vbMidBone.worldPosition),h.copy(tt,this.vbMidBone.worldPosition),tt.subtract(this.node.worldPosition),tt.normalize(),this.polePos.add(tt),this.anim.setValue_experimental(this.poleFootName,this.polePos),g.drawBox(this.polePos,s(.02,.02,.02),m.MAGENTA);this.anim.getAuxiliaryCurveValue_experimental("feet_position")},n.calculateSlope=function(t){f.copy(this.originFootQuat,this.node.worldRotation);var o=P.Quat_0;f.rotationTo(o,w.V3Up,t);var i=P.Quat_1;f.multiply(i,o,this.originFootQuat),f.copy(this.targetFootQuat,i)},o}(y)).prototype,"anim",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=o(L.prototype,"root",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=o(L.prototype,"footBone",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=o(L.prototype,"midBone",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=o(L.prototype,"vbMidBone",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=o(L.prototype,"moveRoot",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=o(L.prototype,"actorMove",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=o(L.prototype,"valueFootIKName",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"foot_ik_l"}}),G=o(L.prototype,"quatFootKey",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"quat_foot_l"}}),U=o(L.prototype,"poleFootName",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"pole_foot_l"}}),W=o(L.prototype,"footIKPos",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s(0,0,0)}}),S=o(L.prototype,"checkDistance",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),Y=o(L.prototype,"heelHeight",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.02}}),O=o(L.prototype,"ballBone",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=o(L.prototype,"masks",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=o(L.prototype,"smoothHeight",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),X=o(L.prototype,"thresholdMove",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),N=L))||N));n._RF.pop()}}}));

System.register("chunks:///_virtual/actor-grenade-gun.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts","./projectile-grenade.ts","./res-pool.ts","./util2.ts"],(function(t){var e,o,r,n,c,a,i,s;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,n=t.v3},function(t){c=t.ActorEquipBase},function(t){a=t.ProjectileGrenade},function(t){i=t.ResPool},function(t){s=t.UtilVec3}],execute:function(){var u;o._RF.push({},"6c1469DaBNCXpNaejQe7POj","actor-grenade-gun",void 0);var l=r.ccclass,p=n(0,0,0);t("ActorGrenadeGun",l("ActorGrenadeGun")(u=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.onFire=function(){var t=this._actor._forwardNode,e=t.worldPosition;s.copy(p,t.forward);var o=n(e.x,e.y,e.z);o.add(p);var r=i.Instance.pop(this._data.projectile_res,o,void 0).getComponent(a);null==r||r.onThrow(this._data,p,this._actor)},o}(c))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/actor-grenade.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts","./res.ts","./res-cache.ts","./projectile-grenade.ts","./level.ts"],(function(e){var t,r,o,n,c,a,s,i,u;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,o=e._decorator,n=e.v3},function(e){c=e.ActorEquipBase},function(e){a=e.Res},function(e){s=e.ResCache},function(e){i=e.ProjectileGrenade},function(e){u=e.Level}],execute:function(){var l;r._RF.push({},"aeef2VVpNJLY5ylnl63G0o0","actor-grenade",void 0);var d=o.ccclass;o.property,e("ActorGrenade",d("ActorGrenade")(l=function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),r.prototype.onFire=function(){var e=this._actor._forwardNode,t=e.worldPosition,r=e.forward,o=s.Instance.getPrefab(this._data.projectile_res),c=n(t.x,t.y,t.z);c.add(r);var l=a.instNode(o,u.Instance._objectNode,c).getComponent(i),d=r.multiplyScalar(10);null==l||l.onThrow(this._data,d,this._actor)},r}(c))||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/actor-handgun.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts","./damage-core.ts","./util2.ts"],(function(t){var a,o,e,n,r,s,c,i;return{setters:[function(t){a=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,n=t.geometry,r=t.PhysicsSystem},function(t){s=t.ActorEquipBase},function(t){c=t.calculateDamage},function(t){i=t.UtilVec3}],execute:function(){var u;o._RF.push({},"84405vmlmBO84kE1VAOHbv6","actor-handgun",void 0);var l=e.ccclass,d=(e.property,new n.Ray);t("ActorHandgun",l("ActorHandgun")(u=function(t){function o(){return t.apply(this,arguments)||this}return a(o,t),o.prototype.onFire=function(){this._bagData.bulletCount--;var t=this._actor._forwardNode,a=t.worldPosition,o=t.forward;i.copy(d.o,a),i.copy(d.d,o);var e,n=this._data.damage.distance;r.instance.raycastClosest(d,this.mask,n)&&(e=r.instance.raycastClosestResult),this.showTracer(e,o),c(this._data,e,this._actor)},o}(s))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/actor-ik.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,r,o,a,n,s,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,n=t._decorator,s=t.animation,c=t.Component}],execute:function(){var l,p,u,h,m;a._RF.push({},"178e1hRh0RF3Zog8OW7xXjU","actor-ik",void 0);var f=n.ccclass,y=n.property;t("ActorIK",(l=f("ActorIK"),p=y({type:s.AnimationController}),l((m=i((h=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return i=t.call.apply(t,[this].concat(a))||this,r(i,"anim",m,o(i)),i.testWaitTime=5,i.ratioIK=0,i}return e(i,t),i.prototype.update=function(t){this.ratioIK>=1||(this.testWaitTime-=t,this.testWaitTime>0||(this.ratioIK+=t,this.ratioIK>1&&(this.ratioIK=1),this.anim.setValue_experimental("ratio_ik",this.ratioIK)))},i}(c)).prototype,"anim",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=h))||u));a._RF.pop()}}}));

System.register("chunks:///_virtual/actor-input-brain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor.ts"],(function(n){var o,t,r,i,c;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,r=n._decorator,i=n.Component},function(n){c=n.Actor}],execute:function(){var u;t._RF.push({},"9a7794VGPBGDpf47jYvUBqo","actor-input-brain",void 0);var a=r.ccclass;r.property,n("ActorInputBrain",a("ActorInputBrain")(u=function(n){function t(){for(var o,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(o=n.call.apply(n,[this].concat(r))||this)._actor=void 0,o._isPause=!1,o}o(t,n);var r=t.prototype;return r.onAutoFire=function(n){throw new Error("Method not implemented.")},r.start=function(){if(this._actor=this.getComponent(c),null===this._actor)throw new Error(this.node.name+" node can not find ActorEnemy")},r.onMove=function(n){var o;null==(o=this._actor)||o.onMove(n)},r.onMoveToPoint=function(n){var o;null==(o=this._actor)||o.onMoveToPoint(n)},r.onRotation=function(n,o){var t;null==(t=this._actor)||t.onRotation(n,o)},r.onDir=function(n,o,t){var r;null==(r=this._actor)||r.onDir(n,o,t)},r.onJump=function(){var n;null==(n=this._actor)||n.onJump()},r.onRun=function(n){var o;null==(o=this._actor)||o.onRun(n)},r.onCrouch=function(){var n;null==(n=this._actor)||n.onCrouch()},r.onProne=function(){},r.onAim=function(n){var o;null==(o=this._actor)||o.onAim(n)},r.onChangeEquips=function(){throw new Error("Method not implemented.")},r.onFire=function(){var n;null==(n=this._actor)||n.onFire()},r.onEquip=function(n){var o;null==(o=this._actor)||o.onEquip(n)},r.onPick=function(){var n;null==(n=this._actor)||n.onPick()},r.onReload=function(){var n;null==(n=this._actor)||n.onReload()},r.onDrop=function(){var n;null==(n=this._actor)||n.onDrop()},r.onPause=function(){},t}(i))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/actor-input.ts",["./rollupPluginModLoBabelHelpers.js","cc","./level.ts","./msg.ts","./ui.ts"],(function(t){var n,o,i,e,r,c,s,u;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,e=t.sys,r=t.Component},function(t){c=t.Level},function(t){s=t.Msg},function(t){u=t.UI}],execute:function(){var a,l;o._RF.push({},"01c09MbFBBOMaVVPRCTuZwT","actor-input",void 0);var f=i.ccclass;t("ActorInput",f("ActorInput")(((l=function(t){function o(){for(var n,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this)._actor=void 0,n._isPause=!1,n._isOpenEquips=!1,n}n(o,t);var i=o.prototype;return i.onMoveToPoint=function(t){throw new Error("Method not implemented.")},i.start=function(){s.on("msg_set_input_active",this.setActive.bind(this)),o.inst=this,s.on("msg_exit_pointer",this.exitPointer.bind(this))},i.exitPointer=function(){document.exitPointerLock()},i.onDestroy=function(){s.off("msg_set_input_active",this.setActive.bind(this)),s.off("msg_exit_pointer",this.exitPointer.bind(this)),e.platform!==e.Platform.MOBILE_BROWSER&&e.platform!==e.Platform.ANDROID&&e.platform!==e.Platform.IOS||u.Instance.off("ui_joystick")},i.setActive=function(t){if(t)this.initInput();else{for(var n=0;n<this.node.children.length;n++)this.node.children[n].active=!1;u.Instance.off("ui_joystick")}},i.initInput=function(){this._actor=c.Instance._player,e.platform===e.Platform.MOBILE_BROWSER||e.platform===e.Platform.ANDROID||e.platform===e.Platform.IOS||e.platform===e.Platform.OPENHARMONY?u.Instance.on("ui_joystick"):(this.node.children[1].active=!0,this.node.children[0].active=!0)},i.onMove=function(t){var n;null==(n=this._actor)||n.onMove(t)},i.onRotation=function(t,n){var o;null==(o=this._actor)||o.onRotation(t,n)},i.onJump=function(){var t;null==(t=this._actor)||t.onJump()},i.onRun=function(t){var n;null==(n=this._actor)||n.onRun(t)},i.onCrouch=function(){var t;null==(t=this._actor)||t.onCrouch()},i.onAim=function(){var t;null==(t=this._actor)||t.onAim(void 0)},i.onFire=function(){var t;null==(t=this._actor)||t.onFire()},i.onAutoFire=function(t){var n;null==(n=this._actor)||n.onAutoFire(t)},i.onEquip=function(t){var n;null==(n=this._actor)||n.onEquip(t)},i.onPick=function(){var t;null==(t=this._actor)||t.onPick()},i.onReload=function(){var t;null==(t=this._actor)||t.onReload()},i.onDrop=function(){var t;null==(t=this._actor)||t.onDrop()},i.onDir=function(t,n){},i.onPause=function(){this._isPause=!this._isPause,s.emit("push","level_pause")},i.onChangeEquips=function(){return s.emit("push","select_equips"),!0},o}(r)).inst=void 0,a=l))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/actor-interface.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"92104FiaI1OLrtZm0vpahcL","actor-interface",void 0);t("DamageData",(function(){this.hitPart=void 0,this.hitDistance=void 0,this.fireData=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/actor-items.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var c,o,r,e;return{setters:[function(t){c=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,e=t.Component}],execute:function(){var n;o._RF.push({},"bccb4KGCkdLp4PwckmEAX8R","actor-items",void 0);var i=r.ccclass;t("ActorItem",i("ActorItem")(n=function(t){function o(){for(var c,o=arguments.length,r=new Array(o),e=0;e<o;e++)r[e]=arguments[e];return(c=t.call.apply(t,[this].concat(r))||this).data=void 0,c.item=void 0,c}return c(o,t),o.prototype.start=function(){},o}(e))||n);o._RF.pop()}}}));

System.register("chunks:///_virtual/actor-lookat.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(e){var t,o,n,r,i,a,c,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.Node,l=e.Component},function(e){u=e.UtilNode}],execute:function(){var s,p,b,f,h,d;i._RF.push({},"9a855v+MrJGRJngc67wZaM9","actor-lookat",void 0);var _=a.ccclass,y=a.property;e("ActorLookAt",(s=_("ActorLookAt"),p=y(c),s((h=t((f=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"bone_name",h,r(t)),n(t,"bone_head",d,r(t)),t._angle=0,t._dir=1,t}o(t,e);var i=t.prototype;return i.start=function(){this.bone_head=u.find(this.node,this.bone_name)},i.lateUpdate=function(e){var t;null==(t=this.bone_head)||t.setRotationFromEuler(this._angle,0,0)},t}(l)).prototype,"bone_name",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"bone_root"}}),d=t(f.prototype,"bone_head",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object.create(null)}}),b=f))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/actor-machine-gun.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts","./damage-core.ts","./util2.ts"],(function(t){var a,e,c,o,n,r,s,i;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy,c=t._decorator,o=t.geometry,n=t.PhysicsSystem},function(t){r=t.ActorEquipBase},function(t){s=t.calculateDamage},function(t){i=t.UtilVec3}],execute:function(){var u;e._RF.push({},"d1de3133u1FBqWbaaiwq/Dy","actor-machine-gun",void 0);var l=c.ccclass,h=(c.property,new o.Ray);t("ActorMachineGun",l("ActorMachineGun")(u=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.prototype.onFire=function(){this._bagData.bulletCount--;var t=this._actor._forwardNode,a=t.worldPosition,e=t.forward;i.copy(h.o,a),i.copy(h.d,e);var c,o=this._data.damage.distance;n.instance.raycastClosest(h,this.mask,o)&&(c=n.instance.raycastClosestResult),this.showTracer(c,e),s(this._data,c,this._actor)},e}(r))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/actor-main.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,r,e,o;return{setters:[function(t){n=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,o=t.Component}],execute:function(){var c,a;r._RF.push({},"fa586se66dJFL/MRNNbvyZO","actor-main",void 0);var i=e.ccclass;e.property,t("ActorMain",i("ActorMain")(((a=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var e=r.prototype;return e.start=function(){r.target=this.node},e.update=function(t){},r}(o)).target=Object.create(null),c=a))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/actor-melee-weapon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts","./damage-core.ts"],(function(t){var e,a,o,r,s,c,n;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,o=t._decorator,r=t.geometry,s=t.PhysicsSystem},function(t){c=t.ActorEquipBase},function(t){n=t.calculateDamage}],execute:function(){var i;a._RF.push({},"4bb2849/HJC6rO7tSJB+h0F","actor-melee-weapon",void 0);var u=o.ccclass;o.property,t("ActorMeleeWeapon",u("ActorMeleeWeapon")(i=function(t){function a(){return t.apply(this,arguments)||this}return e(a,t),a.prototype.onFire=function(){this._bagData.bulletCount--;var t=this._actor._forwardNode,e=t.worldPosition,a=t.forward,o=new r.Ray(e.x,e.y,e.z,a.x,a.y,a.z),c=this._data.damage.distance,i=void 0;s.instance.raycastClosest(o,24,c)&&(i=s.instance.raycastClosestResult),n(this._data,i,this._actor)},a}(c))||i);a._RF.pop()}}}));

System.register("chunks:///_virtual/actor-move-cct.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./data-core.ts"],(function(t){var e,i,o,n,r,a,l,s,c,h,u,p,d,y,g,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.v3,s=t.CCFloat,c=t.CapsuleCharacterController,h=t.Vec3,u=t.math,p=t.game,d=t.Component},function(t){y=t.UtilActor,g=t.UtilVec3},function(t){v=t.DataLevelInst}],execute:function(){var f,m,M,V,b,D,z,R,w,x,S,G,C,F,L,P;r._RF.push({},"a00989V8EhEGpILXSrxTN4c","actor-move-cct",void 0);var A=a.ccclass,E=a.property,T=l(0,0,0);t("ActorMoveCCT",(f=A("ActorMoveCCT"),m=E({type:s,tooltip:"Move Speed. "}),M=E({tooltip:"Jump Force."}),V=E({type:s,tooltip:"Move smooth value."}),b=E({type:s,tooltip:"Default angle value"}),D=E({type:c}),f((w=e((R=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"speed",w,n(e)),e.maxSpeed=10,o(e,"jumpForce",x,n(e)),o(e,"smoothMove",S,n(e)),o(e,"angleVertical",G,n(e)),o(e,"controller",C,n(e)),e.velocity=l(0,0,0),e.velocityLocal=l(0,0,0),e.inputDirection=new h(0,0,0),e.speedY=0,e.currentDirection=l(0,0,0),e.direction=l(0,0,0),e.angleHead=0,e.moveVector=l(0,0,0),o(e,"angleVerticalMax",F,n(e)),o(e,"angleVerticalMin",L,n(e)),o(e,"faceMove",P,n(e)),e.angle=0,e.isJump=!1,e.isStopMove=!1,e.isGrounded=!1,e.currentSpeed=0,e.isSky=!1,e.angle_threshold=.001,e.speedRate=1,e.isRun=!1,e}i(e,t);var r=e.prototype;return r.start=function(){this.controller=this.getComponent(c),this.node.setRotationFromEuler(0,180,0),this.onRotation(180,0)},r.onEnable=function(){},r.lateUpdate=function(t){v.stop||this.isStopMove?this.stop():(this.movePosition(t),this.moveRotation())},r.movePosition=function(t){h.lerp(this.velocityLocal,this.velocityLocal,this.inputDirection,t*this.smoothMove),this.velocity.set(this.velocityLocal),this.faceMove&&h.rotateY(this.velocity,this.velocity,h.ZERO,u.toRadian(this.node.eulerAngles.y)),this.currentSpeed=Math.sqrt(this.velocity.x*this.velocity.x+this.velocity.z*this.velocity.z),this.speedRate=Math.abs(this.currentSpeed/this.speed),y.calculateSlope(this.node,this.velocity),this.checkGround(),this.isGrounded||(this.speedY+=-9.8*p.deltaTime),this.isGrounded&&this.speedY,this.velocity.y=this.speedY,h.copy(this.moveVector,this.velocity).multiplyScalar(p.deltaTime),this.controller.move(this.moveVector)},r.moveToPoint=function(t){this.node.setWorldPosition(t)},r.moveRotation=function(){if(g.copy(this.currentDirection,this.direction),this.angle=u.toDegree(Math.abs(h.angle(this.currentDirection,this.node.forward))),this.angle>this.angle_threshold){g.copy(T,this.currentDirection);var t=Math.sign(-T.cross(this.node.forward).y)*this.angle+this.node.eulerAngles.y;this.node.setRotationFromEuler(0,t,0)}},r.directionRotation=function(){if(g.copy(this.currentDirection,this.direction),this.angle=u.toDegree(Math.abs(h.angle(this.currentDirection,this.node.forward))),this.angle>.001){g.copy(T,this.currentDirection);var t=Math.sign(-T.cross(this.node.forward).y)*this.angle+this.node.eulerAngles.y;this.node.setRotationFromEuler(0,t,0)}},r.moveDirection=function(t){g.copy(this.inputDirection,t),this.inputDirection.multiplyScalar(this.speed)},r.jump=function(){this.isJump=!0,this.speedY=this.jumpForce.y},r.onRotation=function(t,e){this.angleHead+=t,this.direction.z=-Math.cos(Math.PI/180*this.angleHead),this.direction.x=Math.sin(Math.PI/180*this.angleHead),this.angleVertical-=e,this.angleVertical>=this.angleVerticalMax&&(this.angleVertical=this.angleVerticalMax),this.angleVertical<=this.angleVerticalMin&&(this.angleVertical=this.angleVerticalMin)},r.onDirection=function(t,e,i){this.direction.x=t,this.direction.z=i,this.angleVertical=e,this.angleVertical>=this.angleVerticalMax&&(this.angleVertical=this.angleVerticalMax),this.angleVertical<=this.angleVerticalMin&&(this.angleVertical=this.angleVerticalMin)},r.stop=function(){this.velocity.x=0,this.velocity.z=0,this.velocity.y=0},r.copyLinearVelocity=function(t){t.set(this.velocityLocal)},r.checkGround=function(){var t=this.controller.isGrounded;this.velocity.y;t&&!this.isGrounded&&this.velocity.y>-1&&this.velocity.y<=0?(this.node.emit("onGround"),this.isSky=!1,this.isJump=!1):this.isGrounded&&this.velocity.y>.5&&this.node.emit("offGround"),this.isGrounded=t},e}(d)).prototype,"speed",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),x=e(R.prototype,"jumpForce",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l(0,6,0)}}),S=e(R.prototype,"smoothMove",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),G=e(R.prototype,"angleVertical",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=e(R.prototype,"controller",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(R.prototype,"angleVerticalMax",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),L=e(R.prototype,"angleVerticalMin",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-30}}),P=e(R.prototype,"faceMove",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),z=R))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/actor-move-slope.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){var i,s,e,o,r,a,n,c,l;return{setters:[function(t){i=t.inheritsLoose},function(t){s=t.cclegacy,e=t._decorator,o=t.Vec3,r=t.v3,a=t.PhysicsSystem,n=t.geometry,c=t.Component},function(t){l=t.UtilVec3}],execute:function(){var h;s._RF.push({},"ab95dwRddFBYan4djoZ8kId","actor-move-slope",void 0);var p=e.ccclass;e.property,t("ActorMoveSlope",p("ActorMoveSlope")(h=function(t){function s(){for(var i,s=arguments.length,e=new Array(s),o=0;o<s;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).ray=new n.Ray,i.mask=0,i.distance=.4,i.p0=r(0,0,0),i.p1=r(0,0,0),i.direction=r(0,0,0),i}i(s,t);var e=s.prototype;return e.start=function(){this.mask=24,l.copy(this.ray.d,o.ZERO),this.ray.d=r(0,-1,0),this.distance=.3},e.updateSlope=function(t){var i=t.length();if(0===i)return o.ZERO;if(l.copy(this.ray.o,this.node.worldPosition),l.copy(this.direction,t),a.instance.raycastClosest(this.ray,this.mask,this.distance)){var s=a.instance.raycastClosestResult;if(l.copy(this.p0,s.hitPoint),this.ray.o.add(t.normalize().multiplyScalar(.03)),a.instance.raycastClosest(this.ray,this.mask,this.distance)){var e=a.instance.raycastClosestResult;l.copy(this.direction,e.hitPoint),this.direction.subtract(this.p0).normalize().multiplyScalar(i)}}return this.direction},s}(c))||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/actor-move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./sensor-slope.ts","./sensor-ground.ts","./data-core.ts"],(function(t){var e,i,o,n,r,s,l,a,c,h,u,p,y,g,d,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,l=t.v3,a=t.CCFloat,c=t.Vec3,h=t.RigidBody,u=t.math,p=t.Component},function(t){y=t.UtilVec3},function(t){g=t.SensorSlope},function(t){d=t.SensorGround},function(t){v=t.DataLevelInst}],execute:function(){var f,V,m,M,b,S,D,z,w,L,R,P,x,F,G,j,A,C;r._RF.push({},"b31a5kDRyND84FJnozP5Ljo","actor-move",void 0);var E=s.ccclass,H=s.property,_=l(0,0,0);t("ActorMove",(f=E("ActorMove"),V=H({type:a,tooltip:"Move Speed. "}),m=H({tooltip:"Jump Force."}),M=H({type:a,tooltip:"Move smooth value."}),b=H({type:a,tooltip:"Default angle value"}),S=H({type:g,tooltip:" Sensor slope."}),D=H({type:d,tooltip:" Sensor ground."}),f((L=e((w=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"speed",L,n(e)),o(e,"jumpForce",R,n(e)),o(e,"smoothMove",P,n(e)),o(e,"angleVertical",x,n(e)),o(e,"sensorSlop",F,n(e)),o(e,"sensorGround",G,n(e)),e.velocity=l(0,0,0),e.velocityLocal=l(0,0,0),e.currentVelocity=l(0,0,0),e.moveVec3=new c(0,0,0),e.currentSpeed=0,e.speedY=0,e.currentDirection=l(0,0,0),e.direction=l(0,0,0),e.angleHead=0,e.rigid=void 0,o(e,"angleVerticalMax",j,n(e)),o(e,"angleVerticalMin",A,n(e)),o(e,"faceMove",C,n(e)),e.angle=0,e.isJump=!1,e.isStopMove=!1,e.previousPosition=l(0,0,0),e.deltaMove=0,e.isGrounded=!1,e}i(e,t);var r=e.prototype;return r.copyLinearVelocity=function(t){this.rigid.getLinearVelocity(t)},r.start=function(){this.sensorSlop=this.getComponent(g),this.sensorGround=this.getComponent(d),this.node.setRotationFromEuler(0,180,0),this.onRotation(180,0)},r.onEnable=function(){var t;this.rigid||(this.rigid=this.getComponent(h)),null==(t=this.rigid)||t.setLinearVelocity(c.ZERO)},r.lateUpdate=function(t){v.stop||this.isStopMove?this.stop():(this.movePosition(t),this.moveRotation())},r.movePosition=function(t){var e,i,o;if(this.deltaMove=c.distance(this.previousPosition,this.node.worldPosition),y.copy(this.previousPosition,this.node.worldPosition),c.lerp(this.velocityLocal,this.velocityLocal,this.moveVec3,t*this.smoothMove),y.copy(this.velocity,this.velocityLocal),this.faceMove&&c.rotateY(this.velocity,this.velocity,c.ZERO,u.toRadian(this.node.eulerAngles.y)),null==(e=this.rigid)||e.getLinearVelocity(this.currentVelocity),this.speedY=this.currentVelocity.y,this.velocity.y=this.speedY,this.currentSpeed=Math.sqrt(this.currentVelocity.x*this.currentDirection.x+this.currentVelocity.z*this.currentVelocity.z),null!=(i=this.sensorGround)&&i._isGround&&this.sensorSlop.checkSlope(this.velocity)){var n=this.velocity.length();y.copy(this.velocity,this.sensorSlop.vectorSlop),this.velocity.normalize().multiplyScalar(n)}else this.velocity.y=this.currentVelocity.y;null==(o=this.rigid)||o.setLinearVelocity(this.velocity)},r.moveToPoint=function(t){this.node.setWorldPosition(t)},r.moveRotation=function(){if(y.copy(this.currentDirection,this.direction),this.angle=u.toDegree(Math.abs(c.angle(this.currentDirection,this.node.forward))),this.angle>.001){y.copy(_,this.currentDirection);var t=Math.sign(-_.cross(this.node.forward).y)*this.angle+this.node.eulerAngles.y;this.node.setRotationFromEuler(0,t,0)}},r.directionRotation=function(){if(y.copy(this.currentDirection,this.direction),this.angle=u.toDegree(Math.abs(c.angle(this.currentDirection,this.node.forward))),this.angle>.001){y.copy(_,this.currentDirection);var t=Math.sign(-_.cross(this.node.forward).y)*this.angle+this.node.eulerAngles.y;this.node.setRotationFromEuler(0,t,0)}},r.moveDirection=function(t){y.copy(this.moveVec3,t),this.moveVec3.multiplyScalar(this.speed)},r.jump=function(){var t,e;null==(t=this.rigid)||t.getLinearVelocity(this.currentVelocity),this.currentVelocity.y=this.jumpForce.y,null==(e=this.rigid)||e.setLinearVelocity(this.currentVelocity)},r.onRotation=function(t,e){this.angleHead+=t,this.direction.z=-Math.cos(Math.PI/180*this.angleHead),this.direction.x=Math.sin(Math.PI/180*this.angleHead),this.angleVertical-=e,this.angleVertical>=this.angleVerticalMax&&(this.angleVertical=this.angleVerticalMax),this.angleVertical<=this.angleVerticalMin&&(this.angleVertical=this.angleVerticalMin)},r.onDirection=function(t,e,i){this.direction.x=t,this.direction.z=i,this.angleVertical=e,this.angleVertical>=this.angleVerticalMax&&(this.angleVertical=this.angleVerticalMax),this.angleVertical<=this.angleVerticalMin&&(this.angleVertical=this.angleVerticalMin)},r.stop=function(){this.rigid.getLinearVelocity(this.velocity),this.velocity.x=0,this.velocity.z=0,this.velocity.y=0,this.rigid.setLinearVelocity(this.velocity)},e}(p)).prototype,"speed",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),R=e(w.prototype,"jumpForce",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l(0,6,0)}}),P=e(w.prototype,"smoothMove",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),x=e(w.prototype,"angleVertical",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=e(w.prototype,"sensorSlop",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(w.prototype,"sensorGround",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(w.prototype,"angleVerticalMax",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),A=e(w.prototype,"angleVerticalMin",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-30}}),C=e(w.prototype,"faceMove",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),z=w))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/actor-part.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-base.ts"],(function(r){var t,e,o,a,i,n,c,l;return{setters:[function(r){t=r.applyDecoratedDescriptor,e=r.inheritsLoose,o=r.initializerDefineProperty,a=r.assertThisInitialized},function(r){i=r.cclegacy,n=r._decorator,c=r.Component},function(r){l=r.ActorBase}],execute:function(){var p,u,s,f,y,b;i._RF.push({},"f8ec2rpJ9BFXYzAmFMC0kiU","actor-part",void 0);var h=n.ccclass,d=n.property;r("ActorPart",(p=h("ActorPart"),u=d({type:l}),p((y=t((f=function(r){function t(){for(var t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=r.call.apply(r,[this].concat(i))||this,o(t,"actor",y,a(t)),o(t,"part",b,a(t)),t}return e(t,r),t}(c)).prototype,"actor",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(f.prototype,"part",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"body"}}),s=f))||s));i._RF.pop()}}}));

System.register("chunks:///_virtual/actor-physical-skin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sensor-rays-angle.ts","./util2.ts"],(function(t){var n,i,o,e,s,r,c,a;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator,e=t.RigidBody,s=t.v3,r=t.Component},function(t){c=t.SensorRaysAngle},function(t){a=t.UtilNode}],execute:function(){var l;i._RF.push({},"cc90b2jDw1Fy5MH+dH/0Us+","actor-physical-skin",void 0);var u=o.ccclass;t("ActorPhysicalSkin",u("ActorPhysicalSkin")(l=function(t){function i(){for(var n,i=arguments.length,o=new Array(i),e=0;e<i;e++)o[e]=arguments[e];return(n=t.call.apply(t,[this].concat(o))||this).sensor=void 0,n.rigid=void 0,n.velocity=s(0,0,0),n.dir=s(0,0,0),n.velocityPlane=s(0,0,0),n.inverseForce=s(0,0,0),n}n(i,t);var o=i.prototype;return o.start=function(){this.sensor=a.getChildComponent(this.node,"skin",c),this.rigid=a.getComponent(this.node,e),this.velocity=s(0,0,0)},o.lateUpdate=function(t){},i}(r))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/actor-piranha.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-base.ts","./brain.ts"],(function(n){var t,r,a,o,i;return{setters:[function(n){t=n.inheritsLoose},function(n){r=n.cclegacy,a=n._decorator},function(n){o=n.ActorBase},function(n){i=n.Brain}],execute:function(){var c;r._RF.push({},"88d40zFkp1NQbbgrHIqus64","actor-piranha",void 0);var e=a.ccclass;a.property,n("ActorPiranha",e("ActorPiranha")(c=function(n){function r(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n.call.apply(n,[this].concat(a))||this)._brain=void 0,t}t(r,n);var a=r.prototype;return a.start=function(){this.init("actor-piranha"),this._brain=new i(this._data.brain,this)},a.update=function(n){},a.noFoundPlayer=function(){},a.foundPlayer=function(){},a.nearPlayer=function(){},a.canEatPlayer=function(){},a.fleePlayer=function(){},a.feedPlayer=function(){},a.idle=function(){},a.move=function(){},a.jump=function(){},a.crossRoad=function(){},a.forcePrepareJump=function(){},r}(o))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/actor-sensor-drop-item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./sensor-rays.ts"],(function(t){var e,o,r,n,i,s,c,a,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,s=t._decorator,c=t.Component},function(t){a=t.Msg},function(t){u=t.SensorRays}],execute:function(){var p,d,h;i._RF.push({},"d3508eOQZhLSJm3wolQq1en","actor-sensor-drop-item",void 0);var l=s.ccclass,f=s.property;t("ActorSensorDropItem",l("ActorSensorDropItem")((h=e((d=function(t){function e(){for(var e,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,r(e,"num",h,n(e)),e.sensor=void 0,e.pickedNode=void 0,e.state=-1,e.curState=-1,e}o(e,t);var i=e.prototype;return i.start=function(){if(this.sensor=this.getComponent(u),null===this.sensor)throw new Error(this.node.name+" node can not find 'SensorRays' component.")},i.update=function(t){if(this.sensor.checked){this.pickedNode=this.sensor.checkedNode;this.pickedNode.name;this.curState=255}else this.curState=0,this.pickedNode=void 0;this.state!==this.curState&&(this.state=this.curState,a.emit("msg_grp_take_info",this.state))},i.getPicked=function(){if(null!=this.pickedNode)return this.pickedNode},e}(c)).prototype,"num",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),p=d))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/actor-shotgun.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-equip-base.ts","./actor-part.ts"],(function(t){var o,a,r,e,n,c,s;return{setters:[function(t){o=t.inheritsLoose},function(t){a=t.cclegacy,r=t._decorator,e=t.geometry,n=t.PhysicsSystem},function(t){c=t.ActorEquipBase},function(t){s=t.ActorPart}],execute:function(){var i;a._RF.push({},"1f1b9uZSClHnYl0aIaVtp6I","actor-shotgun",void 0);var u=r.ccclass;r.property,t("ActorShotgun",u("ActorShotgun")(i=function(t){function a(){return t.apply(this,arguments)||this}return o(a,t),a.prototype.onFire=function(){this._bagData.bulletCount--;var t=this._actor._forwardNode,o=t.worldPosition,a=t.forward,r=new e.Ray(o.x,o.y,o.z,a.x,a.y,a.z),c=this._data.damage.distance;if(n.instance.raycastClosest(r,8,c)){var i=n.instance.raycastClosestResult,u=i.collider.node.name;if(console.log("handgun fire hit "+u),u.concat("actor")){var d=i.collider.node.getComponent(s);d||console.error(" damage part can not add actor part component. "+d);var l=d.actor,p=this._data.damage[u];void 0===p&&console.error("hit part undefind "+u),l._data.hp-=p,l._data.hp<=0&&(this._actor._data.hp=1,l.do("dead"))}}else console.log("empty shoot.")},a}(c))||i);a._RF.pop()}}}));

System.register("chunks:///_virtual/actor-sound.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sound.ts","./msg.ts","./actor.ts","./data-core.ts"],(function(t){var n,e,o,r,a,i,s,c,u,h,l,p,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,i=t._decorator,s=t.randomRangeInt,c=t.Component},function(t){u=t.Sound},function(t){h=t.Msg},function(t){l=t.Actor},function(t){p=t.DataLevelInst,f=t.DataSoundInst}],execute:function(){var d,g,_;a._RF.push({},"f7156vNNEhMz6XwfCtXaUup","actor-sound",void 0);var v=i.ccclass,S=i.property;t("ActorSound",v("ActorSound")((_=n((g=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return n=t.call.apply(t,[this].concat(a))||this,o(n,"stepLength",_,r(n)),n._currentStepLength=0,n._data={},n.actor=void 0,n}e(n,t);var a=n.prototype;return a.start=function(){this.actor=this.getComponent(l),this._data=this.actor._data,h.on("msg_walk_sfx",this.walkSfx.bind(this))},a.onDestroy=function(){h.off("msg_walk_sfx",this.walkSfx.bind(this))},a.update=function(t){var n;p.stop||(this._data.is_ground&&(this._currentStepLength+=Math.abs(t*(null==(n=this.actor._actorMove.velocityLocal)?void 0:n.length()))),this._currentStepLength>=this.stepLength&&(this.walkSfx(),this._currentStepLength-=this.stepLength))},a.walkSfx=function(){var t="walk_"+this._data.walk_in_type,n=f.get(t),e=s(0,n.length);u.on(n[e])},n}(c)).prototype,"stepLength",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),d=g))||d);a._RF.pop()}}}));

System.register("chunks:///_virtual/actor-statistics.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor.ts","./msg.ts"],(function(t){var i,s,c,e,n,a,o;return{setters:[function(t){i=t.inheritsLoose},function(t){s=t.cclegacy,c=t._decorator,e=t.v3,n=t.Component},function(t){a=t.Actor},function(t){o=t.Msg}],execute:function(){var r;s._RF.push({},"6dcabE6lv9PrasfsU70ClZn","actor-statistics",void 0);var u=c.ccclass;c.property,t("ActorStatistics",u("ActorStatistics")(r=function(t){function s(){for(var i,s=arguments.length,c=new Array(s),n=0;n<s;n++)c[n]=arguments[n];return(i=t.call.apply(t,[this].concat(c))||this).actor=void 0,i._velocity=e(0,0,0),i._statisticsTime=1,i._moveDistance=0,i._runDistance=0,i}i(s,t);var c=s.prototype;return c.start=function(){this.actor=this.getComponent(a)},c.update=function(t){var i,s;null==(i=this.actor)||null==(s=i._actorMove)||s.copyLinearVelocity(this._velocity),this._velocity.y=0;var c=this._velocity.length();if(c>.1){var e,n=c*t;this._moveDistance+=n,null!=(e=this.actor)&&e._data.isRun&&(this._runDistance+=n),this._statisticsTime-=t,this._statisticsTime<=0&&(this._statisticsTime=1,o.emit("msg_stat_distance",{key:"move",distance:this._moveDistance}),this._runDistance>0&&o.emit("msg_stat_distance",{key:"run",distance:this._runDistance}),this._moveDistance=0,this._runDistance=0)}},s}(n))||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/actor-strength.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(t){var r,e,a,s,n,h;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,a=t._decorator,s=t.game,n=t.Component},function(t){h=t.Msg}],execute:function(){var i;e._RF.push({},"9fa2f7o/xJBt7Av1WM6K0AW","actor-strength",void 0);var _=a.ccclass;a.property,t("ActorStrength",_("ActorStrength")(i=function(t){function e(){for(var r,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return(r=t.call.apply(t,[this].concat(a))||this)._data={},r.recoverStrengthTime=0,r}r(e,t);var a=e.prototype;return a.start=function(){},a.calculateStrengthUseEquip=function(){var t=this._data.strength>=this._data.cost_use_equip_strength;return t&&(this._data.strength-=this._data.cost_use_equip_strength,this._data.strength=Math.max(this._data.strength,0)),t},a.calculateRunStrength=function(t){var r=this._data.is_run&&this._data.strength>=this._data.cost_run_strength;if(r){this._data.strength-=this._data.cost_run_strength*t,this._data.strength=Math.max(this._data.strength,0);var e=this._data.strength/this._data.max_strength;h.emit("fil_strength",e)}return r},a.recoverStrength=function(){if(!this._data.is_run&&(this.recoverStrengthTime+=s.deltaTime,this.recoverStrengthTime>=2)){this._data.strength+=this._data.recover_ground_strength*this.recoverStrengthTime,this._data.strength>this._data.max_strength&&(this._data.strength=this._data.max_strength);var t=this._data.strength/this._data.max_strength;h.emit("fil_strength",t),this.recoverStrengthTime=0}},e}(n))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/actor-task-go-target.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-tasks.ts"],(function(t){var i,n,o,s;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec3},function(t){s=t.TaskBase}],execute:function(){n._RF.push({},"1cc27kllUFEX45C6T+8JuXj","actor-task-go-target",void 0);t("ActorTaskGoTarget",function(t){function n(){for(var i,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(i=t.call.apply(t,[this].concat(o))||this).name="ActorActionWay",i.actor=void 0,i.index=0,i.waypoints=[],i.isStart=!1,i}i(n,t);var s=n.prototype;return s.init=function(t){this.actor=t},s.initWayPoints=function(t){this.index=0,this.waypoints=t},s.update=function(){if(this.isStart&&this.isWait&&o.distance(this.actor._data.pos,this.waypoints[this.index].pos)<.1){if(this.index>=this.waypoints.length)return void this.end();var t=this.waypoints[this.index+1].clone();t.subtract(this.actor._data.pos),this.actor.setDir(t),this.onAction(this.waypoints[this.index].action)}},s.onAction=function(t){this.actor.do(t)},n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/actor-tasks.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var s,i,n;return{setters:[function(t){s=t.inheritsLoose},function(t){i=t.cclegacy,n=t.game}],execute:function(){i._RF.push({},"1c3d5DTGRlHz5SLFikzWo7F","actor-tasks",void 0);var e=t("TaskBase",function(){function t(){this.name="",this.isStart=!1,this.isWait=!1,this.tasks=[],this.onCompleteFun=void 0}var s=t.prototype;return s.add=function(){for(var t=0;t<arguments.length;t++)this.tasks.push(t<0||arguments.length<=t?void 0:arguments[t])},s.start=function(){this.isStart=!0},s.sequence=function(t){var s=new a;return s.add(t),this.tasks.push(s),s},s.parallel=function(t){var s=new o;return s.add(t),this.tasks.push(s),s},s.update=function(){this.isStart&&(this.isWait||this.end())},s.end=function(){this.isStart=!1,this.isWait=!1,null!==this.onCompleteFun&&(this.onCompleteFun(),console.log("on complete:",this)),this.onCompleteFun=void 0,console.log("on end:",this.name,n.frameTime)},s.break=function(){for(var t=0;t<this.tasks.length;t++)this.tasks[t].break()},s.onComplete=function(t){this.onCompleteFun=t},t}()),a=t("TaskSequence",function(t){function i(){for(var s,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return(s=t.call.apply(t,[this].concat(n))||this).index=0,s}s(i,t);var n=i.prototype;return n.start=function(){t.prototype.start.call(this),this.index=0,this.tasks[this.index].start()},n.update=function(){this.isStart&&(this.isWait||(this.tasks[this.index].isStart?this.tasks[this.index].update():this.next()))},n.next=function(){this.index++,this.index>=this.tasks.length?this.end():this.tasks[this.index].start()},n.end=function(){t.prototype.end.call(this)},i}(e)),o=t("TaskParallel",function(t){function i(){return t.apply(this,arguments)||this}s(i,t);var n=i.prototype;return n.start=function(){t.prototype.start.call(this);for(var s=0;s<this.tasks.length;s++)this.tasks[s].start()},n.update=function(){if(this.isStart&&!this.isWait){for(var t=0;t<this.tasks.length;t++)this.tasks[t].update();for(var s=0;s<this.tasks.length;s++)if(this.tasks[s].isStart)return;this.end()}},n.end=function(){t.prototype.end.call(this)},i}(e));i._RF.pop()}}}));

System.register("chunks:///_virtual/actor-turn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./anim-pose.ts","./util2.ts"],(function(t){var e,r,i,n,a,o,u,l,s,c,p,h,m,f,g,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,u=t.v3,l=t.Node,s=t.CurveRange,c=t.Vec3,p=t.math,h=t.Color,m=t.game,f=t.Component},function(t){g=t.AnimPose},function(t){b=t.Gizmo}],execute:function(){var y,w,d,T,v,z,A,L,E,_,C,R,D;a._RF.push({},"b3e0441SDtMqaldL9QqCJcY","actor-turn",void 0);var P=o.ccclass,N=o.property,O=u(0,0,0),V=u(0,0,0),M=u(0,0,0),S=u(0,0,0),Z=u(0,0,0);t("ActorTurn",(y=P("ActorTurn"),w=N({type:g}),d=N(l),T=N({type:s}),y((A=e((z=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).currentAngle=0,e.startAngle=0,e.targetAngle=0,i(e,"thresholdTurn",A,n(e)),i(e,"smooth",L,n(e)),i(e,"anim",E,n(e)),i(e,"target",_,n(e)),i(e,"curveName",C,n(e)),i(e,"curveCustom",R,n(e)),i(e,"waitTime",D,n(e)),e.waitTurn=0,e.isTurn=!1,e.turnEuler=u(0,0,0),e}r(e,t);var a=e.prototype;return a.start=function(){this.anim=this.getComponent(g),this.anim.setValue("is_turn_over",!0)},a.update=function(t){this.calculateTurn()},a.calculateTurn=function(){c.copy(O,this.target.worldPosition),c.copy(V,this.node.worldPosition),c.copy(Z,this.node.forward),O.y=0,V.y=0,Z.y=0,Z.multiplyScalar(-1),c.copy(M,O),M.subtract(V),Z.subtract(V);var t=p.toDegree(c.angle(M,Z));c.cross(S,M,Z),b.drawLine(c.ZERO,O,h.GREEN),b.drawLine(c.ZERO,this.node.forward,h.YELLOW),b.drawLine(c.ZERO,S,h.BLUE),S.y>0&&(t=-t),this.onTurn(t)},a.onTurn=function(t){if(!this.isTurn)if(Math.abs(t)<=this.thresholdTurn)this.waitTurn=this.waitTime;else if(this.waitTurn>0)this.waitTurn-=m.deltaTime;else{this.isTurn=!0;var e=t/180;this.anim.setValue("is_turn",!0),this.anim.setValue("turn",e),console.log(" is turn value:",e),this.targetAngle=t,this.startAngle=this.currentAngle}},e}(f)).prototype,"thresholdTurn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),L=e(z.prototype,"smooth",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),E=e(z.prototype,"anim",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(z.prototype,"target",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(z.prototype,"curveName",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"actor_curve"}}),R=e(z.prototype,"curveCustom",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),D=e(z.prototype,"waitTime",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),v=z))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/actor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-base.ts","./local.ts","./msg.ts","./util2.ts","./actor-animation-graph.ts","./actor-bag.ts","./actor-equipment.ts","./actor-sensor-drop-item.ts","./actor-face.ts","./sound.ts","./guide.ts","./actor-move-cct.ts"],(function(t){var i,e,a,o,s,n,r,_,h,c,u,d,l,p,m,g,v,f,M,y,q,w;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass},function(t){n=t.cclegacy,r=t._decorator,_=t.v3,h=t.game},function(t){c=t.ActorBase},function(t){u=t.Local},function(t){d=t.Msg},function(t){l=t.UtilNode,p=t.UtilVec3},function(t){m=t.ActorAnimationGraph},function(t){g=t.ActorBag},function(t){v=t.ActorEquipment},function(t){f=t.ActorSensorDropItem},function(t){M=t.ActorFace},function(t){y=t.Sound},function(t){q=t.Guide},function(t){w=t.ActorMoveCCT}],execute:function(){var b,x,S,j,A,I,E;n._RF.push({},"93422/IafpK0ZdI10gHw4yr","actor",void 0);var k=r.ccclass,R=r.property;_(0,0,0),_(0,0,0),t("Actor",(b=k("Actor"),x=R({type:f}),S=R({type:M}),b((I=i((A=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return(i=t.call.apply(t,[this].concat(s))||this)._move=_(0,0,0),i._actorBag=void 0,i._actorEquipment=void 0,a(i,"actorSensorDropItem",I,o(i)),a(i,"_actorFace",E,o(i)),i._actorMove=void 0,i._viewNoWeapon=Object.create(null),i._forwardNode=void 0,i._viewRoot=void 0,i._currentEquipIndex=0,i.forward=_(0,0,0),i._fps=0,i.isReady=!1,i.bulletBox=2,i.recoverStrengthTime=0,i}e(i,t);var n=i.prototype;return n.initView=function(){t.prototype.initView.call(this),null==this._actorBag&&(this._actorBag=new g(this)),null==this._actorEquipment&&(this._actorEquipment=new v(this)),null==this._actorMove&&(this._actorMove=this.getComponent(w),this._actorMove.jumpForce.y=this._data.jump_force_y,this._actorMove.angleVerticalMax=this._data.angle_vertical_max,this._actorMove.angleVerticalMin=this._data.angle_vertical_min,this._actorMove.angle_threshold=this._data.angle_threshold),null==this._forwardNode&&(this._forwardNode=l.find(this.node,"forwardNode")),null==this._viewRoot&&(this._viewRoot=l.find(this.node,"animation_view")),null==this._animationGraph&&(this._animationGraph=this._viewRoot.getComponent(m)),q.Instance.isGuide||this.do("play")},n.onUpdate=function(){t.prototype.onUpdate.call(this),this._updates.push(this.updateAction.bind(this))},n.do=function(i){this.noAction||t.prototype.do.call(this,i)},n.updateAction=function(t){var i,e,a;(this._fps=h.frameRate,this._data.hit_recover>0||this._data.hp<=0)?(this._data.hit_recover-=t,this._actorMove.isStopMove=!0,null==(a=this._actorMove)||a.stop()):this._actorMove.isStopMove=!1;var o=this.calculateRunStrength(t);this._actorMove.speed=o?-this._data.run_speed.z:-this._data.move_speed.z,this._data.is_crouch&&(this._actorMove.speed*=this._data.crouch_speed_percent),null==(i=this._actorEquipment)||i.updateAim(this._actorMove.speedRate),this.recoverStrength(),this._forwardNode&&p.copy(this.forward,null==(e=this._forwardNode)?void 0:e.forward)},n.onJump=function(){this._data.is_crouch||this._data.is_jump||!1!==this._actorMove.isGrounded&&(this._data.strength>=this._data.cost_jump_strength&&(this._data.strength-=this._data.cost_jump_strength),this._actorMove.currentSpeed>=1?(this._actorMove.jumpForce.y=this._data.jump_force_jog_y,this.do("jump_from_jog")):(this._actorMove.jumpForce.y=this._data.jump_force_y,this.do("jump_from_stand")))},n.onWin=function(){},n.jump=function(){var t;console.log("call jump function."),null==(t=this._actorMove)||t.jump(),this._data.is_ground=!1},n.onMoveToPoint=function(t){this._actorMove.moveToPoint(t)},n.onMove=function(t){var i;null==(i=this._actorMove)||i.moveDirection(t)},n.onRotation=function(t,i){var e;null==(e=this._actorMove)||e.onRotation(t,i)},n.onDir=function(t,i,e){var a;this._dir.z=e,this._dir.x=t,this._dir.y=0,null==(a=this._actorMove)||a.onDirection(t,i,e)},n.onPause=function(){},n.onRun=function(t){this._data.is_run=t,this._actorMove.isRun=t},n.onPick=function(){var t,i=null==(t=this.actorSensorDropItem)?void 0:t.getPicked();if(void 0!==i){var e,a,o,s=i.name;if("medkit"==s){var n=this._data.max_hp-this._data.hp;return n<=0?void d.emit("msg_tips",""+u.Instance.get("full_hp")):(this._data.hp=this._data.max_hp,y.on("sfx_recovery_hp"),this.updateHP(),d.emit("msg_tips",u.Instance.get("recovery_hp")+"  "+n),void i.emit("picked"))}if(null!=(e=this._actorBag)&&e.pickedSameWeaponIncreaseClips(s))return i.emit("picked"),d.emit("msg_tips",""+u.Instance.get("picked_clip")),d.emit("msg_update_bag"),void d.emit("msg_update_equip_info");if("bullet_box"===s)return null==(o=this._actorBag)||o.pickedBulletBox(),i.emit("picked"),d.emit("msg_tips",""+u.Instance.get("picked_bullet_box")),void d.emit("msg_update_equip_info");null!=(a=this._actorBag)&&a.pickedItem(s)?(i.emit("picked"),d.emit("msg_tips",u.Instance.get(s)+" x1"),this.bulletBox++,d.emit("msg_update_bag"),d.emit("msg_update_equip_info")):d.emit("msg_tips",""+u.Instance.get("bag_is_full"))}},n.onDrop=function(){var t;null!=(t=this._actorBag)&&t.dropItem()&&d.emit("msg_update_bag")},n.onCrouch=function(){if(!this._data.is_jump){this._data.is_crouch=!this._data.is_crouch,this._data.is_crouch?this.do("on_crouch"):this.do("off_crouch");var t=this._data.is_crouch?this._data.stand_camera_height:this._data.crouch_camera_height;d.emit("msg_change_tps_camera_height",t)}},n.onAim=function(t){if(void 0===t)this._data.is_aim=!this._data.is_aim;else{if(t==this._data.is_aim)return;this._data.is_aim=t}this.do(this._data.is_aim?"on_aim":"off_aim"),this.isPlayer&&d.emit("msg_change_tps_camera_target",this._data.is_aim?1:0)},n.onFire=function(){var t,i,e;this._data.is_equip||this._data.is_reload||0!=(null==(t=this._actorEquipment.currentEquip)?void 0:t.checkUse())&&(null==(i=this._actorEquipment)||i.do("fire"),null==(e=this._actorEquipment)||e.updateAim(1,!0),this.isPlayer&&d.emit("msg_sound_position",this.node.worldPosition))},n.onAutoFire=function(t){this._data.is_auto_fire=t},n.onReload=function(){var t,i,e;this._data.is_reload||this._data.is_equip||null!=(t=this._actorEquipment)&&null!=(i=t.currentEquip)&&i.checkFullBullet()||null==(e=this._actorEquipment)||e.do("reload")},n.onEquip=function(t){var i;this._data.is_reload||this._data.is_equip||(null!=(i=this._actorEquipment)&&i.equip(t)?this._data.has_multi_res&&(this._viewNoWeapon.active=!1):this._data.has_multi_res&&(this._viewNoWeapon.active=!0))},n.onChangeEquips=function(){return!1},n.calculateStrengthUseEquip=function(){var t=this._data.strength>=this._data.cost_use_equip_strength;return t&&(this._data.strength-=this._data.cost_use_equip_strength,this._data.strength=Math.max(this._data.strength,0)),t},n.calculateRunStrength=function(t){var i=this._data.is_run&&this._data.strength>=this._data.cost_run_strength;if(i){this._data.strength-=this._data.cost_run_strength*t,this._data.strength=Math.max(this._data.strength,0);var e=this._data.strength/this._data.max_strength;this.isPlayer&&d.emit("fil_strength",e)}return i},n.recoverStrength=function(){if(!this._data.is_run&&(this.recoverStrengthTime+=h.deltaTime,this.recoverStrengthTime>=2)){this._data.strength+=this._data.recover_ground_strength*this.recoverStrengthTime,this._data.strength>this._data.max_strength&&(this._data.strength=this._data.max_strength);var t=this._data.strength/this._data.max_strength;this.isPlayer&&d.emit("fil_strength",t),this.recoverStrengthTime=0}},s(i,[{key:"noAction",get:function(){return this._data.is_dead||this._data.is_win}}]),i}(c)).prototype,"actorSensorDropItem",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(A.prototype,"_actorFace",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=A))||j));n._RF.pop()}}}));

System.register("chunks:///_virtual/aim-control.ts",["./rollupPluginModLoBabelHelpers.js","cc","./math-util.ts","./aim-ik.ts","./util2.ts"],(function(t){var i,e,o,r,n,a,s,l,h,u,g,c,m,p,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.Vec3,l=t.Quat,h=t.Node,u=t.math,g=t.game,c=t.Component},function(t){m=t.default},function(t){p=t.default},function(t){d=t.UtilVec3}],execute:function(){var f,T,w,b,v,k,_,P,y,A,W,D,R,S,z,M,x,I,V,K,N,C,F,Q,U,O,j,E,H,L,Y,B,J,q,G,X,Z;n._RF.push({},"adfa7JrNT5IuKAHSExYQS6b","aim-control",void 0);var $=a.ccclass,tt=a.property,it=new s,et=new s,ot=new l,rt=(new l,new s);t("default",(f=$("AimControl"),T=tt({type:p,tooltip:"Reference to the AimIK component."}),w=tt({tooltip:"Master weight of the IK solver."}),b=tt({type:h,tooltip:"The target to aim at. Do not use the Target transform that is assigned to AimIK. Set to null if you wish to stop aiming."}),v=tt({tooltip:"The time it takes to switch targets."}),k=tt({tooltip:"The time it takes to blend in/out of AimIK weight."}),_=tt({tooltip:"Enables smooth turning towards the target according to the parameters under this header."}),P=tt({tooltip:"Speed of turning towards the target using Vector3.RotateTowards."}),y=tt({tooltip:"Speed of moving towards the target using Vector3.RotateTowards."}),A=tt({tooltip:"Speed of slerping towards the target."}),W=tt({tooltip:"The position of the pivot that the aim target is rotated around relative to the root of the character."}),D=tt({tooltip:"Minimum distance of aiming from the first bone. Keeps the solver from failing if the target is too close."}),R=tt({tooltip:"Offset applied to the target in world space. Convenient for scripting aiming inaccuracy."}),S=tt({tooltip:"Character root will be rotate around the Y axis to keep root forward within this angle from the aiming direction."}),z=tt({tooltip:"If enabled, aligns the root forward to target direction after Max Root Angle has been exceeded."}),M=tt({tooltip:"The time of turning towards the target direction if Max Root Angle has been exceeded and Turn To Target is enabled."}),x=tt({tooltip:"If true, AimIK will consider whatever the current direction of the weapon to be the forward aiming direction and work additively on top of that. This enables you to use recoil and reloading animations seamlessly with AimIK. Adjust the Vector3 value below if the weapon is not aiming perfectly forward in the aiming animation clip."}),I=tt({tooltip:"The direction of the animated weapon aiming in character space. Tweak this value to adjust the aiming. Use Animated Aim Direction must be enabled for this property to work."}),f((N=i((K=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return i=t.call.apply(t,[this].concat(n))||this,o(i,"ik",N,r(i)),o(i,"weight",C,r(i)),o(i,"target",F,r(i)),o(i,"targetSwitchSmoothTime",Q,r(i)),o(i,"weightSmoothTime",U,r(i)),o(i,"smoothTurnTowardsTarget",O,r(i)),o(i,"maxRadiansDelta",j,r(i)),o(i,"maxMagnitudeDelta",E,r(i)),o(i,"slerpSpeed",H,r(i)),o(i,"pivotOffsetFromRoot",L,r(i)),o(i,"minDistance",Y,r(i)),o(i,"offset",B,r(i)),o(i,"maxRootAngle",J,r(i)),o(i,"turnToTarget",q,r(i)),o(i,"turnToTargetTime",G,r(i)),o(i,"useAnimatedAimDirection",X,r(i)),o(i,"animatedAimDirection",Z,r(i)),i._lastTarget=null,i._switchWeight=0,i._switchWeightV=0,i._weightV=0,i._lastPosition=new s,i._dir=new s,i._lastSmoothTowardsTarget=!1,i.turningToTarget=!1,i.turnToTargetMlp=1,i.turnToTargetMlpV=0,i._interval=void 0,i}e(i,t);var n=i.prototype;return n.start=function(){this._lastPosition=s.clone(this.ik.solver.ikPosition),s.subtract(this._dir,this.ik.solver.ikPosition,this._getPivot()),this.ik.solver.target=this.target},n.lateUpdate=function(){this.target!=this._lastTarget&&(null==this._lastTarget&&null!=this.target&&this.ik.solver.ikPositionWeight<=0?(this._lastPosition=s.clone(this.target.getWorldPosition()),s.subtract(this._dir,this.target.getWorldPosition(),this._getPivot()),s.add(this.ik.solver.ikPosition,this.target.getWorldPosition(),this.offset)):(this._lastPosition=s.clone(this.ik.solver.ikPosition),s.subtract(this._dir,this.ik.solver.ikPosition,this._getPivot())),this._switchWeight=0,this._lastTarget=this.target);var t={value:this._weightV};this.ik.solver.ikPositionWeight=m.smoothDamp(this.ik.solver.ikPositionWeight,null!=this.target?this.weight:0,t,this.weightSmoothTime),this._weightV=t.value,this.ik.solver.ikPositionWeight>=.999&&(this.ik.solver.ikPositionWeight=1),this.ik.solver.ikPositionWeight<=.001&&(this.ik.solver.ikPositionWeight=0),this.ik.solver.ikPositionWeight<=0||(t.value=this._switchWeightV,this._switchWeight=m.smoothDamp(this._switchWeight,1,t,this.targetSwitchSmoothTime),this._switchWeightV=t.value,this._switchWeight>=.99&&(this._switchWeight=1),null!=this.target&&(s.add(it,this.target.getWorldPosition(),this.offset),s.lerp(this.ik.solver.ikPosition,this._lastPosition,it,this._switchWeight)),this.smoothTurnTowardsTarget!=this._lastSmoothTowardsTarget&&(s.subtract(this._dir,this.ik.solver.ikPosition,this._getPivot()),this._lastSmoothTowardsTarget=this.smoothTurnTowardsTarget),this.smoothTurnTowardsTarget&&(s.subtract(it,this.ik.solver.ikPosition,this._getPivot()),l.fromViewUp(ot,it,new s(0,1,0)),l.toEuler(this._dir,ot),s.add(this.ik.solver.ikPosition,this._getPivot(),this._dir)),this._applyMinDistance(),this._rootRotation(),this.useAnimatedAimDirection&&(s.transformQuat(it,this.animatedAimDirection,this.ik.rootNode.getWorldRotation()),this.ik.rootNode.inverseTransformPoint(this.ik.solver.axis,it)))},n._getPivot=function(){return s.transformQuat(rt,this.pivotOffsetFromRoot,this.ik.rootNode.getWorldRotation()),s.add(rt,rt,this.ik.rootNode.getWorldPosition()),rt},n._applyMinDistance=function(){d.copy(it,this._getPivot()),s.subtract(et,this.ik.solver.ikPosition,it);var t=Math.max(et.length(),this.minDistance);et.normalize(),et.multiplyScalar(t),s.add(this.ik.solver.ikPosition,it,et)},n._rootRotation=function(){var t=this.ik.enableAim?this.maxRootAngle:0,i=u.lerp(180,t*this.turnToTargetMlp,this.ik.solver.ikPositionWeight);if(i<180){l.invert(ot,this.ik.rootNode.getWorldRotation()),s.subtract(it,this.ik.solver.ikPosition,this._getPivot()),s.transformQuat(it,it,ot);var e=u.toDegree(Math.atan2(it.x,it.z)),o=0;e>i&&(o=e-i,!this.turningToTarget&&this.turnToTarget&&this._startCoroutine(this._turnToTarget.bind(this))),e<-i&&(o=e+i,!this.turningToTarget&&this.turnToTarget&&this._startCoroutine(this._turnToTarget.bind(this))),l.fromAxisAngle(ot,s.UP,u.toRadian(o)),l.multiply(ot,ot,this.ik.rootNode.getWorldRotation())}},n._turnToTarget=function(){for(this.turningToTarget=!0;this.turnToTargetMlp>0;)return this.turnToTargetMlp-=g.deltaTime,void(this.turnToTargetMlp<.01&&(this.turnToTargetMlp=0));clearInterval(this._interval),this._interval=null,this.turnToTargetMlp=1},n._startCoroutine=function(t){this._interval&&clearInterval(this._interval),this._interval=setInterval(t)},i}(c)).prototype,"ik",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(K.prototype,"weight",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F=i(K.prototype,"target",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(K.prototype,"targetSwitchSmoothTime",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),U=i(K.prototype,"weightSmoothTime",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),O=i(K.prototype,"smoothTurnTowardsTarget",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),j=i(K.prototype,"maxRadiansDelta",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),E=i(K.prototype,"maxMagnitudeDelta",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),H=i(K.prototype,"slerpSpeed",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),L=i(K.prototype,"pivotOffsetFromRoot",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0,0)}}),Y=i(K.prototype,"minDistance",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),B=i(K.prototype,"offset",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0,0)}}),J=i(K.prototype,"maxRootAngle",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),q=i(K.prototype,"turnToTarget",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),G=i(K.prototype,"turnToTargetTime",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),X=i(K.prototype,"useAnimatedAimDirection",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Z=i(K.prototype,"animatedAimDirection",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0,1)}}),V=K))||V));n._RF.pop()}}}));

System.register("chunks:///_virtual/aim-ik.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ik-bone.ts","./ik-solver-aim.ts"],(function(e){var t,o,i,n,r,a,l,s,u,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Node,s=e.CCFloat,u=e.Component},function(e){c=e.default},function(e){p=e.default}],execute:function(){var d,h,b,f,m,y,v,g,w,N,k;r._RF.push({},"4022do3adVMFotSYiH8nDlE","aim-ik",void 0);var z=a.ccclass,A=a.property;e("default",(d=z("AimIK"),h=A({type:l,tooltip:"this node that we want to aim at ikPosition."}),b=A({type:l,tooltip:"this node that we want to aim at ikPosition."}),f=A({type:[l],tooltip:"bones node"}),m=A({type:[s],tooltip:"bones weight"}),d((g=t((v=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).solver=new p(t.node),i(t,"rootNode",g,n(t)),i(t,"aimNode",w,n(t)),i(t,"boneNodes",N,n(t)),i(t,"boneWeights",k,n(t)),t.enableAim=!1,t}o(t,e);var r=t.prototype;return r.start=function(){var e=this;this.boneNodes.forEach((function(t,o){e.solver.bones.push(new c(t,e.boneWeights[o]))})),this.solver.rootNode=this.rootNode,this.solver.aimNode=this.aimNode},r.update=function(){this.enableAim&&this.solver.update()},r.lateUpdate=function(){this.enableAim&&this.solver.lateUpdate()},t}(u)).prototype,"rootNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(v.prototype,"aimNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(v.prototype,"boneNodes",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=t(v.prototype,"boneWeights",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=v))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/anim-foot-lock.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,e,i,r,n,s,a,c,l,p;return{setters:[function(o){t=o.applyDecoratedDescriptor,e=o.inheritsLoose,i=o.initializerDefineProperty,r=o.assertThisInitialized},function(o){n=o.cclegacy,s=o._decorator,a=o.Node,c=o.v3,l=o.Vec3,p=o.Component}],execute:function(){var u,f,h,y,v,d;n._RF.push({},"003ff/3YkZPU7XBE3nBsNNT","anim-foot-lock",void 0);var m=s.ccclass,B=s.property;o("AnimFootLock",(u=m("AnimFootLock"),f=B(a),u((v=t((y=function(o){function t(){for(var t,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return t=o.call.apply(o,[this].concat(n))||this,i(t,"footBone",v,r(t)),i(t,"thresholdMove",d,r(t)),t.prePos=c(0,0,0),t}e(t,o);var n=t.prototype;return n.start=function(){},n.lateUpdate=function(o){var t=this.prePos.y-this.footBone.position.y;l.copy(this.prePos,this.footBone.position),t<this.thresholdMove&&this.footBone.setPosition(this.prePos)},t}(p)).prototype,"footBone",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=t(y.prototype,"thresholdMove",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),h=y))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/anim-graph-over.ts",["./rollupPluginModLoBabelHelpers.js","cc","./anim-graph.ts"],(function(e){var r,t,n,i,a,o,p,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,p=e.Component},function(e){c=e.AnimGraph}],execute:function(){var u,s,l,h,f,v,m,b;a._RF.push({},"caf02d12dxMSLuGFNymFdM5","anim-graph-over",void 0);var _=o.ccclass,d=o.property;e("AnimGraphOver",(u=_("AnimGraphOver"),s=d({type:c}),u((f=r((h=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,n(r,"animGraph",f,i(r)),n(r,"base_percent",v,i(r)),n(r,"over_percent",m,i(r)),n(r,"over_index",b,i(r)),r}t(r,e);var a=r.prototype;return a.start=function(){this.animGraph=this.getComponent(c)},a.updateValue=function(){this.animGraph.setValue("base_percent",this.base_percent),this.animGraph.setValue("over_percent",this.over_percent),this.animGraph.setValue("over_index",this.over_index)},a.setOver=function(e){this.over_index=e},a.update=function(e){},r}(p)).prototype,"animGraph",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=r(h.prototype,"base_percent",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=r(h.prototype,"over_percent",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=r(h.prototype,"over_index",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=h))||l));a._RF.pop()}}}));

System.register("chunks:///_virtual/anim-graph.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,r,t,i,a,o,p,l;return{setters:[function(e){n=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,p=e.animation,l=e.Component}],execute:function(){var c,u,s,h,f,m,_,v;a._RF.push({},"f4389NJ+/BKjpaU1no9COda","anim-graph",void 0);var b=o.ccclass,d=o.property;e("AnimGraph",(c=b("AnimGraph"),u=d({type:p.AnimationController}),c((f=n((h=function(e){function n(){for(var n,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,t(n,"animGraph",f,i(n)),t(n,"base_percent",m,i(n)),t(n,"over_percent",_,i(n)),t(n,"over_index",v,i(n)),n}r(n,e);var a=n.prototype;return a.__preload=function(){this.getComponent(p.AnimationController)},a.setValue=function(e,n){this.animGraph.setValue_experimental(e,n)},a.setOverIndex=function(e){this.over_index=e,this.animGraph.setValue("over_index",this.over_index)},a.setBlendBaseAndOver=function(e){this.animGraph.setValue("base_percent",this.base_percent),this.animGraph.setValue("over_percent",this.over_percent)},a.update=function(e){},n}(l)).prototype,"animGraph",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=n(h.prototype,"base_percent",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=n(h.prototype,"over_percent",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=n(h.prototype,"over_index",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=h))||s));a._RF.pop()}}}));

System.register("chunks:///_virtual/anim-pelvis.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-foot-ik.ts","./util2.ts","./actor-move-cct.ts"],(function(t){var o,e,i,r,n,a,l,s,c,u,p,h,m,f,y,b,d,v,P;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,l=t.animation,s=t.Node,c=t.CCFloat,u=t.v3,p=t.Vec3,h=t.Color,m=t.PhysicsSystem,f=t.Component},function(t){y=t.ActorFootIK},function(t){b=t.Gizmo,d=t.UtilTmp,v=t.Const},function(t){P=t.ActorMoveCCT}],execute:function(){var g,w,_,k,z,C,D,I,R,A,K,F,M,V,G,L,N,H,x,S;n._RF.push({},"87f8f99IKRBVpgXPcVyNwHS","anim-pelvis",void 0);var T=a.ccclass,U=a.property;a.executionOrder,t("AnimPelvis",(g=T("AnimPelvis"),w=U({type:y}),_=U({type:y}),k=U({type:l.AnimationController}),z=U(s),C=U(s),D=U({type:P}),I=U([c]),g((K=o((A=function(t){function o(){for(var o,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return o=t.call.apply(t,[this].concat(n))||this,i(o,"footIKL",K,r(o)),i(o,"footIKR",F,r(o)),i(o,"anim",M,r(o)),i(o,"root",V,r(o)),i(o,"pelvisNode",G,r(o)),i(o,"move",L,r(o)),i(o,"checkDistance",N,r(o)),i(o,"thresholdMove",H,r(o)),i(o,"heelHeight",x,r(o)),i(o,"masks",S,r(o)),o.rootPos=u(0,0,0),o.finalY=0,o._mask=0,o.footToGroundDistance=0,o.currentPos=u(0,0,0),o}e(o,t);var n=o.prototype;return n.__preload=function(){for(var t=0;t<this.masks.length;t++)this._mask=this._mask|1<<this.masks[t];p.copy(this.rootPos,this.root.worldPosition),this.anim.setValue_experimental("root_position",this.rootPos)},n.lateUpdate=function(t){if(b.drawSphere(this.pelvisNode.worldPosition,.1,h.RED),p.copy(this.rootPos,this.root.worldPosition),this.move.isGrounded){var o=this.calculateFootGround(this.footIKL.node);this.rootPos.y=Math.min(o,this.rootPos.y);var e=this.calculateFootGround(this.footIKR.node);this.rootPos.y=Math.min(e,this.rootPos.y)}this.anim.setValue_experimental("root_position",this.rootPos)},n.calculateFootGround=function(t){var o=d.Ray;return p.copy(o.o,t.worldPosition),p.copy(o.d,v.V3Down),o.o.y+=.5,m.instance.raycastClosest(o,this._mask,this.checkDistance,!1)?m.instance.raycastClosestResult.hitPoint.y+this.heelHeight:Number.MAX_VALUE},o}(f)).prototype,"footIKL",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=o(A.prototype,"footIKR",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=o(A.prototype,"anim",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=o(A.prototype,"root",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=o(A.prototype,"pelvisNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=o(A.prototype,"move",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=o(A.prototype,"checkDistance",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),H=o(A.prototype,"thresholdMove",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),x=o(A.prototype,"heelHeight",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),S=o(A.prototype,"masks",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=A))||R));n._RF.pop()}}}));

System.register("chunks:///_virtual/anim-player-move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-move-cct.ts","./actor.ts","./actor-animation-graph.ts"],(function(t){var o,e,a,n,i,r,l,c,s,p,u,h,v,m;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,l=t.v3,c=t.Node,s=t.Vec3,p=t.math,u=t.Component},function(t){h=t.ActorMoveCCT},function(t){v=t.Actor},function(t){m=t.ActorAnimationGraph}],execute:function(){var y,_,d,f,g;i._RF.push({},"0b60aF0ETxGUpP83SC3PToZ","anim-player-move",void 0);var A=r.ccclass,M=r.property,R=l(0,0,0);t("AnimPlayerMove",(y=A("AnimPlayerMove"),_=M(c),y((g=o((f=function(t){function o(){for(var o,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return o=t.call.apply(t,[this].concat(i))||this,a(o,"playerRoot",g,n(o)),o._actorMove=void 0,o.actor=void 0,o._animationGraph=void 0,o}e(o,t);var i=o.prototype;return i.start=function(){this.actor=this.playerRoot.getComponent(v),this._actorMove=this.playerRoot.getComponent(h),this._animationGraph=this.getComponent(m)},i.lateUpdate=function(t){var o,e,a,n;null==(o=this._actorMove)||o.copyLinearVelocity(R);var i=R.length(),r=this.node.eulerAngles.y;s.rotateY(R,R,s.ZERO,p.toRadian(-r));var l=R.x,c=R.z,u=i*this.actor._data.linear_velocity_animation_rate;this._actorMove.angle;null==(e=this._animationGraph)||e.setValue("num_velocity_x",l),null==(a=this._animationGraph)||a.setValue("num_velocity_y",-c),null==(n=this._animationGraph)||n.setValue("num_move_speed",u)},o}(u)).prototype,"playerRoot",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=f))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/anim-pose-event.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./actor-animation-graph.ts"],(function(t){var n,i,e,o,a,r,p,s,u;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,p=t.Component},function(t){s=t.Msg},function(t){u=t.ActorAnimationGraph}],execute:function(){var c,m,f,l,h;a._RF.push({},"8206dNYCuNJ9J6WqKEhUFaw","anim-pose-event",void 0);var _=r.ccclass,y=r.property;t("AnimPoseEvent",(c=_("AnimPoseEvent"),m=y({type:u}),c((h=n((l=function(t){function n(){for(var n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,e(n,"animGraph",h,o(n)),n}i(n,t);var a=n.prototype;return a.start=function(){this.animGraph=this.getComponent(u)},a.onEquipBackStart=function(){s.emit("msg_player_ik_off")},a.onEquipEnd=function(){s.emit("msg_player_ik_on")},a.onJumpEnd=function(){},a.onJump=function(){this.animGraph.setValue("ratio_ik",0),this.animGraph.setValue("ratio_weapon",0),s.emit("msg_player_ik_off")},a.offJump=function(){this.animGraph.setValue("ratio_ik",1),this.animGraph.setValue("ratio_weapon",1),s.emit("msg_player_ik_on")},a.onFire=function(){this.animGraph.setValue("ratio_weapon",1)},a.offFire=function(){this.animGraph.setValue("ratio_weapon",0)},a.onShoot=function(){s.emit("msg_player_ik_on")},a.offShoot=function(){s.emit("msg_player_ik_off")},n}(p)).prototype,"animGraph",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=l))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/anim-pose-move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-move-cct.ts","./actor-animation-graph.ts"],(function(e){var t,i,a,o,r,n,s,c,h,l,p,u,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,n=e._decorator,s=e.v2,c=e.Vec2,h=e.math,l=e.game,p=e.Component},function(e){u=e.ActorMoveCCT},function(e){m=e.ActorAnimationGraph}],execute:function(){var v,d,y,M,f,D,G,_;r._RF.push({},"6d82azchDRGB4WUUty9sT5l","anim-pose-move",void 0);var b=n.ccclass,g=n.property;e("AnimPoseMove",(v=b("AnimPoseMove"),d=g({type:m}),y=g({type:u}),v((D=t((f=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return t=e.call.apply(e,[this].concat(r))||this,a(t,"animGraph",D,o(t)),a(t,"smooth",G,o(t)),t.direction=s(0,0),t.readDirection=s(0,0),t.leanDirection=s(0,0),a(t,"actorMove",_,o(t)),t.leanRatio=0,t.acceleration_f=0,t}i(t,e);var r=t.prototype;return r.start=function(){this.animGraph=this.getComponent(m)},r.lateUpdate=function(e){this.direction.x=this.actorMove.velocityLocal.z,this.direction.y=this.actorMove.velocityLocal.x;var t=this.readDirection.length()>.01;this.animGraph.setValue("is_move",t);var i=Math.abs(this.actorMove.currentSpeed/this.actorMove.maxSpeed);this.animGraph.setValue("walk_run",i),c.lerp(this.readDirection,this.readDirection,this.direction,this.smooth*e);var a=-this.readDirection.y/this.actorMove.speed,o=this.readDirection.x/this.actorMove.speed;this.animGraph.setValue("move_x",a),this.animGraph.setValue("move_y",o),c.lerp(this.leanDirection,this.leanDirection,this.direction,10*e);var r=-this.leanDirection.x/this.actorMove.maxSpeed,n=this.leanDirection.y/this.actorMove.maxSpeed;this.animGraph.setValue("lean_x",r),this.animGraph.setValue("lean_y",n),this.leanRatio=h.lerp(this.leanRatio,1-this.actorMove.speedRate,l.deltaTime),this.animGraph.setValue("lean_ratio",this.leanRatio);var s=(this.actorMove.isRun,1),p=this.actorMove.speedRate*s;this.animGraph.setValue("speed_ratio",p);var u=this.actorMove.speedRate;this.animGraph.setValue("stride",u)},t}(p)).prototype,"animGraph",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(f.prototype,"smooth",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),_=t(f.prototype,"actorMove",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=f))||M));r._RF.pop()}}}));

System.register("chunks:///_virtual/anim-pose.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,r,a,o,s,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.animation,l=e.Component}],execute:function(){var p,c,u,h,m;a._RF.push({},"64838hN7qhGTZFsurh6q17E","anim-pose",void 0);var f=o.ccclass,y=o.property;e("AnimPose",(p=f("AnimPose"),c=y({type:s.AnimationController}),p((m=t((h=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"animGraph",m,r(t)),t}n(t,e);var a=t.prototype;return a.__preload=function(){this.animGraph=this.getComponent(s.AnimationController)},a.setValue=function(e,t){this.animGraph.setValue_experimental(e,t)},a.setLayer=function(e,t){this.animGraph.setLayerWeight(e,t)},t}(l)).prototype,"animGraph",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=h))||u));a._RF.pop()}}}));

System.register("chunks:///_virtual/animation-to-oribit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./orbit-camera.ts"],(function(t){var i,o,n,e,r,a,u,c,s,h,l,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,u=t.Quat,c=t.Animation,s=t.input,h=t.Input,l=t.Component},function(t){b=t.default}],execute:function(){var p,d,f,m,T,v,y;r._RF.push({},"9c9cbHvoP9DX5EFtWceqQFo","animation-to-oribit",void 0);var D=a.ccclass,_=a.property,I=new u;t("animation_to_oribit",(p=D("animation_to_oribit"),d=_(c),f=_(b),p((v=i((T=function(t){function i(){for(var i,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,n(i,"ani",v,e(i)),n(i,"orbit",y,e(i)),i.touched=!1,i.timeoutID=void 0,i}o(i,t);var r=i.prototype;return r.start=function(){s.on(h.EventType.TOUCH_START,this.onTouchStart,this),s.on(h.EventType.TOUCH_END,this.onTouchEnd,this)},r.onTouchStart=function(){this.orbit&&this.ani&&(this.touched=!0,this.timeoutID&&clearTimeout(this.timeoutID),this.ani.enabled=!1,this.orbit.enabled=!0)},r.onTouchEnd=function(){var t=this;this.orbit&&this.ani&&(this.orbit.enabled=!1,this.timeoutID=setTimeout((function(){t.touched=!1,t.ani.enabled=!0,t.timeoutID=void 0}),1e3))},r.update=function(t){this.orbit&&!this.touched&&(u.slerp(I,this.orbit.node.rotation,u.IDENTITY,7*t),this.orbit.node.rotation=I)},i}(l)).prototype,"ani",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=i(T.prototype,"orbit",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=T))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/animationgraph-move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(t){var e,i,n,r,o,a,s,c;return{setters:[function(t){e=t.inheritsLoose,i=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.animation},function(t){c=t.Msg}],execute:function(){var g,u,p,l;o._RF.push({},"4cc78tsgRFOp6z9sZ05BwP4","animationgraph-move",void 0);var h=a.ccclass,m=a.property;t("AnimationGraphMove",h("AnimationGraphMove")((u=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"time",p,r(e)),n(e,"msg",l,r(e)),e._triggered=!1,e}e(i,t);var o=i.prototype;return o.onMotionStateEnter=function(t,e){},o.onMotionStateExit=function(t,e){this._triggered=!1},o.onMotionStateUpdate=function(t,e){e.progress>this.time&&!this._triggered?(this._triggered=!0,c.emit(this.msg)):e.progress<this.time&&this._triggered&&(this._triggered=!1)},o.onStateMachineEnter=function(t){},o.onStateMachineExit=function(t){},i}(s.StateMachineComponent),p=i(u.prototype,"time",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),l=i(u.prototype,"msg",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"msg_walk_sfx"}}),g=u))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/astar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts","./data-structure.ts"],(function(t){var s,e,o,i,a;return{setters:[function(t){s=t.inheritsLoose},function(t){e=t.cclegacy,o=t.instantiate},function(t){i=t.Singleton},function(t){a=t.Stack}],execute:function(){e._RF.push({},"9adba4beKpHbrekEG1z+Xiv","astar",void 0);t("AStar",function(t){function e(){for(var s,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(s=t.call.apply(t,[this].concat(o))||this).map=void 0,s.start_pos=void 0,s.end_pos=void 0,s.closeTable=[],s.openTable=void 0,s.max_x=0,s.max_z=0,s.dir=[[-1,1],[0,1],[1,0],[-1,0],[1,0],[-1,-1],[0,-1],[1,-1]],s._tempNode=void 0,s._stop=!0,s}s(e,t);var i=e.prototype;return i.initMap=function(t){this.map=[],this.max_x=t.length,this.max_z=t[0].length;for(var s=0;s<this.max_x;s++){for(var e=[],o=0;o<this.max_z;o++){var i={f:-1,state:t[s][o]};e.push(i)}this.map.push(e)}console.log(this.map),this.openTable=new a(20),this.closeTable=this.createTable(this.max_x,this.max_z,0),this.copyTable(this.closeTable,this.map)},i.setTestNode=function(t){this._tempNode=t},i.testNode=function(t){var s=o(this._tempNode);s.parent=this._tempNode.parent,s.setPosition(t[0],0,t[1])},i.find=function(t,s){console.log("start:",t,"end:",s),this._stop=!1,this.start_pos=t,this.end_pos=s,this.openTable.push([t.x,t.z]),this.checkCurrent(t)},i.update=function(){if(!this._stop)if(this.openTable.size()>0){var t=this.openTable.pop();this.testNode(t),this.checkCurrent({x:t[0],z:t[1]})}else console.log("can not find target pos.")},i.checkCurrent=function(t){if(t.x===this.end_pos.x&&t.z===this.end_pos.z)return console.log("find end pos."),void(this._stop=!0);this.map[t.x][t.z].state=0,this.openTable.pop(),this.closeTable[t.x][t.z]=1;for(var s=0;s<this.dir.length;s++){var e=t.x+this.dir[s][0],o=t.z+this.dir[s][1];if(!(e<0||o<0||e>=this.max_x||o>=this.max_z)&&1!==this.closeTable[e][o]){var i=this.f_cost({x:e,z:o},this.end_pos);this.map[e][o].cost=i,this.openTable.push([e,o])}}},i.f_cost=function(t,s){return Math.abs(t.x-s.x)+Math.abs(t.z-s.z)},i.createTable=function(t,s,e){for(var o=t,i=s,a=[],n=0;n<o;n++){for(var r=[],h=0;h<i;h++)r.push(e);a.push(r)}return a},i.copyTable=function(t,s){for(var e=this.max_x,o=this.max_z,i=0;i<e;i++)for(var a=0;a<o;a++)t[i][a]=s[i][a]},i.clearTable=function(t){for(var s=t.length,e=t[0].length,o=0;o<s;o++)for(var i=0;i<e;i++)t[o][i]=0},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/async.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,r;return{setters:[function(n){e=n.asyncToGenerator,t=n.regeneratorRuntime},function(n){r=n.cclegacy}],execute:function(){function u(){return(u=e(t().mark((function n(r){var u;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=new Promise((function(n){setTimeout((function(){n(null)}),1)})),r.forEach((function(n){u=u.then(e(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:case"end":return e.stop()}}),e)}))))})),n.abrupt("return",u);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}n("sequence",(function(n){return u.apply(this,arguments)})),r._RF.push({},"02116Lx93pAP67iiMLsz37h","async",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/bind.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./singleton.ts","./local.ts","./GameQuality.ts","./sound.ts","./res-cache.ts","./level.ts","./save.ts","./game-set.ts","./data-core.ts"],(function(t){var n,e,i,a,s,c,u,o,r,_,h,p;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.Msg},function(t){a=t.Singleton},function(t){s=t.Local},function(t){c=t.GameQuality},function(t){u=t.Sound},function(t){o=t.ResCache},function(t){r=t.Level},function(t){_=t.Save},function(t){h=t.GameSet},function(t){p=t.DataGameInst}],execute:function(){e._RF.push({},"87dbck8mEZM4qc/S2vmPPG8","bind",void 0);t("Bind",function(t){function e(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return(n=t.call.apply(t,[this].concat(i))||this)._map={},n.totalEvents=0,n}n(e,t);var a=e.prototype;return a.init=function(){i.on("msg_count_events",this.countEvents.bind(this)),this._map.txt_upgrade_life_detail=function(){return r.Instance.getUpgradeCardInfo(0)},this._map.txt_upgrade_attack_detail=function(){return r.Instance.getUpgradeCardInfo(1)},this._map.txt_upgrade_defense_detail=function(){return r.Instance.getUpgradeCardInfo(2)},this._map.btn_select_upgrade_0=function(){r.Instance.upgradePlayerAttributes(0),i.emit("back")},this._map.btn_select_upgrade_1=function(){r.Instance.upgradePlayerAttributes(1),i.emit("back")},this._map.btn_select_upgrade_2=function(){r.Instance.upgradePlayerAttributes(2),i.emit("back")},this._map.btn_change_0=function(){r.Instance._player.onEquip(0),i.emit("back")},this._map.btn_change_1=function(){r.Instance._player.onEquip(1),i.emit("back")},this._map.btn_change_2=function(){r.Instance._player.onEquip(2),i.emit("back")},this._map.btn_change_3=function(){r.Instance._player.onEquip(3),i.emit("back")},this._map.txt_language=function(){return s.Instance.getShowName()},this._map.txt_game_quality=function(){return c.Instance.getShowName()},this._map.sli_sound=function(){return u.volumeSound},this._map.sli_music=function(){return u.volumeMusic},this._map.sli_sensitivity=function(){return h.Instance.sensitivity},this._map.sli_sensitivity_a=function(){return h.Instance.sensitivity_a},this._map.spr_score=function(){var t="txt_score_"+r.Instance.getLevelScore();return o.Instance.getSprite(t)},this._map.txt_killed=function(){return _.Instance.getStatistics("killedTimes")},this._map.txt_hit_head=function(){return _.Instance.getStatistics("hit_headTimes")},this._map.txt_hsp=function(){return(100*_.Instance.getStatistics("hit_rate")).toFixed(2)+" %"},this._map.txt_be_hit=function(){return _.Instance.getStatistics("be_hit_times")},this._map.txt_dodge=function(){return(100*_.Instance.getStatistics("dodge_rate")).toFixed(2)+" %"},this._map.txt_level_score=function(){return""+_.Instance.getStatistics("level_score")},this._map.txt_day_num=function(){return""+_.Instance.get("day")},this._map.txt_show_version=function(){return""+p._data.show_version}},a.initData=function(t){var n=this;this.init(),t.forEach((function(t){var e=t.name,a=t.event,s=t.data;t.data||(s=void 0),n._map[e]=function(){i.emit(a,s)}}))},a.on=function(t){var n=this._map[t];n?(n(),this.countEvents()):console.warn("Can not find key:"+t)},a.get=function(t){return this._map[t]()},a.hasBind=function(t){return void 0!==this._map[t]},a.countEvents=function(){this.totalEvents++},a.checkRefresh=function(){this.totalEvents>0&&(i.emit("refresh_ui"),this.totalEvents=0)},a.update=function(t){this.checkRefresh()},e}(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/blocklistedGPUS.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"4a5f6WZ0Z5Fs549cGVFe73y","blocklistedGPUS",void 0);e("BLOCKLISTED_GPUS",["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"]);o._RF.pop()}}}));

System.register("chunks:///_virtual/bloom-pass.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bloom.ts","./href-setting.ts"],(function(e){var t,s,o,r,a,n,l,i,p,u;return{setters:[function(e){t=e.inheritsLoose,s=e.createClass},function(e){o=e.cclegacy,r=e._decorator,a=e.rendering,n=e.gfx,l=e.Vec4,i=e.postProcess},function(e){p=e.BloomSetting},function(e){u=e.HrefSetting}],execute:function(){o._RF.push({},"4261a3Jpm1LrYG9hRgCTgoQ","bloom-pass",void 0);r.type,r.property,r.ccclass,a.RasterView,a.AttachmentType,a.AccessType,a.ResourceResidency,a.LightInfo,a.SceneFlags,a.QueueHint,a.ComputeView;var m=n.Format,P=(n.LoadOp,n.StoreOp,n.ClearFlagBit,n.Color,n.Viewport,e("MAX_BLOOM_FILTER_PASS_NUM",6)),c=e("BLOOM_PREFILTERPASS_INDEX",0),d=e("BLOOM_DOWNSAMPLEPASS_INDEX",1),S=e("BLOOM_UPSAMPLEPASS_INDEX",d+P),b=e("BLOOM_COMBINEPASS_INDEX",S+P);new l,new n.Sampler(new n.SamplerInfo(n.Filter.LINEAR,n.Filter.LINEAR,void 0,n.Address.CLAMP,n.Address.CLAMP),0),e("BloomPass",function(e){function o(){for(var t,s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).name="BloomPass",t.outputNames=["BloomPassCombineColor"],t}t(o,e);var r=o.prototype;return r.checkEnable=function(t){return e.prototype.checkEnable.call(this,t)&&!!u.bloom},r.render=function(e,t){var s=this.slotName(e,0),o=this.context,r=o.passViewport;o.clearBlack();var a=globalThis.pipelineAssets.getMaterial("bloom");o.material=a;var n=this.setting,i=m.RGBA16F,p="dsBloomPassPrefilterColor"+s,u=.5;a.setProperty("texSize",new l(0,0,n.threshold,0),c);var P=this.lastPass.slotName(e,0);o.updatePassViewPort(u).addRenderPass("bloom-prefilter","CameraBloomPrefilterPass"+s).setPassInput(P,"outputResultMap").addRasterView(p,i).blitScreen(c).version();for(var w=p,R=n.iterations,f=0,g=0;g<R;++g){u/=2;for(var h=0;h<2;h++){o.updatePassViewPort(u);var B=new l,v="dsBloomPassDownSampleColor"+s+f,A=r.width;h?B.set(0,n.blurRadius/A):B.set(n.blurRadius/A,0),a.setProperty("texSize",B,d+f);var C="bloom-downsample"+f;o.addRenderPass(C,"CameraBloomDownSamplePass"+s+f).setPassInput(w,"bloomTexture").addRasterView(v,i).blitScreen(d+f).version(),w=v,f++}}for(var L=R-2;L>=0;--L){a.setProperty("texSize",new l(1,1,0,0),S+L);var y="dsBloomPassUpSampleColor"+s+L;o.updatePassViewPort(u).addRenderPass("bloom-upsample"+L,"CameraBloomUpSamplePass"+s+L).setPassInput(w,"outputResultMap").setPassInput("dsBloomPassDownSampleColor"+s+(2*L+1),"bloomTexture").addRasterView(y,i).blitScreen(S+L).version(),w=y}a.setProperty("texSize",new l(n.intensity,1,0,0),b),o.updatePassViewPort().addRenderPass("bloom-combine","CameraBloomCombinePass"+s).setPassInput(P,"outputResultMap").setPassInput(w,"bloomTexture").addRasterView(s,i).blitScreen(b).version()},s(o,[{key:"setting",get:function(){return this.getSetting(p)}}]),o}(i.SettingPass));o._RF.pop()}}}));

System.register("chunks:///_virtual/bloom.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,o,a,l;return{setters:[function(e){t=e.inheritsLoose,i=e.applyDecoratedDescriptor,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.postProcess}],execute:function(){var c,s,u,p,b,f,y,h;o._RF.push({},"99a2aAEXIlGU6gxUaHh/fuz","bloom",void 0);var d=a.ccclass,g=a.property,m=a.executeInEditMode;e("BloomSetting",d("BloomSetting")(c=m(((h=function(e){function i(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"enable",u,r(t)),n(t,"threshold",p,r(t)),n(t,"iterations",b,r(t)),n(t,"intensity",f,r(t)),n(t,"blurRadius",y,r(t)),t}t(i,e);var o=i.prototype;return o.onEnable=function(){e.prototype.onEnable.call(this),i.instance=this},o.onDisable=function(){e.prototype.onDisable.call(this),i.instance===this&&(i.instance=void 0)},i}(l.PostProcessSetting)).instance=void 0,u=i((s=h).prototype,"enable",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=i(s.prototype,"threshold",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=i(s.prototype,"iterations",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),f=i(s.prototype,"intensity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),y=i(s.prototype,"blurRadius",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),c=s))||c)||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/bone-render.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(e){var o,n,i,t,r,l,s,a,u,c,b;return{setters:[function(e){o=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,s=e.Node,a=e.Color,u=e.v3,c=e.Component},function(e){b=e.Gizmo}],execute:function(){var h,p,d,f,z,w,g,y,R,m;r._RF.push({},"acab9OuaeNLMrbOXoWYmjoP","bone-render",void 0);var v=l.ccclass,B=l.property,C=l.executeInEditMode;e("BoneRender",(h=v("BoneRender"),p=B(s),d=B(a),h(f=C((w=o((z=function(e){function o(){for(var o,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return o=e.call.apply(e,[this].concat(r))||this,i(o,"showDebug",w,t(o)),i(o,"showRunTime",g,t(o)),i(o,"boneRoot",y,t(o)),i(o,"boneSize",R,t(o)),i(o,"boneColor",m,t(o)),o.size=u(.1,.1,.1),o}n(o,e);var r=o.prototype;return r.start=function(){},r.onEnable=function(){null==this.boneRoot&&(this.boneRoot=this.node.children[0])},r.renderBone=function(e){b.drawBox(e.worldPosition,this.size,this.boneColor);var o=e.children;if(!(o.length<=0))for(var n=0;n<o.length;n++){var i=o[n],t=i.worldPosition;b.drawLine(e.worldPosition,t,this.boneColor),this.renderBone(i)}},r.lateUpdate=function(e){this.showRunTime&&this.showDebug&&this.boneRoot&&(this.size.x=this.boneSize,this.size.y=this.boneSize,this.size.z=this.boneSize,this.renderBone(this.boneRoot))},o}(c)).prototype,"showDebug",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=o(z.prototype,"showRunTime",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=o(z.prototype,"boneRoot",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=o(z.prototype,"boneSize",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.01}}),m=o(z.prototype,"boneColor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a(255,0,0,255)}}),f=z))||f)||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/brain.ts",["cc","./res-cache.ts"],(function(n){var o,t,e,c;return{setters:[function(n){o=n.cclegacy,t=n._decorator,e=n.random},function(n){c=n.ResCache}],execute:function(){o._RF.push({},"e413cJPsaZPVKZ581gpLPn+","brain",void 0);t.ccclass,t.property,n("Brain",function(){function n(n,o){this.data={},this.actor=void 0,this.data=c.Instance.getJson(n).json,this.actor=o}var o=n.prototype;return o.update=function(n){},o.runNode=function(n){void 0===n.children?this.action(n.action):(console.log("run node:",n.node),this[n.node](n.children))},o.random=function(n){for(var o=e(),t=0;t<n.length;t++){var c=n[t];if(c.value<o)return void this.runNode(c)}console.error("bad config data:",n)},o.condition=function(n){console.log("condition:",n);for(var o=0;o<n.length;o++){var t=n[o];if("canEatPlayer"===t.value)return void this.runNode(t)}console.log("bad logic design:",n)},o.sequence=function(n){console.log("sequence:",n);for(var o=0;o<n.length;o++){var t=n[o];this.runNode(t)}},o.action=function(n){console.log("do action:",n),this.actor.do(n)},n}());o._RF.pop()}}}));

System.register("chunks:///_virtual/buff.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts","./res-cache.ts"],(function(t){var n,e,o,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){o=t.Singleton},function(t){i=t.ResCache}],execute:function(){e._RF.push({},"052977TCF5GD7IVf1w0O4Bf","buff",void 0);t("Buff",function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this)._data={},n}n(e,t);var o=e.prototype;return o.init=function(){this._data=i.Instance.getJson("data-buff").json},o.get=function(t){if(this._data[t])return this._data[t];console.error("can not find buff:",t)},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/camera-auto-bind-occlusion.ts",["./rollupPluginModLoBabelHelpers.js","cc","./static-occlusion-culling.ts"],(function(n){var o,c,t,i,u,l;return{setters:[function(n){o=n.inheritsLoose},function(n){c=n.cclegacy,t=n._decorator,i=n.find,u=n.Component},function(n){l=n.StaticOcclusionCulling}],execute:function(){var e;c._RF.push({},"37314AQD1xLKIBSq2DoJyqP","camera-auto-bind-occlusion",void 0);var r=t.ccclass;t.property,n("CameraAutoBindOcclusion",r("CameraAutoBindOcclusion")(e=function(n){function c(){return n.apply(this,arguments)||this}return o(c,n),c.prototype.onEnable=function(){var n=i("static-occlusion-culling");if(null!=n){var o=n.getComponent(l);if(null===o)throw new Error("culling node not find 'StaticOcclusionCulling'");o.target=this.node}else console.warn("Can not find static-occlusion-culling.")},c}(u))||e);c._RF.pop()}}}));

System.register("chunks:///_virtual/camera-controller-zoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(e){var t,i,a,n,r,o,s,c,l,u,h,p,d,m,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,s=e.Vec2,c=e.Node,l=e.input,u=e.Input,h=e.math,p=e.Vec3,d=e.Component,m=e.v2},function(e){f=e.UtilTmp}],execute:function(){var y,b,g,v,z,D,w,S,C;r._RF.push({},"ab0d1sTdi5KGb0Cl597FE0Q","camera-controller-zoom",void 0);var N=o.ccclass,R=o.property;e("CameraControllerZoom",(y=N("CameraControllerZoom"),b=R({type:s}),g=R(c),y((D=t((z=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"distanceRange",D,n(t)),a(t,"cameraNode",w,n(t)),a(t,"wheelSpeed",S,n(t)),a(t,"smooth",C,n(t)),t.distance=0,t.realDistance=0,t}i(t,e);var r=t.prototype;return r.start=function(){l.on(u.EventType.MOUSE_WHEEL,this.onMouseWheel,this),this.distance=this.cameraNode.position.length(),this.realDistance=this.distance},r.onMouseWheel=function(e){var t=e.getScrollY();this.distance-=t/this.wheelSpeed,this.distance=h.clamp(this.distance,this.distanceRange.x,this.distanceRange.y)},r.update=function(e){if(Math.abs(this.distance-this.realDistance)>.01){this.realDistance=h.lerp(this.realDistance,this.distance,e*this.smooth);var t=f.V3_0;p.copy(t,this.cameraNode.position),t.normalize().multiplyScalar(this.realDistance),this.cameraNode.setPosition(t)}},t}(d)).prototype,"distanceRange",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m(1,20)}}),w=t(z.prototype,"cameraNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(z.prototype,"wheelSpeed",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),C=t(z.prototype,"smooth",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),v=z))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/camera-controller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./g-math.ts","./util2.ts","./smooth-local-z.ts"],(function(t){var e,o,i,r,s,n,a,l,c,f,h,u,_,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,n=t._decorator,a=t.Vec3,l=t.v3,c=t.find,f=t.Component},function(t){h=t.Msg},function(t){u=t.GVec3},function(t){_=t.UtilVec3},function(t){p=t.SmoothLocalZ}],execute:function(){var m,g,d,y,b;s._RF.push({},"ea461kUoi5AnrnPwoN0wJvS","camera-controller",void 0);var w=n.ccclass,v=n.property;t("CameraController",w("CameraController")((d=e((g=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),n=0;n<o;n++)s[n]=arguments[n];return e=t.call.apply(t,[this].concat(s))||this,i(e,"smooth",d,r(e)),i(e,"maxOffsetZ",y,r(e)),i(e,"target",b,r(e)),e._velocity=new a(0,0,0),e._followTarget=Object.create(null),e._offsetZ=0,e._offsetZScale=1,e._target=l(0,0,0),e._dir=l(0,0,0),e._pos=l(0,0,0),e.controlZ=Object.create(null),e}o(e,t);var s=e.prototype;return s.start=function(){this._followTarget=c(this.target),this._target=this._followTarget.position.clone(),_.copy(this._pos,this._target),this.node.setWorldPosition(this._target),this.controlZ=this.node.children[0].children[0].getComponent(p),h.bind("set_camera_len",this.setLen,this),h.bind("set_offset_scale",this.setOffsetScale,this),console.log("camera controller:",this.node.worldPosition)},s.onDestroy=function(){h.off("set_camera_len",this.setLen),h.off("set_offset_scale",this.setOffsetScale)},s.setLen=function(t){this.controlZ.setOffset(t)},s.setOffsetScale=function(t){},s.lateUpdate=function(t){this.smoothDamp(t)},s.smoothDamp=function(t){_.copy(this._target,this._followTarget.position),_.copy(this._dir,this._followTarget.forward),this._offsetZScale>0&&this._target.add(this._dir.multiplyScalar(this._offsetZ*this._offsetZScale)),u.smoothDamp(this._pos,this._target,this._velocity,this.smooth,t),this.node.setWorldPosition(this._pos)},e}(f)).prototype,"smooth",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),y=e(g.prototype,"maxOffsetZ",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),b=e(g.prototype,"target",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"actor"}}),m=g))||m);s._RF.pop()}}}));

System.register("chunks:///_virtual/camera-controller2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,n,i,s,r,l,a,c,h,u,g,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,l=e.Node,a=e.v3,c=e.input,h=e.Input,u=e.Vec3,g=e.math,p=e.Component,d=e.v2}],execute:function(){var y,f,m,w,V,v,P;s._RF.push({},"222d38rc/dPBZbQSWLeX5KS","camera-controller",void 0);var M=r.ccclass,x=r.property;e("CameraController",(y=M("CameraController"),f=x({type:l}),y((V=t((w=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,n(t,"followNode",V,i(t)),n(t,"angleRange",v,i(t)),n(t,"smooth",P,i(t)),t.targetPos=a(0,0,0),t.smoothPos=a(0,0,0),t.viewForward=a(0,0,0),t.angleVec=a(0,0,0),t.curAngleVec=a(0,0,0),t.angleSpeed=20,t.angleSmooth=4,t.isDown=!1,t}o(t,e);var s=t.prototype;return s.start=function(){c.on(h.EventType.MOUSE_DOWN,this.onMouseDown,this),c.on(h.EventType.MOUSE_MOVE,this.onMouseMove,this),c.on(h.EventType.MOUSE_UP,this.onMouseUp,this),u.copy(this.smoothPos,this.node.worldPosition)},s.onMouseDown=function(e){this.isDown=!0},s.onMouseMove=function(e){this.isDown&&(this.angleVec.y-=e.getDeltaX()/this.angleSpeed,this.angleVec.x+=e.getDeltaY()/this.angleSpeed,this.angleVec.x<this.angleRange.x&&(this.angleVec.x=this.angleRange.x),this.angleVec.x>this.angleRange.y&&(this.angleVec.x=this.angleRange.y))},s.onMouseUp=function(e){this.isDown=!1},s.update=function(e){null!=this.followNode&&(u.copy(this.targetPos,this.followNode.worldPosition),u.lerp(this.smoothPos,this.smoothPos,this.targetPos,e*this.smooth),this.node.setWorldPosition(this.smoothPos),u.copy(this.viewForward,this.node.forward),this.curAngleVec.x=g.lerp(this.curAngleVec.x,this.angleVec.x,this.angleSmooth*e),this.curAngleVec.y=g.lerp(this.curAngleVec.y,this.angleVec.y,this.angleSmooth*e),this.node.setRotationFromEuler(this.curAngleVec.x,this.curAngleVec.y,0))},t}(p)).prototype,"followNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(w.prototype,"angleRange",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d(-20,20)}}),P=t(w.prototype,"smooth",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),m=w))||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/camera-fps.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-base.ts","./util2.ts"],(function(t){var e,r,n,o,i,a,c,l,s,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,c=t.Node,l=t.v3,s=t.Component},function(t){u=t.ActorBase},function(t){p=t.UtilVec3}],execute:function(){var f,h,g,d,y,_,m;i._RF.push({},"893ddTfpyVCPq006JFECGnc","camera-fps",void 0);var v=a.ccclass,b=a.property;t("camera_fps",(f=v("camera_fps"),h=b(c),g=b(u),f((_=e((y=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).angle=l(0,0,0),n(e,"root",_,o(e)),n(e,"_actor",m,o(e)),e}r(e,t);var i=e.prototype;return i.start=function(){var t;this._actor=null==(t=this.root)?void 0:t.getComponent(u)},i.update=function(t){this.updateAngle()},i.updateAngle=function(){p.copy(this.angle,this.node.eulerAngles),this.angle.x=this._actor._angleVertical,this.node.setRotationFromEuler(this.angle)},e}(s)).prototype,"root",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=e(y.prototype,"_actor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=y))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/camera-move-target.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./msg.ts","./sensor-ray-node-to-node.ts"],(function(t){var e,o,i,r,n,s,a,l,c,h,u,p,m,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.Node,l=t.CCFloat,c=t.v3,h=t.Vec3,u=t.Component},function(t){p=t.UtilVec3},function(t){m=t.Msg},function(t){g=t.SensorRayNodeToNode}],execute:function(){var d,v,f,y,b,N,P,w,T,M,z,_,A,S,C,F,k,D,R;n._RF.push({},"d4de4av0rlIV6iZZOG0ZmJ+","camera-move-target",void 0);var L=s.ccclass,V=s.property;t("CameraMoveTarget",(d=L("CameraMoveTarget"),v=V({type:a,tooltip:"Target Node"}),f=V({type:l,tooltip:"Smooth position move."}),y=V({type:l,tooltip:"Smooth angle."}),b=V({type:l,tooltip:"Smooth position move."}),N=V({type:a,tooltip:"Camera Node."}),P=V({type:[a],tooltip:"Target node list."}),w=V({type:l,tooltip:"Start the waiting time."}),T=V({type:a,tooltip:"Look at target node."}),d((_=e((z=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,i(e,"targetNode",_,r(e)),i(e,"smoothSlowMove",A,r(e)),i(e,"smoothAngle",S,r(e)),i(e,"smoothFastMove",C,r(e)),i(e,"cameraNode",F,r(e)),i(e,"targets",k,r(e)),i(e,"waitTime",D,r(e)),i(e,"lookAtTarget",R,r(e)),e.currentPosition=c(0,0,0),e.currentAngle=c(0,0,0),e.sensor=void 0,e.movePosition=c(0,0,0),e.smoothMove=5,e}o(e,t);var n=e.prototype;return n.start=function(){m.on("msg_change_tps_camera_target",this.setTarget.bind(this)),p.copy(this.currentPosition,this.cameraNode.position),p.copy(this.currentAngle,this.cameraNode.eulerAngles),this.sensor=this.getComponent(g)},n.onDestroy=function(){m.off("msg_change_tps_camera_target",this.setTarget.bind(this))},n.update=function(t){var e,o,i;if(this.waitTime>0)this.waitTime-=t;else if(this.targetNode){if(this.sensor.hitPoint.length()>0){p.copy(this.movePosition,this.sensor.hitPoint),this.movePosition.subtract(this.node.worldPosition);var r=this.movePosition.length();p.copy(this.movePosition,this.targetNode.position),this.movePosition.subtract(this.node.position).normalize().multiplyScalar(r),this.smoothMove=this.smoothFastMove}else p.copy(this.movePosition,this.targetNode.position),this.smoothMove=this.smoothSlowMove;h.lerp(this.currentPosition,this.currentPosition,this.movePosition,this.smoothMove*t),null==(e=this.cameraNode)||e.setPosition(this.currentPosition),null==(o=this.cameraNode)||o.setRotationFromEuler(this.targetNode.eulerAngles),null==(i=this.lookAtTarget)||i.setPosition(0,0,-this.cameraNode.position.z-5)}},n.setTarget=function(t){this.targetNode=this.targets[t],this.sensor.endNode=this.targetNode},e}(u)).prototype,"targetNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(z.prototype,"smoothSlowMove",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),S=e(z.prototype,"smoothAngle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),C=e(z.prototype,"smoothFastMove",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),F=e(z.prototype,"cameraNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(z.prototype,"targets",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=e(z.prototype,"waitTime",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),R=e(z.prototype,"lookAtTarget",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=z))||M));n._RF.pop()}}}));

System.register("chunks:///_virtual/camera-msg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./static-occlusion-culling.ts"],(function(t){var e,i,n,r,a,c,o,s,l,u,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,o=t.Camera,s=t.find,l=t.Component},function(t){u=t.Msg},function(t){m=t.StaticOcclusionCulling}],execute:function(){var g,f,d;a._RF.push({},"6ec11Syo3ZN5J5QUf/RVjXg","camera-msg",void 0);var p=c.ccclass,h=c.property;t("CameraMsg",p("CameraMsg")((d=e((f=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,n(e,"msg",d,r(e)),e._cameraNode=void 0,e._camera=void 0,e}i(e,t);var a=e.prototype;return a.start=function(){u.bind(this.msg,this.setCamera,this),this._cameraNode=this.node.children[0],this._camera=this._cameraNode.getComponent(o)},a.setCamera=function(t){if(this._cameraNode.active=t,t){var e=s("static-occlusion-culling");if(null==e)return void console.warn("Can not find static-occlusion-culling.");var i=e.getComponent(m);if(null===i)throw new Error("culling node not find 'StaticOcclusionCulling'");this._camera&&(i.target=this._camera.node)}},e}(l)).prototype,"msg",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"msg_set_camera"}}),g=f))||g);a._RF.pop()}}}));

System.register("chunks:///_virtual/camera-player.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,a,c,o,s;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator,a=e.v3,c=e.Camera,o=e.game,s=e.Component}],execute:function(){var i,p;r._RF.push({},"1d0f39gePpBR6ZKLDEt+9Qd","camera-player",void 0);var u=n.ccclass;n.property,e("CameraPlayer",u("CameraPlayer")(((p=function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),r.prototype.start=function(){r.camera=this.getComponent(c),r.screenCenter.x=o.canvas.width/2,r.screenCenter.y=o.canvas.height/2,r.screenBottom.x=o.canvas.width/2,r.screenBottom.y=0},r}(s)).camera=void 0,p.screenCenter=a(0,0,0),p.screenBottom=a(0,0,0),i=p))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/camera-rotation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,r,i,o,a,l,u,s,c;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.input,u=e.Input,s=e.math,c=e.Component}],execute:function(){var g,p,h,m,f,A;o._RF.push({},"04af7+I/cxNjK770zoI/wGH","camera-rotation",void 0);var y=a.ccclass,X=a.property;e("CameraRotation",y("CameraRotation")((h=n((p=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,r(n,"angleSpeed",h,i(n)),r(n,"angleSmooth",m,i(n)),r(n,"maxAngleX",f,i(n)),r(n,"minAngleX",A,i(n)),n.angle=0,n.angleX=0,n.currentAngle=0,n.currentAngleX=0,n.isMouseDown=!1,n}t(n,e);var o=n.prototype;return o.start=function(){var e=this;l.on(u.EventType.MOUSE_DOWN,(function(n){e.isMouseDown=!0}),this),l.on(u.EventType.MOUSE_MOVE,(function(n){e.isMouseDown&&(e.angle+=n.getDeltaX()/e.angleSpeed,e.angleX-=n.getDeltaY()/e.angleSpeed,e.angleX=s.clamp(e.angleX,e.minAngleX,e.maxAngleX))}),this),l.on(u.EventType.MOUSE_UP,(function(n){e.isMouseDown=!1}),this),this.angle=this.node.eulerAngles.y,this.currentAngle=this.angle},o.update=function(e){this.currentAngle=s.lerp(this.currentAngle,this.angle,e*this.angleSmooth),this.currentAngleX=s.lerp(this.currentAngleX,this.angleX,e*this.angleSmooth),this.node.setRotationFromEuler(this.currentAngleX,this.currentAngle,0)},n}(c)).prototype,"angleSpeed",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),m=n(p.prototype,"angleSmooth",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),f=n(p.prototype,"maxAngleX",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),A=n(p.prototype,"minAngleX",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-30}}),g=p))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/camera-setting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./npm.ts"],(function(e){var t,i,r,n,a,o,c,u,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,c=e._decorator,u=e.Camera,l=e.Component},function(e){s=e.InPlayMode}],execute:function(){var m,p,f,b,g,y,h;o._RF.push({},"52b2fAWR29Md4fbcmUHQI+k","camera-setting",void 0);var d=c.ccclass,C=c.property,v=c.executeInEditMode;e("CameraSetting",d("CameraSetting")(m=v(((h=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).camera=void 0,r(t,"isMainCamera",f,n(t)),r(t,"pipeline",b,n(t)),r(t,"customOutPutName",g,n(t)),r(t,"forceOffScreen",y,n(t)),t}return i(t,e),t.prototype.__preload=function(){this.camera=this.getComponent(u),t.main=this},a(t,null,[{key:"mainCamera",get:function(){return s?this.main?this.main.camera:null:globalThis.cce.Camera._camera}}]),t}(l)).main=void 0,f=t((p=h).prototype,"isMainCamera",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=t(p.prototype,"pipeline",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"main"}}),g=t(p.prototype,"customOutPutName",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=t(p.prototype,"forceOffScreen",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=p))||m)||m);o._RF.pop()}}}));

System.register("chunks:///_virtual/camera-shake.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(e){var t,n,s,a,i,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,s=e._decorator,a=e.randomRange,i=e.Component},function(e){r=e.Msg}],execute:function(){var o;n._RF.push({},"89cc72ZKA1Fp65wWTFlSsZ1","camera-shake",void 0);var c=s.ccclass;s.property,e("CameraShake",c("CameraShake")(o=function(e){function n(){for(var t,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))||this).size=2,t.time=-.1,t}t(n,e);var s=n.prototype;return s.start=function(){r.on("msg_camera_shake",this.onShakeCamera.bind(this))},s.onDestroy=function(){r.off("msg_camera_shake",this.onShakeCamera.bind(this))},s.onShakeCamera=function(e){this.time=e.time,this.size=e.size},s.update=function(e){if(this.time-=e,this.time>0){var t=this.node.eulerAngles.x,n=this.node.eulerAngles.y;this.node.setRotationFromEuler(t,n,a(-this.size,this.size))}},n}(i))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/camera-smooth-follow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./msg.ts"],(function(t){var o,e,i,r,a,s,l,n,c,d,h,u,g;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,l=t.Node,n=t.v3,c=t.quat,d=t.Vec3,h=t.Component},function(t){u=t.UtilNode},function(t){g=t.Msg}],execute:function(){var p,f,N,m,P,b,w,y,L,_;a._RF.push({},"b2d1cWQazFAU4BpqvAn0/9j","camera-smooth-follow",void 0);var v=s.ccclass,z=s.property;t("CameraSmoothFollow",(p=v("CameraSmoothFollow"),f=z(l),N=z(l),m=z(l),p((w=o((b=function(t){function o(){for(var o,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return o=t.call.apply(t,[this].concat(a))||this,i(o,"targetLocalNode",w,r(o)),i(o,"localNode",y,r(o)),i(o,"targetNode",L,r(o)),o.pos=n(0,0,0),o.rotation=c(0,0,0,0),o.localPos=n(0,0,0),i(o,"smoothVelocity",_,r(o)),o.targetLocalPos=n(0,0,0),o.disPos=n(0,0,0),o}e(o,t);var a=o.prototype;return a.start=function(){g.on("msg_set_camera_node",this.setTarget.bind(this))},a.onDestroy=function(){g.off("msg_set_camera_node",this.setTarget.bind(this))},a.setTarget=function(t){this.targetNode=t,this.targetLocalNode=u.find(t,"camera_player"),this.pos.set(this.targetNode.worldPosition),this.rotation.set(this.targetNode.worldRotation),this.localNode.active=!0},a.update=function(t){this.targetNode&&this.targetLocalNode&&null!=this.targetLocalNode.worldPosition&&null!=this.targetLocalNode.worldPosition&&(d.lerp(this.pos,this.pos,this.targetNode.worldPosition,15*t),this.node.setWorldPosition(this.targetNode.worldPosition),this.disPos.set(this.targetNode.worldPosition).subtract(this.pos),this.localPos.set(this.targetLocalNode.worldPosition),this.localPos.subtract(this.disPos),this.localNode.setWorldPosition(this.localPos),this.localNode.setWorldRotation(this.targetLocalNode.worldRotation))},o}(h)).prototype,"targetLocalNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=o(b.prototype,"localNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=o(b.prototype,"targetNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=o(b.prototype,"smoothVelocity",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return n(1,1,1)}}),P=b))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/camera-tps-cct.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./msg.ts","./actor-move-cct.ts"],(function(t){var e,o,i,r,n,s,a,c,l,u,h,g,p,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.Node,c=t.CCFloat,l=t.v3,u=t.math,h=t.Component},function(t){g=t.UtilVec3},function(t){p=t.Msg},function(t){m=t.ActorMoveCCT}],execute:function(){var f,y,A,b,d,v,P,_,C,N,T;n._RF.push({},"84539VoHOBNOryaP5G92LQN","camera-tps-cct",void 0);var z=s.ccclass,M=s.property;t("CameraTpsCCT",(f=z("CameraTpsCCT"),y=M(a),A=M({type:m,tooltip:"Test actor move."}),b=M(c),d=M(c),f((_=e((P=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,i(e,"rotationNode",_,r(e)),i(e,"actorMove",C,r(e)),i(e,"smoothAngle",N,r(e)),i(e,"smoothHeight",T,r(e)),e.targetAngle=l(0,0,0),e.currentAngle=l(0,0,0),e.targetPosition=l(0,0,0),e.currentPosition=l(0,0,0),e}o(e,t);var n=e.prototype;return n.start=function(){g.copy(this.targetAngle,this.rotationNode.eulerAngles),g.copy(this.currentAngle,this.targetAngle),g.copy(this.targetPosition,this.rotationNode.position),g.copy(this.currentAngle,this.targetPosition),p.on("msg_change_tps_camera_height",this.setRootY.bind(this))},n.onDestroy=function(){p.off("msg_change_tps_camera_height",this.setRootY.bind(this))},n.update=function(t){var e,o;this.rotationX(this.actorMove.angleVertical),this.currentAngle.x=u.lerp(this.currentAngle.x,this.targetAngle.x,this.smoothAngle*t),null==(e=this.rotationNode)||e.setRotationFromEuler(this.currentAngle),this.currentPosition.y=u.lerp(this.currentPosition.y,this.targetPosition.y,this.smoothHeight*t),null==(o=this.rotationNode)||o.setPosition(this.currentPosition)},n.rotationX=function(t){this.targetAngle.x=t},n.setRootY=function(t){this.targetPosition.y=t},e}(h)).prototype,"rotationNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(P.prototype,"actorMove",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(P.prototype,"smoothAngle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),T=e(P.prototype,"smoothHeight",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=P))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/camera-tps.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./msg.ts","./actor-move-cct.ts"],(function(t){var e,o,i,n,r,s,a,c,l,h,u,g,p,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,c=t.CCFloat,l=t.v3,h=t.math,u=t.Component},function(t){g=t.UtilVec3},function(t){p=t.Msg},function(t){m=t.ActorMoveCCT}],execute:function(){var f,y,d,A,b,v,P,_,C,M,N;r._RF.push({},"d925fkhBbFMlpxpYVQ/aIgE","camera-tps",void 0);var x=s.ccclass,z=s.property;t("CameraTps",(f=x("CameraTps"),y=z(a),d=z({type:m,tooltip:"Test actor move."}),A=z(c),b=z(c),f((_=e((P=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"rotationNode",_,n(e)),i(e,"actorMove",C,n(e)),i(e,"smoothAngle",M,n(e)),i(e,"smoothHeight",N,n(e)),e.targetAngle=l(0,0,0),e.currentAngle=l(0,0,0),e.targetPosition=l(0,0,0),e.currentPosition=l(0,0,0),e}o(e,t);var r=e.prototype;return r.start=function(){g.copy(this.targetAngle,this.rotationNode.eulerAngles),g.copy(this.currentAngle,this.targetAngle),g.copy(this.targetPosition,this.rotationNode.position),g.copy(this.currentAngle,this.targetPosition),this.actorMove=this.node.parent.getComponent(m),p.on("msg_change_tps_camera_height",this.setRootY.bind(this))},r.onDestroy=function(){p.off("msg_change_tps_camera_height",this.setRootY.bind(this))},r.update=function(t){var e,o;this.rotationX(this.actorMove.angleVertical),this.currentAngle.x=h.lerp(this.currentAngle.x,this.targetAngle.x,this.smoothAngle*t),null==(e=this.rotationNode)||e.setRotationFromEuler(this.currentAngle),this.currentPosition.y=h.lerp(this.currentPosition.y,this.targetPosition.y,this.smoothHeight*t),null==(o=this.rotationNode)||o.setPosition(this.currentPosition)},r.rotationX=function(t){this.targetAngle.x=t},r.setRootY=function(t){this.targetPosition.y=t},e}(u)).prototype,"rotationNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(P.prototype,"actorMove",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(P.prototype,"smoothAngle",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),N=e(P.prototype,"smoothHeight",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=P))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/character-render.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(r){var t,e,c,n,o,a;return{setters:[function(r){t=r.inheritsLoose},function(r){e=r.cclegacy,c=r._decorator,n=r.CapsuleCharacterController,o=r.Component},function(r){a=r.Gizmo}],execute:function(){var i;e._RF.push({},"1c80beyf/RH8qh1Iw5IfZPU","character-render",void 0);var s=c.ccclass,h=(c.property,c.executeInEditMode);r("CharacterRender",s("CharacterRender")(i=h(i=function(r){function e(){for(var t,e=arguments.length,c=new Array(e),n=0;n<e;n++)c[n]=arguments[n];return(t=r.call.apply(r,[this].concat(c))||this).charactor=void 0,t}t(e,r);var c=e.prototype;return c.onEnable=function(){this.charactor=this.getComponent(n)},c.update=function(r){a.drawCapsule(this.node.worldPosition,this.charactor.center,this.charactor.radius,this.charactor.height)},e}(o))||i)||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/check-auto-pick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor.ts"],(function(t){var c,o,i,e,r,n;return{setters:[function(t){c=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,e=t.sys,r=t.Component},function(t){n=t.Actor}],execute:function(){var u;o._RF.push({},"52239TQ3/pDRZ1hvSKAC236","check-auto-pick",void 0);var s=i.ccclass;t("CheckAutoPick",s("CheckAutoPick")(u=function(t){function o(){for(var c,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(c=t.call.apply(t,[this].concat(i))||this)._actor=void 0,c.checkAutoPickTime=1,c.isAutoPick=!1,c}c(o,t);var i=o.prototype;return i.start=function(){this._actor=this.getComponent(n),this.isAutoPick=e.platform===e.Platform.MOBILE_BROWSER||e.platform===e.Platform.ANDROID||e.platform===e.Platform.IOS},i.update=function(t){var c;this.isAutoPick&&(this.checkAutoPickTime-=t,this.checkAutoPickTime>0||(this.checkAutoPickTime=1,null==(c=this._actor)||c.onPick()))},o}(r))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/cleanRenderer.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){e("cleanRenderer",(function(e){return e=e.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")})),n._RF.push({},"55125GOne9MJJ/SpxX21UJW","cleanRenderer",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/collider-group.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,o,t,n,i,l,u,c;return{setters:[function(r){e=r.applyDecoratedDescriptor,o=r.inheritsLoose,t=r.initializerDefineProperty,n=r.assertThisInitialized},function(r){i=r.cclegacy,l=r._decorator,u=r.Collider,c=r.Component}],execute:function(){var p,a,s;i._RF.push({},"53e802WyhxI6L/WgGE2nM54","collider-group",void 0);var g=l.ccclass,d=l.property;r("ColliderGroup",g("ColliderGroup")((s=e((a=function(r){function e(){for(var e,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return e=r.call.apply(r,[this].concat(i))||this,t(e,"group",s,n(e)),e}return o(e,r),e.prototype.onEnable=function(){var r;null==(r=this.node.getComponent(u))||r.setGroup(1<<this.group)},e}(c)).prototype,"group",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=a))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/curve-asset.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,i,u,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e._decorator,u=e.CCString,c=e.CurveRange}],execute:function(){var a,o,s,l,p,v,f;n._RF.push({},"a4438/FR+FM/rK8H9HlZeuV","curve-asset",void 0);var y=i.ccclass,b=i.property;e("CurveAsset",(a=y("CurveAsset"),o=b(u),s=b({type:c}),a((v=r((p=function(){function e(){t(this,"name",v,this),t(this,"curve",f,this)}return e.prototype.evaluate=function(e){return this.curve.evaluate(e,1)},e}()).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"curve-"}}),f=r(p.prototype,"curve",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),l=p))||l));n._RF.pop()}}}));

System.register("chunks:///_virtual/curve-group.ts",["./rollupPluginModLoBabelHelpers.js","cc","./curve-asset.ts"],(function(e){var r,t,n,o,i,u,c,s,a;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,u=e._decorator,c=e.error,s=e.Component},function(e){a=e.CurveAsset}],execute:function(){var p,l,v,f,y;i._RF.push({},"81f78NqBsVHiZBrUOx5Dboe","curve-group",void 0);var h=u.ccclass,g=u.property;e("CurveGroup",(p=h("CurveGroup"),l=g({type:[a]}),p((y=r((f=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),u=0;u<t;u++)i[u]=arguments[u];return r=e.call.apply(e,[this].concat(i))||this,n(r,"assets",y,o(r)),r.curveMap={},r}return t(r,e),r.prototype.getCurve=function(e){var r=this.curveMap[e];if(null==r)throw new c("can not find curve name is:",e);return r},r}(s)).prototype,"assets",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=f))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/damage-core.ts",["cc","./sound.ts","./fx.ts","./local.ts","./msg.ts","./actor-part.ts","./data-core.ts","./util2.ts","./camera-player.ts"],(function(t){var e,a,i,n,o,r,d,s,l,_,m,c,u;return{setters:[function(t){e=t.cclegacy,a=t.v3,i=t.randomRangeInt,n=t.math,o=t.Vec3},function(t){r=t.Sound},function(t){d=t.fx},function(t){s=t.Local},function(t){l=t.Msg},function(t){_=t.ActorPart},function(t){m=t.DataLevelInst},function(t){c=t.UtilVec3},function(t){u=t.CameraPlayer}],execute:function(){t({calculateDamage:function(t,e,a){null!=a&&a.isPlayer&&l.emit("msg_stat_times","enemy_fire");if(void 0===e)return;var r=e.collider.node,s="hit_"+r.name.split("_")[0],p=t.damage,v=r.getComponent(_);if(v){var P=v.part,y=p[P]+i(-5,5);if(void 0===y)throw new Error(r.name+" node hit part undefine '"+P+"'");s="hit_"+P;var w=v.actor;if(void 0===w)throw new Error(r.name+" node hit part '"+P+"' undefine actor");if(w._data.hp<=0)return;if(null!=a&&a.isPlayer&&l.emit("msg_stat_times","hit_"+P),w._data.hp-=y,w.isPlayer){l.emit("msg_stat_times","be_hit_"+P);var x=u.camera;c.copy(h,a.node.worldPosition),h.y+=.5,null==x||x.worldToScreen(h,f),f.subtract(u.screenBottom);var b=n.toDegree(o.angle(f,o.UP)),D=Math.sign(-f.cross(o.UP).z);l.emit("msg_hit_direction",b*D)}else{w._data.ai_hate+=1;var E=w._data.hp/w._data.max_hp;l.emit("msg_show_hit_info",{target:w.viewPointHead,hpPercent:E,damageValue:y,hitPoint:e.hitPoint,isHead:"head"==P})}w._data.hp<=0?(w._data.hp=0,d.on(m._data.fx_dead,w.node.worldPosition),null!=a&&a.isPlayer&&l.emit("msg_stat_times","killed"),w.do("dead")):w.do("hit_gun"),w.isPlayer&&w.updateHP()}g(p[s],e.hitPoint,null==a?void 0:a.node.worldPosition)},calculateDamageNode:function(t,e,a,i){var n="hit_"+e.name.split("_")[0],o=t.damage,r=e.getComponent(_);null!=i&&i.isPlayer&&l.emit("msg_stat_times","enemy_fire");if(r){var s=r.part,c=o[s];if(void 0===c)throw new Error(e.name+" node hit part undefine '"+s+"'");var u=r.actor;if(void 0===u)throw new Error(e.name+" node hit part '"+s+"' undefine actor");null!=i&&i.isPlayer&&l.emit("msg_stat_times","hit_"+s),u.isPlayer&&l.emit("msg_stat_times","be_hit_"+s),u._data.hp-=c,u._data.hp<=0?(u._data.hp=0,d.on(m._data.fx_dead,u.node.worldPosition),u.isPlayer&&l.emit("msg_stat_times","killed"),u.do("dead")):u.do("hit_gun"),u.isPlayer&&u.updateHP(),n="hit_body"}g(o[n],a,null==i?void 0:i.node.worldPosition)}}),e._RF.push({},"d8d6avZExlO5Yj1hlbjXg5L","damage-core",void 0);var f=a(0,0,0),h=a(0,0,0);function g(t,e,a){if(void 0!==t&&(t.fx&&d.on(t.fx,e,a),t.sfx&&r.onByDistance(t.sfx,e),void 0===t.notify)){if(null==t.notify)return;l.emit("msg_tips",""+s.Instance.get(t.notify))}}e._RF.pop()}}}));

System.register("chunks:///_virtual/data-base.ts",["cc","./res-cache.ts"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.ResCache}],execute:function(){n._RF.push({},"cec941+DThBWIDIZ/fyveHN","data-base",void 0);t("DataBase",function(){function t(){this._data={},this._name=""}var n=t.prototype;return n.init=function(t){this._name=t,this._data=e.Instance.getJson(t).json,this.bind()},n.bind=function(){},n.get=function(t){var n=this._data[t];if(void 0===n)throw new Error(this._name+" database not find "+t+".");return n},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/data-camera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){var a,e,n;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy},function(t){n=t.DataBase}],execute:function(){e._RF.push({},"45947iRzi1JkJqDd47P8Fr3","data-camera",void 0);t("DataCamera",function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e}(n));e._RF.pop()}}}));

System.register("chunks:///_virtual/data-core.ts",["cc","./data-equip.ts","./data-sound.ts","./data-camera.ts","./data-game.ts","./data-game-set.ts","./data-level.ts","./data-navigation.ts","./data-pool.ts","./data-upgrade-card.ts"],(function(a){var t,n,e,i,d,o,s,u,c,r;return{setters:[function(a){t=a.cclegacy},function(a){n=a.DataEquip},function(a){e=a.DataSound},function(a){i=a.DataCamera},function(a){d=a.DataGame},function(a){o=a.DataGameSet},function(a){s=a.DataLevel},function(a){u=a.DataNavigation},function(a){c=a.DataPool},function(a){r=a.DataUpgradeCard}],execute:function(){a("Init",(function(){D.init("data-equips"),f.init("data-sound"),g.init("data-camera"),m.init("data-navigation"),l.init("data-upgrade-card"),p.init("data-game"),v.init("data-level"),I.init("data-pool"),w.init("data-game-set")})),t._RF.push({},"d7e08WdljRJZouEfdSMymQu","data-core",void 0);var D=a("DataEquipInst",new n),f=a("DataSoundInst",new e),g=a("DataCameraInst",new i),m=a("DataNavigationInst",new u),l=a("DataUpgradeCardInst",new r),p=a("DataGameInst",new d),v=a("DataLevelInst",new s),I=a("DataPoolInst",new c),w=a("DataGameSetInst",new o);t._RF.pop()}}}));

System.register("chunks:///_virtual/data-equip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){var e,n,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){u=t.DataBase}],execute:function(){n._RF.push({},"a9ecbFdZo9FcqxVL5Oz8g4M","data-equip",void 0);t("DataEquip",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(u));n._RF.pop()}}}));

System.register("chunks:///_virtual/data-game-set.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){var e,n,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){a=t.DataBase}],execute:function(){n._RF.push({},"9e7d3P7YG1AfInmoKyxijZM","data-game-set",void 0);t("DataGameSet",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/data-game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){var e,a,n;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy},function(t){n=t.DataBase}],execute:function(){a._RF.push({},"bf4147VFJRPUonMb12JXCxD","data-game",void 0);t("DataGame",function(t){function a(){for(var e,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this)._currentGameNodeName="",e}return e(a,t),a}(n));a._RF.pop()}}}));

System.register("chunks:///_virtual/data-level.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){var e,a,n;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy},function(t){n=t.DataBase}],execute:function(){a._RF.push({},"da03dmsaRZDvraDcaqusGYh","data-level",void 0);t("DataLevel",function(t){function a(){for(var e,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).stop=!1,e}return e(a,t),a}(n));a._RF.pop()}}}));

System.register("chunks:///_virtual/data-navigation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){var n,a,i;return{setters:[function(t){n=t.inheritsLoose},function(t){a=t.cclegacy},function(t){i=t.DataBase}],execute:function(){a._RF.push({},"a28cfIm9SRM8J7cmlkhzuU+","data-navigation",void 0);t("DataNavigation",function(t){function a(){return t.apply(this,arguments)||this}return n(a,t),a}(i));a._RF.pop()}}}));

System.register("chunks:///_virtual/data-pool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){var n,o,e;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy},function(t){e=t.DataBase}],execute:function(){o._RF.push({},"9dadf3CfoJKy44cO9hdnCA8","data-pool",void 0);t("DataPool",function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o}(e));o._RF.pop()}}}));

System.register("chunks:///_virtual/data-sound.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){var n,e,s;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){s=t.DataBase}],execute:function(){e._RF.push({},"f8b55UsGRNAyZzk3aLbtpJH","data-sound",void 0);t("DataSound",function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/data-structure.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"c2b970jje9G0YW2aFF70Bwa","data-structure",void 0);e("Stack",function(){function e(e){void 0===e&&(e=10),this._elements=void 0,this._size=void 0,this._elements=new Array(e),this._size=0}var t=e.prototype;return t.push=function(e){var t=this._elements.length;if(this._size>t){var i=new Array(t);this._elements=this._elements.concat(i)}this._elements[this._size++]=e},t.cur=function(){return this._elements[this._size-1]},t.pop=function(){return this._elements[--this._size]},t.peek=function(){return this._elements[this._size-1]},t.size=function(){return this._size},t.empty=function(){return 0===this._size},t.clear=function(e){void 0===e&&(e=10),delete this._elements,this._elements=new Array(e),this._size=0},e}()),e("Queue",function(){function e(e){this._elements=void 0,this._size=void 0,this._elements=new Array,this._size=e}var t=e.prototype;return t.push=function(e){return null!==e&&(void 0===this._size||isNaN(this._size)||this._elements.length===this._size&&this.pop(),this._elements.unshift(e),!0)},t.pop=function(){return this._elements.pop()},t.size=function(){return this._elements.length},t.empty=function(){return 0===this.size()},t.clear=function(){delete this._elements,this._elements=new Array},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/data-upgrade-card.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-base.ts"],(function(t){var a,e,r;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy},function(t){r=t.DataBase}],execute:function(){e._RF.push({},"02b9ahZRUBA7bjNMjB4tBer","data-upgrade-card",void 0);t("DataUpgradeCard",function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e}(r));e._RF.pop()}}}));

System.register("chunks:///_virtual/debug-util.ts",["./rollupPluginModLoBabelHelpers.js","cc","./save.ts","./local.ts","./msg.ts","./singleton.ts","./data-core.ts"],(function(n){var t,e,i,u,s,c,a,o;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n.setDisplayStats},function(n){u=n.Save},function(n){s=n.Local},function(n){c=n.Msg},function(n){a=n.Singleton},function(n){o=n.DataGameInst}],execute:function(){e._RF.push({},"12b65hqoTJMQp4UrJq8/Cwl","debug-util",void 0);n("DebugUtil",function(n){function e(){for(var t,e=arguments.length,i=new Array(e),u=0;u<e;u++)i[u]=arguments[u];return(t=n.call.apply(n,[this].concat(i))||this).index=0,t}t(e,n);var a=e.prototype;return a.init=function(){var n=this;void 0===u.Instance._cur.debugIndex&&(u.Instance._cur.debugIndex=0),this.index=u.Instance._cur.debugIndex;var t=o._data;this.CheckDisplayStats(),c.on("next_debug",(function(){n.index++,n.index>=t.debug_info.length&&(n.index=0),u.Instance._cur.debugIndex=n.index,n.CheckDisplayStats()})),c.on("pre_debug",(function(){n.index--,n.index<0&&(n.index=t.debug_info.length-1),u.Instance._cur.debugIndex=n.index,n.CheckDisplayStats()}))},a.CheckDisplayStats=function(){i(1===this.index)},a.getShowName=function(){var n=o._data;return s.Instance.get(n.debug_info[this.index])},e}(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/debug.ts",["cc","./camera-setting.ts"],(function(e){var r,t,n;return{setters:[function(e){r=e.cclegacy,t=e.director},function(e){n=e.CameraSetting}],execute:function(){function i(){var e;return(e=n.mainCamera&&n.mainCamera.camera)&&e.initGeometryRenderer(),e&&e.geometryRenderer||t.root.pipeline.geometryRenderer}e("getGeometryRenderer",i),r._RF.push({},"db928AuGApHz43L4Rc0Dg1T","debug",void 0),globalThis.getGeometryRenderer=i,r._RF.pop()}}}));

System.register("chunks:///_virtual/deferred-lighting-pass.ts",["./rollupPluginModLoBabelHelpers.js","cc","./height-fog.ts","./reflection-probe-utils.ts","./href-setting.ts","./setting.ts"],(function(e){var t,r,s,a,i,l,n,o,u,g,d,p,h,c,b,f,_;return{setters:[function(e){t=e.inheritsLoose,r=e.createForOfIteratorHelperLoose,s=e.applyDecoratedDescriptor,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy,n=e._decorator,o=e.rendering,u=e.gfx,g=e.Vec4,d=e.director,p=e.renderer,h=e.postProcess},function(e){c=e.fogUBO},function(e){b=e.ReflectionProbes},function(e){f=e.HrefSetting},function(e){_=e.settings}],execute:function(){var m,P,T,N,C;l._RF.push({},"3fd0abKbT5KbIY7JakN7CTy","deferred-lighting-pass",void 0);n.type;var L=n.property,R=(n.ccclass,o.RasterView,o.AttachmentType,o.AccessType,o.ResourceResidency,o.LightInfo),v=o.SceneFlags,E=o.QueueHint,B=(o.ComputeView,u.Format),S=(u.LoadOp,u.StoreOp,u.ClearFlagBit,u.Color,u.Viewport,new g);e("DeferredLightingPass",(m=L({override:!0}),P=L({override:!0}),T=function(e){function s(){for(var t,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(t=e.call.apply(e,[this].concat(s))||this).materialMap=new Map,t.tempMat=void 0,t.clearMat=void 0,t.enableClusterLighting=0,t.enableIBL=0,t.enableShadow=0,t.enableFog=0,t.debugAlbedo=0,t.debugNormal=0,t.probes=[],a(t,"name",N,i(t)),a(t,"outputNames",C,i(t)),t}t(s,e);var l=s.prototype;return l.updateClusterUBO=function(e,t){var r=globalThis.lightCluster;if(r){t.setProperty("light_cluster_BoundsMin",S.set(r.boundsMin.x,r.boundsMin.y,r.boundsMin.z,1)),t.setProperty("light_cluster_BoundsDelta",S.set(r.boundsDelta.x,r.boundsDelta.y,r.boundsDelta.z,1)),t.setProperty("light_cluster_CellsDot",r.clusterCellsDotData),t.setProperty("light_cluster_CellsMax",r.clusterCellsMaxData),t.setProperty("light_cluster_TextureSize",r.clusterTextureSizeData),t.setProperty("light_cluster_InfoTextureInvSize",r.infoTextureInvSizeData),t.setProperty("light_cluster_CellsCountByBoundsSizeAndPixelsPerCell",r.clusterCellsCountByBoundsSizeData),e.setTexture("light_cluster_InfoTexture",r.dataInfoTextureFloat),e.setTexture("light_cluster_Texture",r.clusterTexture);var s=d.root.pipeline.globalDSManager.pointSampler;e.setSampler("light_cluster_InfoTexture",s),e.setSampler("light_cluster_Texture",s)}},l.recompileMat=function(e,t,r){e.recompileShaders({CC_RECEIVE_SHADOW:1,REFLECTION_PROBE_COUNT:t.length,ENABLE_CLUSTER_LIGHTING:f.clusterLighting,ENABLE_IBL:r,ENABLE_SHADOW:f.shadow,ENABLE_FOG:f.fog,DEBUG_ALBEDO:f.debugAlbedo,DEBUG_NORMAL:f.debugNormal}),this.enableClusterLighting=f.clusterLighting,this.enableIBL=r,this.enableShadow=f.shadow,this.enableFog=f.fog,this.debugAlbedo=f.debugAlbedo,this.debugNormal=f.debugNormal},l.render=function(e,t){var s=this.slotName(e,0),a=this.slotName(e,1);_.gbufferPass&&(a=_.gbufferPass.slotName(e,4));var i=this.context;i.clearBlack(),i.updatePassViewPort().addRenderPass("deferred-lighting","Pass_"+s).setPassInput(this.lastPass.slotName(e,0),"gbuffer_albedoMap").setPassInput(this.lastPass.slotName(e,1),"gbuffer_normalMap").setPassInput(this.lastPass.slotName(e,2),"gbuffer_emissiveMap").setPassInput(this.lastPass.slotName(e,3),"gbuffer_posMap");var l=i.pass,n=i.shadowPass;if(n)for(var o,g=r(n.mainLightShadows);!(o=g()).done;){var d=o.value;i.setPassInput(d,"cc_shadowMap")}i.addRasterView(s,B.RGBA16F,!0).version();var h=b.probes;h=h.filter((function(e){return e.enabledInHierarchy}));var m=f.ibl;_.bakingReflection&&(m=0);var P=globalThis.pipelineAssets.getMaterial("deferred-lighting"),T=this.materialMap.get(e);T&&T.parent===P||(T=new p.MaterialInstance({parent:P}),this.recompileMat(T,h,m),this.materialMap.set(e,T)),h.length===this.probes.length&&this.enableClusterLighting===f.clusterLighting&&this.enableIBL===m&&this.enableShadow===f.shadow&&this.enableFog===f.fog&&this.debugAlbedo===f.debugAlbedo&&this.debugNormal===f.debugNormal||this.recompileMat(T,h,m),l.addConstant("CustomLightingUBO","deferred-lighting");for(var N=0;N<3;N++){var C=h[N];if(!C)break;var L=C.node.worldPosition,y=Math.max(C.size.x,C.size.y,C.size.z);T.setProperty("light_ibl_posRange"+N,S.set(L.x,L.y,L.z,y));var A=C._cubemap;l.setTexture("light_ibl_Texture"+N,A.getGFXTexture()),l.setSampler("light_ibl_Texture"+N,A.getGFXSampler())}if(this.probes=h,this.updateClusterUBO(l,T),c.update(T),i.pass.addQueue(E.RENDER_TRANSPARENT).addCameraQuad(e,T,0,v.VOLUMETRIC_LIGHTING),f.transparent){i.clearFlag=u.ClearFlagBit.NONE,i.updatePassViewPort().addRenderPass("default","LightingTransparent"+s).addRasterView(s,B.RGBA16F,!0).addRasterView(a,B.DEPTH_STENCIL,!0).version();var I=v.PLANAR_SHADOW|v.GEOMETRY;I|=v.TRANSPARENT_OBJECT,i.pass.addQueue(E.RENDER_TRANSPARENT).addSceneOfCamera(e,new R,I)}},s}(h.BasePass),N=s(T.prototype,"name",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"DeferredLightingPass"}}),C=s(T.prototype,"outputNames",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["DeferredLightingColor","gBufferDS"]}}),T));l._RF.pop()}}}));

System.register("chunks:///_virtual/deferred-post-pass.ts",["./rollupPluginModLoBabelHelpers.js","cc","./href-setting.ts","./setting.ts"],(function(e){var t,a,s,r,n,i,o,p,l,c,u,d;return{setters:[function(e){t=e.inheritsLoose,a=e.createClass},function(e){s=e.cclegacy,r=e._decorator,n=e.rendering,i=e.gfx,o=e.Vec4,p=e.renderer,l=e.game,c=e.postProcess},function(e){u=e.HrefSetting},function(e){d=e.settings}],execute:function(){s._RF.push({},"2b4c1080qxORJZD9jgW1SNx","deferred-post-pass",void 0);r.type,r.property,r.ccclass,n.RasterView,n.AttachmentType,n.AccessType,n.ResourceResidency,n.LightInfo,n.SceneFlags,n.QueueHint,n.ComputeView;var f=i.Format;i.LoadOp,i.StoreOp,i.ClearFlagBit,i.Color,i.Viewport,e("DeferredPostPass",function(e){function s(){for(var t,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))||this).materialMap=new Map,t.name="DeferredPostPass",t.outputNames=["DeferredPostColor","DeferredPostDS"],t.params1=new o,t.params2=new o,t}return t(s,e),s.prototype.render=function(e,t){var a=this.context,s=this.lastPass.slotName(e,0),r=this.slotName(e,0);a.clearFlag=e.clearFlag&i.ClearFlagBit.COLOR,o.set(a.clearColor,0,0,0,1);var n=this.materialMap.get(e);n&&n.parent===this.material||(n=new p.MaterialInstance({parent:this.material}),this.materialMap.set(e,n)),a.material=n,n.setProperty("params1",this.params1.set(l.canvas.width,l.canvas.height,d.outputRGBE?1:0,d.tonemapped?0:1)),n.setProperty("params2",this.params2.set(u.fxaa,0,0,0));var c=a.shadingScale;a.updatePassViewPort(1/c,1/c).addRenderPass("post-process","Pass_"+r).setPassInput(s,"inputTexture").addRasterView(r,f.RGBA8,!1).blitScreen(0).version(),this.renderProfiler(e)},a(s,[{key:"material",get:function(){return globalThis.pipelineAssets.getMaterial("final-post")}}]),s}(c.BasePass));s._RF.pop()}}}));

System.register("chunks:///_virtual/delay_play_animation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,a,i,o,r,l,c,u,y,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.input,c=e.Input,u=e.KeyCode,y=e.Animation,p=e.Component}],execute:function(){var s,m,d,f;o._RF.push({},"6543dhd6KFBhY3acAElu4Ew","delay_play_animation",void 0);var h=r.ccclass,_=r.property;e("DelayPlayAnimation",h("DelayPlayAnimation")((d=n((m=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return n=e.call.apply(e,[this].concat(o))||this,a(n,"delay",d,i(n)),a(n,"anim_name",f,i(n)),n}t(n,e);var o=n.prototype;return o.start=function(){var e=this;l.on(c.EventType.KEY_UP,(function(n){n.keyCode===u.SPACE&&e.delayPlay()}),this)},o.delayPlay=function(){var e=this;setTimeout((function(){var n;null==(n=e.node.getComponent(y))||n.play(e.anim_name);e.node.getComponent(y)}),1e3*this.delay)},n}(p)).prototype,"delay",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),f=n(m.prototype,"anim_name",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"minmax.com"}}),s=m))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/delay-active.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,a,c,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Node,l=e.ParticleSystem,s=e.Component}],execute:function(){var u,p,y,f,d,v;o._RF.push({},"b5f58ANV5xLUZ3iLUJoyoIX","delay-active",void 0);var h=a.ccclass,g=a.property;e("DelayActive",(u=h("DelayActive"),p=g(c),u((d=t((f=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"targets",d,n(t)),i(t,"delay",v,n(t)),t}return r(t,e),t.prototype.start=function(){for(var e,t=this,r=null==(e=this.node)?void 0:e.getComponentsInChildren(l),i=0;i<r.length;i++)r[i].play();setTimeout((function(){t.targets.forEach((function(e){e.active=!0})),t.node.removeFromParent()}),1e3*this.delay)},t}(s)).prototype,"targets",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(f.prototype,"delay",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),y=f))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/delay-play.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,r,a,o,l,c,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Animation,c=e.CCFloat,u=e.CCString,p=e.Component}],execute:function(){var s,y,f,m,b,d,g,h,v;a._RF.push({},"9d854y5DxxKkYWCzFWQ/uYO","delay-play",void 0);var z=o.ccclass,C=o.property;e("DelayPlay",(s=z("DelayPlay"),y=C([l]),f=C([c]),m=C([u]),s((g=t((d=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"animations",g,r(t)),i(t,"delay",h,r(t)),i(t,"animation_names",v,r(t)),t}return n(t,e),t.prototype.start=function(){},t}(p)).prototype,"animations",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=t(d.prototype,"delay",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(d.prototype,"animation_names",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=d))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/delay-show-node.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fun.ts","./util2.ts"],(function(e){var t,n,o,i,r,a,c,l,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.v3,l=e.Component},function(e){s=e.fun},function(e){u=e.UtilVec3}],execute:function(){var d,p,f;r._RF.push({},"d02a0dfe4FA+akYTVqTgTcA","delay-show-node",void 0);var y=a.ccclass,h=a.property;e("delay_show_node",y("delay_show_node")((f=t((p=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"delay_time",f,i(t)),t._scale=c(0,0,0),t}n(t,e);var r=t.prototype;return r.onEnable=function(){u.copy(this._scale,this.node.getWorldScale()),this.node.setScale(0,0,0)},r.start=function(){var e=this;s.delay((function(){e.node.setScale(e._scale)}),this.delay_time)},t}(l)).prototype,"delay_time",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),d=p))||d);r._RF.pop()}}}));

System.register("chunks:///_virtual/deobfuscateAppleGPU.ts",["cc","./webgl-constants.ts","./deviceInfo.ts"],(function(e){var a,r,n,t,c,i,o,u,f,l,v;return{setters:[function(e){a=e.cclegacy},function(e){r=e.GL_VERTEX_SHADER,n=e.GL_FRAGMENT_SHADER,t=e.GL_ARRAY_BUFFER,c=e.GL_STATIC_DRAW,i=e.GL_FLOAT,o=e.GL_COLOR_BUFFER_BIT,u=e.GL_TRIANGLES,f=e.GL_RGBA,l=e.GL_UNSIGNED_BYTE},function(e){v=e.deviceInfo}],execute:function(){e("deobfuscateAppleGPU",(function(e,a,d){if(!d)return[a];var s,h=function(e){var a="\n    precision highp float;\n    attribute vec3 aPosition;\n    varying float vvv;\n    void main() {\n      vvv = 0.31622776601683794;\n      gl_Position = vec4(aPosition, 1.0);\n    }\n  ",v="\n    precision highp float;\n    varying float vvv;\n    void main() {\n      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;\n      enc = fract(enc);\n      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\n      gl_FragColor = enc;\n    }\n  ",d=e.createShader(r),s=e.createShader(n),h=e.createProgram();if(!(s&&d&&h))return;e.shaderSource(d,a),e.shaderSource(s,v),e.compileShader(d),e.compileShader(s),e.attachShader(h,d),e.attachShader(h,s),e.linkProgram(h),e.detachShader(h,d),e.detachShader(h,s),e.deleteShader(d),e.deleteShader(s),e.useProgram(h);var p=e.createBuffer();e.bindBuffer(t,p),e.bufferData(t,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),c);var _=e.getAttribLocation(h,"aPosition");e.vertexAttribPointer(_,3,i,!1,0,0),e.enableVertexAttribArray(_),e.clearColor(1,1,1,1),e.clear(o),e.viewport(0,0,1,1),e.drawArrays(u,0,3);var A=new Uint8Array(4);return e.readPixels(0,0,1,1,f,l,A),e.deleteProgram(h),e.deleteBuffer(p),A.join("")}(e),p="801621810",_="8016218135",A="80162181161",S=null!=v&&v.isIpad?[["a7",A,12],["a8",_,15],["a8x",_,15],["a9",_,15],["a9x",_,15],["a10",_,15],["a10x",_,15],["a12",p,15],["a12x",p,15],["a12z",p,15],["a14",p,15],["m1",p,15]]:[["a7",A,12],["a8",_,12],["a9",_,15],["a10",_,15],["a11",p,15],["a12",p,15],["a13",p,15],["a14",p,15]];"80162181255"===h?s=S.filter((function(e){return e[2]>=14})):(s=S.filter((function(e){return e[1]===h}))).length||(s=S);return s.map((function(e){return"apple "+e[0]+" gpu"}))})),a._RF.push({},"dc7cagY9e5B+5Hb2UflP2TS","deobfuscateAppleGPU",void 0),a._RF.pop()}}}));

System.register("chunks:///_virtual/deobfuscateRenderer.ts",["cc","./deobfuscateAppleGPU.ts"],(function(e){var t,c;return{setters:[function(e){t=e.cclegacy},function(e){c=e.deobfuscateAppleGPU}],execute:function(){e("deobfuscateRenderer",(function(e,t,u){return"apple gpu"===t?c(e,t,u):[t]})),t._RF.push({},"3e583xIz2JIWaUDY4cAD/xh","deobfuscateRenderer",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/destroy-settings.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,i,o,s,c,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,c=t.CCBoolean,a=t.Component}],execute:function(){var l,u,p,y,f;o._RF.push({},"2e346wKSjFIN5CqVUsQrX47","destroy-settings",void 0);var d=s.ccclass,g=s.property;t("destroySettings",(l=d("destroySettings"),u=g(c),l((f=e((y=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"isDestroy",f,i(e)),e}return r(e,t),e.prototype.start=function(){},e}(a)).prototype,"isDestroy",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=y))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/dev.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(n){var t,e,o,c,i,u,r,s;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,c=n.input,i=n.Input,u=n.KeyCode,r=n.Component},function(n){s=n.Msg}],execute:function(){var p;e._RF.push({},"cc1d4LUJZpOtbnwuA/YXPCT","dev",void 0);var v=o.ccclass;o.property,n("Dev",v("Dev")(p=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var o=e.prototype;return o.start=function(){c.on(i.EventType.KEY_DOWN,this.onKeyDown,this)},o.onKeyDown=function(n){n.keyCode==u.KEY_P&&this.onClickDev()},o.onClickDev=function(){s.emit("push","dev")},o.update=function(n){},e}(r))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/deviceInfo.ts",["cc","./ssr.ts"],(function(i){var e,t;return{setters:[function(i){e=i.cclegacy},function(i){t=i.isSSR}],execute:function(){e._RF.push({},"bb9f4jQcmBBGJZb7y32FDm2","deviceInfo",void 0);i("deviceInfo",function(){if(!t){var i=window.navigator,e=i.userAgent,n=i.platform,o=i.maxTouchPoints,s=/(iphone|ipod|ipad)/i.test(e),r="iPad"===n||"MacIntel"===n&&o>0&&!window.MSStream;return{isIpad:r,isMobile:/android/i.test(e)||s||r,isSafari12:/Version\/12.+Safari/.test(e)}}}());e._RF.pop()}}}));

System.register("chunks:///_virtual/disable-probe-update-runtime.ts",["cc"],(function(){var e,r,a,o,t,n;return{setters:[function(c){e=c.cclegacy,r=c.game,a=c.Game,o=c.ReflectionProbeManager,t=c.director,n=c.Director}],execute:function(){e._RF.push({},"fbcf2VoLvpPo6rFsxM3riJr","disable-probe-update-runtime",void 0),r.on(a.EVENT_GAME_INITED,(function(){var e,r;if(void 0!==o)e=o.probeManager,r=o.probeManager.onUpdateProbes;else for(var a=t._callbackTable[n.EVENT_BEFORE_UPDATE].callbackInfos,c=0;c<a.length;c++)if((e=a[c].target)&&e.onUpdateProbes){r=e.onUpdateProbes;break}e&&r&&t.off(n.EVENT_BEFORE_UPDATE,r,e)})),e._RF.pop()}}}));

System.register("chunks:///_virtual/disable-update-ubo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,n,u,a;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,n=e._decorator,u=e.MeshRenderer,a=e.Component}],execute:function(){var r;o._RF.push({},"1aee8DtcaFMBLRwdpO9OuHZ","disable-update-ubo",void 0);var s=n.ccclass;n.property,e("disable_update_ubo",s("disable_update_ubo")(r=function(e){function o(){return e.apply(this,arguments)||this}return t(o,e),o.prototype.start=function(){var e=this;setTimeout((function(){e.getComponentsInChildren(u).forEach((function(e){var t=e.model.updateUBOs;e.model.updateUBOs=function(){this._localDataUpdated&&t.call(this)}}))}),1e3)},o}(a))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/drop-item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./res-pool.ts"],(function(e){var t,o,i,n,s,r;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,i=e._decorator,n=e.Component},function(e){s=e.Msg},function(e){r=e.ResPool}],execute:function(){var c;o._RF.push({},"e970d4rKHNKup4eamDFF4za","drop-item",void 0);var p=i.ccclass;i.property,e("DropItem",p("DropItem")(c=function(e){function o(){for(var t,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this).itemName="",t.groupIndex=0,t.itemNode=void 0,t.effectNode=void 0,t}t(o,e);var i=o.prototype;return i.start=function(){this.node.on("picked",this.picked,this)},i.onDestroy=function(){this.node.off("picked",this.picked,this)},i.init=function(e,t,o){this.itemName=e,this.node.name=e,this.groupIndex=o;var i=this.node.children[0],n=e+"_pickup";this.itemNode=r.Instance.pop(n,i.worldPosition,i);var s="fx_drop_lv_"+t;this.effectNode=r.Instance.pop(s,this.node.worldPosition,this.node)},i.picked=function(){var e;s.emit("msg_remove_item",this.groupIndex),r.Instance.push(this.itemNode),null==(e=this.effectNode)||e.emit("remove"),this.node.name="drop_item",r.Instance.push(this.node)},o}(n))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/editor-calculate-nodes.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){var e,o,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.Component},null],execute:function(){var c;o._RF.push({},"05822KBq31MErWUuDKYIqyV","editor-calculate-nodes",void 0);var u=n.ccclass,i=(n.property,n.executeInEditMode);t("EditorCalculateNodes",u("EditorCalculateNodes")(c=i(c=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.onEnable=function(){},o}(r))||c)||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/editor-camera-placer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,o,a,c,i,n,p,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized,c=e.createClass},function(e){i=e.cclegacy,n=e._decorator,p=e.Vec3,l=e.Quat,s=e.Component}],execute:function(){var u,y,d;i._RF.push({},"5161fNg0y5MS50Us7M1kE49","editor-camera-placer",void 0);var f=n.property,_=n.ccclass,h=n.executeInEditMode;e("EditorCameraPlacer",_("EditorCameraPlacer")(u=h((d=t((y=function(e){function t(){for(var t,r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return t=e.call.apply(e,[this].concat(c))||this,o(t,"_place",d,a(t)),t._oldPosition=new p,t._oldRotation=new l,t}return r(t,e),t.prototype.update=function(){},c(t,[{key:"place",get:function(){return this._place},set:function(e){this._place=e}}]),t}(s)).prototype,"_place",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(y.prototype,"place",[f],Object.getOwnPropertyDescriptor(y.prototype,"place"),y.prototype),u=y))||u)||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/editor.ts",["cc","./env"],(function(e){var t,n,r,o;return{setters:[function(e){t=e.cclegacy,n=e.warn,r=e.error},function(e){o=e.EDITOR}],execute:function(){e({download:function(e,t){return new Promise((function(n,r){p.head(e,(function(o,i,a){if(o)return r(o);p(e).pipe(c.createWriteStream(t)).on("close",(function(){n(null)}))}))}))},error:function(){r.apply(void 0,arguments)},formatPath:function(e){return e.replace(/\\/g,"/")},log:function(){n.apply(void 0,arguments)},relpaceExt:function(e,t){var n=a.basename(e).replace(a.extname(e),t);return a.join(a.dirname(e),n)},repaintInEditMode:function(){f.Engine.repaintInEditMode()},warn:function(){n.apply(void 0,arguments)}}),t._RF.push({},"82665FTrUlFd6B6tPgfFpSW","editor",void 0);var i=e("EDITOR",o),a=(e("io",i),e("ws",i),e("path",i)),c=e("fse",i),u=(e("base642arraybuffer",i),e("Sharp",i),e("Buffer",i),e("globby",i)),p=e("request",i);globalThis.fse=c,globalThis.path=a,globalThis.globby=u;var f=e("cce",i);e("EditorExtends",i),e("Editor",i),e("projectPath",i),e("projectAssetPath",i),e("projectTempPath",i);t._RF.pop()}}}));

System.register("chunks:///_virtual/Electron.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,r,o;return{setters:[function(e){n=e.createClass,t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"0907e8LT0RI2rtAbQ2ziAFM","Electron",void 0);var i=e("default",function(){function e(){}return e.sendAsync=function(){var e=t(r().mark((function e(n,t,o){var i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=void 0),void 0===o&&(o=void 0),e.next=4,null==(i=window.electron)?void 0:i.ipcRenderer.invoke(n,t);case 4:c=e.sent,void 0!==o&&o(c);case 6:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),e.send=function(e,n){var t;return void 0===n&&(n=void 0),null==(t=window.electron)?void 0:t.ipcRenderer.invoke(e,n)},e.A2C=function(e,n){console.log("A2C:",e,n)},n(e,null,[{key:"appUserID",get:function(){return globalThis.remote?globalThis.remote.app.getUserID():""}},{key:"appUserPath",get:function(){return globalThis.remote?globalThis.remote.app.getPath("userData"):""}}]),e}());i.is_steam=!1,i.counter=0,o._RF.pop()}}}));

System.register("chunks:///_virtual/enable-play-animation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,a,i,o,e;return{setters:[function(n){t=n.inheritsLoose},function(n){a=n.cclegacy,i=n._decorator,o=n.Animation,e=n.Component}],execute:function(){var l;a._RF.push({},"ff91aE7kmxGw659bVaCaznL","enable-play-animation",void 0);var r=i.ccclass;i.property,n("EnablePlayAnimation",r("EnablePlayAnimation")(l=function(n){function a(){for(var t,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=n.call.apply(n,[this].concat(i))||this)._anim=void 0,t}return t(a,n),a.prototype.onEnable=function(){var n,t;this._anim||(this._anim=this.getComponent(o)),null==(n=this._anim)||n.stop(),null==(t=this._anim)||t.play()},a}(e))||l);a._RF.pop()}}}));

System.register("chunks:///_virtual/error.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var t,e,o,i;return{setters:[function(r){t=r.inheritsLoose,e=r.assertThisInitialized,o=r.wrapNativeSuper},function(r){i=r.cclegacy}],execute:function(){i._RF.push({},"0f140lESWZBN6xPxjHqfsPm","error",void 0);r("OutdatedBenchmarksError",function(r){function o(t){var i;return i=r.call(this,t)||this,Object.setPrototypeOf(e(i),(this instanceof o?this.constructor:void 0).prototype),i}return t(o,r),o}(o(Error)));i._RF.pop()}}}));

System.register("chunks:///_virtual/event.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"8edfa4MOMJElrnab8AYAYP0","event",void 0);e("default",function(){function e(){this._listeners=[],this._onceListeners=[]}var n=e.prototype;return n.on=function(e,n){for(var t=this._listeners,r=0;r<t.length;r++)if(t[r][0]===e&&t[r][1]===n)return;t.push([e,n])},n.off=function(e,n){for(var t=this._listeners,r=0;r<t.length;r++)if(t[r][0]===e)return void t.splice(r,1)},n.once=function(e,n){for(var t=this._onceListeners,r=0;r<t.length;r++)if(t[r][0]===e&&t[r][1]===n)return;t.push([e,n])},n.invoke=function(e,n,t,r,i,s){for(var o=[],f=0;f<arguments.length;f++)o[f]=arguments[f];for(var c=this._listeners,u=0;u<c.length;u++){var h=c[u];h[0].apply(h[1],o)}for(var l=this._onceListeners,a=0;a<l.length;a++){var v=l[a];v[0].apply(v[1],o)}l.length=0},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/exit-pointer-lock.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,n,i,r,c,s;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,i=t.input,r=t.Input,c=t.KeyCode,s=t.Component}],execute:function(){var u;e._RF.push({},"d6dc66mSitBR6A81yZO+vss","exit-pointer-lock",void 0);var p=n.ccclass;n.property,t("ExitPointerLock",p("ExitPointerLock")(u=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.start=function(){i.on(r.EventType.KEY_DOWN,this.onKeyDown,this)},n.onKeyDown=function(t){t.keyCode===c.ESCAPE&&document.exitPointerLock()},e}(s))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/fil-smooth.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,l,o,a,r,n,s,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,l=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,n=t.Sprite,s=t.math,u=t.game,c=t.Component}],execute:function(){var h,f,p;a._RF.push({},"1e9b8oU7zZP3r62t7FBDaMa","fil-smooth",void 0);var v=r.ccclass,m=r.property;t("FilSmooth",v("FilSmooth")((p=e((f=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).fil_value=void 0,e.value=1,l(e,"smooth",p,o(e)),e}i(e,t);var a=e.prototype;return a.start=function(){this.fil_value=this.getComponent(n)},a.setValue=function(t){this.value=t},a.update=function(t){var e=Math.abs(this.fil_value.fillRange-this.value);0!==e&&(this.fil_value.fillRange=s.lerp(this.fil_value.fillRange,this.value,u.deltaTime*this.smooth),e<1e-4&&(this.fil_value.fillRange=this.value))},e}(c)).prototype,"smooth",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),h=f))||h);a._RF.pop()}}}));

System.register("chunks:///_virtual/force-area.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./data-core.ts"],(function(e){var o,t,r,i,n,c,l,a,s,h,u,d;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,c=e._decorator,l=e.Vec3,a=e.v3,s=e.Collider,h=e.Component},function(e){u=e.UtilVec3},function(e){d=e.DataGameInst}],execute:function(){var f,p,g,y,_,S;n._RF.push({},"0cbc93C5zZOP4OPrSSc53nC","force-area",void 0);var v=c.ccclass,z=c.property;e("ForceArea",(f=v("ForceArea"),p=z(l),f((_=o((y=function(e){function o(){for(var o,t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return o=e.call.apply(e,[this].concat(n))||this,r(o,"force",_,i(o)),r(o,"posScale",S,i(o)),o._force=a(0,0,0),o._collider=void 0,o}t(o,e);var n=o.prototype;return n.__preload=function(){this._collider=this.getComponent(s),this._collider.on("onTriggerEnter",this.onTriggerEnter,this),this._collider.on("onTriggerStay",this.onTriggerStay,this)},n.onEnable=function(){var e="level"===d._currentGameNodeName;this._collider.enabled=e},n.forceRate=function(e){return u.copy(this._force,this.force),0!==this.posScale.x&&(this._force.x=this.calculate(e.worldPosition.x-this.node.worldPosition.x,this.posScale.x,this.force.x)),0!==this.posScale.y&&(this._force.y=this.calculate(e.worldPosition.y-this.node.worldPosition.y,this.posScale.y,this.force.y)),0!==this.posScale.z&&(this._force.z=this.calculate(e.worldPosition.z-this.node.worldPosition.z,this.posScale.z,this.force.z)),this._force.clone()},n.calculate=function(e,o,t){var r=e/o;return(r=2*Math.log(r)+o)<0&&(r=0),r=(o-r)/o+11},n.onTriggerEnter=function(e){e.otherCollider.node.emit("addAreaForce",this.forceRate(e.otherCollider.node))},n.onTriggerStay=function(e){e.otherCollider.node.emit("addAreaForce",this.forceRate(e.otherCollider.node))},o}(h)).prototype,"force",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a(0,0,0)}}),S=o(y.prototype,"posScale",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a(0,4,0)}}),g=y))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/fsr-pass.ts",["./rollupPluginModLoBabelHelpers.js","cc","./href-setting.ts","./setting.ts"],(function(t){var e,s,n,r,i;return{setters:[function(t){e=t.inheritsLoose},function(t){s=t.cclegacy,n=t.postProcess},function(t){r=t.HrefSetting},function(t){i=t.settings}],execute:function(){s._RF.push({},"d6d26nogWpASLKKKyqPAdsV","fsr-pass",void 0);t("CustomFSRPass",function(t){function s(){return t.apply(this,arguments)||this}e(s,t);var n=s.prototype;return n.checkEnable=function(e){return t.prototype.checkEnable.call(this,e)&&!!r.fsr},n.render=function(e,s){this._material=globalThis.pipelineAssets.getMaterial("fsr"),t.prototype.render.call(this,e,s),i.tonemapped=!0},s}(n.FSRPass));s._RF.pop()}}}));

System.register("chunks:///_virtual/fun.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"ed3d4WCsZNHJpU/MgDfbWRo","fun",void 0);n("fun",function(){function n(){}return n.delay=function(n,t){setTimeout(n,1e3*t)},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/fx-actor-fall-point.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){var i,e,o,h,n,r,s,a,l,c,_,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,h=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,s=t.ParticleSystem,a=t.geometry,l=t.v3,c=t.PhysicsSystem,_=t.Component},function(t){y=t.UtilVec3}],execute:function(){var u,p,g,f,d,P;n._RF.push({},"079ffBOeyBO3aMG1gk/AcFZ","fx-actor-fall-point",void 0);var v=r.ccclass,x=r.property;t("FxActorFallPoint",(u=v("FxActorFallPoint"),p=x(s),u((d=i((f=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(i=t.call.apply(t,[this].concat(n))||this)._ray=new a.Ray,i._height=0,i._line=void 0,i._fxHit=void 0,i._hitPos=void 0,o(i,"particle_high_light",d,h(i)),o(i,"rate_high_light",P,h(i)),i}e(i,t);var n=i.prototype;return n.start=function(){this._line=this.node.getChildByName("line"),this._fxHit=this.node.getChildByName("hitpoint"),this._hitPos=l(0,0,0),this._ray.d.x=0,this._ray.d.y=-1,this._ray.d.z=0},n.update=function(t){this.detectPoint()},n.detectPoint=function(){if(y.copy(this._ray.o,this.node.worldPosition),c.instance.raycastClosest(this._ray)){var t=c.instance.raycastClosestResult;this._height=this.node.worldPosition.y-t.hitPoint.y,y.copy(this._hitPos,t.hitPoint),this._hitPos.y+=.05,this.particle_high_light.startSpeed.constant=this._height*this.rate_high_light}else this._height=0;var i=this._height>.3;this._line.active=i,this._fxHit.active=i,this._line.setScale(1,3*this._height,1),this._fxHit.setWorldPosition(this._hitPos)},i}(_)).prototype,"particle_high_light",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(f.prototype,"rate_high_light",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=f))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/fx-auto-remove.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,o,i,n,a,l,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,l=e.ParticleSystem,c=e.Component}],execute:function(){var s,u,p;n._RF.push({},"9a13dQ1gv1PzI0/macqLJJ/","fx-auto-remove",void 0);var d=a.ccclass,y=a.property;e("FxAutoRemove",d("FxAutoRemove")((p=t((u=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,o(t,"delayTime",p,i(t)),t}r(t,e);var n=t.prototype;return n.start=function(){for(var e,t=null==(e=this.node)?void 0:e.getComponentsInChildren(l),r=0;r<t.length;r++)t[r].play()},n.update=function(e){this.delayTime-=e,this.delayTime<0&&(e=9999,this.node.destroy())},t}(c)).prototype,"delayTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),s=u))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/fx-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res-pool.ts"],(function(t){var e,o,i,s,r,l,n,a,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,n=t.ParticleSystem,a=t.Component},function(t){h=t.ResPool}],execute:function(){var c,p,f,d;r._RF.push({},"a337dbviatHz4BIgY6tyVw5","fx-base",void 0);var u=l.ccclass,y=l.property;t("FxBase",u("FxBase")((f=e((p=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,i(e,"destroyTime",f,s(e)),e.particles=void 0,i(e,"autoRemove",d,s(e)),e.delayTime=3,e._followNode=void 0,e}o(e,t);var r=e.prototype;return r.__preload=function(){var t;this.particles=null==(t=this.node)?void 0:t.getComponentsInChildren(n),this.node.on("play",this.play,this),this.node.on("remove",this.remove,this),this.node.on("setFollow",this.setFollow,this),this.delayTime=this.destroyTime},r.onDestroy=function(){this.node.off("play",this.play,this),this.node.off("remove",this.remove,this),this.node.off("setFollow",this.setFollow,this)},r.stop=function(){for(var t=0;t<this.particles.length;t++){this.particles[t].stop()}},r.clear=function(){for(var t=0;t<this.particles.length;t++){var e=this.particles[t];e.stop(),e.clear()}},r.play=function(t){this.setFollow(t),this.delayTime=this.destroyTime;for(var e=0;e<this.particles.length;e++){var o=this.particles[e];o.stop(),o.clear(),o.play()}},r.setFollow=function(t){this._followNode=t},r.setLoop=function(t){for(var e=0;e<this.particles.length;e++){this.particles[e].loop=!0}},r.lateUpdate=function(t){if(this._followNode){var e=this._followNode.worldPosition;this.node.setWorldPosition(e.x,e.y,e.z)}this.autoRemove&&(this.delayTime-=t,this.delayTime<0&&this.remove())},r.remove=function(){this.stop(),this.clear(),h.Instance.push(this.node),this.delayTime=this.destroyTime},e}(a)).prototype,"destroyTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),d=e(p.prototype,"autoRemove",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=p))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/fx-bullet-tracer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res.ts","./fun.ts"],(function(t){var e,i,n,o,r,s,a,l,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.randomRange,l=t.Component},function(t){c=t.Res},function(t){u=t.fun}],execute:function(){var h,p,f,d,v;r._RF.push({},"2027aQpjO5JX6n1yWEVEr5k","fx-bullet-tracer",void 0);var m=s.ccclass,y=s.property;t("FxBulletTracer",m("FxBulletTracer")((f=e((p=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"poolCount",f,o(e)),n(e,"segment",d,o(e)),n(e,"hiddenTime",v,o(e)),e.pool=void 0,e}i(e,t);var r=e.prototype;return r.__preload=function(){this.node.on("init",this.init,this)},r.init=function(){this.pool=new Array(this.poolCount);var t=this.node.children[0];this.pool[0]=t,t.active=!1;for(var e=1;e<this.poolCount;e++)this.pool[e]=c.instNode(t,this.node);this.node.on("setTracer",this.setTracer,this)},r.onDestroy=function(){this.node.off("init",this.init,this),this.node.off("setTracer",this.setTracer,this)},r.setTracer=function(t,e){for(var i=e.clone(),n=e.clone().subtract(t).normalize(),o=i.subtract(t).length(),r=o/this.poolCount,s=this.calculateSegment(o),l=t.clone(),c=0;c<s;c++){var h=r,p=this.pool[c];p.active=!0,p.setPosition(l),p.lookAt(e),p.setScale(.3,1,a(.3,h)),l.add(n.clone().multiplyScalar(h))}u.delay(this.hiddenLines.bind(this),this.hiddenTime)},r.calculateSegment=function(t){var e=Math.round(t/this.segment);return e>this.poolCount&&(e=this.poolCount),e},r.hiddenLines=function(){for(var t=0;t<this.poolCount;t++)this.pool[t].active=!1},e}(l)).prototype,"poolCount",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),d=e(p.prototype,"segment",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),v=e(p.prototype,"hiddenTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),h=p))||h);r._RF.pop()}}}));

System.register("chunks:///_virtual/fx-car-random-move.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,r,o,a,l,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.randomRange,c=e.Component}],execute:function(){var u,m,s,f,p,h,d;o._RF.push({},"e2a817Bt0VFg58Mwhn5duM9","fx-car-random-move",void 0);var v=a.ccclass,b=a.property;e("FxCarRandomMove",v("FxCarRandomMove")((s=i((m=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,n(i,"offsetY",s,r(i)),n(i,"intervalTime",f,r(i)),n(i,"count",p,r(i)),n(i,"minTime",h,r(i)),n(i,"maxTime",d,r(i)),i}t(i,e);var o=i.prototype;return o.start=function(){this.intervalTime=l(this.minTime,this.maxTime),this.node.setPosition(0,this.offsetY,0)},o.update=function(e){if(this.intervalTime-=e,this.intervalTime<0){this.intervalTime=l(this.minTime,this.maxTime);for(var i=0;i<this.node.children.length;i++)this.node.children[i].emit("msg_node_fly_car")}},i}(c)).prototype,"offsetY",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 54}}),f=i(m.prototype,"intervalTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=i(m.prototype,"count",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),h=i(m.prototype,"minTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),d=i(m.prototype,"maxTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),u=m))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/fx-delay-set.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,a,o,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Component}],execute:function(){var l,s,u;a._RF.push({},"cf7d9Aee4tOELxVAT8vhix/","fx-delay-set",void 0);var p=o.ccclass,y=o.property;e("FxDelaySet",p("FxDelaySet")((u=t((s=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"delay",u,n(t)),t.time=0,t}i(t,e);var a=t.prototype;return a.onEnable=function(){this.time=this.delay},a.update=function(e){this.time-=e,this.time<0&&(this.node.active=!1)},t}(c)).prototype,"delay",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),l=s))||l);a._RF.pop()}}}));

System.register("chunks:///_virtual/fx-fly-car.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sound.ts"],(function(i){var t,n,e,a,o,r,s,l,c,u,m,p;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,e=i.initializerDefineProperty,a=i.assertThisInitialized},function(i){o=i.cclegacy,r=i._decorator,s=i.Animation,l=i.randomRange,c=i.randomRangeInt,u=i.random,m=i.Component},function(i){p=i.Sound}],execute:function(){var f,d,h,y;o._RF.push({},"ca8aas24DdInY0w56lO6O5Q","fx-fly-car",void 0);var T=r.ccclass,v=r.property;i("FxFlyCar",T("FxFlyCar")((h=t((d=function(i){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=i.call.apply(i,[this].concat(o))||this,e(t,"maxTime",h,a(t)),e(t,"minTime",y,a(t)),t.animation=void 0,t.waitTime=0,t}n(t,i);var o=t.prototype;return o.start=function(){var i=this;this.animation=this.node.children[0].getComponent(s),this.node.on("msg_node_fly_car",(function(){i.waitTime=l(i.minTime,i.maxTime)}))},o.update=function(i){if(this.waitTime-=i,this.waitTime<0){var t,n;this.waitTime=9999999999,this.node.setRotationFromEuler(0,l(0,360),0);var e=c(0,5);this.node.setPosition(0,e,0),null==(t=this.animation)||t.stop(),null==(n=this.animation)||n.play(),this.animation.defaultClip.speed=l(.2,.6),u()>.5&&e<7&&p.on("sfx_car_fly",l(.3,1))}},t}(m)).prototype,"maxTime",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),y=t(d.prototype,"minTime",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=d))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/fx-ghost-vertex.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){var i,n,o,e,r,s,c,a,l,h,u,d,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.v4,a=t.v3,l=t.SkinnedMeshRenderer,h=t.clamp01,u=t.Vec3,d=t.Component},function(t){p=t.UtilVec3}],execute:function(){var f,m,v;r._RF.push({},"2f0404bvmdBJYOUS4dso/Rx","fx-ghost-vertex",void 0);var P=s.ccclass,y=s.property;t("FxGhostVertex",P("FxGhostVertex")((v=i((m=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,o(i,"intensity",v,e(i)),i.materials=[],i.directionUniform=c(),i.direction=a(),i.currentPosition=void 0,i.lastPosition=void 0,i.t=0,i}n(i,t);var r=i.prototype;return r.start=function(){var t=this;this.currentPosition=this.node.position.clone(),this.lastPosition=this.currentPosition.clone(),this.node.getComponentsInChildren(l).forEach((function(i){t.materials.push(i.material)}))},r.update=function(t){var i=this;p.copy(this.currentPosition,this.node.worldPosition),this.currentPosition.equals(this.lastPosition)&&(this.t=0),this.t+=t,this.t=h(this.t),u.lerp(this.lastPosition,this.lastPosition,this.currentPosition,this.t),u.subtract(this.direction,this.lastPosition,this.currentPosition).multiplyScalar(this.intensity),this.materials.forEach((function(t){var n=t.passes[0].getHandle("direction");t.passes[0].getUniform(n,i.directionUniform),i.directionUniform.set(i.direction.x,i.direction.y,i.direction.z,i.directionUniform.w),t.passes[0].setUniform(n,i.directionUniform)}))},i}(d)).prototype,"intensity",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),f=m))||f);r._RF.pop()}}}));

System.register("chunks:///_virtual/fx-ghost.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res.ts","./util2.ts"],(function(e){var t,i,n,s,o,r,h,a,l,d,c,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,h=e.Node,a=e.SkinnedMeshRenderer,l=e.MeshRenderer,d=e.Component},function(e){c=e.Res},function(e){m=e.UtilNode}],execute:function(){var u,p,_,g,f,v,R;o._RF.push({},"15334m3zupEZYbwablb0Hq1","fx-ghost",void 0);var b=r.ccclass,y=r.property;e("FxGhost",(u=b("FxGhost"),p=y(h),u((f=t((g=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"count",f,s(t)),n(t,"target",v,s(t)),n(t,"simpleTime",R,s(t)),t.meshRenders=void 0,t._intervalTime=0,t._ghostItems=[],t._eachCount=0,t._index=0,t._total=0,t}i(t,e);var o=t.prototype;return o.start=function(){this.meshRenders=this.target.getComponentsInChildren(a),console.log(this.meshRenders),this._eachCount=this.meshRenders.length;var e=this.count*this._eachCount;this._total=e,this._ghostItems=Array(e);var t=this.node.children[0];this._ghostItems[0]={node:t,meshRender:m.getComponent(t,l)};for(var i=1;i<e;i++){var n=c.instNode(t,this.node);this._ghostItems[i]={node:n,meshRender:m.getComponent(n,l)}}console.log(this.meshRenders,this._ghostItems)},o.update=function(e){this._intervalTime-=e,this._intervalTime<0&&(this.simpleMeshInfo(),this._intervalTime=this.simpleTime)},o.simpleMeshInfo=function(){for(var e=0;e<this._eachCount;e++){var t=this.meshRenders[e].mesh,i=this.meshRenders[e].node;if(null!=t){var n=Object.assign(t),s=this._ghostItems[this._index];s.meshRender.mesh=n,s.node.setPosition(this._index,i.worldPosition.y,i.worldPosition.z),s.node.setWorldRotation(i.getWorldRotation()),this._index++,console.log(this._index),this._index>=this._total&&(this._index=0)}else console.warn(this.meshRenders[e].node.name+" Can not find mesh")}},t}(d)).prototype,"count",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),v=t(g.prototype,"target",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(g.prototype,"simpleTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=g))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/fx-group.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fun.ts"],(function(t){var e,i,o,r,s,n,a,l,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,n=t._decorator,a=t.ParticleSystem,l=t.Component},function(t){c=t.fun}],execute:function(){var p,h,u;s._RF.push({},"67c81qisCpIuZe2AlE7MRDT","fx-group",void 0);var f=n.ccclass,y=n.property;t("FxGroup",f("FxGroup")((u=e((h=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this)._particles=void 0,e._loop=!0,o(e,"delayTime",u,r(e)),e}i(e,t);var s=e.prototype;return s.start=function(){if(this._particles=this.node.getComponentsInChildren(a),this.node.on("setDestroy",this.setDestroy,this),this.play(!0),void 0===this._particles||this._particles.length<=0)throw new Error("This node "+this.node.name+" can not find particles.")},s.onDestroy=function(){this.node.off("setDestroy",this.setDestroy,this)},s.setLoop=function(t){for(var e=0;e<this._particles.length;e++)this._particles[e].loop=t;this._loop=t},s.setEnable=function(t){for(var e=0;e<this._particles.length;e++)this._particles[e].enabled=t},s.stop=function(t){for(var e=0;e<this._particles.length;e++)this._particles[e].stop()},s.play=function(t){for(var e=0;e<this._particles.length;e++)this._particles[e].play()},s.setDestroy=function(){var t=this;this.setLoop(!1),c.delay((function(){var e;null==(e=t.node)||e.destroy()}),this.delayTime)},e}(l)).prototype,"delayTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),p=h))||p);s._RF.pop()}}}));

System.register("chunks:///_virtual/fx-hit-direction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./res.ts"],(function(i){var t,e,n,o,r,s,c,a,l,h;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){r=i.cclegacy,s=i._decorator,c=i.Vec3,a=i.Component},function(i){l=i.Msg},function(i){h=i.Res}],execute:function(){var p,u,d;r._RF.push({},"2c546KsiYhC46F/r5yPjxdj","fx-hit-direction",void 0);var f=s.ccclass,v=s.property;i("FxHitDirection",f("FxHitDirection")((d=t((u=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=i.call.apply(i,[this].concat(r))||this,n(t,"poolDeep",d,o(t)),t.list=[],t.index=0,t}e(t,i);var r=t.prototype;return r.onLoad=function(){var i=this.node.children[0];i.active=!1,this.list.push(i);for(var t=1;t<this.poolDeep;t++){var e=h.instNode(i,this.node,c.ZERO);this.list.push(e)}l.on("msg_hit_direction",this.onHit.bind(this)),this.node.on("clear",this.clear,this)},r.onHit=function(i){var t=this.list[this.index];t.active=!0,t.setRotationFromEuler(0,0,i),this.index++,this.index>=this.poolDeep&&(this.index=0)},r.clear=function(){for(var i=0;i<this.poolDeep;i++)this.list[i].active=!1},t}(a)).prototype,"poolDeep",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),p=u))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/fx-init.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fx.ts"],(function(t){var n,i,o,e,r;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator,e=t.Component},function(t){r=t.fx}],execute:function(){var c;i._RF.push({},"ed45evN5chHZorv00WyDaoU","fx-init",void 0);var s=o.ccclass;o.property,t("FxInit",s("FxInit")(c=function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.start=function(){r.init(this.node)},i}(e))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/fx-light-flash.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,h,l,s,e,a,o,n;return{setters:[function(t){i=t.inheritsLoose},function(t){h=t.cclegacy,l=t._decorator,s=t.MeshRenderer,e=t.randomRangeInt,a=t.math,o=t.Color,n=t.Component}],execute:function(){var r;h._RF.push({},"81bbcKEtCtKh5NgwGgaV/8x","fx-light-flash",void 0);var u=l.ccclass;l.property,t("FxLightFlash",u("FxLightFlash")(r=function(t){function h(){for(var i,h=arguments.length,l=new Array(h),s=0;s<h;s++)l[s]=arguments[s];return(i=t.call.apply(t,[this].concat(l))||this).matLight=void 0,i.lightColor=new o(255,255,255,255),i.lightValueMax=10,i.lightValueMin=200,i.length=0,i.flashTimes=3,i.value=0,i.t=0,i.smooth=10,i.isFlash=!1,i}i(h,t);var l=h.prototype;return l.start=function(){var t;this.matLight=null==(t=this.node.getComponent(s))?void 0:t.materials[0],this.onFlash()},l.onFlash=function(){this.flashTimes=e(1,5),this.lightValueMax=255,this.lightValueMin=e(180,200),this.length=this.lightValueMax-this.lightValueMin,this.value=this.lightValueMax},l.update=function(t){var i;this.t+=t,this.value=a.pingPong(this.t*this.smooth,this.length)+this.lightValueMin,this.lightColor.a=this.value,this.lightColor.g=this.value,this.lightColor.b=this.value,null==(i=this.matLight)||i.setProperty("emissive",this.lightColor)},h}(n))||r);h._RF.pop()}}}));

System.register("chunks:///_virtual/fx-ray-line.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){var e,n,i,r,c,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,r=t.v3,c=t.Component},function(t){o=t.UtilVec3}],execute:function(){var s;n._RF.push({},"303d6l3bwlBS4gsxegu8pB1","fx-ray-line",void 0);var a=i.ccclass;i.property,t("FxRayLine",a("FxRayLine")(s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))||this).direction=r(0,0,0),e}return e(n,t),n.prototype.setRayLine=function(t,e){o.copy(this.direction,e),this.direction.subtract(t);var n=this.direction.length();this.node.setScale(.1,1,n)},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/fx.ts",["cc","./util2.ts","./res-pool.ts","./data-core.ts"],(function(n){var o,t,e,i,c,a;return{setters:[function(n){o=n.cclegacy,t=n._decorator,e=n.ParticleSystem},function(n){i=n.UtilNode},function(n){c=n.ResPool},function(n){a=n.DataGameInst}],execute:function(){var r,f;o._RF.push({},"0114dEwOBNDK5KXBCkGcdgv","fx",void 0);var l=t.ccclass;t.property,n("fx",l("fx")(((f=function(){function n(){}return n.init=function(n){this.node=n},n.on=function(n,o,t,e){if(void 0===t&&(t=void 0),!a._data.close_blood_fx||"fx_hit_body"!=n){var i=c.Instance.pop(n,o);return t&&i.lookAt(t),i.emit("play",e),i}},n.play=function(n,o){i.find(n,o).emit("play")},n.playLoop=function(n,o,t){var c=i.find(this.node,o),a=null==c?void 0:c.getComponentsInChildren(e);if(void 0!==a)for(var r=0;r<a.length;r++){var f=a[r];f.loop=t,t&&f.play()}else console.warn(" effect can not find "+o)},n}()).node=void 0,r=f))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/g-curve.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,e,n,c;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,c=t.Component}],execute:function(){var o;e._RF.push({},"f8185olRHpCZZ1ya7ObipCa","g-curve",void 0);var u=n.ccclass;n.property,t("g_curve",u("g-curve")(o=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.start=function(){},n.update=function(t){},e}(c))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/g-math.ts",["cc","./util2.ts"],(function(t){var n,r,e,o,x,u;return{setters:[function(t){n=t.cclegacy,r=t.lerp,e=t.Vec3,o=t.v3,x=t.math},function(t){u=t.UtilTmp}],execute:function(){n._RF.push({},"1c767GdozZCpJ8PXzfR8wYb","g-math",void 0);var c=t("GMath",function(){function t(){}return t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=16*Math.random()|0;return("x"===t?n:3&n|8).toString(16)}))},t.clamp=function(t,n,r){return t<n?t=n:t>r&&(t=r),t},t.smoothDamp=function(n,r,e,o,x){var u=Number.POSITIVE_INFINITY,c=2/(o=Math.max(1e-4,o)),a=c*x,i=1/(1+a+.48*a*a+.235*a*a*a),l=n-r,m=r,h=u*o,p=(e+c*(l=t.clamp(l,-h,h)))*x;e=(e-c*p)*i;var s=(r=n-l)+(l+p)*i;return m-n>0==s>m&&(e=((s=m)-m)/x),[s,e]},t.lerpSmooth=function(t,n,e,o){return r(n,t,Math.exp(-e*o))},t.range=function(t,n,r){return r>t?t:r<n?n:r},t.StretchedBillboardAngle=function(t,n,r,c){if(null!=r){u.V3_0.set(r),u.V3_1.set(c),u.V3_2.set(r);var a=u.V3_0.subtract(n),i=e.dot(a,c),l=u.V3_1.multiplyScalar(i),m=u.V3_2.subtract(l),h=o(1,0,0),p=x.toDegree(e.angle(m,h));return r.y>n.y?p-90:-p-90}console.warn("StretchedBillboardAngle is null.")},t}());t("GVec3",function(){function t(){}return t.smoothDamp=function(t,n,r,e,o){var x=c.smoothDamp(t.x,n.x,r.x,e,o),u=c.smoothDamp(t.y,n.y,r.y,e,o),a=c.smoothDamp(t.z,n.z,r.z,e,o);t.x=x[0],t.y=u[0],t.z=a[0],n.x=x[1],n.y=u[1],n.z=a[1]},t.lerpSmooth=function(t,n,r,e){return t.x=c.lerpSmooth(n.x,t.x,r,e),t.y=c.lerpSmooth(n.y,t.y,r,e),t.z=c.lerpSmooth(n.z,t.z,r,e),t},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/g-scene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res-cache.ts","./href-setting.ts"],(function(e){var n,t,r,o,c,a,s,i,u;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){r=e.cclegacy,o=e.director,c=e.resources,a=e.instantiate,s=e.find},function(e){i=e.ResCache},function(e){u=e.HrefSetting}],execute:function(){r._RF.push({},"1b4c1RDNQhFpIYtG+RSuaHQ","g-scene",void 0);var f=e("GScene",function(){function e(){}return e.Load=function(r,f){e.isLoadScene=!0,o.loadScene(r,n(t().mark((function n(o,d){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}throw new Error("Load Scene Error.");case 2:if(!d){n.next=11;break}if(!u.fullScene){n.next=6;break}return n.next=6,new Promise((function(e){c.load(["prefabs/mesh-details"],(function(n,t){var r=a(t[0]),o=s("scene-root/mesh-root");r.parent=o,o.getComponent("NodeIDManager").registerRoot(r),e(null)}))}));case 6:f(),e.isLoadScene=!1,i.Instance.removeLoad(),n.next=12;break;case 11:console.warn("Can not load scene. - "+r);case 12:case"end":return n.stop()}}),n)}))))},e}());f.isLoadScene=!1,f.isPreload=!1,f.msg={id:100,action:"load scene",current:"",wait_count:1,count:1},r._RF.pop()}}}));

System.register("chunks:///_virtual/game-set.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./singleton.ts","./save.ts","./data-core.ts"],(function(t){var e,i,n,s,a,o,l;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.sys},function(t){s=t.Msg},function(t){a=t.Singleton},function(t){o=t.Save},function(t){l=t.DataGameSetInst}],execute:function(){i._RF.push({},"54df82LaMZJwZNKv5PmG2Qo","game-set",void 0);t("GameSet",function(t){function i(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).sensitivity=.5,e.sensitivity_a=.5,e.screen_to_angle=270,e.move_value_list=[3,4,10,20,40],e.move_accelerate_list=[.7,.8,1,2,3],e.accelerate_point=20,e.data=void 0,e}return e(i,t),i.prototype.init=function(){var t=this;this.data=l._data.pc,n.platform===n.Platform.MOBILE_BROWSER||n.platform===n.Platform.IOS?this.data=l._data.ios:n.platform===n.Platform.ANDROID&&(this.data=l._data.android),this.sensitivity_a=this.data.sensitivity_a,this.screen_to_angle=this.data.screen_to_angle,this.move_value_list=this.data.move_value_list,this.move_accelerate_list=this.data.move_accelerate_list,this.accelerate_point=this.data.accelerate_point,this.sensitivity=o.Instance.get("sensitivity"),null==this.sensitivity&&(this.sensitivity=.5,o.Instance.set("sensitivity",.5)),s.on("sli_sensitivity",(function(e){t.sensitivity=e,o.Instance.set("sensitivity",e)})),s.on("sli_sensitivity_a",(function(e){t.sensitivity_a=e})),s.on("inp_move_value_list",(function(e){var i=e.split(",");t.move_value_list.length=0;for(var n=0;n<i.length;n++)t.move_value_list.push(Number(i[n]))})),s.on("inp_move_accelerate_list",(function(e){var i=e.split(",");t.move_accelerate_list.length=0;for(var n=0;n<i.length;n++)t.move_accelerate_list.push(Number(i[n]))})),s.on("inp_screen_to_angle",(function(e){t.screen_to_angle=Number(e)})),s.on("inp_accelerate_point",(function(e){t.accelerate_point=Number(e)}))},i}(a));i._RF.pop()}}}));

System.register("chunks:///_virtual/game-type.ts",["cc"],(function(){var e,c;return{setters:[function(t){e=t.cclegacy,c=t._decorator}],execute:function(){e._RF.push({},"569cdaxVGxBWYLT5Dvwh5ld","game-type",void 0);c.ccclass,c.property;e._RF.pop()}}}));

System.register("chunks:///_virtual/game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./action.ts","./singleton.ts","./ui.ts","./bind.ts","./local.ts","./save.ts","./msg.ts","./data-structure.ts","./level.ts","./sound.ts","./notify.ts","./GameQuality.ts","./data-core.ts","./game-set.ts","./res-pool.ts","./exit-pointer-lock.ts","./guide.ts"],(function(t){var n,i,a,s,e,o,c,u,h,_,f,d,l,r,p,m,v,I,k,g,S,T;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,a=t.find,s=t.game},function(t){e=t.Action},function(t){o=t.Singleton},function(t){c=t.UI},function(t){u=t.Bind},function(t){h=t.Local},function(t){_=t.Save},function(t){f=t.Msg},function(t){d=t.Stack},function(t){l=t.Level},function(t){r=t.Sound},function(t){p=t.Notify},function(t){m=t.GameQuality},function(t){v=t.Init,I=t.DataGameInst},function(t){k=t.GameSet},function(t){g=t.ResPool},function(t){S=t.ExitPointerLock},function(t){T=t.Guide}],execute:function(){i._RF.push({},"f1830vJHSVDMZH8wMcAcGTl","game",void 0);t("Game",function(t){function i(){for(var n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=t.call.apply(t,[this].concat(a))||this)._action=void 0,n._stack=new d(5),n._nodes={},n._data={},n._isInit=!1,n._totalGameTime=0,n._nextSaveTime=0,n._poolNode=void 0,n.backSafeTime=0,n}n(i,t);var o=i.prototype;return o.init=function(){var t,n;this._poolNode=null==(t=a("init"))?void 0:t.getChildByName("objects-pool"),null==(n=this._poolNode)||n.addComponent(S),v(),g.Instance.initPool(this._poolNode),_.Instance.init(),T.Instance.init(),k.Instance.init(),this._data=I._data,this._action=new e(this._data.action_data),this._nodes=this._data.nodes,m.Instance.init(),r.init(),h.Instance.init(),l.Instance.init(),u.Instance.initData(this._data.events),c.Instance.init(),f.on("push",(function(t){i.Instance.push(t)})),f.on("root",(function(t){i.Instance.root(t)})),f.on("next",this.next.bind(this)),f.on("back",this.back.bind(this)),this.push(this._data.start_node),this._isInit=!0,p.Instance.check_notify()},o.next=function(){var t=this._stack.cur(),n=this._nodes[t].next;n&&this.push(n)},o.back=function(){if(!(s.totalTime-this.backSafeTime<50)){this.backSafeTime=s.totalTime;var t=this._stack.pop();this._action.off(t)}},o.root=function(t){for(var n=this._stack.size()-1,i=0;i<n-1;i++){var a=this._stack.pop();this._action.off(a)}},o.push=function(t){if(I._currentGameNodeName=t,!this._nodes[t].is_pop&&this._stack.size()>0){var n=this._stack.pop();this._action.off(n)}this._stack.push(t),this._action.on(t)},o.update=function(t){this._isInit&&(this._totalGameTime+=t,i.Instance._action.update(t),l.Instance.update(t),u.Instance.update(t),this._data.auto_save&&this._totalGameTime>this._nextSaveTime&&(_.Instance.statisticsTime("game",Math.floor(this._data.next_save_time)),this._nextSaveTime+=this._data.next_save_time))},i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameQuality.ts",["./rollupPluginModLoBabelHelpers.js","cc","./save.ts","./local.ts","./msg.ts","./singleton.ts","./res-cache.ts","./href-setting.ts"],(function(t){var e,n,i,s,a,c,h,o,u,d;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.PhysicsSystem,s=t.profiler},function(t){a=t.Save},function(t){c=t.Local},function(t){h=t.Msg},function(t){o=t.Singleton},function(t){u=t.ResCache},function(t){d=t.HrefSetting}],execute:function(){n._RF.push({},"5d6eaVuIRZE1YiNRD70MqYh","GameQuality",void 0);t("GameQuality",function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).index=0,e.max=2,e._data=Object.create(null),e._map=Object.create(null),e.cur={name:"game_quality_high",level:-1,fps:59.9,maxSubSteps:1,open_ik:!0},e._default=0,e}e(n,t);var o=n.prototype;return o.init=function(){var t=this;this._data=u.Instance.getJson("data-quality").json,this.index=0,this.index<0&&(this.index=0),this.index>=this._data.set.length&&(this.index=this.index=this._data.set.length-1),this._default=this.index,this.cur=this._data.set[this.index],i.instance.maxSubSteps=1,i.instance.fixedTimeStep=1/60,h.on("next_quality",(function(){t.index++,t.index>=t._data.set.length&&(t.index=0),t.cur=t._data.set[t.index],a.Instance._cur.game_quality=t.index,c.Instance.refresh()})),h.on("pre_quality",(function(){t.index--,t.index<0&&(t.index=t._data.set.length-1),t.cur=t._data.set[t.index],a.Instance._cur.game_quality=t.index,c.Instance.refresh()})),h.on("msg_check_change",this.checkChange.bind(this)),h.on("msg_show_state",this.showState.bind(this))},o.checkChange=function(){this._default!==this.index&&globalThis.window.location.reload()},o.getShowName=function(){return c.Instance.get(this._data.set[this.index].name)},o.showState=function(){d.showFps&&s.showStats()},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/gbuffer-pass.ts",["./rollupPluginModLoBabelHelpers.js","cc","./setting.ts"],(function(e){var t,s,r,a,o,i,n,c,f;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy,r=e.rendering,a=e.gfx,o=e.director,i=e.Vec4,n=e.sys,c=e.postProcess},function(e){f=e.settings}],execute:function(){s._RF.push({},"6ca54M75ypIm7ycRXNzyYCb","gbuffer-pass",void 0);r.RasterView,r.AttachmentType,r.AccessType,r.ResourceResidency;var u=r.LightInfo,l=r.SceneFlags,p=r.QueueHint,d=(r.ComputeView,a.Format),g=(a.LoadOp,a.StoreOp,a.ClearFlagBit);a.Color,a.Viewport,e("DeferredGBufferPass",function(e){function s(){for(var t,s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).name="DeferredGBufferPass",t.outputNames=["gBufferColor","gBufferNormal","gBufferEmissive","gBufferPosition","gBufferDS"],t}return t(s,e),s.prototype.render=function(e,t){f.tonemapped=!1,f.gbufferPass=this,o.root.pipeline.pipelineSceneData.fog.fogStart=1;var s=this.context;s.clearFlag=g.COLOR|g.DEPTH_STENCIL,i.set(s.clearColor,0,0,0,1),i.set(s.clearDepthColor,e.clearDepth,e.clearStencil,0,0);var r=d.RGBA16F,a=r;n.isMobile||(a=d.RGBA32F);var c=this.slotName(e,0),h=this.slotName(e,1),R=this.slotName(e,2),m=this.slotName(e,3),C=this.slotName(e,4);s.depthSlotName=C,s.updatePassViewPort().addRenderPass("default",c+"_Pass").addRasterView(c,r,!0).addRasterView(h,r,!0).addRasterView(R,r,!0).addRasterView(m,a,!0).addRasterView(C,d.DEPTH_STENCIL,!0).version(),s.pass.addQueue(p.RENDER_OPAQUE).addSceneOfCamera(e,new u,l.OPAQUE_OBJECT|l.CUTOUT_OBJECT|l.DRAW_INSTANCING)},s}(c.BasePass));s._RF.pop()}}}));

System.register("chunks:///_virtual/generate-white-box.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,o,i,a,l,s,p,c,u,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createClass},function(e){a=e.cclegacy,l=e._decorator,s=e.Node,p=e.find,c=e.MeshRenderer,u=e.instantiate,h=e.Component}],execute:function(){var f,g,d,y,m,b,v;a._RF.push({},"8fc34KMtedBrKH+6r3Dy6gl","generate-white-box",void 0);var w=l.ccclass,x=l.property;e("generate_white_box",(f=w("generate_white_box"),g=x(s),d=x(s),f((b=t((m=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"targetRoot",b,o(t)),n(t,"temp",v,o(t)),t}return r(t,e),t.prototype.doGenerate=function(){var e=this;if(this.temp&&this.targetRoot){var t=p("root",this.node);t||((t=new s("root")).parent=this.node),t.removeAllChildren(),this.targetRoot.getComponentsInChildren(c).forEach((function(r){if(r.model){var n=u(e.temp);n.name=r.node.name;var o=r.model.worldBounds;n.position=o.center,n.setScale(2*o.halfExtents.x,2*o.halfExtents.y,2*o.halfExtents.z),n.parent=t}}))}},i(t,[{key:"generate",get:function(){return!1},set:function(e){this.doGenerate()}}]),t}(h)).prototype,"targetRoot",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(m.prototype,"temp",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(m.prototype,"generate",[x],Object.getOwnPropertyDescriptor(m.prototype,"generate"),m.prototype),y=m))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/getGPUVersion.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e("getGPUVersion",(function(e){var t,n=(e=e.replace(/\([^)]+\)/,"")).match(/\d+/)||e.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return null!=(t=null==n?void 0:n.join("").replace(/\W|amd/g,""))?t:""})),t._RF.push({},"08a29uaDW1CPYb1Wjm5uE6a","getGPUVersion",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/getLevenshteinDistance.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e({getLevenshteinDistance:function(e,t){if(e===t)return 0;var c=e;e.length>t.length&&(e=t,t=c);var i=e.length,o=t.length;for(;i>0&&e.charCodeAt(~-i)===t.charCodeAt(~-o);)i--,o--;var a,s=0;for(;s<i&&e.charCodeAt(s)===t.charCodeAt(s);)s++;if(o-=s,0===(i-=s))return o;var h,u,f=0,v=0,g=0;for(;v<i;)r[v]=e.charCodeAt(s+v),n[v]=++v;for(;g<o;)for(a=t.charCodeAt(s+g),h=g++,f=g,v=0;v<i;v++)u=a===r[v]?h:h+1,h=n[v],f=n[v]=h>f?u>f?f+1:u:u>h?h+1:u;return f},tokenizeForLevenshteinDistance:function(e){return e.split(/[.,()\[\]/\s]/g).sort().filter((function(e,t,n){return 0===t||e!==n[t-1]})).join(" ")}}),t._RF.push({},"68d53MV5/lGybm0hGxk+cme","getLevenshteinDistance",void 0);var n=[],r=[];t._RF.pop()}}}));

System.register("chunks:///_virtual/getWebGLContext.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e("getWebGLContext",(function(e,t){void 0===t&&(t=!1);var n={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:t,powerPreference:"high-performance",stencil:!1};e&&delete n.powerPreference;var r=window.document.createElement("canvas"),a=r.getContext("webgl",n)||r.getContext("experimental-webgl",n);return null!=a?a:void 0})),t._RF.push({},"83771nQxO9HC7cgB6gIeD6z","getWebGLContext",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/gizmo-camera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){var o,e,r,n,i,a;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,n=t.Camera,i=t.Component},function(t){a=t.Gizmo}],execute:function(){var c;e._RF.push({},"f62c9QbSv1AFol51oBdisTF","gizmo-camera",void 0);var s=r.ccclass;r.property,t("GizmoCamera",s("GizmoCamera")(c=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){a.setCamera(this.getComponent(n))},e}(i))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/gm.ts",["cc","./Electron.ts","./save.ts","./res-cache.ts"],(function(t){var n,e,c,i;return{setters:[function(t){n=t.cclegacy},function(t){e=t.default},function(t){c=t.Save},function(t){i=t.ResCache}],execute:function(){n._RF.push({},"6ea61dB+cdC7YvL+4dfxK93","gm",void 0);var a=t("GM",function(){function t(){}return t.init=function(){this._data=i.Instance.getJson("data-gm").json,console.log(this._data),this._dic.clear_data=function(t){c.Instance.clear_data(t[1])},this._dic.delete_all=function(t){c.Instance.deleteAllArchive()},this._dic.clear_by_key=function(t){c.Instance.clearByKey(t[1])},this._dic.set=function(t){c.Instance.set(t[1],t[2])},this._dic.app=function(t){var n=t[1].split(":");e.sendAsync(n[0],n[1])}},t.deleteAll=function(){c.Instance.deleteAllArchive()},t.run=function(t){var n=t.split(" "),e=n[0],c=this._dic[e];c&&c(n)},t.getHelp=function(){var t="GM help:";return this._data.gm_help.forEach((function(n){t+=n+"\n\n"})),console.log(t),t},t}());a._dic={},a._data=Object.create(null),globalThis.GM=a,n._RF.pop()}}}));

System.register("chunks:///_virtual/gpu-mobiles.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"f75af/JjYtEwp/iLcrj4AFc","gpu-mobiles",void 0);e("GpuMobiles",{adreno:{530:272,540:384,615:196,616:227,618:316,619:330,620:457,630:509,640:848,642:835,650:1171,660:1460,662:824,730:2596,740:3671,"642l":703,"619l":252},immortalis:{g715:3535},apple:{a16:3331,a15:2725,a14:1800,a13:1576,a12:1024,a11:896,a10:300},mali:{g710:2319,g78:1790,g610:1440,g77:1258,g76:625,g57:365,g68:610,g52:190,g72:183},xclipse:{920:1906}});a._RF.pop()}}}));

System.register("chunks:///_virtual/gpu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./gpu-mobiles.ts"],(function(e){var r,n,o,t,i,s,a,c;return{setters:[function(e){r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){o=e.cclegacy,t=e.director,i=e.game,s=e.sys},function(e){a=e.getGPUTier},function(e){c=e.GpuMobiles}],execute:function(){e({getGPUVersion:l,getGpuInfo:function(){return p.apply(this,arguments)}}),o._RF.push({},"0e004mHOSRIt6tAOM/83iAb","gpu",void 0);e("RenderQulity",function(e){return e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High",e}({}));var u=function(e){for(var r=0,n=s.isMobile?["adreno","apple","mali","xclipse","immortalis"]:["intel","apple","amd","radeon","nvidia","geforce"];r<n.length;r++){var o=n[r];if(e.includes(o))return o}};function l(e){var r,n=e.match(/[ga]?\d+/)||e.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return null!=(r=null==n?void 0:n.join("").replace(/\W|amd/g,""))?r:""}function p(){return(p=r(n().mark((function e(){var r,o,p,g,d,f,h;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="",o="",p=0,!t.root||!t.root.device){e.next=21;break}if(g=t.root.device.renderer.toLowerCase(),console.log("renderer: "+g),r=u(g),o=l(g),console.log("gpuType : "+r),console.log("gpuVersion : "+o),!s.isMobile){e.next=14;break}try{p=c[r][o]||0,console.log("gpu : score("+p+")")}catch(e){s.isMobile&&console.warn("Get gpu score failed")}e.next=21;break;case 14:if(!t.root||!i.canvas){e.next=21;break}return d=t.root.device.renderer.toLowerCase(),e.next=18,a({desktopTiers:[0,60,150,300],override:{renderer:d,isMobile:s.isMobile,screenSize:{width:i.canvas.width,height:i.canvas.height}}});case 18:f=e.sent,p=f.fps,console.log(f);case 21:return h={gpuType:r,gpuVersion:o,gpuScore:p},globalThis.gpuInfo=h,e.abrupt("return",h);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o._RF.pop()}}}));

System.register("chunks:///_virtual/grandom.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,s;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy,n=e._decorator,s=e.randomRangeInt}],execute:function(){var i;r._RF.push({},"b25e3mXfdBBtYEaNzzQk4uq","grandom",void 0);var a=n.ccclass;n.property,e("GRandom",a("GRandom")(i=function(){function e(e){void 0===e&&(e=-1),this.preValue=0,this.seed=0,this.c=49297,this.a=9301,this.m=233280,this.seed=e,-1===this.seed&&(this.seed=s(0,4294967295)),this.preValue=this.seed}var r=e.prototype;return r.reset=function(){this.preValue=this.seed},r.value=function(){return this.preValue=(this.a*this.preValue+this.c)%this.m,this.preValue},r.range=function(e,t){return e+this.value()%(t-e+1)},r.range1000=function(e,t){var r=this.range(1e3*e,1e3*t);return Math.floor(r/1e3)},t(e,[{key:"value1000",get:function(){return this.range(0,1e3)}}]),e}())||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/graphics.ts",["cc"],(function(s){var t,e;return{setters:[function(s){t=s.cclegacy,e=s.utils}],execute:function(){t._RF.push({},"65ffas2U79Oja3MQe49X56F","graphics",void 0);s("GGraphics",(function(){})),s("GMesh",function(){function s(){}return s.Create=function(){var s={positions:[0,0,0,1,0,0,1,0,1,0,0,1],indices:[0,2,1,0,3,2],uvs:[0,0,1,0,1,1,0,1]};return e.createMesh(s)},s}()),s("GImage",(function(){})),s("MeshBase",(function(){this.vers=[],this.triangles=[],this.uvs=[],this.colors=[],this.trianglesIndex=0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/grp-bag.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./ui-com.ts","./util2.ts","./data-core.ts","./level.ts","./res-cache.ts","./ui-bind.ts"],(function(t){var i,n,e,o,s,a,r,g,h,l,_;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.Label,o=t.Sprite},function(t){s=t.Msg},function(t){a=t.UICom},function(t){r=t.UtilNode},function(t){g=t.DataGameInst},function(t){h=t.Level},function(t){l=t.ResCache},function(t){_=t.UIBind}],execute:function(){n._RF.push({},"a6388QjPW1HiblQ68zjxBQl","grp-bag",void 0),_.on("grp_bag",(function(t){return new c(t)}));var c=t("GrpBag",function(t){function n(i){var n;if((n=t.call(this,i)||this).list=void 0,n.img_highlight=void 0,n.img_highlight=r.getChildByName(n._node,"img_highlight"),null==n.img_highlight&&null===n.img_highlight)throw new Error(""+n._node.name);var e=g._data.count_bag_count;n.list=new Array(e);var o=r.getChildByName(n._node,"items_root");n.img_highlight.active=!1;for(var a=0;a<o.children.length;a++)n.list[a]=new u(o.children[a],a+1);return s.on("msg_update_bag",(function(){var t=h.Instance._player;if(t){for(var i=t._data.items,e=t._data.equipment_name_list,o=0;o<n.list.length;o++){var a=e[o],r=n.list[o],g=a.length>0;if(r.setDisplay(g),g){var l=i[a];r.setInfo(l)}}s.emit("msg_grp_bag",255)}})),s.on("msg_change_equip",(function(){var t=h.Instance._player;if(t){var i=t._data.current_equipment_index,e=-1!==i;if(n.img_highlight.active=e,e){var o=n.list[i]._node.position;n.img_highlight.setPosition(o.x,o.y,o.z)}s.emit("msg_grp_bag",255)}})),n}return i(n,t),n.prototype.on=function(){var t=h.Instance._player;if(t)for(var i=t._data.items,n=t._data.equipment_name_list,e=0;e<this.list.length;e++){var o=n[e],s=this.list[e],a=o.length>0;if(s.setDisplay(a),a){var r=i[o];s.setInfo(r)}}},n}(a)),u=function(){function t(t,i){this.txt_nun=void 0,this.img_icon=void 0,this._node=void 0,this.index=void 0,this._node=t,this.index=i,this.txt_nun=r.getChildComponent(this._node,"txt_num",e),this.txt_nun.string=""+this.index,this.img_icon=r.getChildComponent(this._node,"img_icon",o),this.setDisplay(!1)}var i=t.prototype;return i.setDisplay=function(t){this.img_icon.node.active=t},i.setInfo=function(t){this.img_icon.spriteFrame=l.Instance.getSprite("img_icon_"+t.name)},t}();n._RF.pop()}}}));

System.register("chunks:///_virtual/grp-change-equips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ui-com.ts","./util2.ts","./msg.ts","./level.ts","./res-cache.ts","./ui-bind.ts"],(function(e){var n,i,t,r,s,a,c,h,o,u;return{setters:[function(e){n=e.inheritsLoose,i=e.assertThisInitialized},function(e){t=e.cclegacy,r=e.Sprite},function(e){s=e.UICom},function(e){a=e.UtilNode},function(e){c=e.Msg},function(e){h=e.Level},function(e){o=e.ResCache},function(e){u=e.UIBind}],execute:function(){t._RF.push({},"20110jl30tDn7MtGfSK71Yb","grp-change-equips",void 0),u.on("grp_change_equips",(function(e){return new g(e)}));var g=e("GrpChangeEquips",function(e){function t(n){var t;(t=e.call(this,n)||this).heighLights=void 0,t.icons=[],t.heighLights=a.getChildByName(t._node,"heigh_lights").children;for(var s=a.getChildByName(t._node,"icons").children,h=0;h<s.length;h++){var o,u=s[h].getComponent(r);null==(o=t.icons)||o.push(u)}return c.on("msg_refresh_change_equip",t.refreshChangeEquip.bind(i(t))),t}n(t,e);var s=t.prototype;return s.on=function(){this.refreshChangeEquip()},s.refreshChangeEquip=function(){var e=h.Instance._player;if(e)for(var n=e._data.items,i=e._data.equipment_name_list,t=e._data.current_equipment_index,r=0;r<4;r++){var s=i[r];this.heighLights[r].active=t==r;var a=this.icons[r];if(s.length>0){var c=n[s];a.spriteFrame=o.Instance.getSprite("img_icon_"+c.name)}else a.spriteFrame=null}},t}(s));t._RF.pop()}}}));

System.register("chunks:///_virtual/grp-dev-move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ui-com.ts","./util2.ts","./game-set.ts","./msg.ts","./ui-bind.ts"],(function(e){var t,n,i,o,_,l,c,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e.EditBox},function(e){o=e.UICom},function(e){_=e.UtilNode},function(e){l=e.GameSet},function(e){c=e.Msg},function(e){s=e.UIBind}],execute:function(){n._RF.push({},"78edcwLcCBE6ZOqDv2YftX8","grp-dev-move",void 0),s.on("grp_dev_move",(function(e){return new r(e)}));var r=e("GrpDevMove",function(e){function n(t){var n;return(n=e.call(this,t)||this).inp_move_value_list=void 0,n.inp_move_accelerate_list=void 0,n.inp_screen_to_angle=void 0,n.inp_accelerate_point=void 0,n.inp_move_value_list=_.getChildComponent(n._node,"inp_move_value_list",i),n.inp_move_accelerate_list=_.getChildComponent(n._node,"inp_move_accelerate_list",i),n.inp_screen_to_angle=_.getChildComponent(n._node,"inp_screen_to_angle",i),n.inp_accelerate_point=_.getChildComponent(n._node,"inp_accelerate_point",i),n}t(n,e);var o=n.prototype;return o.on=function(){this.inp_move_value_list.string=l.Instance.move_value_list.toString(),this.inp_move_accelerate_list.string=l.Instance.move_accelerate_list.toString(),this.inp_screen_to_angle.string=l.Instance.screen_to_angle.toString(),this.inp_accelerate_point.string=l.Instance.accelerate_point.toString()},o.off=function(){var e,t,n,i;c.emit("inp_move_value_list",null==(e=this.inp_move_value_list)?void 0:e.string),c.emit("inp_move_accelerate_list",null==(t=this.inp_move_accelerate_list)?void 0:t.string),c.emit("inp_screen_to_angle",null==(n=this.inp_screen_to_angle)?void 0:n.string),c.emit("inp_accelerate_point",null==(i=this.inp_accelerate_point)?void 0:i.string)},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/grp-equip-info.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ui-com.ts","./util2.ts","./msg.ts","./level.ts","./ui-bind.ts"],(function(t){var n,i,e,u,o,r,_,f;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t.Label},function(t){u=t.UICom},function(t){o=t.UtilNode},function(t){r=t.Msg},function(t){_=t.Level},function(t){f=t.UIBind}],execute:function(){i._RF.push({},"056bc1lQsRMw49eWrTBKDJ7","grp-equip-info",void 0),f.on("grp_equip_info",(function(t){return new s(t)}));var s=t("GrpEquipInfo",function(t){function i(n){var i;return(i=t.call(this,n)||this).txt_equip_info=void 0,i.txt_equip_info=o.getChildComponent(i._node,"txt_equip_info",e),r.on("msg_update_equip_info",(function(){var t=_.Instance._player;if(t){var n=t._data.items,e=t._data.equipment_name_list,u=t._data.current_equipment_index;if(-1!==u){var o=e[u],f=n[o];if(""!==o){var s=f.data.bullet_count>1;if(r.emit("msg_grp_equip_info",s?255:0),s){var c=f.bulletCount;c<0&&(c=0),i.txt_equip_info.string=c+"/"+t.bulletBox}}}}})),i}return n(i,t),i}(u));i._RF.pop()}}}));

System.register("chunks:///_virtual/grp-gm.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ui-com.ts","./util2.ts","./gm.ts","./ui-bind.ts"],(function(n){var t,i,o,e,u,r,c,g;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy,o=n.EditBox,e=n.Button},function(n){u=n.GrpBase},function(n){r=n.UtilNode},function(n){c=n.GM},function(n){g=n.UIBind}],execute:function(){i._RF.push({},"2912b/cj/9Aa4cPUfIVAk+w","grp-gm",void 0),g.on("grp_gm",(function(n){return new s(n)}));var s=n("GrpGM",function(n){function i(t){var i;return(i=n.call(this,t)||this).btn_gm=void 0,i.inp_gm=void 0,i.btn_gm=r.getChildByName(i._node,"btn_gm"),i.inp_gm=r.getChildComponent(i._node,"inp_gm",o),i.btn_gm.on(e.EventType.CLICK,(function(){c.run(i.inp_gm.string)})),i}return t(i,n),i}(u));i._RF.pop()}}}));

System.register("chunks:///_virtual/grp-guide.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./guide.ts","./sound.ts","./ui-com.ts","./ui-bind.ts"],(function(n){var e,i,t,r,u,o,s,c;return{setters:[function(n){e=n.inheritsLoose,i=n.assertThisInitialized},function(n){t=n.cclegacy},function(n){r=n.Msg},function(n){u=n.Guide},function(n){o=n.Sound},function(n){s=n.GrpBase},function(n){c=n.UIBind}],execute:function(){t._RF.push({},"ba7a5vo/6VNW6K66cEmiRar","grp-guide",void 0),c.on("grp_guide",(function(n){return new d(n)}));var d=n("GrpGuide",function(n){function t(e){var t;return t=n.call(this,e)||this,r.on("guide_refresh",t.guide_refresh.bind(i(t))),t}e(t,n);var s=t.prototype;return s.on=function(){this.guide_refresh()},s.guide_refresh=function(){for(var n=0;n<this._node.children.length;n++)this._node.children[n].active=!1;var e=this._node.getChildByName(u.Instance._cur_name);null==e?console.error("error guide name:",u.Instance._cur_name):(e.active=!0,o.on("sfx_notify_tip"))},t}(s));t._RF.pop()}}}));

System.register("chunks:///_virtual/grp-map.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ui-com.ts","./util2.ts","./res.ts","./msg.ts","./level.ts","./ui-bind.ts"],(function(n){var t,i,e,o,s,r,a,c,u,p;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy,e=n.v3},function(n){o=n.UICom},function(n){s=n.UtilNode,r=n.UtilVec3},function(n){a=n.Res},function(n){c=n.Msg},function(n){u=n.Level},function(n){p=n.UIBind}],execute:function(){i._RF.push({},"b6759HF9rxMwYE+HmPeObIP","grp-map",void 0),p.on("grp_map",(function(n){return new l(n)}));var l=n("GrpMap",function(n){function i(t){var i;(i=n.call(this,t)||this).list=void 0,i.map=void 0,i.map=s.find(i._node,"map");var o=s.find(i._node,"img_enemy_point");i.list=new Array(20),i.list[0]=o;for(var p=1;p<20;p++){var l=a.instNode(o,o.parent,e(1e4,0,0));i.list[p]=l}var f=e(0,0,0),v=1158*.2/110,m=234.4/110;return c.on("msg_update_map",(function(){var n=u.Instance._player;if(void 0!==n&&n.node){r.copy(f,n.node.position);var t=f.x*v,e=f.z*m;f.z=0,f.x=-e,f.y=-t,i.map.setPosition(f)}for(var o=u.Instance._enemies,s=o.length,a=0;a<20;a++){var c=a<s,p=i.list[a];if(c){r.copy(f,o[a].position);var l=f.x*v,d=f.z*m;f.z=0,f.x=d,f.y=l,i.list[a].setPosition(f.x,f.y,f.z)}else p.setPosition(1e4,0,0)}})),i}return t(i,n),i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/grp-picked-tips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res.ts","./ui-com.ts","./data-structure.ts","./data-core.ts","./util2.ts","./msg.ts","./ui-bind.ts"],(function(t){var i,n,e,s,o,r,c,u,d,a;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.Label},function(t){s=t.Res},function(t){o=t.UICom},function(t){r=t.Queue},function(t){c=t.DataGameInst},function(t){u=t.UtilNode},function(t){d=t.Msg},function(t){a=t.UIBind}],execute:function(){n._RF.push({},"69915RrU81KW7EZRZOpIlC5","grp-picked-tips",void 0),a.on("grp_picked_tips",(function(t){return new f(t)}));var f=t("GrpPickedTips",function(t){function n(i){var n;(n=t.call(this,i)||this).list=void 0,n.msgs=void 0,n.index=0;var e=c._data.count_picked_info;n.list=new Array(e),n.msgs=new r(e);for(var o=n._node.children[0],u=0;u<e;u++){var a=s.instNode(o,n._node);n.list[u]=new p(a)}return o.active=!1,d.on("msg_tips",(function(t){n._node.children[0].setSiblingIndex(e),n.list[n.index].refresh(t),n.index++,n.index>=e&&(n.index=0)})),n}return i(n,t),n}(o)),p=function(){function t(t){this.txt_info=void 0,this._node=void 0,this._node=t,this.txt_info=u.getChildComponent(this._node,"txt_info",e),this.setDisplay(!1)}var i=t.prototype;return i.refresh=function(t){this.txt_info.string=t,this.setDisplay(!0)},i.setDisplay=function(t){this._node.active=t},t}();n._RF.pop()}}}));

System.register("chunks:///_virtual/grp-select-equips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ui-com.ts","./util2.ts","./data-core.ts","./res.ts","./msg.ts","./level.ts","./res-cache.ts","./ui-bind.ts"],(function(t){var i,n,e,o,s,c,a,r,u,_,l,g,h,d,m,f;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.v2,o=t.math,s=t.v3,c=t.Vec2,a=t.Label,r=t.Sprite},function(t){u=t.UICom},function(t){_=t.UtilNode},function(t){l=t.DataGameInst},function(t){g=t.Res},function(t){h=t.Msg},function(t){d=t.Level},function(t){m=t.ResCache},function(t){f=t.UIBind}],execute:function(){n._RF.push({},"88993vRTlBOi4o2srRVRKfw","grp-select-equips",void 0),f.on("grp_select_equips",(function(t){return new p(t)}));var p=t("GrpSelectEquips",function(t){function n(i){var n;(n=t.call(this,i)||this).list=void 0,n.img_select_highlight=void 0,n._curIndex=-1;var a=l._data.count_bag_count;n.list=new Array(a);var r=360/a;n.img_select_highlight=_.getChildByName(n._node,"img_select_highlight"),n.img_select_highlight.setPosition(1e5,0,0);for(var u=_.getChildByName(n._node,"img_items"),d=u.position.x,m=r/2,f=e(1,0),p=function(t){return{x:Math.cos(t)*d,y:Math.sin(t)*d}},x=0;x<a;x++){var y=r*x+m,I=o.toRadian(y),R=p(I),C=g.instNode(u,n._node,s(R.x,R.y,0));n.list[x]=new v(C,y-90)}return u.active=!1,h.on("msg_select_equip",(function(t){var i=o.toDegree(c.angle(t,f)),s=e(0,1);c.dot(s,t)<0&&(i=360-i),n._curIndex=Math.round(i/r),n._curIndex>=l._data.count_bag_count&&(n._curIndex=l._data.count_bag_count-1);var a=o.toRadian(n._curIndex*r+m),u=p(a);n.img_select_highlight.setPosition(u.x,u.y,0),n.img_select_highlight.setRotationFromEuler(0,0,n.list[n._curIndex]._angle)})),n}i(n,t);var a=n.prototype;return a.on=function(){var t=d.Instance._player;if(t)for(var i=t._data.items,n=t._data.equipment_name_list,e=0;e<this.list.length;e++){var o=n[e],s=this.list[e],c=o.length>0;if(s.setDisplay(c),c){var a=i[o];s.setInfo(a)}}},a.off=function(){d.Instance._player&&d.Instance._player.onEquip(this._curIndex)},n}(u)),v=function(){function t(t,i){this.txt_nun=void 0,this.img_icon=void 0,this._node=void 0,this._angle=void 0,this._angle=i,this._node=t,_.getChildByName(this._node,"img_bg").setRotationFromEuler(0,0,i),this.txt_nun=_.getChildComponent(this._node,"txt_num",a),this.img_icon=_.getChildComponent(this._node,"img_icon",r)}var i=t.prototype;return i.setDisplay=function(t){this.txt_nun.node.active=t,this.img_icon.node.active=t},i.setInfo=function(t){this.txt_nun.string=t.count.toString(),this.img_icon.spriteFrame=m.Instance.getSprite("img_icon_"+t.name)},t}();n._RF.pop()}}}));

System.register("chunks:///_virtual/guide.ts",["./rollupPluginModLoBabelHelpers.js","cc","./save.ts","./singleton.ts","./res-cache.ts","./msg.ts"],(function(i){var e,t,n,s,u,_,o;return{setters:[function(i){e=i.inheritsLoose},function(i){t=i.cclegacy,n=i.sys},function(i){s=i.Save},function(i){u=i.Singleton},function(i){_=i.ResCache},function(i){o=i.Msg}],execute:function(){t._RF.push({},"e0abe+1xBVJh6+JbU4kWXkb","guide",void 0);i("Guide",function(i){function t(){for(var e,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return(e=i.call.apply(i,[this].concat(n))||this)._data={},e._cur_index=-1,e._guide_name="",e._cur=[],e._cur_name="",e.isGuide=!1,e}e(t,i);var u=t.prototype;return u.init=function(){var i=this;this._data=_.Instance.getJson("data-guide").json,o.on("guide_control",(function(){var e="guide_keyboard";n.platform!==n.Platform.MOBILE_BROWSER&&n.platform!==n.Platform.ANDROID&&n.platform!==n.Platform.IOS||(e="guide_joystick"),i.set_guide(e)})),o.on("guide_set",this.set_guide.bind(this)),o.on("guide_next",this.next.bind(this)),o.on("guide_force_set",this.guide_force_set.bind(this))},u.set_guide=function(i){"guide_control"==i&&(i="guide_keyboard",n.platform!==n.Platform.MOBILE_BROWSER&&n.platform!==n.Platform.ANDROID&&n.platform!==n.Platform.IOS||(i="guide_joystick")),this._guide_name=i,void 0===s.Instance._cur.guide_info&&(s.Instance._cur.guide_info={}),s.Instance._cur.guide_info[this._guide_name]?console.log("has guide:",this._guide_name):(this.isGuide=!0,this._cur=this._data[this._guide_name],this._cur_index=-1,this.next(),o.emit("msg_ui_on","ui_guide"))},u.guide_force_set=function(i){this._guide_name=i,this.isGuide=!0,this._cur=this._data[this._guide_name],this._cur_index=-1,this.next(),o.emit("msg_ui_on","ui_guide")},u.next=function(){if(this._cur_index++,this._cur_index>=this._cur.length-1){o.emit("msg_ui_off","ui_guide"),s.Instance._cur.guide_info[this._guide_name]=!0,this.isGuide=!1;var i=this._cur[this._cur_index];""!==i&&o.emit(i),o.emit("msg_save_archive")}else this._cur_name=this._cur[this._cur_index],o.emit("guide_refresh")},t}(u));t._RF.pop()}}}));

System.register("chunks:///_virtual/gun-tracer-pool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res.ts","./msg.ts"],(function(t){var o,e,i,r,n,s,c,l,a,p;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,c=t.CCFloat,l=t.Component},function(t){a=t.Res},function(t){p=t.Msg}],execute:function(){var u,h,d,f,g;n._RF.push({},"b3707XGtb1OgI4JAKVGo7zf","gun-tracer-pool",void 0);var y=s.ccclass,v=s.property;t("GunTracerPool",(u=y("GunTracerPool"),h=v({type:c,tooltip:"The depth of the object pool."}),u((g=o((f=function(t){function o(){for(var o,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return o=t.call.apply(t,[this].concat(n))||this,i(o,"poolCount",g,r(o)),o.pool=void 0,o.index=0,o}e(o,t);var n=o.prototype;return n.start=function(){this.pool=new Array(this.poolCount);var t=this.node.children[0];this.pool[0]=t;for(var o=1;o<this.poolCount;o++)this.pool[o]=a.instNode(t,this.node),this.pool[o].emit("init");t.emit("init"),p.on("msg_set_tracer",this.setTracer.bind(this))},n.setTracer=function(t){this.pool[this.index].emit("setTracer",t.start,t.end),this.index++,this.index>=this.poolCount&&(this.index=0)},o}(l)).prototype,"poolCount",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),d=f))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/halton.ts",["cc"],(function(e){var t,n,c;return{setters:[function(e){t=e.cclegacy,n=e.Vec2,c=e.Vec3}],execute:function(){t._RF.push({},"e4b6fSaGodA+5ssbWI7IwWl","halton",void 0);var i=e("HaltonSeq",function(){function e(){}return e.Get=function(e,t){var n=e+"_"+t,c=this.cache.get(n);if(!c){var i=1/t;for(c=0;e>0;)c+=e%t*i,e/=t,i/=t;this.cache.set(n,c)}return c},e}());i.cache=new Map;var s=e("HaltonUtils",function(){function e(){this.sampleIndex=0,this._tempVec2=new n,this._tempVec3=new c}var t=e.prototype;return t.Generate2DRandomOffset=function(e,t){return void 0===e&&(e=8),void 0===t&&(t=this.sampleIndex++),t%=e,this._tempVec2.set(i.Get(1+(1023&t),2)-.5,i.Get(1+(1023&t),3)-.5),this._tempVec2},t.Generate3DRandomOffset=function(e,t){return void 0===e&&(e=8),void 0===t&&(t=this.sampleIndex++),t%=e,this._tempVec3.set(i.Get(1+(1023&t),2)-.5,i.Get(1+(1023&t),3)-.5,i.Get(1+(1023&t),5)-.5),this._tempVec3},e}());s.instance=new s,t._RF.pop()}}}));

System.register("chunks:///_virtual/height-fog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./camera-setting.ts"],(function(t){var e,o,i,r,n,a,s,f,g,c,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty,i=t.inheritsLoose,r=t.assertThisInitialized,n=t.createClass},function(t){a=t.cclegacy,s=t._decorator,f=t.Vec4,g=t.Color,c=t.clamp,l=t.Component},function(t){p=t.CameraSetting}],execute:function(){var u,y,h,_,D,b,d,m,C,w,H,P,F,O,x,I,z,v;a._RF.push({},"87538/f4rtLtJp8PNcBmYMH","height-fog",void 0);var M=s.ccclass,j=s.property,k=s.type,S=s.executeInEditMode,E=function(){this.Height=0,this.Density=0,this.HeightFalloff=0},B=[new E,new E],T=new f,A=new Array(2).fill(0),L=new g,U=(new Array(4).fill(0),t("fogUBO",{fog_Parameters:new f,fog_Parameters2:new f,fog_Parameters3:new f,fog_ColorParameters:new f,update:function(t){t.setProperty("fog_Parameters",this.fog_Parameters),t.setProperty("fog_Parameters2",this.fog_Parameters2),t.setProperty("fog_Parameters3",this.fog_Parameters3),t.setProperty("fog_ColorParameters",this.fog_ColorParameters)},reset:function(){this.fog_Parameters.w=1e6}})),R=t("SecondExponentialHeightFog",M("SecondExponentialHeightFog")((h=e((y=function(){o(this,"fogDensity",h,this),o(this,"fogHeightFalloff",_,this),o(this,"fogHeightOffset",D,this)}).prototype,"fogDensity",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.02}}),_=e(y.prototype,"fogHeightFalloff",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),D=e(y.prototype,"fogHeightOffset",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=y))||u);t("ExponentialHeightFog",(b=M("ExponentialHeightFog"),d=k(R),m=k(R),b(C=S(((v=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._dirty=!0,o(e,"_fogDensity",H,r(e)),o(e,"_fogHeightFalloff",P,r(e)),o(e,"_secondFogData",F,r(e)),o(e,"_fogInscatteringColor",O,r(e)),o(e,"_fogMaxOpacity",x,r(e)),o(e,"_startDistance",I,r(e)),o(e,"_fogCutoffDistance",z,r(e)),e.inscatteringColorCubemap=null,e.inscatteringTextureTint=new f,e}i(e,t);var a=e.prototype;return a.onEnable=function(){this._dirty=!0,e.instance=this},a.onDisable=function(){e.instance===this&&(e.instance=void 0),U.reset()},a.update=function(){this._dirty&&(this._dirty=!1,this.updateUBO())},a.updateFogData=function(){var t=this.secondFogData;B[0].Height=this.node.worldPosition.z,B[1].Height=B[0].Height+t.fogHeightOffset,B[0].Density=this.fogDensity/10,B[0].HeightFalloff=this.fogHeightFalloff/10,B[1].Density=t.fogDensity/10,B[1].HeightFalloff=t.fogHeightFalloff/10,T=this.inscatteringColorCubemap?this.inscatteringTextureTint:this.fogInscatteringColor},a.updateUBO=function(){this.updateFogData();for(var t=1e6,e=0;e<2;e++)B[e].Density>0&&(t=Math.min(t,B[e].Height+65536));var o=10,i=p.mainCamera;i&&(o=Math.min(i.node.worldPosition.y,t));for(var r=0;r<A.length;r++){var n=c(-B[r].HeightFalloff*(o-B[r].Height),-125,126);A[r]=B[r].Density*Math.pow(2,n)}U.fog_Parameters.set(A[0],B[0].HeightFalloff,t,this.startDistance),U.fog_Parameters2.set(A[1],B[1].HeightFalloff,B[1].Density,B[1].Height),U.fog_Parameters3.set(B[0].Density,B[0].Height,this.inscatteringColorCubemap?1:0,this.fogCutoffDistance),U.fog_ColorParameters.set(T.x,T.y,T.z,1-this.fogMaxOpacity)},n(e,[{key:"fogDensity",get:function(){return this._fogDensity},set:function(t){this._fogDensity=t,this._dirty=!0}},{key:"fogHeightFalloff",get:function(){return this._fogHeightFalloff},set:function(t){this._fogHeightFalloff=t,this._dirty=!0}},{key:"secondFogData",get:function(){return this._secondFogData},set:function(t){this._secondFogData=t,this._dirty=!0}},{key:"fogInscatteringColor",get:function(){return this._fogInscatteringColor},set:function(t){this._fogInscatteringColor=t,this._dirty=!0}},{key:"fogInscatteringColorSetter",get:function(){return L.set(255*this._fogInscatteringColor.x,255*this._fogInscatteringColor.y,255*this._fogInscatteringColor.z,255*this._fogInscatteringColor.w),L},set:function(t){this._fogInscatteringColor.set(t.x,t.y,t.z,t.w),this._dirty=!0}},{key:"fogMaxOpacity",get:function(){return this._fogMaxOpacity},set:function(t){this._fogMaxOpacity=t,this._dirty=!0}},{key:"startDistance",get:function(){return this._startDistance},set:function(t){this._startDistance=t,this._dirty=!0}},{key:"fogCutoffDistance",get:function(){return this._fogCutoffDistance},set:function(t){this._fogCutoffDistance=t,this._dirty=!0}}]),e}(l)).instance=void 0,H=e((w=v).prototype,"_fogDensity",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.02}}),e(w.prototype,"fogDensity",[j],Object.getOwnPropertyDescriptor(w.prototype,"fogDensity"),w.prototype),P=e(w.prototype,"_fogHeightFalloff",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),e(w.prototype,"fogHeightFalloff",[j],Object.getOwnPropertyDescriptor(w.prototype,"fogHeightFalloff"),w.prototype),F=e(w.prototype,"_secondFogData",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new R}}),e(w.prototype,"secondFogData",[m],Object.getOwnPropertyDescriptor(w.prototype,"secondFogData"),w.prototype),O=e(w.prototype,"_fogInscatteringColor",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new f}}),e(w.prototype,"fogInscatteringColor",[j],Object.getOwnPropertyDescriptor(w.prototype,"fogInscatteringColor"),w.prototype),e(w.prototype,"fogInscatteringColorSetter",[j],Object.getOwnPropertyDescriptor(w.prototype,"fogInscatteringColorSetter"),w.prototype),x=e(w.prototype,"_fogMaxOpacity",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(w.prototype,"fogMaxOpacity",[j],Object.getOwnPropertyDescriptor(w.prototype,"fogMaxOpacity"),w.prototype),I=e(w.prototype,"_startDistance",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(w.prototype,"startDistance",[j],Object.getOwnPropertyDescriptor(w.prototype,"startDistance"),w.prototype),z=e(w.prototype,"_fogCutoffDistance",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(w.prototype,"fogCutoffDistance",[j],Object.getOwnPropertyDescriptor(w.prototype,"fogCutoffDistance"),w.prototype),C=w))||C)||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/hidden-state.ts",["./rollupPluginModLoBabelHelpers.js","cc","./href-setting.ts"],(function(t){var e,n,o,i,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.profiler,r=t.Component},function(t){s=t.HrefSetting}],execute:function(){var c;n._RF.push({},"9b8a5EJoJJGxo/JhU1NYhoJ","hidden-state",void 0);var u=o.ccclass;t("HiddenState",u("HiddenState")(c=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.__preload=function(){s.showFps&&i.hideStats()},n}(r))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/href-setting.ts",["cc","./env","./gpu.ts"],(function(e){var a,s,n,t,o;return{setters:[function(e){a=e.cclegacy,s=e.game,n=e.sys},function(e){t=e.JSB},function(e){o=e.getGpuInfo}],execute:function(){a._RF.push({},"a174axjYy5ORbTaQNNrjHse","href-setting",void 0);var r=e("HrefSetting",{settings:0,graph:0,pauseGraphAfterLoad:1,spector:0,shadingScale:1,zoomScreen:0,bloom:1,showFps:1,fps:60,transparent:1,clusterLighting:1,forceUpdateLighting:0,ibl:1,shadow:0,fsr:1,fog:1,taa:1,taaMask:1,fxaa:1,fullScene:1,debugAlbedo:0,debugNormal:0,maxEnemies:4,sceneParticles:1});globalThis.HrefSetting=r;var i=e("changedMap",new Map),c=(window&&window.location&&window.location.href).split("?")[1];if(c){var l=c.match(/([a-zA-Z]+=[0-9\.]+)/g);l&&l.forEach((function(e){var a=e.split("="),s=Number.parseFloat(a[1]);"number"==typeof s&&(r[a[0]]=s,i.set(a[0],!0))}))}s.canvas&&o().then((function(e){var a=e.gpuScore,o=e.gpuVersion,i=e.gpuType,c=[{score:1e6,fps:30},{score:2e3,shadingScale:Math.min(1240/s.canvas.width,1),bloom:0,fxaa:0},{score:1200,shadingScale:Math.min(1024/s.canvas.width,1)},{score:500,gpu:[["apple","a10"]],fsr:0,taa:0,maxEnemies:2,sceneParticles:0,fullScene:0}],l=[{score:1e6,fps:60},{score:400,shadingScale:.7},{score:200,shadingScale:Math.min(1024/s.canvas.width,1),bloom:0},{score:60,fsr:0,fxaa:0,maxEnemies:2,sceneParticles:0}],g=[];g=n.isMobile?c:l;for(var f=0;f<g.length;f++){var h=g[f],p=!1;if(a<h.score&&(p=!0),h.gpu)for(var u=0;u<h.gpu.length;u++){var d=h.gpu[u];if(d[0]===i&&d[1]===o){p=!0,console.log("Force use gpu setting : "+d);break}}if(p)for(var m in h)m in r&&(r[m]=h[m])}n.platform!==n.Platform.IOS&&n.platform!==n.Platform.MACOS||(r.sceneParticles=0),console.log("canvas size "+s.canvas.width+", "+s.canvas.height),console.log("rendering size "+s.canvas.width*r.shadingScale+", "+s.canvas.height*r.shadingScale),s.frameRate=r.fps,n.isMobile&&!t&&(r.transparent=0),console.log(r)})),a._RF.pop()}}}));

System.register("chunks:///_virtual/IActorInput.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"4c668DK8NlM14ABpFbNM9A/","IActorInput",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ik-bone.ts",["./rollupPluginModLoBabelHelpers.js","cc","./math-util.ts","./ik-point.ts"],(function(t){var o,n,i,e,r,s,l;return{setters:[function(t){o=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,e=t.Vec3,r=t.Quat},function(t){s=t.default},function(t){l=t.default}],execute:function(){i._RF.push({},"49588gI2E5DAKKyVsZe9hn8","ik-bone",void 0);var a=new e,u=new e,f=new r,c=new r;t("default",function(t){function i(o,n){var i;return void 0===o&&(o=null),void 0===n&&(n=null),(i=t.call(this)||this).length=0,i.sqrMag=0,i.axis=new e(1,0,0),o&&(i.node=o),n&&(i.weight=n),i}o(i,t);var l=i.prototype;return l.swing=function(t,o){if(void 0===o&&(o=1),!(o<=0)){var n;if(e.subtract(a,t,this.node.getWorldPosition()),e.transformQuat(u,this.axis,this.node.getWorldRotation()),s.fromToRotation(f,u,a),o>=1)return r.multiply(f,f,this.node.getWorldRotation()),void(null==(n=this.node)||n.setWorldRotation(f));s.quatLerp(f,r.IDENTITY,f,o),r.multiply(f,f,this.node.getWorldRotation()),this.node.setWorldRotation(f)}},i.solverSwing=function(t,o,n,i){if(void 0===i&&(i=1),!(i<=0))if(e.subtract(a,n,t[o].solverPosition),e.transformQuat(u,t[o].axis,t[o].solverRotation),s.fromToRotation(f,u,a),i>=1)for(var l=o;l<t.length;l++)r.multiply(t[l].solverRotation,f,t[o].solverRotation);else for(var d=o;d<t.length;d++)s.quatLerp(c,r.IDENTITY,f,i),r.multiply(t[d].solverRotation,c,t[o].solverRotation)},l.setToSolverPosition=function(){var t;null==(t=this.node)||t.setWorldPosition(this.solverPosition)},n(i,[{key:"rotationLimit",get:function(){return null},set:function(t){}}]),i}(l));i._RF.pop()}}}));

System.register("chunks:///_virtual/ik-point.ts",["cc"],(function(t){var o,i,n;return{setters:[function(t){o=t.cclegacy,i=t.Vec3,n=t.Quat}],execute:function(){o._RF.push({},"bf978Ydm4FC+7w6TwGOem05","ik-point",void 0);t("default",function(){function t(){this.node=null,this.weight=1,this.solverPosition=new i,this.solverRotation=new n,this.defaultLocalPosition=new i,this.defaultLocalRotation=new n}var o=t.prototype;return o.storeDefaultLocalState=function(){var t,o;null==(t=this.node)||t.getPosition(this.defaultLocalPosition),null==(o=this.node)||o.getRotation(this.defaultLocalRotation)},o.fixTransform=function(){var t,o,i,n;null!=(t=this.node)&&t.position.equals(this.defaultLocalPosition)||(null==(i=this.node)||i.setPosition(this.defaultLocalPosition));null!=(o=this.node)&&o.rotation.equals(this.defaultLocalRotation)||(null==(n=this.node)||n.setRotation(this.defaultLocalRotation))},o.updateSolverPosition=function(){var t;null==(t=this.node)||t.getWorldPosition(this.solverPosition)},o.updateSolverState=function(){var t,o;null==(t=this.node)||t.getWorldPosition(this.solverPosition),null==(o=this.node)||o.getWorldRotation(this.solverRotation)},o.updateSolverLocalState=function(){var t,o;null==(t=this.node)||t.getPosition(this.solverPosition),null==(o=this.node)||o.getRotation(this.solverRotation)},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/ik-solver-aim.ts",["./rollupPluginModLoBabelHelpers.js","cc","./math-util.ts","./ik-solver-heuristic.ts"],(function(t){var i,o,e,s,n,a,r,l,h,m,c,p,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,s=t.assertThisInitialized,n=t.createClass},function(t){a=t.cclegacy,r=t._decorator,l=t.Vec3,h=t.Quat,m=t.Node,c=t.log},function(t){p=t.default},function(t){u=t.default}],execute:function(){var d,g,f,P,b,W,y,x,A,w,N,T,_,k,v,z,I,K,R,D,S;a._RF.push({},"b50c3ycqQRKUKFzVZHV0Nzn","ik-solver-aim",void 0);var L=r.ccclass,M=r.property,V=new l,q=new l,C=new l,Q=new h;new h,t("default",(d=L("IKSolverAim"),g=M({type:m,tooltip:"The transform that we want to aim at ikPosition."}),f=M({type:m,tooltip:"The transform that we want to aim at ikPosition."}),P=M({tooltip:"The local axis of the Transform that you want to be aimed at ikPosition."}),b=M({tooltip:"Keeps that axis of the Aim Transform directed at the polePosition."}),W=M({tooltip:"The position in world space to keep the pole axis of the Aim Transform directed at"}),y=M({tooltip:"The weight of the Pole."}),x=M({type:m,tooltip:"If assigned, will automatically set polePosition to the position of this Transform."}),A=M({tooltip:"Clamping rotation of the solver. 0 is free rotation, 1 is completely clamped to transform axis."}),w=M({tooltip:"Number of sine smoothing iterations applied to clamping to make it smoother"}),d((_=i((T=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return i=t.call.apply(t,[this].concat(n))||this,e(i,"aimNode",_,s(i)),e(i,"rootNode",k,s(i)),e(i,"axis",v,s(i)),e(i,"poleAxis",z,s(i)),e(i,"polePosition",I,s(i)),e(i,"poleWeight",K,s(i)),e(i,"poleTarget",R,s(i)),e(i,"clampWeight",D,s(i)),e(i,"clampSmoothing",S,s(i)),i.minBones=1,i._step=0,i._clampedIKPosition=new l,i._lastNode=null,i._transformPoleAxis=new l,i._transformAxis=new l,i}o(i,t);var a=i.prototype;return a.getAngle=function(){return l.subtract(C,this.ikPosition,this.aimNode.getWorldPosition()),p.radiansToDegrees(l.angle(this.transformAxis,C))},a.onInitiate=function(){this.firstInitiation&&null!=this.aimNode&&(l.add(this.ikPosition,this.aimNode.getWorldPosition(),this.transformAxis.multiplyScalar(3)),l.add(this.polePosition,this.aimNode.getWorldPosition(),this.transformPoleAxis.multiplyScalar(3))),this._step=1/this.bones.length,this.axis.normalize()},a.onUpdate=function(){if(this.axis.equals(l.ZERO))c("IKSolverAim axis is Vector3.zero.");else if(this.poleAxis.equals(l.ZERO)&&this.poleWeight>0)c("IKSolverAim poleAxis is Vector3.zero.");else if(null!=this.target&&this.target.getWorldPosition(this.ikPosition),null!=this.poleTarget&&this.poleTarget.getWorldPosition(this.polePosition),this.XY&&(this.ikPosition.z=this.bones[0].node.getWorldPosition().z),!(this.ikPositionWeight<=0))if(this.ikPositionWeight=p.clamp(this.ikPositionWeight,0,1),this.aimNode!=this._lastNode&&(this._lastNode=this.aimNode),null!=this.aimNode){this.clampWeight=p.clamp(this.clampWeight,0,1),this._clampedIKPosition=this._getClampedIKPosition(),l.subtract(V,this._clampedIKPosition,this.aimNode.getWorldPosition()),l.multiplyScalar(q,this.transformAxis,V.length()),p.sLerp(q,q,V,this.ikPositionWeight),l.add(this._clampedIKPosition,this.aimNode.getWorldPosition(),q);for(var t=0;t<this.maxIterations&&!(t>=1&&this.tolerance>0&&this.getAngle()<this.tolerance);t++)this.lastLocalDirection=l.clone(this.localDirection),this._solve();this.lastLocalDirection=l.clone(this.localDirection)}else c("Aim Transform unassigned in Aim IK solver. Please Assign a Transform (lineal descendant to the last bone in the spine) that you want to be aimed at ikPosition")},a._solve=function(){for(var t=0;t<this.bones.length-1;t++)this._rotateToTarget(this._clampedIKPosition,this.bones[t],this._step*(t+1)*this.ikPositionWeight*this.bones[t].weight);this._rotateToTarget(this._clampedIKPosition,this.bones[this.bones.length-1],this.ikPositionWeight*this.bones[this.bones.length-1].weight)},a._getClampedIKPosition=function(){if(this.clampWeight<=0)return l.clone(this.ikPosition);if(this.clampWeight>=1)return l.subtract(V,this.ikPosition,this.aimNode.getWorldPosition()),l.multiplyScalar(q,this.transformAxis,V.length()),l.add(C,this.aimNode.getWorldPosition(),q),l.clone(C);l.subtract(V,this.ikPosition,this.aimNode.getWorldPosition());for(var t=1-p.radiansToDegrees(l.angle(this.transformAxis,V))/180,i=this.clampWeight>0?p.clamp(1-(this.clampWeight-t)/(1-t),0,1):1,o=this.clampWeight>0?p.clamp(t/this.clampWeight,0,1):1,e=0;e<this.clampSmoothing;e++){var s=o*Math.PI*.5;o=Math.sin(s)}return l.subtract(V,this.ikPosition,this.aimNode.getWorldPosition()),l.multiplyScalar(q,this.transformAxis,10),p.sLerp(q,q,V,o*i),l.add(C,this.aimNode.getWorldPosition(),q),l.clone(C)},a._rotateToTarget=function(t,i,o){if(this.XY){if(o>=0){var e,s=this.transformAxis;l.subtract(V,t,this.aimNode.getWorldPosition());var n=p.radiansToDegrees(Math.atan2(s.x,s.y)),a=p.radiansToDegrees(Math.atan2(V.x,V.y)),r=p.deltaAngle(n,a);p.axisAngle(Q,new l(0,0,-1),r),h.multiply(Q,Q,i.node.getWorldRotation()),null==(e=i.node)||e.setRotation(Q)}}else o>=0&&(l.subtract(V,t,this.aimNode.getWorldPosition()),h.rotationTo(Q,this.transformAxis.normalize(),V.normalize()),o>=1?(h.multiply(Q,Q,i.node.getWorldRotation()),i.node.setWorldRotation(Q)):(p.quatLerp(Q,h.IDENTITY,Q,o),h.multiply(Q,Q,i.node.getWorldRotation()),h.normalize(Q,Q),i.node.setWorldRotation(Q))),this.poleWeight},n(i,[{key:"transformAxis",get:function(){return l.transformQuat(this._transformAxis,this.axis,this.aimNode.getWorldRotation()),l.clone(this._transformAxis)}},{key:"transformPoleAxis",get:function(){return l.transformQuat(this._transformPoleAxis,this.poleAxis,this.aimNode.getWorldRotation())}}]),i}(u)).prototype,"aimNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(T.prototype,"rootNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(T.prototype,"axis",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(0,0,1)}}),z=i(T.prototype,"poleAxis",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(0,1,0)}}),I=i(T.prototype,"polePosition",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),K=i(T.prototype,"poleWeight",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=i(T.prototype,"poleTarget",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(T.prototype,"clampWeight",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=i(T.prototype,"clampSmoothing",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),N=T))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/ik-solver-heuristic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./math-util.ts","./ik-bone.ts","./ik-solver.ts"],(function(t){var e,n,i,o,s,r,l,a,h,c,u,b,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass},function(t){r=t.cclegacy,l=t._decorator,a=t.Vec3,h=t.Quat,c=t.Node},function(t){u=t.default},function(t){b=t.default},function(t){f=t.default}],execute:function(){var g,d,p,v,m,y,P,W,w,D,k;r._RF.push({},"7ac3dMItT1CKKirWhbYCB7s","ik-solver-heuristic",void 0);var x=l.ccclass,L=l.property,z=new a,S=new a,_=new h;new h,t("default",(g=x("IKSolverHeuristic"),d=L({type:c,tooltip:"Reference to the AimIK component."}),p=L({tooltip:"Minimum distance from last reached position. Will stop solving if difference from previous reached position is less than tolerance. If tolerance is zero, will iterate until maxIterations."}),v=L({tooltip:"Max iterations per frame."}),m=L({tooltip:"Solve in 2D?"}),g((W=e((P=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(e,"target",W,o(e)),i(e,"tolerance",w,o(e)),i(e,"maxIterations",D,o(e)),i(e,"XY",k,o(e)),e.bones=[],e.lastLocalDirection=null,e.chainLength=0,e._localDirection=new a,e}n(e,t);var r=e.prototype;return r.setChain=function(t,e){null!=this.bones&&this.bones.length==t.length||(this.bones=new Array(t.length));for(var n=0;n<t.length;n++)null==this.bones[n]&&(this.bones[n]=new b),this.bones[n].node=t[n];return this.initiate(e),this.initiated},r.addBone=function(t){for(var e=new Array(this.bones.length+1),n=0;n<this.bones.length;n++)e[n]=this.bones[n].node;e[e.length-1]=t,this.setChain(e,this.root)},r.storeDefaultLocalState=function(){for(var t=0;t<this.bones.length;t++)this.bones[t].storeDefaultLocalState()},r.fixTransforms=function(){if(this.initiated&&!(this.ikPositionWeight<=0))for(var t=0;t<this.bones.length;t++)this.bones[t].fixTransform()},r.getPoints=function(){return this.bones},r.getPoint=function(t){for(var e=0;e<this.bones.length;e++)if(this.bones[e].node==t)return this.bones[e];return null},r.initiateBones=function(){this.chainLength=0;for(var t=0;t<this.bones.length;t++)t<this.bones.length-1?(a.subtract(z,this.bones[t].node.getWorldPosition(),this.bones[t+1].node.getWorldPosition()),this.bones[t].length=z.length(),this.chainLength+=this.bones[t].length,this.bones[t+1].node.getWorldPosition(S),a.subtract(S,S,this.bones[t].node.getWorldPosition()),h.invert(_,this.bones[t].node.getWorldRotation()),a.transformQuat(this.bones[t].axis,S,_)):(a.subtract(z,this.bones[this.bones.length-1].node.getWorldPosition(),this.bones[0].node.getWorldPosition()),h.invert(_,this.bones[t].node.getWorldRotation()),a.transformQuat(this.bones[t].axis,S,_))},r.getSingularityOffset=function(){if(!this._singularityDetected())return a.ZERO;a.subtract(z,this.ikPosition,this.bones[0].node.getWorldPosition()),z.normalize();var t=new a(z.y,z.z,z.x);return a.cross(z,z,t),z.multiplyScalar(.5*this.bones[this.bones.length-2].length).clone()},r._singularityDetected=function(){if(!this.initiated)return!1;a.subtract(z,this.bones[this.bones.length-1].node.getWorldPosition(),this.bones[0].node.getWorldPosition()),a.subtract(S,this.ikPosition,this.bones[0].node.getWorldPosition());var t=z.length();return!(t<S.length())&&(!(t<this.chainLength-.1*this.bones[this.bones.length-2].length)&&void 0)},s(e,[{key:"localDirection",get:function(){return u.directionToNodeSpace(this._localDirection,this.bones[this.bones.length-1].node.getWorldPosition().subtract(this.bones[0].node.getWorldPosition()),this.bones[0].node),this._localDirection.clone()}},{key:"positionOffset",get:function(){return a.lengthSqr(this.localDirection.subtract(this.lastLocalDirection))}}]),e}(f)).prototype,"target",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(P.prototype,"tolerance",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=e(P.prototype,"maxIterations",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),k=e(P.prototype,"XY",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=P))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/ik-solver.ts",["cc"],(function(t){var i,n,o;return{setters:[function(t){i=t.cclegacy,n=t._decorator,o=t.Vec3}],execute:function(){var e;i._RF.push({},"79994zz3nZCYrBBgcwo1alD","ik-solver",void 0);var s=n.ccclass;n.property,t("default",s("IKSolver")(e=function(){var t=i.prototype;function i(t){this.isFixTransforms=!0,this.initiated=!1,this.root=null,this.firstInitiation=!0,this.ikPosition=new o,this.ikPositionWeight=1,this.root=t}return t.onInitiate=function(){},t.storeDefaultLocalState=function(){},t.onUpdate=function(){},t.fixTransforms=function(){},t.initiate=function(t){this.root=t,this.initiated=!1,this.onInitiate(),this.storeDefaultLocalState(),this.initiated=!0,this.firstInitiation=!1},t.lateUpdate=function(){this.firstInitiation&&this.initiate(this.root),this.initiated&&this.onUpdate()},i.containsDuplicateBone=function(t){for(var i=0;i<t.length;i++)for(var n=0;n<t.length;n++)if(i!=n&&t[i].node==t[n].node)return t[i].node;return null},t.update=function(){this.isFixTransforms&&this.fixTransforms()},i}())||e);i._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["./rollupPluginModLoBabelHelpers.js","cc","./blocklistedGPUS.ts","./cleanRenderer.ts","./deobfuscateRenderer.ts","./deviceInfo.ts","./error.ts","./getGPUVersion.ts","./getLevenshteinDistance.ts","./getWebGLContext.ts","./ssr.ts","./util.ts"],(function(e){var t,r,n,i,a,u,o,s,c,f,d,p,l,b,v;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime,n=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy},function(e){a=e.BLOCKLISTED_GPUS},function(e){u=e.cleanRenderer},function(e){o=e.deobfuscateRenderer},function(e){s=e.deviceInfo},function(e){c=e.OutdatedBenchmarksError},function(e){f=e.getGPUVersion},function(e){d=e.tokenizeForLevenshteinDistance,p=e.getLevenshteinDistance},function(e){l=e.getWebGLContext},function(e){b=e.isSSR},function(e){v=e.isDefined}],execute:function(){i._RF.push({},"659ffrGDstGt48zhgidW5xL","index",void 0);e("getGPUTier",function(){var e=t(r().mark((function e(i){var h,x,g,k,m,L,E,R,w,G,P,S,U,_,A,B,D,M,C,I,y,T,K,N,F,O,W,V,j,z,H,X,q,J,Q,Y,Z,$,ee;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F=function(){return(F=t(r().mark((function e(t){var i,a,u,o,s,l,b,v,h,x,g,k,m,L,E,R,w,G,P,S,_,B,M,I,T,N,F;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=K(t)){e.next=3;break}return e.abrupt("return");case 3:return o=U[u=(D?"m":"d")+"-"+a+(A?"-ipad":"")+".json"]=null!=(i=U[u])?i:y(u),e.prev=6,e.next=9,o;case 9:s=e.sent,e.next=18;break;case 12:if(e.prev=12,e.t0=e.catch(6),!(e.t0 instanceof c)){e.next=16;break}throw e.t0;case 16:return e.abrupt("return");case 18:if(l=f(t),(b=s.filter((function(e){return e[1]===l}))).length||(b=s.filter((function(e){return e[0].includes(t)}))),0!==(v=b.length)){e.next=25;break}return e.abrupt("return");case 25:for(h=d(t),x=v>1?b.map((function(e){return[e,p(h,e[2])]})).sort((function(e,t){return e[1]-t[1]}))[0][0]:b[0],g=x[0],k=x[4],m=Number.MAX_VALUE,E=window,R=E.devicePixelRatio,w=C.width*R*C.height*R,G=n(k);!(P=G()).done;)S=P.value,_=S[0],B=S[1],M=_*B,(I=Math.abs(w-M))<m&&(m=I,L=S);if(L){e.next=34;break}return e.abrupt("return");case 34:return N=(T=L)[2],F=T[3],e.abrupt("return",[m,N,g,F]);case 36:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)},N=function(e){return F.apply(this,arguments)},x=(h=void 0===i?{}:i).mobileTiers,g=void 0===x?[0,15,30,60]:x,k=h.desktopTiers,m=void 0===k?[0,15,30,60]:k,L=h.override,E=void 0===L?{}:L,R=h.glContext,w=h.failIfMajorPerformanceCaveat,G=void 0!==w&&w,P=h.benchmarksURL,S=void 0===P?"https://unpkg.com/detect-gpu@5.0.10/dist/benchmarks":P,U={},!b){e.next=6;break}return e.abrupt("return",{tier:0,type:"SSR"});case 6:if(_=E.isIpad,A=void 0===_?!(null==s||!s.isIpad):_,B=E.isMobile,D=void 0===B?!(null==s||!s.isMobile):B,M=E.screenSize,C=void 0===M?window.screen:M,I=E.loadBenchmarks,y=void 0===I?t(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(S+"/"+t).then((function(e){return e.json()}));case 2:if(n=e.sent,!(parseInt(n.shift().split(".")[0],10)<4)){e.next=6;break}throw new c("Detect GPU benchmark data is out of date. Please update to version 4x");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))):I,T=E.renderer,K=function(e){for(var t=0,r=D?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce"];t<r.length;t++){var n=r[t];if(e.includes(n))return n}},O=function(e,t,r,n,i){return{device:i,fps:n,gpu:r,isMobile:D,tier:e,type:t}},V="",T){e.next=24;break}if(j=R||l(null==s?void 0:s.isSafari12,G)){e.next=15;break}return e.abrupt("return",O(0,"WEBGL_UNSUPPORTED"));case 15:if((z=j.getExtension("WEBGL_debug_renderer_info"))&&(T=j.getParameter(z.UNMASKED_RENDERER_WEBGL)),T){e.next=19;break}return e.abrupt("return",O(1,"FALLBACK"));case 19:V=T,T=u(T),W=o(j,T,D),e.next=26;break;case 24:T=u(T),W=[T];case 26:return e.next=28,Promise.all(W.map(N));case 28:if((H=e.sent.filter(v).sort((function(e,t){var r=e[0],n=void 0===r?Number.MAX_VALUE:r,i=e[1],a=t[0],u=void 0===a?Number.MAX_VALUE:a,o=t[1];return n===u?i-o:n-u}))).length){e.next=32;break}return X=a.find((function(e){return T.includes(e)})),e.abrupt("return",X?O(0,"BLOCKLISTED",X):O(1,"FALLBACK",T+" ("+V+")"));case 32:if(q=H[0],J=q[1],Q=q[2],Y=q[3],-1!==J){e.next=35;break}return e.abrupt("return",O(0,"BLOCKLISTED",Q,J,Y));case 35:for(Z=D?g:m,$=0,ee=0;ee<Z.length;ee++)J>=Z[ee]&&($=ee);return e.abrupt("return",O($,"BENCHMARK",Q,J,Y));case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());i._RF.pop()}}}));

System.register("chunks:///_virtual/infrared-tracker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./fx-ray-line.ts"],(function(i){var t,e,o,n,r,s,a,c,d,l,h,u,y,p,f;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){r=i.cclegacy,s=i._decorator,a=i.CCFloat,c=i.Node,d=i.v3,l=i.geometry,h=i.PhysicsSystem,u=i.Component},function(i){y=i.Util,p=i.UtilVec3},function(i){f=i.FxRayLine}],execute:function(){var v,m,w,P,b,g,k,z;r._RF.push({},"e6e9czpVDlKoKYfnj77c6nw","infrared-tracker",void 0);var L=s.ccclass,C=s.property,R=s.executeInEditMode;i("InfraredTracker",(v=L("InfraredTracker"),m=C([a]),w=C(c),v(P=R((g=t((b=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=i.call.apply(i,[this].concat(r))||this,o(t,"masks",g,n(t)),o(t,"distance",k,n(t)),o(t,"forwardNode",z,n(t)),t.ray=void 0,t.target=void 0,t.mask=0,t.hit=void 0,t.endPosition=d(0,0,0),t.rayLine=void 0,t.forward=d(0,0,0),t.direction=d(0,0,0),t}e(t,i);var r=t.prototype;return r.onEnable=function(){this.ray=new l.Ray,this.mask=y.calculateMask(this.masks),this.rayLine=this.node.children[0].getComponent(f)},r.update=function(i){var t;p.copy(this.ray.o,this.node.worldPosition),p.copy(this.direction,this.forwardNode.worldPosition),this.direction.subtract(this.node.worldPosition).normalize(),p.copy(this.ray.d,this.direction),this.hit=void 0,this.target=void 0,h.instance.raycastClosest(this.ray,this.mask,this.distance)&&(this.hit=h.instance.raycastClosestResult),void 0!==this.hit?(this.target=this.hit.collider.node,p.copy(this.endPosition,this.hit.hitPoint)):(p.copy(this.endPosition,this.node.worldPosition),p.scaleDirection(this.endPosition,this.direction,this.distance)),null==(t=this.rayLine)||t.setRayLine(this.node.worldPosition,this.endPosition)},t}(u)).prototype,"masks",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=t(b.prototype,"distance",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),z=t(b.prototype,"forwardNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=b))||P)||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/init.ts",["./rollupPluginModLoBabelHelpers.js","cc","./game.ts","./res-cache.ts","./res-texture.ts"],(function(e){var t,n,o,r,i,s,c,a,u,l,d,f,p;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){r=e.cclegacy,i=e._decorator,s=e.sys,c=e.director,a=e.gfx,u=e.find,l=e.Component},function(e){d=e.Game},function(e){f=e.ResCache},function(e){p=e.loadTextures}],execute:function(){var v;r._RF.push({},"885d1c1vDFAQ6K2Z5YKUBpB","init",void 0);var h=i.ccclass;e("Init",h("Init")(v=function(e){function r(){return e.apply(this,arguments)||this}t(r,e);var i=r.prototype;return i.start=function(){var e;if(s.isBrowser&&(null==c||null==(e=c.root)?void 0:e.device.gfxAPI)==(null==a?void 0:a.API.WEBGL)){var t,r,i=null==(t=u("init"))||null==(r=t.getChildByName("canvas"))?void 0:r.getChildByName("ui_not_support");i&&(i.active=!0)}else c.addPersistRootNode(this.node),f.Instance.load(n(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.time("loadTextures"),e.next=3,p();case 3:console.timeEnd("loadTextures"),d.Instance.init();case 5:case"end":return e.stop()}}),e)}))))},i.update=function(e){d.Instance.update(e)},r}(l))||v);r._RF.pop()}}}));

System.register("chunks:///_virtual/input-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-input.ts"],(function(t){var n,o,r,e,u;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,e=t.Component},function(t){u=t.ActorInput}],execute:function(){var i;o._RF.push({},"10ebf5p0QNHLIIhxm8wLBu1","input-base",void 0);var c=r.ccclass;r.property,t("InputBase",c("InputBase")(i=function(t){function o(){for(var n,o=arguments.length,r=new Array(o),e=0;e<o;e++)r[e]=arguments[e];return(n=t.call.apply(t,[this].concat(r))||this)._actorInput=void 0,n}n(o,t);var r=o.prototype;return r.onStart=function(){},r.onEnd=function(){},r.onEnable=function(){var t;if(this._actorInput=null==(t=this.node.parent)?void 0:t.getComponent(u),void 0===this._actorInput||null===this._actorInput)throw new Error("Not find Actor Input. node is : "+this.node.name)},o}(e))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/input-equip-select.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./util2.ts"],(function(t){var e,n,c,i,r,s,o,u,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator,i=t.Input,r=t.game,s=t.v2,o=t.Component},function(t){u=t.Msg},function(t){h=t.UtilVec2}],execute:function(){var a;n._RF.push({},"c944bVrbhJJYKLc8hW4dY45","input-equip-select",void 0);var p=c.ccclass;c.property,t("InputEquipSelect",p("InputEquipSelect")(a=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))||this).center=s(0,0),e.current=s(0,0),e.time_wait=.3,e}e(n,t);var c=n.prototype;return c.start=function(){this.node.on(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(i.EventType.MOUSE_MOVE,this.onMouseMove,this)},c.onTouchMove=function(t){this.center.x=r.canvas.width/2,this.center.y=r.canvas.height/2,h.c(this.current,t.getLocation()),this.current.subtract(this.center),u.emit("msg_select_equip",this.current.normalize())},c.onMouseMove=function(t){this.center.x=r.canvas.width/2,this.center.y=r.canvas.height/2,h.c(this.current,t.getLocation()),this.current.subtract(this.center),u.emit("msg_select_equip",this.current.normalize())},n}(o))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/input-gamepad.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./input-base.ts","./msg.ts"],(function(t){var e,n,a,o,i,u,s,p,c,_,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,o=t.input,i=t.Input,u=t.Vec3,s=t.v2,p=t.v3},function(t){c=t.UtilVec3},function(t){_=t.InputBase},function(t){r=t.Msg}],execute:function(){var l;n._RF.push({},"fb3b2deZNZGCKdwamug0YI8","input-gamepad",void 0);var h=a.ccclass;a.property,t("isGamePad",!1),t("InputGamepad",h("InputGamepad")(l=function(n){function a(){for(var t,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return(t=n.call.apply(n,[this].concat(a))||this).offset_euler=-45,t.move_a=50,t.move_speed=50,t._v_increase_move=0,t._move=.1,t._dir=p(0,0,0),t._move_v3=p(0,0,0),t._key_count=0,t._curKeyJump=0,t._move_dir=p(0,0,0),t._isChangeEquips=!1,t._checkGamepadTime=2,t}e(a,n);var _=a.prototype;return _.start=function(){o.on(i.EventType.GAMEPAD_INPUT,this.onGamePad_Input,this),this.offset_euler*=Math.PI/180},_.onDestroy=function(){o.off(i.EventType.GAMEPAD_INPUT,this.onGamePad_Input,this)},_.onGamePad_Input=function(e){var n,a,o,i,u,s,p;this._checkGamepadTime=2,t("isGamePad",!0);var c=e.gamepad.leftStick.xAxis.getValue(),_=e.gamepad.leftStick.yAxis.getValue();this.onMove(c,-_);var r=e.gamepad.rightStick.xAxis.getValue(),l=e.gamepad.rightStick.yAxis.getValue();this.onRotation(5*r,5*l),e.gamepad.buttonR1.getValue()&&(null==(n=this._actorInput)||n.onFire()),e.gamepad.buttonR2.getValue()&&(null==(a=this._actorInput)||a.onJump());var h,m=e.gamepad.buttonL2.getValue();(null==(o=this._actorInput)||o.onRun(1===m),e.gamepad.buttonL1.getValue())&&(this._isChangeEquips=null==(h=this._actorInput)?void 0:h.onChangeEquips());e.gamepad.buttonEast.getValue()&&(null==(i=this._actorInput)||i.onReload()),e.gamepad.buttonWest.getValue()&&(null==(u=this._actorInput)||u.onCrouch()),e.gamepad.buttonSouth.getValue()&&(null==(s=this._actorInput)||s.onPick()),e.gamepad.buttonOptions.getValue()&&(null==(p=this._actorInput)||p.onPause())},_.onMove=function(t,e){this._dir.x=t,this._dir.z=e,this._dir.y=0,this.onUpdateMove()},_.onUpdateMove=function(){var t;c.copy(this._move_v3,this._dir),u.rotateY(this._move_v3,this._move_v3,u.ZERO,this.offset_euler),0!==this._move_v3.length()&&c.copy(this._move_dir,this._move_v3),null==(t=this._actorInput)||t.onMove(this._move_v3)},_.onRotation=function(t,e){var n;if(this._isChangeEquips)return console.log("select_equip",t,e),void r.emit("msg_select_equip",s(t,e));null==(n=this._actorInput)||n.onRotation(t,-e)},_.update=function(e){this._checkGamepadTime-=e,this._checkGamepadTime<0&&t("isGamePad",!1)},a}(_))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/input-handle.ts",["cc","./msg.ts","./res.ts"],(function(n){var t,e,c,o;return{setters:[function(n){t=n.cclegacy,e=n._decorator},function(n){c=n.Msg},function(n){o=n.Res}],execute:function(){t._RF.push({},"e30c9OgNPRNCLLrcSW0pXy/","input-handle",void 0);e.ccclass,e.property;n("InputHandle",function(){function n(){}return n.Init=function(){var n=this;o.loadJson("data/input",(function(t,e){e&&(n._map=e.json,console.log(n._map))}))},n.create=function(n){},n.do=function(n,t,e){var o=t+this._map[n];o?c.emit(o,e):console.log("Not defined key"+n)},n}())._map=Object.create(null),t._RF.pop()}}}));

System.register("chunks:///_virtual/input-joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input-base.ts","./msg.ts","./actor-input.ts"],(function(n){var t,o,i,u,r,s,c;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,i=n._decorator,u=n.v2},function(n){r=n.InputBase},function(n){s=n.Msg},function(n){c=n.ActorInput}],execute:function(){var e;o._RF.push({},"18624mKwZVJ0KxnPlwKvPlx","input-joystick",void 0);var a=i.ccclass;i.property,n("InputJoystick",a("InputJoystick")(e=function(n){function o(){for(var t,o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return(t=n.call.apply(n,[this].concat(i))||this)._isRun=!1,t._isChangeEquips=!1,t}t(o,n);var i=o.prototype;return i.start=function(){this.node.on("onAutoFireStart",this.onAutoFireStart,this),this.node.on("onAutoFireEnd",this.onAutoFireEnd,this)},i.onEnable=function(){this._actorInput=c.inst},i.onDestroy=function(){this.node.on("onAutoFireStart",this.onAutoFireStart,this),this.node.on("onAutoFireEnd",this.onAutoFireEnd,this)},i.onChangeEquips=function(){s.emit("push","select_equips")},i.onMove=function(n){var t;null==(t=this._actorInput)||t.onMove(n)},i.onFire=function(){var n;null==(n=this._actorInput)||n.onFire()},i.onAutoFireStart=function(){var n;null==(n=this._actorInput)||n.onAutoFire(!0)},i.onAutoFireEnd=function(){var n;null==(n=this._actorInput)||n.onAutoFire(!1)},i.onFireStart=function(){},i.onFireEnd=function(){},i.onJump=function(){var n;null==(n=this._actorInput)||n.onJump()},i.onCrouch=function(){var n;null==(n=this._actorInput)||n.onCrouch()},i.onProne=function(){},i.onAim=function(){var n;null==(n=this._actorInput)||n.onAim(void 0)},i.onPick=function(){var n;null==(n=this._actorInput)||n.onPick()},i.onDrop=function(){var n;null==(n=this._actorInput)||n.onDrop()},i.onReload=function(){var n;null==(n=this._actorInput)||n.onReload()},i.onRun=function(){var n;this._isRun=!this._isRun,null==(n=this._actorInput)||n.onRun(this._isRun)},i.onPause=function(){s.emit("push","level_pause")},i.onSetRun=function(n){var t;this._isRun=n,null==(t=this._actorInput)||t.onRun(n)},i.onRotation=function(n,t){var o;this._isChangeEquips?s.emit("msg_select_equip",u(n,t)):null==(o=this._actorInput)||o.onRotation(n/5,-t/5)},o}(r))||e);o._RF.pop()}}}));

System.register("chunks:///_virtual/input-keyboard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./input-base.ts","./fun.ts","./game-set.ts","./data-core.ts"],(function(e){var t,o,n,i,s,r,_,c,a,u,d,h,y,l;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,n=e._decorator,i=e.input,s=e.Input,r=e.game,_=e.KeyCode,c=e.math,a=e.v3},function(e){u=e.Msg},function(e){d=e.InputBase},function(e){h=e.fun},function(e){y=e.GameSet},function(e){l=e.DataLevelInst}],execute:function(){var p;o._RF.push({},"c8c234sRQdFvKt/kPSa5Xg0","input-keyboard",void 0);var E=n.ccclass;n.property,e("InputKeyboard",E("InputKeyboard")(p=function(e){function o(){for(var t,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).move_a=50,t.move_speed=50,t._dir=a(0,0,0),t.key_count=0,t._pressQ=!1,t.direction_up=0,t.direction_down=0,t.direction_left=0,t.direction_right=0,t._isPause=!1,t.accelerateRotation=0,t.pre_mouse_time=0,t.pre_info="",t}t(o,e);var n=o.prototype;return n.start=function(){i.on(s.EventType.KEY_DOWN,this.onKeyDown,this),i.on(s.EventType.KEY_UP,this.onKeyUp,this),i.on(s.EventType.MOUSE_DOWN,this.onMouseDown,this),i.on(s.EventType.MOUSE_UP,this.onMouseUp,this),i.on(s.EventType.MOUSE_MOVE,this.onMouseMove,this),document.addEventListener("pointerlockchange",this.onPointerChange,!1)},n.onPointerChange=function(){document.pointerLockElement===r.canvas||h.delay((function(){}),2)},n.onDestroy=function(){i.off(s.EventType.KEY_DOWN,this.onKeyDown,this),i.off(s.EventType.KEY_UP,this.onKeyUp,this),i.off(s.EventType.MOUSE_DOWN,this.onMouseDown,this),i.off(s.EventType.MOUSE_MOVE,this.onMouseMove,this),document.removeEventListener("pointerlockchange",this.onPointerChange,!1)},n.hasKey=function(e){return e.keyCode===_.KEY_W||e.keyCode===_.KEY_S||e.keyCode===_.KEY_A||e.keyCode===_.KEY_D||e.keyCode===_.KEY_E||e.keyCode===_.KEY_G||e.keyCode===_.KEY_Q||e.keyCode===_.KEY_C||e.keyCode===_.KEY_N||e.keyCode===_.KEY_R||e.keyCode===_.SPACE||e.keyCode===_.DIGIT_1||e.keyCode===_.DIGIT_2||e.keyCode===_.DIGIT_3||e.keyCode===_.DIGIT_4||e.keyCode===_.ARROW_UP||e.keyCode===_.ARROW_LEFT||e.keyCode===_.ARROW_RIGHT||e.keyCode===_.ARROW_DOWN||e.keyCode===_.SHIFT_LEFT||e.keyCode===_.ESCAPE||e.keyCode===_.KEY_T},n.onKeyDown=function(e){var t,o,n,i,s,r,c,a,d,h,y;if(l.stop)this.clear();else if(this.hasKey(e)){var p;if(this.key_count++,e.keyCode!==_.KEY_W&&e.keyCode!==_.ARROW_UP||(this.direction_up=1),e.keyCode!==_.KEY_S&&e.keyCode!==_.ARROW_DOWN||(this.direction_down=-1),e.keyCode!==_.KEY_A&&e.keyCode!==_.ARROW_LEFT||(this.direction_left=1),e.keyCode!==_.KEY_D&&e.keyCode!==_.ARROW_RIGHT||(this.direction_right=-1),e.keyCode===_.KEY_Q)null==(p=this._actorInput)||p.onChangeEquips(),document.exitPointerLock();e.keyCode===_.SPACE&&(null==(t=this._actorInput)||t.onJump()),e.keyCode===_.KEY_C&&(null==(o=this._actorInput)||o.onCrouch()),e.keyCode===_.KEY_N&&(null==(n=this._actorInput)||n.onAim(void 0)),e.keyCode===_.KEY_E&&(null==(i=this._actorInput)||i.onPick()),e.keyCode===_.KEY_G&&(null==(s=this._actorInput)||s.onDrop()),e.keyCode===_.KEY_R&&(null==(r=this._actorInput)||r.onReload()),e.keyCode===_.SHIFT_LEFT&&(null==(c=this._actorInput)||c.onRun(!0)),e.keyCode===_.DIGIT_1&&(null==(a=this._actorInput)||a.onEquip(0)),e.keyCode===_.DIGIT_2&&(null==(d=this._actorInput)||d.onEquip(1)),e.keyCode===_.DIGIT_3&&(null==(h=this._actorInput)||h.onEquip(2)),e.keyCode===_.DIGIT_4&&(null==(y=this._actorInput)||y.onEquip(3)),e.keyCode===_.KEY_T&&u.emit("msg_change_tps_camera_target",2)}},n.onKeyUp=function(e){var t;if(l.stop)this.clear();else{if(0===e.keyCode||this.key_count<=0)return this._pressQ=!1,void this.clear();var o;if(this.hasKey(e))if(this.key_count--,e.keyCode!==_.KEY_W&&e.keyCode!==_.ARROW_UP||(this.direction_up=0),e.keyCode!==_.KEY_S&&e.keyCode!==_.ARROW_DOWN||(this.direction_down=0),e.keyCode!==_.KEY_A&&e.keyCode!==_.ARROW_LEFT||(this.direction_left=0),e.keyCode!==_.KEY_D&&e.keyCode!==_.ARROW_RIGHT||(this.direction_right=0),e.keyCode===_.SHIFT_LEFT&&(null==(t=this._actorInput)||t.onRun(!1)),e.keyCode===_.ESCAPE)null==(o=this._actorInput)||o.onPause()}},n.onMouseDown=function(e){var t,o;l.stop?this.clear():0===e.getButton()&&(null==(t=this._actorInput)||t.onAutoFire(!0),null==(o=this._actorInput)||o.onFire())},n.onMouseUp=function(e){var t,o;0===e.getButton()&&(null==(t=this._actorInput)||t.onAutoFire(!1));2===e.getButton()&&(null==(o=this._actorInput)||o.onAim(void 0))},n.onMouseMove=function(e){var t;if(l.stop)this.clear();else{var o=e.movementX/r.canvas.width*y.Instance.screen_to_angle,n=e.movementY/r.canvas.width*y.Instance.screen_to_angle,i=Math.sqrt(o*o+n*n),s=0;i>y.Instance.accelerate_point&&(s=i);for(var _=0,a=y.Instance.move_value_list,u=0;u<a.length&&(_=u,!(i<=a[u]));u++);var d=y.Instance.move_accelerate_list[_],h=y.Instance.sensitivity;this.accelerateRotation=c.lerp(this.accelerateRotation,d,10*r.deltaTime);var p=3*y.Instance.sensitivity_a*this.accelerateRotation,E=o*(1+h*s)*p,k=n*(1+h*s)*p;null==(t=this._actorInput)||t.onRotation(E,k)}},n.onMove=function(){var e;this._dir.x=this.direction_left+this.direction_right,this._dir.z=this.direction_up+this.direction_down,this._dir.y=0,this._dir.normalize(),null==(e=this._actorInput)||e.onMove(this._dir)},n.clear=function(){this.direction_up=0,this.direction_down=0,this.direction_left=0,this.direction_right=0},n.update=function(e){this.onMove()},o}(d))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/input-mouse.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input-base.ts"],(function(t){var e,n,o,s,i,r,a,c,u,h,l,p,y,T,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,a=t.geometry,c=t.v2,u=t.find,h=t.Camera,l=t.input,p=t.Input,y=t.director,T=t.PhysicsSystem},function(t){_=t.InputBase}],execute:function(){var f,v,C;i._RF.push({},"9a0e8C1duBAC7rsIaBb8EZe","input-mouse",void 0);var E=r.ccclass,d=r.property;t("InputMouse",E("InputMouse")((C=e((v=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this)._ray=new a.Ray,e._screenPos=c(0,0),e._camera=Object.create(null),o(e,"mask_group",C,s(e)),e}n(e,t);var i=e.prototype;return i.start=function(){var t=u("camera_controller");t?this._camera=t.children[0].children[0].getComponent(h):console.warn("Can not find camera-controller."),l.on(p.EventType.MOUSE_MOVE,this.onMouseMove,this),l.on(p.EventType.TOUCH_MOVE,this.onTouchMove,this),l.on(p.EventType.TOUCH_START,this.onTouchStart,this),l.on(p.EventType.TOUCH_END,this.onTouchEnd,this),l.on(p.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},i.onDestroy=function(){l.off(p.EventType.MOUSE_MOVE,this.onMouseMove,this),l.off(p.EventType.TOUCH_MOVE,this.onTouchMove,this),l.off(p.EventType.TOUCH_START,this.onTouchStart,this),l.off(p.EventType.TOUCH_END,this.onTouchEnd,this),l.off(p.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},i.onTouchStart=function(t){},i.onTouchMove=function(t){var e=1<<this.mask_group;t.getLocation(this._screenPos);var n=y.root.pipeline.pipelineSceneData.shadingScale;if(this._camera.screenPointToRay(this._screenPos.x*n,this._screenPos.y*n,this._ray),T.instance.raycastClosest(this._ray,e,100)){var o=T.instance.raycastClosestResult,s=o.hitPoint;s.subtract(o.collider.node.worldPosition),s.y=0}},i.onMouseMove=function(t){var e=1<<this.mask_group;t.getLocation(this._screenPos);var n=y.root.pipeline.pipelineSceneData.shadingScale;if(this._camera.screenPointToRay(this._screenPos.x*n,this._screenPos.y*n,this._ray),T.instance.raycastClosest(this._ray,e,100)){var o=T.instance.raycastClosestResult,s=o.hitPoint;s.subtract(o.collider.node.worldPosition),s.y=0}},i.onTouchEnd=function(t){},i.onTouchCancel=function(t){},e}(_)).prototype,"mask_group",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),f=v))||f);i._RF.pop()}}}));

System.register("chunks:///_virtual/input-pointer-lock.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fun.ts"],(function(n){var o,e,t,i,c,r,u,s,p;return{setters:[function(n){o=n.inheritsLoose},function(n){e=n.cclegacy,t=n._decorator,i=n.input,c=n.Input,r=n.game,u=n.KeyCode,s=n.Component},function(n){p=n.fun}],execute:function(){var a;e._RF.push({},"cd5bdYQYg9MhL56D3JEXVzi","input-pointer-lock",void 0);var l=t.ccclass,h=(t.property,n("_pointerLock",!1));n("InputPointerLock",l("InputPointerLock")(a=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var s=t.prototype;return s.start=function(){document.addEventListener("pointerlockchange",this.onPointerChange,!1),i.on(c.EventType.MOUSE_DOWN,this.onMouseDown,this),i.on(c.EventType.KEY_DOWN,this.onKeyDown,this)},s.onDestroy=function(){document.removeEventListener("pointerlockchange",this.onPointerChange,!1),i.on(c.EventType.MOUSE_DOWN,this.onMouseDown,this)},s.onPointerChange=function(){document.pointerLockElement===r.canvas?h=n("_pointerLock",!0):p.delay((function(){h=n("_pointerLock",!1)}),2)},s.onMouseDown=function(n){if(h);else try{var o,e;if(null!=(o=r.canvas)&&o.requestPointerLock)null==(e=r.canvas)||e.requestPointerLock()}catch(n){console.warn(n)}},s.onKeyDown=function(n){n.keyCode===u.ESCAPE&&document.exitPointerLock()},t}(s))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/io.ts",["cc"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy,r=e.sys}],execute:function(){t._RF.push({},"e106frdmmZD3ZGChb73ZwRV","io",void 0);e("IO",function(){function e(){}return e.getNum=function(e){var t=this.read(e);if(-1===t.search("."))var r=Number.parseInt(t);else r=Number.parseFloat(t);return r||(r=0),r},e.write=function(e,t){try{r.localStorage.setItem(e,t)}catch(e){console.error("can not write:",e)}},e.read=function(e){try{return r.localStorage.getItem(e)}catch(e){return console.error(e),""}},e.delete=function(e){r.localStorage.removeItem(e)},e.exist=function(e){return null!=r.localStorage.getItem(e)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/joystick-auto-hidden.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,o,a,n,r,h,s,l,d;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,a=i.assertThisInitialized},function(i){n=i.cclegacy,r=i._decorator,h=i.Color,s=i.SpriteComponent,l=i.math,d=i.Component}],execute:function(){var _,c,p,u,y;n._RF.push({},"0b7ffMiqihGxIrMWmSyto/F","joystick-auto-hidden",void 0);var f=r.ccclass,m=r.property;i("JoystickAutoHidden",f("JoystickAutoHidden")((p=t((c=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=i.call.apply(i,[this].concat(n))||this,o(t,"smooth",p,a(t)),o(t,"hidden_delay_time",u,a(t)),o(t,"hidden_alpha",y,a(t)),t._color=new h(0,0,0,1),t._isHidden=!1,t._sprite=void 0,t._alpha=255,t._cur_alpha=255,t._delay=0,t}e(t,i);var n=t.prototype;return n.start=function(){this._sprite=this.getComponent(s),this.node.on("autoHidden",this.autoHidden,this),this._delay=this.hidden_delay_time,this._cur_alpha=this.hidden_alpha,this._color.a=this._cur_alpha,this._sprite.color=this._color},n.update=function(i){this._delay-=i,this._delay<0&&(this._cur_alpha=l.lerp(this._cur_alpha,this._alpha,i*this.smooth),this._color.a=this._cur_alpha,this._sprite.color=this._color)},n.autoHidden=function(i){this._isHidden=i,this._alpha=this._isHidden?this.hidden_alpha:255,this._delay=this._isHidden?this.hidden_delay_time:0},t}(d)).prototype,"smooth",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),u=t(c.prototype,"hidden_delay_time",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),y=t(c.prototype,"hidden_alpha",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),_=c))||_);n._RF.pop()}}}));

System.register("chunks:///_virtual/joystick-move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input-joystick.ts","./ui.ts","./util2.ts","./fun.ts"],(function(t){var o,i,e,n,s,r,c,h,u,a,l,p,d,_,v,f,T;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,c=t.CCFloat,h=t.CCBoolean,u=t.Node,a=t.v3,l=t.Input,p=t.Vec3,d=t.Component},function(t){_=t.InputJoystick},function(t){v=t.UI},function(t){f=t.UtilVec3},function(t){T=t.fun}],execute:function(){var m,y,C,M,b,E,g,H,w,P,S,N,O;s._RF.push({},"24d580ji/hED5jwcnONfUEr","joystick-move",void 0);var z=r.ccclass,U=r.property;t("JoystickMove",(m=z("JoystickMove"),y=U(c),C=U(c),M=U(h),b=U(c),E=U(u),m((w=o((H=function(t){function o(){for(var o,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return o=t.call.apply(t,[this].concat(s))||this,e(o,"radius",w,n(o)),e(o,"smooth",P,n(o)),e(o,"autoHidden",S,n(o)),e(o,"runRadius",N,n(o)),o._pos=a(0,0,0),o._movePos=a(0,0,0),o._tempMove=a(0,0,0),o._moveNode=void 0,o._bgNode=void 0,o._input=void 0,o.ui_camera=void 0,o.screenVec3=a(0,0,0),o.screenCenter=a(0,0,0),o.worldPosition=a(0,0,0),o.isStart=!1,e(o,"nodeTestCenter",O,n(o)),o}i(o,t);var s=o.prototype;return s.start=function(){var t=this;this._input=this.node.parent.getComponent(_),this._bgNode=this.node.children[0],this._moveNode=this._bgNode.children[0],this.node.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(l.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(l.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(l.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.ui_camera=v.Instance.camera,T.delay((function(){f.copy(t._pos,t.node.worldPosition)}),1)},s.onDestroy=function(){this.node.off(l.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(l.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(l.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(l.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.onTouchStart=function(t){var o;this.isStart=!0,null==(o=this.ui_camera)||o.worldToScreen(this.node.worldPosition,this.screenCenter),this.calculateMoveDirection(t),this.autoHidden&&this.node.emit("autoHidden",!1)},s.onTouchMove=function(t){this.calculateMoveDirection(t)},s.onTouchEnd=function(t){this.cancelTouch(t)},s.onTouchCancel=function(t){this.cancelTouch(t)},s.calculateMoveDirection=function(t){var o,i,e;this.isStart=!1,this._pos.x=t.getLocationX(),this._pos.y=t.getLocationY(),this.screenVec3.x=this._pos.x,this.screenVec3.y=this._pos.y,null==(o=this.ui_camera)||o.screenToWorld(this.screenVec3,this._pos),this._pos.subtract(this.node.worldPosition),this._pos.z=0;var n=this._pos.length(),s=n>this.runRadius;n>this.radius&&this._pos.normalize().multiplyScalar(this.radius),f.copy(this._tempMove,this._pos),this._tempMove.z=this._tempMove.y,this._tempMove.y=0,this._tempMove.x=-this._tempMove.x,null==(i=this._input)||i.onSetRun(s),null==(e=this._input)||e.onMove(this._tempMove.normalize()),this._pos.add(this.node.worldPosition)},s.cancelTouch=function(t){var o,i;f.copy(this._pos,this.node.worldPosition),null==(o=this._input)||o.onMove(p.ZERO),this.autoHidden&&this.node.emit("autoHidden",!0),null==(i=this._input)||i.onSetRun(!1)},s.update=function(t){p.lerp(this._movePos,this._movePos,this._pos,t*this.smooth),this._moveNode.setWorldPosition(this._movePos.x,this._movePos.y,0)},o}(d)).prototype,"radius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),P=o(H.prototype,"smooth",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),S=o(H.prototype,"autoHidden",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=o(H.prototype,"runRadius",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),O=o(H.prototype,"nodeTestCenter",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=H))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/joystick-pad-action.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input-joystick.ts"],(function(t){var n,i,o,e,r,s,c,a,u,h;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Node,a=t.Input,u=t.Component},function(t){h=t.InputJoystick}],execute:function(){var l,p,d,T,f,y,v;r._RF.push({},"687899l+uVAiptGTPqXPzBE","joystick-pad-action",void 0);var g=s.ccclass,C=s.property;t("JoystickPadAction",(l=g("JoystickPadAction"),p=C(c),l((f=n((T=function(t){function n(){for(var n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=t.call.apply(t,[this].concat(r))||this)._input=void 0,o(n,"actionNode",f,e(n)),o(n,"startMsg",y,e(n)),o(n,"endMsg",v,e(n)),n}i(n,t);var r=n.prototype;return r.start=function(){this._input=this.node.parent.getComponent(h),this.node.on(a.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(a.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(a.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},r.onDestroy=function(){this.node.off(a.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(a.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(a.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},r.onTouchStart=function(t){var n;null==(n=this.actionNode)||n.emit(this.startMsg)},r.onTouchEnd=function(t){var n;null==(n=this.actionNode)||n.emit(this.endMsg)},r.onTouchCancel=function(t){var n;null==(n=this.actionNode)||n.emit(this.endMsg)},n}(u)).prototype,"actionNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=n(T.prototype,"startMsg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=n(T.prototype,"endMsg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=T))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/joystick-pad.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input-joystick.ts"],(function(t){var n,o,i,e,s,c;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,e=t.Input,s=t.Component},function(t){c=t.InputJoystick}],execute:function(){var u;o._RF.push({},"2bb7cW4fCdAULC7mgJUMf+s","joystick-pad",void 0);var h=i.ccclass;i.property,t("JoystickPad",h("JoystickPad")(u=function(t){function o(){for(var n,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this)._input=void 0,n}n(o,t);var i=o.prototype;return i.start=function(){this._input=this.node.parent.getComponent(c),this.node.on(e.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(e.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(e.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},i.onDestroy=function(){this.node.off(e.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(e.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(e.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},i.onTouchStart=function(t){var n;null==(n=this._input)||n.onStart()},i.onTouchEnd=function(t){var n;null==(n=this._input)||n.onEnd()},i.onTouchCancel=function(t){var n;null==(n=this._input)||n.onEnd()},o}(s))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var o,t,e,i,s,u,c;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,e=n._decorator,i=n.input,s=n.Input,u=n.KeyCode,c=n.Component}],execute:function(){var h;t._RF.push({},"7bcedQquhRN4Kxy9y2GprTy","joystick",void 0);var p=e.ccclass;e.property,n("Joystick",p("Joystick")(h=function(n){function t(){return n.apply(this,arguments)||this}o(t,n);var e=t.prototype;return e.start=function(){i.on(s.EventType.KEY_DOWN,this.onKeyDown,this),i.on(s.EventType.KEY_PRESSING,this.onKeyPRESSING,this),i.on(s.EventType.KEY_UP,this.onKeyUp,this),i.on(s.EventType.TOUCH_START,this.onTouchStart,this),i.on(s.EventType.TOUCH_MOVE,this.onTouchMove,this),i.on(s.EventType.TOUCH_END,this.onTouchEnd,this),i.on(s.EventType.TOUCH_CANCEL,this.onTouchCancel,this),i.on(s.EventType.MOUSE_DOWN,this.onMouseDown,this),i.on(s.EventType.MOUSE_MOVE,this.onMouseMove,this),i.on(s.EventType.MOUSE_UP,this.onMouseUp,this),i.on(s.EventType.MOUSE_WHEEL,this.onMouseWheel,this)},e.onKeyDown=function(n){},e.onKeyPRESSING=function(n){n.keyCode===u.KEY_A&&console.log("press right.")},e.onKeyUp=function(n){},e.onTouchStart=function(n){},e.onTouchMove=function(n){},e.onTouchEnd=function(n){},e.onTouchCancel=function(n){},e.onMouseDown=function(n){},e.onMouseUp=function(n){},e.onMouseMove=function(n){},e.onMouseWheel=function(n){},t}(c))||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/joytick-pad-rotation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input-joystick.ts","./game-set.ts"],(function(t){var e,n,o,a,i,c,s,r,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,a=t.Input,i=t.game,c=t.math,s=t.Component},function(t){r=t.InputJoystick},function(t){u=t.GameSet}],execute:function(){var l;n._RF.push({},"6e538WBquZPtId6BFLtJSuY","joytick-pad-rotation",void 0);var h=o.ccclass;o.property,t("JoystickPadRotation",h("JoystickPadRotation")(l=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this)._input=void 0,e.accelerateRotation=0,e}e(n,t);var o=n.prototype;return o.start=function(){this._input=this.node.parent.getComponent(r),this.node.on(a.EventType.TOUCH_MOVE,this.onTouchMove,this)},o.onDestroy=function(){this.node.off(a.EventType.TOUCH_MOVE,this.onTouchMove,this)},o.onTouchMove=function(t){var e,n=t.getDeltaX(),o=t.getDeltaY(),a=n/i.canvas.width*u.Instance.screen_to_angle,s=o/i.canvas.width*u.Instance.screen_to_angle,r=Math.sqrt(a*a+s*s);r<u.Instance.accelerate_point&&(r=0);for(var l=0,h=u.Instance.move_value_list,p=0;p<h.length&&(l=p,!(r<=h[p]));p++);var v=u.Instance.move_accelerate_list[l],_=u.Instance.sensitivity;this.accelerateRotation=c.lerp(this.accelerateRotation,v,10*i.deltaTime);var y=3*u.Instance.sensitivity_a*this.accelerateRotation,d=a*(1+_*r)*y*v,f=s*(1+_*r)*y*v;null==(e=this._input)||e.onRotation(d,f)},n}(s))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/json-tool.ts",["cc","./io.ts"],(function(t){var o,n,c;return{setters:[function(t){o=t.cclegacy,n=t._decorator},function(t){c=t.IO}],execute:function(){o._RF.push({},"bfdd55zDUFPpaXKohsj6Zp5","json-tool",void 0);n.ccclass,n.property,t("JsonTool",function(){function t(){}return t.toJson=function(t){return JSON.stringify(t)},t.toObject=function(t){return JSON.parse(t)},t.toIOObject=function(t){var o=c.read(t+".json");if(o)return this.toObject(o)},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/jump-points.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,s,i,o,e;return{setters:[function(t){n=t.inheritsLoose},function(t){s=t.cclegacy,i=t._decorator,o=t.Label,e=t.Component}],execute:function(){var r;s._RF.push({},"4af39CWanhGFL/xf/7yKj0K","jump-points",void 0);var p=i.ccclass;i.property,t("JumpPoints",p("JumpPoints")(r=function(t){function s(){for(var n,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).label=void 0,n.real_points=0,n.cur_points=0,n.speed=0,n.a=1,n.str="",n}n(s,t);var i=s.prototype;return i.onEnable=function(){var t=this;if(this.label=this.node.getComponent(o),null===this.label)throw new Error("Jump Points not get component Label.");this.node.on("set_points",(function(n,s){void 0===s&&(s="s"),t.str=s,t.cur_points=0,t.real_points=n,t.speed=0,t.a=1}))},i.update=function(t){if(this.cur_points<this.real_points){this.speed+=this.a,this.cur_points+=t*this.speed,this.cur_points>this.real_points&&(this.cur_points=this.real_points);Math.ceil(this.cur_points)}},s}(e))||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/level-enable-play.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-core.ts"],(function(e){var n,t,o,l,a,r;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,l=e.animation,a=e.Component},function(e){r=e.DataGameInst}],execute:function(){var c;t._RF.push({},"35054lAYt9Fs5f8M2SOWyBv","level-enable-play",void 0);var i=o.ccclass;o.property,e("LevelEnablePlay",i("LevelEnablePlay")(c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.onEnable=function(){"level"!==r._currentGameNodeName&&(this.node.getComponent(l.AnimationController).enabled=!1)},t}(a))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/level-events-card.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./data-core.ts","./local.ts","./level.ts"],(function(t){var e,r,a,n,i,o,s,c,l,u,h,d;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,a=t._decorator,n=t.randomRange,i=t.random,o=t.randomRangeInt,s=t.Component},function(t){c=t.Msg},function(t){l=t.DataLevelInst,u=t.DataUpgradeCardInst},function(t){h=t.Local},function(t){d=t.Level}],execute:function(){var v;r._RF.push({},"c1692vIathJmq4qFvm5lNbJ","level-events-card",void 0);var _=a.ccclass;a.property,t("LevelEventsCard",_("LevelEventsCard")(v=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this)._interval=.1,e.probability=void 0,e.counter=0,e.groupCounter=void 0,e.currentCards=new Array(3),e.nextCounter=2,e.counterCard=0,e}e(r,t);var a=r.prototype;return a.start=function(){this.probability=l._data.probability_drop_card,this.groupCounter=new Array(l._data.cards.length),this._interval=n(this.probability.interval[0],this.probability.interval[1]),this.nextCounter=u._data.next_show_card_param_a,c.on("msg_kill_enemy",this.checkNextEvent.bind(this))},a.onDestroy=function(){c.off("msg_kill_enemy",this.checkNextEvent.bind(this))},a.nextEvent=function(){this.counterCard++,this.nextCounter+=u._data.next_show_card_param_a*u._data.next_show_card_param_b;for(var t=i(),e=this.probability.weights,r=-1,a=0;a<e.length;a++)if(t<=e[a]){r=a;break}if(-1===r)throw new Error("Error calculate weight level events card. value:"+t);if(this.groupCounter[r]>=this.probability.weights_max[r])this._interval=this.probability.interval_weight_max;else{for(var n=l._data.cards,o=0;o<n.length;o++)3!==o&&(this.currentCards[o]={name:n[o],info:this.calculateCardInfo(n[o])});d.Instance.currentCards=this.currentCards,console.log("Current cards:",this.currentCards),c.emit("push","upgrade_cards"),this.counter++,this.groupCounter[r]++}},a.calculateCardInfo=function(t){for(var e=u._data[t],r=e[o(0,e.length)],a=r.values.length,n=new Array(a),i=h.Instance.get(r.describe),s=0;s<a;s++){var c=r.values[s],l=this.calculateRange(c.isFloat,c.range),d=c.isFloat?100*l+" %":""+l;i=i.replace("##"+s+"##",d),n[s]={name:c.name,isFloat:c.isFloat,value:l}}return{describe:i,values:n}},a.calculateRange=function(t,e){if(2!==e.length)return 0;var r=t?n(e[0],e[1]):o(e[0],e[1]);return t&&(r=Number(r.toFixed(2))),r},a.checkNextEvent=function(t){t>this.nextCounter&&this.nextEvent()},r}(s))||v);r._RF.pop()}}}));

System.register("chunks:///_virtual/level-events-enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./level.ts","./data-core.ts"],(function(e){var t,i,n,r,o,s,a,l,u;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,r=e.randomRange,o=e.random,s=e.Component},function(e){a=e.Msg},function(e){l=e.Level},function(e){u=e.DataLevelInst}],execute:function(){var h;i._RF.push({},"272c7kqXmNH0IWBGDY3RmXm","level-events-enemy",void 0);var v=n.ccclass;e("LevelEventsEnemy",v("LevelEventsEnemy")(h=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this)._interval=.1,t.probability=void 0,t.counter=0,t.groupCounter=void 0,t.killCounter=0,t}t(i,e);var n=i.prototype;return n.start=function(){this.probability=u._data.probability_drop_enemy,globalThis.HrefSetting&&(this.probability.max=globalThis.HrefSetting.maxEnemies),this.groupCounter=new Array(u._data.enemies.length);for(var e=0;e<u._data.enemies.length;e++)this.groupCounter[e]=0;this._interval=r(this.probability.interval[0],this.probability.interval[1]),a.on("msg_remove_enemy",this.remove.bind(this))},n.onDestroy=function(){a.off("msg_remove_enemy",this.remove.bind(this))},n.generateEvent=function(){if(!(this.counter-this.killCounter>=this.probability.max)){for(var e=o(),t=this.probability.weights,i=-1,n=0;n<t.length;n++)if(e<=t[n]){i=n;break}if(-1===i)throw new Error("Error calculate weight on Level events enemy. value:"+e);if(this.groupCounter[i]>=this.probability.weights_max[i])this._interval=this.probability.interval_weight_max;else{var r=this.probability.weights_group[i],s=u._data.enemies[r];a.emit("msg_add_enemy",{res:s,groupID:i}),this.counter++,this.groupCounter[i]++,"boss_0"==s&&a.emit("level_action","warning")}}},n.remove=function(e){if(this.killCounter++,this.groupCounter[e]--,this.groupCounter[e]<0)throw new Error("Multiply remove enemy. group index = "+e);a.emit("msg_kill_enemy",this.killCounter)},n.update=function(e){(l.Instance._isStart||!u.stop||l.Instance._player)&&(this._interval-=e,this._interval<=0&&(this._interval=r(this.probability.interval[0],this.probability.interval[1]),this.generateEvent()))},i}(s))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/level-events-items.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./level.ts","./data-core.ts"],(function(t){var e,i,r,n,o,s,a,l,u;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,r=t._decorator,n=t.randomRange,o=t.random,s=t.Component},function(t){a=t.Msg},function(t){l=t.Level},function(t){u=t.DataLevelInst}],execute:function(){var v;i._RF.push({},"a92caNpNxdO6r7dE6J7gR+L","level-events-items",void 0);var h=r.ccclass;r.property,t("LevelEventsItems",h("LevelEventsItems")(v=function(t){function i(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this)._interval=.1,e.probability=void 0,e.counter=0,e.groupCounter=void 0,e}e(i,t);var r=i.prototype;return r.start=function(){this.probability=u._data.probability_drop_items,this.groupCounter=new Array(u._data.items.length);for(var t=0;t<u._data.items.length;t++)this.groupCounter[t]=0;this._interval=n(this.probability.interval[0],this.probability.interval[1]),a.on("msg_remove_item",this.remove.bind(this))},r.onDestroy=function(){a.off("msg_remove_item",this.remove.bind(this))},r.nextEvent=function(){if(this._interval=n(this.probability.interval[0],this.probability.interval[1]),!(this.counter>=this.probability.max)){for(var t=o(),e=this.probability.weights,i=-1,r=0;r<e.length;r++)if(t<=e[r]){i=r;break}if(-1===i)throw new Error("Error calculate weight on Level Infinite Events. value:"+t);if(this.groupCounter[i]>=this.probability.weights_max[i])this._interval=this.probability.interval_weight_max;else{var s=this.probability.weights_group[i],l={res:u._data.items[s],pos:void 0,groupIndex:s};a.emit("msg_add_item",l),this.counter++,this.groupCounter[i]++}}},r.remove=function(t){if(this.counter--,this.groupCounter[t]--,this.groupCounter[t]<0)throw new Error("Mutiply remove enemy. group index = "+t)},r.update=function(t){(l.Instance._isStart||!u.stop||l.Instance._player)&&(this._interval-=t,this._interval<=0&&this.nextEvent())},i}(s))||v);i._RF.pop()}}}));

System.register("chunks:///_virtual/level-events.ts",["./rollupPluginModLoBabelHelpers.js","cc","./level.ts"],(function(t){var e,n,i,s,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,s=t.Component},function(t){r=t.Level}],execute:function(){var c;n._RF.push({},"1bf46/JS3pHI5a7RQxEO5cw","level-events",void 0);var _=i.ccclass;i.property,t("LevelEvents",_("LevelEvents")(c=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._events={},e._time=0,e._index=0,e._max=0,e._cur=void 0,e}e(n,t);var i=n.prototype;return i.start=function(){},i.init=function(t){this._events=t,this._index=0,this._max=this._events.length,this._cur=this._events[this._index]},i.updateEvent=function(t){this._index>=this._max||(this._time+=t,this._time>this._cur.time&&(r.Instance.addEnemy(this._cur.res),this._index++,this._index<this._max&&(this._cur=this._events[this._index])))},n}(s))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/level.ts",["./rollupPluginModLoBabelHelpers.js","cc","./action.ts","./save.ts","./msg.ts","./singleton.ts","./res.ts","./res-cache.ts","./actor.ts","./drop-item.ts","./navigation-system.ts","./data-core.ts","./fun.ts","./res-pool.ts","./guide.ts"],(function(t){var e,n,i,s,a,o,r,c,l,d,_,u,h,p,m,v,f,g,y,b;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,s=t.find,a=t.v3},function(t){o=t.Action},function(t){r=t.Save},function(t){c=t.Msg},function(t){l=t.Singleton},function(t){d=t.Res},function(t){_=t.ResCache},function(t){u=t.Actor},function(t){h=t.DropItem},function(t){p=t.NavSystem},function(t){m=t.DataLevelInst,v=t.DataNavigationInst,f=t.DataEquipInst},function(t){g=t.fun},function(t){y=t.ResPool},function(t){b=t.Guide}],execute:function(){n._RF.push({},"de76f/v+B1EdKdfUqs0fB0z","level",void 0);i.ccclass,i.property,t("Level",function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._action=void 0,e._data={},e._time=0,e._isStart=!1,e._spawn_pos=a(0,2,0),e._scoreRate=0,e._player=void 0,e._enemies=[],e._objectNode=void 0,e.currentCards=new Array(3),e}e(n,t);var i=n.prototype;return i.init=function(){var t;this._data=Object.assign(_.Instance.getJson("data-level").json),this._action=new o("action-level"),this._objectNode=null==(t=s("init"))?void 0:t.getChildByName("objects"),c.on("msg_level_start",this.onLevelStart.bind(this)),c.on("level_action",this.levelAction.bind(this)),c.on("level_do",this.do.bind(this)),c.on("msg_add_enemy",this.addEnemy.bind(this)),c.on("msg_remove_level_enemy",this.removeEnemy.bind(this)),c.on("msg_add_item",this.addDrop.bind(this)),c.on("msg_replay",this.onReplay.bind(this))},i.do=function(t){this[t]()},i.onLevelStart=function(){m.stop=!1,this._isStart=!0,r.Instance.nextStatistics(),p.Init(v._data),this.levelAction("start")},i.pause=function(){m.stop=!0},i.resume=function(){m.stop=!1},i.onReplay=function(){g.delay((function(){c.emit("push","level")}),2)},i.levelAction=function(t){this._action.on(t)},i.addPlayer=function(){var t=_.Instance.getPrefab(this._data.prefab_player),e=d.inst(t,this._objectNode,this._data.spawn_pos);if(this._player=e.getComponent(u),null===this._player)throw new Error("Level add player can not bind Actor Component.");this._player.bulletBox=5,this._player.isPlayer=!0,this._player.init("data-player"),this._player.updateHP()},i.addEnemy=function(t){var e=p.randomDropPoint(),n=y.Instance.pop(t.res,e.position);n.name=t.res;var i=n.getComponent(u);if(i)return i._groupIndex=t.groupID,i.init("data-"+t.res),i.bulletBox=9999,i.isReady=!0,y.Instance.pop(i._data.effect_born,e.position),this._enemies.push(n),n;console.error("error inst enemy lose actor component. the name is :",t.res)},i.removeEnemy=function(t){for(var e=0;e<this._enemies.length;e++)if(this._enemies[e]===t){this._enemies.splice(e,1);break}},i.addDrop=function(t){if(void 0===t.pos){var e=p.randomDropPoint();t.pos=e.position}var n=y.Instance.pop("drop_item",t.pos,void 0).getComponent(h),i=f.get(t.res);if(null===n)throw new Error("Drop node can not add component Drop Item.");n.init(t.res,i.drop_effect_index,t.groupIndex)},i.addObj=function(t){var e=p.randomDropPoint(),n=_.Instance.getPrefab(t);return d.inst(n,this._objectNode,e.position)},i.update=function(t){b.Instance.isGuide||this._isStart&&(m.stop||(this._time+=t,this._action.update(t),c.emit("msg_update_map")))},i.upgradePlayerAttributes=function(t){for(var e=this.currentCards[t].info.values,n=e.length,i=0;i<n;i++){console.log(e[i]);var s=e[i];this._player._data[s.name]=s.value}},i.getUpgradeCardInfo=function(t){return this.currentCards[t].info.describe},i.gameOver=function(){m.stop=!0,this._isStart=!1,c.emit("msg_stat_time",{key:"play",time:this._time}),this.calculateScore(),this._enemies=[],r.Instance.saveGameOver(this._time,this._scoreRate),this._player=void 0},i.calculateScore=function(){var t=r.Instance.get("day");void 0===t?t=0:t++,r.Instance.setValue("day",t);var e=r.Instance.getStatistics("killedTime"),n=r.Instance.getStatistics("hit_bodyTimes"),i=r.Instance.getStatistics("hit_headTimes"),s=r.Instance.getStatistics("fireTimes"),a=0==s?0:(n+i)/s;r.Instance.setStatistics("hit_rate",Number(a.toFixed(4)));var o=r.Instance.getStatistics("be_hit_bodyTimes")+r.Instance.getStatistics("be_hit_headTimes");r.Instance.setStatistics("be_hit_times",o);var c=Math.max(o,r.Instance.getStatistics("enemy_fireTimes")),l=0==c?0:1-o/c;r.Instance.setStatistics("dodge_rate",Number(l.toFixed(4)));var d=this._data.each_rate_value,_=Math.floor(e*this._data.killed_to_score+a*d+l*d+this._time*this._data.survival_time_to_score);r.Instance.setStatistics("level_score",_);var u=this._data.score_level,h=!0;this._scoreRate=u.length-1;for(var p=0;p<u.length;p++){var m=u[p];for(var v in h=!0,m)if("score"!=v&&r.Instance._currentStatistics[v]<m[v]){h=!1;break}if(h){this._scoreRate=p;break}}r.Instance.setStatistics("score_rate",this._scoreRate)},i.getLevelScore=function(){return this._data.score_level[this._scoreRate].score},n}(l));n._RF.pop()}}}));

System.register("chunks:///_virtual/light-cluster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./href-setting.ts","./editor.ts","./world-cluster.ts"],(function(t){var e,i,r,o,n,a,s,l,c,u,d,h,g,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.geometry,l=t.Vec3,c=t.renderer,u=t.clamp,d=t.director,h=t.MobilityMode},function(t){g=t.HrefSetting},null,function(t){f=t.WorldCluster}],execute:function(){var p,y,v;n._RF.push({},"0dd3dIXZQFKXKU5yq3EIf4S","light-cluster",void 0);var b=a.ccclass,m=a.executeInEditMode,x=a.property,I=new s.Sphere;new l,t("LightWorldCluster",b("LightWorldCluster")(p=m((v=e((y=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).pixelsPerObjectFloat=4,e.lights=[],e.dirty=!0,r(e,"forceUpdate",v,o(e)),e._dirtyTimeout=void 0,e}i(e,t);var n=e.prototype;return n.onEnable=function(){globalThis.lightCluster=this},n.onDisable=function(){globalThis.lightCluster===this&&(globalThis.lightCluster=void 0)},n.addObjectData=function(t,e){var i=this.dataInfoFloat,r=e*this.dataInfoTextureFloat.width*4,o=t instanceof c.scene.SpotLight,n=t.node.worldPosition;i[r++]=n.x,i[r++]=n.y,i[r++]=n.z,i[r++]=o?1:0;var a=t.color;i[r++]=a.x,i[r++]=a.y,i[r++]=a.z;if(i[r++]=2604165638331324e-20*t.luminance*1e4,o){var s=t,l=u(s.size,0,89)*Math.PI/180,d=u(s.angle/2,l+.001,89*Math.PI/180+.001),h=Math.cos(d),g=1/(Math.cos(l)-h);i[r++]=t.range,i[r++]=h,i[r++]=g}else i[r++]=t.range,i[r++]=t.size,i[r++]=0;if(i[r++]=0,o){t.update();var f=t.direction;i[r++]=f.x,i[r++]=f.y,i[r++]=f.z,i[r++]=0}},n.getBoundingBox=function(t,e){var i=t.node.worldPosition;s.Sphere.set(I,i.x,i.y,i.z,t.range),I.getBoundary(e.min,e.max),e.radius=t.range,e.center.set(i)},n.findObjects=function(){var t=this.lights;t.length=0;for(var e=0;e<d.root.scenes.length;e++){for(var i=d.root.scenes[e].sphereLights,r=0;r<i.length;r++)i[r].node.activeInHierarchy&&i[r].node.mobility!==h.Static&&t.push(i[r]);for(var o=d.root.scenes[e].spotLights,n=0;n<o.length;n++)o[n].node.activeInHierarchy&&o[n].node.mobility!==h.Static&&t.push(o[n])}return t},n.update=function(e){var i=this;(this.dirty||this.forceUpdate||g.forceUpdateLighting)&&(t.prototype.update.call(this,e),this._dirtyTimeout||(this._dirtyTimeout=setTimeout((function(){i.dirty=!1,i._dirtyTimeout=null}),500)))},e}(f)).prototype,"forceUpdate",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=y))||p)||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/light-flash.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,a,o,s,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.SphereLight,l=t.Component}],execute:function(){var c,u,h,p,g;a._RF.push({},"471dcxAP2VNQJcIMx39HMwZ","light-flash",void 0);var f=o.ccclass,_=o.property;t("light_flash",f("light_flash")((h=e((u=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this)._light=null,e._curLuminance=0,e._range=0,e._time=0,n(e,"min",h,r(e)),n(e,"range",p,r(e)),n(e,"speed",g,r(e)),e}i(e,t);var a=e.prototype;return a.start=function(){this._light=this.getComponent(s),this._curLuminance=this.min},a.update=function(t){this._time=this._time+t*this.speed,this._range=Math.sin(this._time)*this.range+this.min,this._light.range=this._range},e}(l)).prototype,"min",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p=e(u.prototype,"range",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),g=e(u.prototype,"speed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),c=u))||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/light-flow-camera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){var i,o,a,e,r,n,c;return{setters:[function(t){i=t.inheritsLoose},function(t){o=t.cclegacy,a=t._decorator,e=t.find,r=t.v3,n=t.Component},function(t){c=t.UtilVec3}],execute:function(){var s;o._RF.push({},"200b8Q9SMdL7ZiT4PPLfrQJ","light-flow-camera",void 0);var l=a.ccclass;a.property,t("LightFlowCamera",l("LightFlowCamera")(s=function(t){function o(){for(var i,o=arguments.length,a=new Array(o),e=0;e<o;e++)a[e]=arguments[e];return(i=t.call.apply(t,[this].concat(a))||this)._camera=void 0,i._pos=r(0,0,0),i._waitFind=1,i}return i(o,t),o.prototype.update=function(t){if(null===this._camera){if(this._waitFind-=t,this._waitFind<0){this._waitFind=1;var i=e("camera_controller/camera_main");null!==i&&(this._camera=i)}}else c.copy(this._pos,this._camera.worldPosition),this.node.setPosition(this._pos)},o}(n))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/load-default-pipeline.ts",["cc"],(function(){var e,i,n,l,a,t,_;return{setters:[function(s){e=s.cclegacy,i=s.game,n=s.director,l=s.Game,a=s.assetManager,t=s.instantiate,_=s.CCObject}],execute:function(){e._RF.push({},"c8278Rxe0JEMqz3sJVBF3Qg","load-default-pipeline",void 0),console.log("load default pipeline"),!i.canvas||globalThis.Build||(n.__runSceneImmediate||(n.__runSceneImmediate=n.runSceneImmediate),n.runSceneImmediate=function(e,i,l){globalThis.__pipeline__.parent=null,n.__runSceneImmediate.call(this,e,i,l),!globalThis.pipelineAssets&&globalThis.__pipeline__&&(globalThis.__pipeline__.parent=n.getScene())},i.on(l.EVENT_GAME_INITED,(function(){globalThis.__pipeline__||a.loadAny("223548d6-e1d4-462a-99e1-f4046b1d0647",(function(e,i){if(e)return console.error(e);var n=t(i);n.name="pipeline-default-persist",n.hideFlags|=_.Flags.DontSave,globalThis.__pipeline__=n}))}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/load-in-editor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./npm.ts"],(function(e){var t,r,n,i,o,a,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.CCString,l=e.Component},null],execute:function(){var s,p,u,d,f;o._RF.push({},"12ef5TWDk1C9Kd6fdIhnAgL","load-in-editor",void 0);var h=a.ccclass,y=a.property,_=a.executeInEditMode;e("load_in_editor",(s=h("load_in_editor"),p=y({type:c}),s(u=_((f=t((d=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"prefabPaths",f,i(t)),t}return r(t,e),t.prototype.start=function(){},t}(l)).prototype,"prefabPaths",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=d))||u)||u));o._RF.pop()}}}));

System.register("chunks:///_virtual/local-label.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./util2.ts","./local.ts"],(function(e){var t,n,o,l,r,s,c,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,l=e.Label,r=e.Component},function(e){s=e.Msg},function(e){c=e.UtilNode},function(e){i=e.Local}],execute:function(){var a;n._RF.push({},"fab76mfQ8NBRqQEPZXamO3u","local-label",void 0);var f=o.ccclass;o.property,e("LocalLabel",f("LocalLabel")(a=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(t=e.call.apply(e,[this].concat(o))||this).label=void 0,t.key="",t}t(n,e);var o=n.prototype;return o.start=function(){s.bind("refresh_local",this.refresh,this),this.label=c.getComponent(this.node,l),this.key=this.node.name.slice(6),this.refresh()},o.onDestroy=function(){s.off("refresh_local",this.refresh)},o.refresh=function(){this.label.string=i.Instance.get(this.key)},n}(r))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/local.ts",["./rollupPluginModLoBabelHelpers.js","cc","./save.ts","./msg.ts","./singleton.ts","./res-cache.ts"],(function(e){var n,t,a,i,s,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){a=e.Save},function(e){i=e.Msg},function(e){s=e.Singleton},function(e){o=e.ResCache}],execute:function(){t._RF.push({},"593c2Gv5lpB/7Edb63mhm2g","local",void 0);e("Local",function(e){function t(){for(var n,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(n=e.call.apply(e,[this].concat(a))||this).index=1,n.max=2,n._data=Object.create(null),n._map=Object.create(null),n}n(t,e);var s=t.prototype;return s.init=function(){var e=this;if(this._data=o.Instance.getJson("local").json,this.max=this._data.language.length,this.index=a.Instance._cur.languageIndex,-1===this.index){var n=window.navigator.language.toLocaleLowerCase();n=n.replace("-","_"),console.log(n);for(var s=0;s<this._data.language.length;s++){var r=this._data.language[s];if(n.includes(r)){this.index=s;break}}-1===this.index&&(this.index=2)}i.on("next_language",(function(){e.index++,e.index>=e.max&&(e.index=0),i.emit("msg_save_set",{key:"languageIndex",value:e.index}),t.Instance.refresh()})),i.on("pre_language",(function(){e.index--,e.index<0&&(e.index=e.max-1),i.emit("msg_save_set",{key:"languageIndex",value:e.index}),t.Instance.refresh()})),this.refresh()},s.get=function(e){var n=this._map[e];return n||e},s.getShowName=function(){return this._data.show_name[this.index]},s.refresh=function(){var e=this._data.language[this.index];this._map=o.Instance.getJson(e).json,i.emit("refresh_local")},t}(s));t._RF.pop()}}}));

System.register("chunks:///_virtual/log.ts",["cc"],(function(n){var o;return{setters:[function(n){o=n.cclegacy}],execute:function(){o._RF.push({},"c4df3A9q5lAjoQvwRuVAAFl","log",void 0);n("Log",function(){function n(){}return n.Init=function(){},n.info=function(n){console.info(n)},n.debug=function(n){console.log(n)},n.error=function(n){console.error(n)},n.warn=function(n){console.warn(n)},n}());o._RF.pop()}}}));

System.register("chunks:///_virtual/logo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,e,n,r;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o._decorator,r=o.Component}],execute:function(){var c;e._RF.push({},"1a1264ux6tKUpHijpjonNf7","logo",void 0);var u=n.ccclass;n.type,n.property,o("logo",u("logo")(c=function(o){function e(){return o.apply(this,arguments)||this}return t(e,o),e}(r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./test-ghost.ts","./action.ts","./actor-base.ts","./actor-task-go-target.ts","./actor-tasks.ts","./astar.ts","./brain.ts","./steering-basic.ts","./steering-behaviors.ts","./steering-seek.ts","./Electron.ts","./music-compose-random.ts","./music-compose-state.ts","./music-compose-value.ts","./sound-actor-main.ts","./sound-actor.ts","./sound-enable-play.ts","./sound.ts","./curve-asset.ts","./curve-group.ts","./g-curve.ts","./test-curve.ts","./data-base.ts","./editor-calculate-nodes.ts","./fx-actor-fall-point.ts","./fx-auto-remove.ts","./fx-base.ts","./fx-group.ts","./fx-init.ts","./fx.ts","./light-flash.ts","./graphics.ts","./guide.ts","./aim-control.ts","./aim-ik.ts","./ik-bone.ts","./ik-point.ts","./ik-solver-aim.ts","./ik-solver-heuristic.ts","./ik-solver.ts","./math-util.ts","./weapon-aim.ts","./IActorInput.ts","./exit-pointer-lock.ts","./input-base.ts","./input-equip-select.ts","./input-gamepad.ts","./input-handle.ts","./input-joystick.ts","./input-keyboard.ts","./input-mouse.ts","./input-pointer-lock.ts","./joystick-auto-hidden.ts","./joystick-move.ts","./joystick-pad-action.ts","./joystick-pad.ts","./joystick.ts","./joytick-pad-rotation.ts","./touch-cancel.ts","./io.ts","./json-tool.ts","./log.ts","./notify.ts","./local-label.ts","./local.ts","./msg.ts","./singleton.ts","./polyfill.ts","./render-tool.ts","./res-cache.ts","./res-destroy.ts","./res-editor-cache.ts","./res-pool.ts","./res-texture.ts","./res.ts","./g-scene.ts","./sensor-actions.ts","./sensor-anig.ts","./sensor-audio.ts","./sensor-effect.ts","./sensor-ground.ts","./sensor-msg.ts","./sensor-probe.ts","./sensor-ray-node-to-node.ts","./sensor-rays-angle.ts","./sensor-rays.ts","./sensor-slope.ts","./task.ts","./fil-smooth.ts","./slider-2d.ts","./ui-auto-hidden.ts","./ui-base.ts","./ui-bind.ts","./ui-com.ts","./ui-display-by-state-auto-hidden.ts","./ui-display-by-state.ts","./ui-enable-play-anim.ts","./ui-enable-play-animation.ts","./ui-enable-play.ts","./ui-fadein.ts","./ui-play-anim.ts","./ui.ts","./camera-controller-zoom.ts","./camera-controller2.ts","./camera-rotation.ts","./MsgPlayAnimation.ts","./bone-render.ts","./character-render.ts","./collider-group.ts","./data-structure.ts","./debug-util.ts","./delay-show-node.ts","./destroy-settings.ts","./enable-play-animation.ts","./force-area.ts","./fun.ts","./g-math.ts","./gizmo-camera.ts","./grandom.ts","./hidden-state.ts","./light-flow-camera.ts","./msg-events.ts","./stretched-billboard.ts","./time-scale-hack.ts","./time-scale-ui.ts","./ui-roller.ts","./util2.ts","./dev.ts","./gm.ts","./actor-animation-graph-group.ts","./actor-animation-graph.ts","./actor-animator-contorller.ts","./actor-auto-check-aim.ts","./actor-axe.ts","./actor-bag.ts","./actor-brain.ts","./actor-crossbow.ts","./actor-effect.ts","./actor-enemy-gun.ts","./actor-equip-base.ts","./actor-equip-view.ts","./actor-equipment.ts","./actor-face.ts","./actor-follow-path-move.ts","./actor-foot-ik.ts","./actor-grenade-gun.ts","./actor-grenade.ts","./actor-handgun.ts","./actor-ik.ts","./actor-input-brain.ts","./actor-input.ts","./actor-interface.ts","./actor-items.ts","./actor-lookat.ts","./actor-machine-gun.ts","./actor-main.ts","./actor-melee-weapon.ts","./actor-move-cct.ts","./actor-move-slope.ts","./actor-move.ts","./actor-part.ts","./actor-physical-skin.ts","./actor-piranha.ts","./actor-sensor-drop-item.ts","./actor-shotgun.ts","./actor-sound.ts","./actor-statistics.ts","./actor-strength.ts","./actor-turn.ts","./actor.ts","./animationgraph-move.ts","./damage-core.ts","./infrared-tracker.ts","./level-enable-play.ts","./projectile-grenade.ts","./actor-aim.ts","./anim-foot-lock.ts","./anim-graph-over.ts","./anim-graph.ts","./anim-pelvis.ts","./anim-player-move.ts","./anim-pose-event.ts","./anim-pose-move.ts","./anim-pose.ts","./camera-auto-bind-occlusion.ts","./camera-controller.ts","./camera-fps.ts","./camera-move-target.ts","./camera-msg.ts","./camera-player.ts","./camera-shake.ts","./camera-smooth-follow.ts","./camera-tps-cct.ts","./camera-tps.ts","./smooth-local-z.ts","./GameQuality.ts","./achievement.ts","./bind.ts","./buff.ts","./data-camera.ts","./data-core.ts","./data-equip.ts","./data-game-set.ts","./data-game.ts","./data-level.ts","./data-navigation.ts","./data-pool.ts","./data-sound.ts","./data-upgrade-card.ts","./game-set.ts","./game-type.ts","./game.ts","./save.ts","./fx-bullet-tracer.ts","./fx-car-random-move.ts","./fx-delay-set.ts","./fx-fly-car.ts","./fx-ghost-vertex.ts","./fx-ghost.ts","./fx-hit-direction.ts","./fx-light-flash.ts","./fx-ray-line.ts","./gun-tracer-pool.ts","./sfx-heart.ts","./init.ts","./preload.ts","./check-auto-pick.ts","./drop-item.ts","./substance-core.ts","./level-events-card.ts","./level-events-enemy.ts","./level-events-items.ts","./level-events.ts","./level.ts","./spwans-group.ts","./logo.ts","./msg-aim-ik.ts","./navigation-debugger.ts","./navigation-map.ts","./navigation-paths-test.ts","./navigation-point.ts","./navigation-points.ts","./navigation-region.ts","./navigation-system.ts","./grp-bag.ts","./grp-change-equips.ts","./grp-dev-move.ts","./grp-equip-info.ts","./grp-gm.ts","./grp-guide.ts","./grp-map.ts","./grp-picked-tips.ts","./grp-select-equips.ts","./jump-points.ts","./ui-aim-range.ts","./ui-animation.ts","./ui-blood-manager.ts","./ui-blood.ts","./ui-fx.ts","./ui-grp-picked-tips.ts","./ui-guide-platform.ts","./ui-hit-head.ts","./ui-hp-score.ts","./ui-loading.ts","./ui-move-show.ts","./ui-score.ts","./ui-svc-reset-pos.ts","./delay-play.ts","./delay_play_animation.ts","./test-move-target.ts","./test-steering-init.ts","./tap-play.ts","./test-actor-move-cct.ts","./test-actor-move.ts","./test-amoy-animation-cct.ts","./test-amoy-animation.ts","./test-anig.ts","./test-camera-debug.ts","./test-cct-vector.ts","./test-collider-mesh-switch.ts","./test-forward.ts","./test-gun-fire.ts","./test-gun-tracer.ts","./test-ik.ts","./test-mouse-move.ts","./test-normal.ts","./test-physic.ts","./test-open-gizmo.ts","./test-pose-move.ts","./test-rifle-state.ts","./test-res-load.ts","./test-rigidbody-vector.ts","./test-slope-direction.ts","./test-slope-move.ts","./test-slope-vector.ts","./test-stairs.ts","./test-stretched-billboard.ts","./test-ui.ts","./disable-update-ubo.ts","./switch-probe.ts","./animation-to-oribit.ts","./generate-white-box.ts","./move-camera-x.ts","./test-reflect.ts","./test-taa.ts","./camera-setting.ts","./bloom.ts","./light-cluster.ts","./reflection-cluster.ts","./utils.ts","./world-cluster.ts","./delay-active.ts","./height-fog.ts","./load-in-editor.ts","./node-id-manager.ts","./node-id.ts","./render-id-material.ts","./static-occlusion-area.ts","./static-occlusion-baker.ts","./static-occlusion-block.ts","./static-occlusion-culling.ts","./halton.ts","./pool.ts","./raycast-gpu.ts","./raycast.ts","./utils3.ts","./pipeline-assets.ts","./reflection-probe-utils.ts","./scene-particles.ts","./sky.ts","./save-gltf.ts","./static-area-batch.ts","./static-batch-comp.ts","./static-culling.ts","./taa-mask.ts","./taa.ts","./disable-probe-update-runtime.ts","./index.ts","./blocklistedGPUS.ts","./cleanRenderer.ts","./deobfuscateAppleGPU.ts","./deobfuscateRenderer.ts","./deviceInfo.ts","./error.ts","./getGPUVersion.ts","./getLevenshteinDistance.ts","./getWebGLContext.ts","./ssr.ts","./util.ts","./webgl-constants.ts","./load-default-pipeline.ts","./bloom-pass.ts","./deferred-lighting-pass.ts","./deferred-post-pass.ts","./fsr-pass.ts","./gbuffer-pass.ts","./setting.ts","./taa-pass.ts","./zoom-screen-pass.ts","./pipeline-manager.ts","./gpu-mobiles.ts","./gpu.ts","./href-setting.ts","./spector.ts","./test-custom.ts","./async.ts","./debug.ts","./editor-camera-placer.ts","./editor.ts","./event.ts","./math.ts","./npm.ts","./orbit-camera.ts","./switch-lod.ts","./utils2.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/math-util.ts",["cc"],(function(t){var e,r,n,a,o,i,u;return{setters:[function(t){e=t.cclegacy,r=t._decorator,n=t.Quat,a=t.Vec3,o=t.Mat4,i=t.geometry,u=t.game}],execute:function(){var c;e._RF.push({},"deef428f9JOPLejXO+uNHyr","math-util",void 0);var l=r.ccclass,s=(r.property,new n),y=new a,f=new a,d=new o,z=new o,m=new a(0,0,1);new i.Ray,t("default",l("MathUtil")(c=function(){function t(){}return t.degreesToRadians=function(t){return t*(Math.PI/180)},t.radiansToDegrees=function(t){return t*(180/Math.PI)},t.clamp01=function(t){return t<0?0:t>1?1:t},t.clampDegrees=function(t,e,r){for(void 0===e&&(e=-180),void 0===r&&(r=180);t<e;)t+=360;for(;t>r;)t-=360;return t},t.transformDegreesToNear=function(t,e){if(Math.abs(t-e)<180)return t;if(t<e){for(;t<e;)t+=360;return t}for(;t>e;)t-=360;return t},t.clamp=function(t,e,r){return t<e?e:t>r?r:t},t.inverseLerp=function(e,r,n){var a=r-e;return Math.abs(a)<1e-6?0:(n=(n-e)/a,t.clamp01(n))},t.remap=function(t,e,r,n,a){return n+(t-e)/(r-e)*(a-n)},t.convertToNodeSpace=function(t,e,r){return r.getWorldMatrix(d),o.invert(z,d),a.transformMat4(t,e,z)},t.convertToWorldSpace=function(t,e,r){return r.getWorldMatrix(d),a.transformMat4(t,e,d)},t.randomInt=function(t,e){return t>e?-1:t+Math.round((e-t)*Math.random())},t.directionToNodeSpace=function(e,r,n){return n.getWorldPosition(y),y.add(r),t.convertToNodeSpace(e,y,n),e},t.getWorldLine=function(t,e,r,o){t.getWorldPosition(y),e.getWorldPosition(f),a.lerp(o,y,f,.5),f.subtract(y);var i=f.length();return f.normalize(),n.rotationTo(r,m,f),i},t.getWorldLineByPos=function(t,e,r,o){a.copy(y,t),a.copy(f,e),a.lerp(o,y,f,.5),f.subtract(y);var i=f.length();return f.normalize(),n.rotationTo(r,m,f),i},t.distance=function(t,e){return t.getWorldPosition(y),e.getWorldPosition(f),a.distance(y,f)},t.hDistance=function(t,e){return a.copy(y,t),a.copy(f,e),y.y=0,f.y=0,a.distance(y,f)},t.getMoveDirectionByCameraDirection=function(t,e,r,n){var o=e.x,i=e.y,u=Math.atan2(-i,o)-.5*Math.PI;return a.rotateY(t,r,a.ZERO,u),t},t.getLocalDegree=function(e,r,n){var o=e.x,i=e.y,u=Math.atan2(-i,o)-.5*Math.PI;return a.rotateY(y,r,a.ZERO,u),n.getWorldPosition(f),f.add(y),t.convertToNodeSpace(y,f,n),y.y=0,y.normalize(),t.radiansToDegrees(Math.atan2(y.x,y.z))},t.smoothDamp=function(e,r,n,a,o){void 0===o&&(o=100);var i=2/(a=Math.max(1e-4,a)),c=i*u.deltaTime,l=1/(1+c+.479999989271164*c*c+.234999999403954*c*c*c),s=e-r,y=r,f=o*a,d=t.clamp(s,-f,f);r=e-d;var z=(n.value+i*d)*u.deltaTime;n.value=(n.value-i*z)*l;var m=r+(d+z)*l;return y-e>0==m>y&&(m=y,n.value=(m-y)/u.deltaTime),m},t.fromToRotation=function(t,e,r){if(e.equals(a.ZERO)||r.equals(a.ZERO))return n.IDENTITY;var o=Math.abs(e.x);o=(o=o>Math.abs(e.y)?o:Math.abs(e.y))>Math.abs(e.z)?o:Math.abs(e.z),e=e.multiplyScalar(1/o),o=(o=(o=Math.abs(r.x))>Math.abs(r.y)?o:Math.abs(r.y))>Math.abs(r.z)?o:Math.abs(r.z),r=r.multiplyScalar(1/o);var i=.001;e.x=Math.abs(e.x)<=i?0:e.x,e.y=Math.abs(e.y)<=i?0:e.y,e.z=Math.abs(e.z)<=i?0:e.z,r.x=Math.abs(r.x)<=i?0:r.x,r.y=Math.abs(r.y)<=i?0:r.y,r.z=Math.abs(r.z)<=i?0:r.z,a.normalize(y,r),a.normalize(f,e),a.add(y,y,f);var u=new a;if(a.normalize(u,y),u.equals(a.ZERO)){if(0!=e.x&&0==e.y&&0==e.z)return new n(0,1,0,0);if(0==e.x&&0!=e.y&&0==e.z)return new n(1,0,0,0);if(0==e.x&&0==e.y&&0!=e.z)return new n(1,0,0,0);if(0==e.x&&0!=e.y&&0!=e.z)return new n(1,0,0,0);if(0!=e.x&&0==e.y&&0!=e.z){a.normalize(y,r),a.normalize(f,e);var c=y.z,l=f.x;return c+l<0||c+l==0&&c<0?new n(-c,0,-l,0):new n(c,0,l,0)}if(0!=e.x&&0!=e.y&&0==e.z){a.normalize(y,r),a.normalize(f,e);var s=y.y,d=f.x;return s+d<0||s+d==0&&s<0?new n(-s,-d,0,0):new n(s,d,0,0)}u.y=e.z,u.z=r.y,u.normalize()}return a.normalize(y,r),a.normalize(f,u),n.multiply(t,new n(-y.x,-y.y,-y.z,0),new n(f.x,f.y,f.z,0)),t},t.deltaAngle=function(t,e){return(e%=360)-(t%=360)>180?t-e:e-t},t.axisAngle=function(t,e,r){var a=Math.sin(r/2);return new n(e.x*a,e.y*a,e.z*a,Math.cos(r/2))},t.quatLerp=function(e,r,a,o){return n.dot(r,a)<0?s.set(-a.x,-a.y,-a.z,-a.w):s.set(a),n.lerp(e,r,s,t.clamp01(o)),n.normalize(e,e),e},t.sLerp=function(t,e,r,n){a.subtract(y,r,e),a.multiplyScalar(y,y,n),a.add(f,e,y);var o=e.length()/f.length();return a.multiplyScalar(t,f,o),t},t.orthoNormalize=function(t,e,r,n){a.normalize(y,r),a.rotateY(t,y,n,90),a.cross(e,t,y)},t.clampVec3=function(t,e,r){return void 0===e&&(e=null),void 0===r&&(r=null),e&&(t.x<e.x&&(t.x=e.x),t.y<e.y&&(t.y=e.z),t.z<e.y&&(t.z=e.z)),r&&(t.x>r.x&&(t.x=r.x),t.y>r.y&&(t.y=r.z),t.z>r.y&&(t.z=r.z)),t},t}())||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/math.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){t({RGBE2Linear:function(t,n){var r=Math.pow(2,t.w-128)/255;n.x*=r,n.y*=r,n.z*=r,n.w=1},lerp:function(t,n,r,a){void 0===a&&(a=.01);var e=t+(n-t)*r;Math.abs(n-e)<=a&&(e=n);return e},powerOfTwo:function(t){var n=1;for(;n<t;)n*=2;return n},roundUp:function(t,n){return 0===n?t:Math.ceil(t/n)*n},sRGB2Linear:function(t){return t/=255,t=Math.pow(t,2.2)},vec3_ceil:function(t,n){return t.x=Math.ceil(n.x),t.y=Math.ceil(n.y),t.z=Math.ceil(n.z),t},vec3_floor:function(t,n){return t.x=Math.floor(n.x),t.y=Math.floor(n.y),t.z=Math.floor(n.z),t},vec3_max:function(t,n,r){return t.x=Math.max(n.x,r.x),t.y=Math.max(n.y,r.y),t.z=Math.max(n.z,r.z),t},vec3_min:function(t,n,r){return t.x=Math.min(n.x,r.x),t.y=Math.min(n.y,r.y),t.z=Math.min(n.z,r.z),t}}),n._RF.push({},"c9667xadYhBUZ/AstRYtfMf","math",void 0);var r,a;t("toHalf16",(r=new Float32Array(1),a=new Int32Array(r.buffer),function(t){r[0]=t;var n=a[0],e=n>>16&32768,o=n>>12&2047,c=n>>23&255;return c<103?e:c>142?(e|=31744,e|=(255==c?0:1)&&8388607&n):c<113?e|=((o|=2048)>>114-c)+(o>>113-c&1):(e|=c-112<<10|o>>1,e+=1&o)}));n._RF.pop()}}}));

System.register("chunks:///_virtual/move-camera-x.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,a,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Component}],execute:function(){var c,u,p;o._RF.push({},"e7e17QFrg5Os5Tcfn68mMit","move-camera-x",void 0);var l=a.ccclass,f=a.property;e("move_camera_x",l("move_camera_x")((p=t((u=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"speed",p,n(t)),t._run=!1,t}r(t,e);var o=t.prototype;return o.start=function(){this._run=!0},o.update=function(e){if(this._run){var t=this.node.position;this.node.setPosition(t.x+e*this.speed,t.y,t.z)}},t}(s)).prototype,"speed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),c=u))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/msg-aim-ik.ts",["./rollupPluginModLoBabelHelpers.js","cc","./aim-ik.ts","./msg.ts"],(function(i){var t,n,e,s,o,r,a,c,f;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,e=i.initializerDefineProperty,s=i.assertThisInitialized},function(i){o=i.cclegacy,r=i._decorator,a=i.Component},function(i){c=i.default},function(i){f=i.Msg}],execute:function(){var u,l,m,p,h,g;o._RF.push({},"5ea38lVmipHCLC83pd1R6kM","msg-aim-ik",void 0);var y=r.ccclass,b=r.property;i("MsgAimIK",(u=y("MsgAimIK"),l=b({type:c}),u((h=t((p=function(i){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=i.call.apply(i,[this].concat(o))||this,e(t,"msg",h,s(t)),e(t,"aimIK",g,s(t)),t}n(t,i);var o=t.prototype;return o.start=function(){f.on(this.msg+"_on",this.onIK.bind(this)),f.on(this.msg+"_off",this.offIK.bind(this)),this.setActive(!1)},o.onDestroy=function(){f.off(this.msg+"_on",this.onIK.bind(this)),f.off(this.msg+"_off",this.offIK.bind(this))},o.onIK=function(){this.setActive(!0)},o.offIK=function(){this.setActive(!1)},o.setActive=function(i){this.aimIK.enableAim=i},t}(a)).prototype,"msg",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"msg_player_ik"}}),g=t(p.prototype,"aimIK",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=p))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/msg-events.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(t){var e,n,i,r,s,o,c,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,c=t.Component},function(t){a=t.Msg}],execute:function(){var u,l,p;s._RF.push({},"55111opCcxJ47T+RlZB1BDC","msg-events",void 0);var g=o.ccclass,v=o.property;t("MsgEvents",g("MsgEvents")((p=e((l=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,i(e,"msg",p,r(e)),e}n(e,t);var s=e.prototype;return s.start=function(){a.bind(this.msg,this.setActive,this)},s.setActive=function(t){this.node.active=t},e}(c)).prototype,"msg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=l))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/msg.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"67a38mOSWNH2YAjqnIAO/fp","msg",void 0),t("Msg",function(){function t(){}return t.on=function(t,i){this._map[t]||(this._map[t]=[]),this._map[t].push(i)},t.bind=function(t,i,n){i=i.bind(n),this._map[t]||(this._map[t]=[]),this._map[t].push(i)},t.off=function(t,i){if(null===i)this._map[t]=[];else{var n=this._map[t].indexOf(i);this._map[t].splice(n,1)}},t.emit=function(t,i){var n=this._map[t];n&&n.forEach((function(t){t(i)}))},t}())._map={},i._RF.pop()}}}));

System.register("chunks:///_virtual/MsgPlayAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(n){var i,t,a,e,o,r,s,l,c,u;return{setters:[function(n){i=n.applyDecoratedDescriptor,t=n.inheritsLoose,a=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){o=n.cclegacy,r=n._decorator,s=n.CCString,l=n.Animation,c=n.Component},function(n){u=n.Msg}],execute:function(){var m,p,g,f,y,h;o._RF.push({},"dd954Tk32ZHXJiMMOc2fI8e","MsgPlayAnimation",void 0);var v=r.ccclass,d=r.property;n("MsgPlayAnimation",(m=v("MsgPlayAnimation"),p=d(s),m((y=i((f=function(n){function i(){for(var i,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return i=n.call.apply(n,[this].concat(o))||this,a(i,"animName",y,e(i)),a(i,"msg",h,e(i)),i.animation=void 0,i}return t(i,n),i.prototype.start=function(){var n=this;this.animation=this.getComponent(l),u.on(this.msg,(function(){var i,t;null==(i=n.animation)||i.stop(),null==(t=n.animation)||t.play(n.animName)}))},i}(c)).prototype,"animName",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"animation"}}),h=i(f.prototype,"msg",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"msg_play_animation"}}),g=f))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/music-compose-random.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sound.ts"],(function(t){var i,e,o,r,s,n,a,l,u,c,p,h,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,n=t._decorator,a=t.AudioClip,l=t.CCFloat,u=t.AudioSource,c=t.math,p=t.randomRangeInt,h=t.Component},function(t){m=t.Sound}],execute:function(){var d,f,_,b,y,g,v,z,C,w;s._RF.push({},"5c45c/8MHVK0I2YuVganX/d","music-compose-random",void 0);var M=n.ccclass,P=n.property;t("MusicComposeRandom",(d=M("MusicComposeRandom"),f=P([a]),_=P([l]),d((g=i((y=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return i=t.call.apply(t,[this].concat(s))||this,o(i,"clips",g,r(i)),o(i,"probability",v,r(i)),o(i,"time",z,r(i)),o(i,"least_count",C,r(i)),o(i,"smooth",w,r(i)),i._selects=[],i._curs=[],i._t=0,i._audios=[],i}e(i,t);var s=i.prototype;return s.start=function(){for(var t=0;t<this.clips.length;t++){var i=this.node.addComponent(u);i.clip=this.clips[t],i.volume=0,i.loop=!0,i.play(),this._audios.push(i),this._curs.push(0),this._selects.push(1)}this.randomPlay()},s.update=function(t){this._t>this.time&&(this._t-=this.time,this.randomPlay()),this._t+=t;for(var i=0;i<this._audios.length;i++)this._curs[i]=c.lerp(this._curs[i],this._selects[i],t*this.smooth),this._audios[i].volume=this._curs[i]*m.volume},s.randomPlay=function(){for(var t=0,i=0;i<this.clips.length;i++)Math.random()<this.probability[i]?(this._selects[i]=1,t++):this._selects[i]=0;if(0===t){var e=p(0,this.clips.length);this._selects[e]=1}},i}(h)).prototype,"clips",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=i(y.prototype,"probability",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=i(y.prototype,"time",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=i(y.prototype,"least_count",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),w=i(y.prototype,"smooth",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),b=y))||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/music-compose-state.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sound.ts"],(function(t){var e,i,o,s,r,n,u,c,a,l,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){r=t.cclegacy,n=t._decorator,u=t.AudioClip,c=t.CCFloat,a=t.AudioSource,l=t.math,p=t.Component},function(t){h=t.Sound}],execute:function(){var f,m,d,v,y,_,b,g;r._RF.push({},"12b52kXv5JPY6UG2G1Y0KyH","music-compose-state",void 0);var C=n.ccclass,z=n.property;t("MusicComposeState",(f=C("MusicComposeState"),m=z([u]),d=z(c),f((_=e((y=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r))||this,o(e,"clips",_,s(e)),o(e,"smooth",b,s(e)),o(e,"selects",g,s(e)),e._curs=[],e._audios=[],e}i(e,t);var r=e.prototype;return r.start=function(){for(var t=0;t<this.clips.length;t++){var e=this.node.addComponent(a);e.clip=this.clips[t],e.volume=0,e.loop=!0,e.play(),this._audios.push(e),this._curs.push(0)}},r.update=function(t){for(var e=0;e<this._audios.length;e++)this._curs[e]=l.lerp(this._curs[e],this.selects[e],t*this.smooth),this._audios[e].volume=this._curs[e]*h.volume},e}(p)).prototype,"clips",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=e(y.prototype,"smooth",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),g=e(y.prototype,"selects",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=y))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/music-compose-value.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./sound.ts"],(function(e){var t,i,s,o,r,u,n,l,c,a,p,h,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,s=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,u=e._decorator,n=e.AudioClip,l=e.CCFloat,c=e.AudioSource,a=e.math,p=e.Component},function(e){h=e.Msg},function(e){_=e.Sound}],execute:function(){var f,m,d,v,y,b,g,w;r._RF.push({},"0abe6myLSpHe5xkiK8Qe1jO","music-compose-value",void 0);var C=u.ccclass,z=u.property;e("MusicComposeValue",(f=C("MusicComposeValue"),m=z([n]),d=z([l]),f((b=t((y=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return t=e.call.apply(e,[this].concat(r))||this,s(t,"clips",b,o(t)),s(t,"weight",g,o(t)),s(t,"smooth",w,o(t)),t._selects=[],t._curs=[],t._audios=[],t._value=0,t}i(t,e);var r=t.prototype;return r.start=function(){h.on("music_level_by_speed",this.setValue.bind(this));for(var e=0;e<this.clips.length;e++){var t=this.node.addComponent(c);t.clip=this.clips[e],t.volume=0,t.loop=!0,t.play(),this._audios.push(t),this._curs.push(0),this._selects.push(1)}},r.onDestroy=function(){h.off("music_level_by_speed",this.setValue.bind(this))},r.setValue=function(e){this._value=e;for(var t=0;t<this.clips.length;t++)this.weight[t]<=this._value?this._selects[t]=1:this._selects[t]=0},r.update=function(e){for(var t=0;t<this._audios.length;t++)this._curs[t]=a.lerp(this._curs[t],this._selects[t],e*this.smooth),this._audios[t].volume=this._curs[t]*_.volume},t}(p)).prototype,"clips",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=t(y.prototype,"weight",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=t(y.prototype,"smooth",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),v=y))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/navigation-debugger.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,r,o,i,u,a;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,r=e._decorator,o=e.director,i=e.v3,u=e.Color,a=e.Component}],execute:function(){var c;t._RF.push({},"8cffeNbpr1GWIViXLS9wnvF","navigation-debugger",void 0);var d=r.ccclass,p=(r.property,r.executeInEditMode);e("navigation_debugger",d("navigation_debugger")(c=p(c=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var r=t.prototype;return r.start=function(){},r.update=function(e){},r.editorUpdate=function(){var e,n=null==(e=o.root)?void 0:e.pipeline.geometryRenderer;null==n||n.addLine(i(0,0,0),i(3,0,3),u.GREEN,!1)},t}(a))||c)||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/navigation-map.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,o,i,e;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,i=n._decorator,e=n.Component}],execute:function(){var a;o._RF.push({},"79294q72uBLCbRGlepQJ9Dg","navigation-map",void 0);var r=i.ccclass,c=(i.property,i.executeInEditMode);n("NavigationMap",r("NavigationMap")(a=c(a=function(n){function o(){for(var t,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(t=n.call.apply(n,[this].concat(i))||this).points=[],t}t(o,n);var i=o.prototype;return i.__preload=function(){},i.update=function(n){},i.updateEditModel=function(){console.log("navigation edit"),this.linkChildNode(this.node)},i.linkChildNode=function(n){for(var t=n.children,o=0;o<t.length-1;o++){var i=t[o],e=t[o+1];i.position,e.position}},o}(e))||a)||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/navigation-paths-test.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res.ts"],(function(t){var e,i,n,r,a,o,s,c,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.v3,c=t.Component},function(t){l=t.Res}],execute:function(){var u,h,p,d;t("NavTest",void 0),a._RF.push({},"9ef31JG90lGFZ96656ziJ93","navigation-paths-test",void 0);var g=o.ccclass,f=o.property;t("NavigationPathsTest",g("NavigationPathsTest")((p=e((h=function(e){function a(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"targetNodes",p,r(t)),n(t,"targetDeep",d,r(t)),t.index=0,t}i(a,e);var o=a.prototype;return o.start=function(){t("NavTest",this);for(var e=this.node.children[0],i=0;i<this.targetDeep;i++)l.instNode(e,this.node,s(1e3,1e3,0))},o.getTarget=function(){return this.index++,this.index>this.node.children.length&&(this.index=0),this.node.children[this.index]},a}(c)).prototype,"targetNodes",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=e(h.prototype,"targetDeep",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),u=h))||u);a._RF.pop()}}}));

System.register("chunks:///_virtual/navigation-point.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(e){var i,t,n,r,o,a,u,l,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,u=e.Node,l=e.CCFloat,c=e.Component},null],execute:function(){var s,p,f,b,g,y,d,v,h,m;o._RF.push({},"54e2emPbVxIXpWxKORiO631","navigation-point",void 0);var w=a.ccclass,z=a.property,N=a.executeInEditMode;e("NavigationPoint",(s=w("NavigationPoint"),p=z([u]),f=z([l]),s(b=N((y=i((g=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,n(i,"linkNodes",y,r(i)),n(i,"weights",d,r(i)),n(i,"radius",v,r(i)),n(i,"showRay",h,r(i)),n(i,"segment",m,r(i)),i._rays=void 0,i}t(i,e);var o=i.prototype;return o.onEnable=function(){},o.update=function(e){},i}(c)).prototype,"linkNodes",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=i(g.prototype,"weights",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=i(g.prototype,"radius",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),h=i(g.prototype,"showRay",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=i(g.prototype,"segment",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),b=g))||b)||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/navigation-points.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,o,i,e;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,e=t.Component}],execute:function(){var r;o._RF.push({},"8f399fec+dJ96YEwmhKIlR4","navigation-points",void 0);var a=i.ccclass;i.property,t("navigation_points",a("NavigationPoints")(r=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var i=o.prototype;return i.start=function(){},i.update=function(t){},o}(e))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/navigation-region.ts",["./rollupPluginModLoBabelHelpers.js","cc","./json-tool.ts","./util2.ts","./navigation-point.ts","./navigation-system.ts"],(function(t){var i,e,n,o,a,r,s,l,c,u,h,p,d,f,g,m,b,v,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,l=t.game,c=t.geometry,u=t.v3,h=t.Vec3,p=t.PhysicsSystem,d=t.Color,f=t.Component},function(t){g=t.JsonTool},function(t){m=t.UtilVec3,b=t.Gizmo},function(t){v=t.NavigationPoint},function(t){y=t.NavSystem}],execute:function(){var P,w,k,x,z,N,B,D,F,M,C,R,E,H;a._RF.push({},"5a2dcZcWU9Iiru9JcsXaF7F","navigation-region",void 0);var I=r.ccclass,S=r.property,X=r.executeInEditMode;t("NavigationRegion",(P=I("NavigationRegion"),w=S(s),P(k=X((z=i((x=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return i=t.call.apply(t,[this].concat(a))||this,n(i,"maxDistance",z,o(i)),n(i,"height",N,o(i)),n(i,"maxHeight",B,o(i)),n(i,"slopHeight",D,o(i)),n(i,"slopDistance",F,o(i)),n(i,"mapBlockX",M,o(i)),n(i,"mapBlockY",C,o(i)),n(i,"mapBlockZ",R,o(i)),n(i,"testPath",E,o(i)),n(i,"testNode",H,o(i)),i.findPaths=Array(),i}e(i,t);var a=i.prototype;return a.onEnable=function(){},a.refreshMapPoints=function(){for(var t=this.node.children,i={blockX:this.mapBlockX,blockY:this.mapBlockY,blockZ:this.mapBlockZ,count:t.length,nodeMap:{},nodes:[],links:[],weights:[],drops:[]},e=0;e<t.length;e++){var n=t[e];n.name="point_"+e;var o=n.getComponent(v);o||n.addComponent(v);var a=n.worldPosition,r={x:Number(a.x.toFixed(3)),y:Number(a.y.toFixed(3)),z:Number(a.z.toFixed(3)),id:n.getSiblingIndex(),radius:null==o?void 0:o.radius},s=null!=o&&o.radius?o.radius:0,c=Math.floor(r.x/this.mapBlockX)+","+Math.floor(r.y/this.mapBlockY)+","+Math.floor(r.z/this.mapBlockZ);s>2&&i.drops.push(e),void 0===i.nodeMap[c]&&(i.nodeMap[c]=[]),i.nodeMap[c].push(n.getSiblingIndex()),i.nodes.push(r);var u=this.calculateCircleLink(n);i.links.push(u.links),i.weights.push(u.weights)}if(console.log(g.toJson(i)),this.testPath){y.Init(i);for(var h=l.totalTime,p=0;p<1e4;p++)this.testFindPath();console.log("run ",1e4," time:",l.totalTime-h," ms")}},a.calculateCircleLink=function(t){var i=this.node.children,e=t.worldPosition,n=new c.Ray;n.o=t.worldPosition;for(var o=u(0,0,0),a=[],r=[],s=[],l=0;l<i.length;l++){var d=i[l];if(d!==t){m.copy(o,d.worldPosition),n.d=o.subtract(e).normalize();var f=h.distance(e,d.worldPosition);if(!(f>this.maxDistance)){var g=Math.abs(e.y-d.worldPosition.y);g>this.maxHeight||g>this.slopHeight&&f>this.slopDistance||p.instance.raycastClosest(n,void 0,f)||(a.push(d),s.push(d.getSiblingIndex()),r.push(Number(f.toFixed(3))))}}}var b=t.getComponent(v);return b.linkNodes=a,b.weights=r,{links:s,weights:r}},a.update=function(t){},a.testFindPaths=function(){if(!(this.findPaths.length<=0)){var t=u(0,0,0),i=u(0,0,0);b.drawBox(this.findPaths[0],h.ONE,d.WHITE);for(var e=1;e<this.findPaths.length;e++){var n=this.findPaths[e-1],o=this.findPaths[e];m.copy(t,n),m.copy(i,o),t.y+=.1,i.y+=.1,e===this.findPaths.length-1?b.drawBox(i,h.ONE,d.RED):b.drawCircle(i,1,d.RED),b.drawLine(t,i,d.RED)}}},a.testRandomPath=function(){var t,i=y.randomPoint();null==(t=this.testNode)||t.setWorldPosition(i.position),y.randomPaths(this.findPaths,this.testNode.worldPosition,20,i.closestNavigationPon)},a.testFindPath=function(){var t=y.randomPoint(),i=y.randomPoint();y.findPaths(this.findPaths,t.position,-1,i.position)},i}(f)).prototype,"maxDistance",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),N=i(x.prototype,"height",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),B=i(x.prototype,"maxHeight",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),D=i(x.prototype,"slopHeight",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F=i(x.prototype,"slopDistance",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 7}}),M=i(x.prototype,"mapBlockX",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),C=i(x.prototype,"mapBlockY",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),R=i(x.prototype,"mapBlockZ",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),E=i(x.prototype,"testPath",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H=i(x.prototype,"testNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=x))||k)||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/navigation-system.ts",["cc"],(function(n){var r,t,o,e,i,a;return{setters:[function(n){r=n.cclegacy,t=n._decorator,o=n.randomRangeInt,e=n.v3,i=n.randomRange,a=n.Vec3}],execute:function(){n("NavSystem",void 0),r._RF.push({},"6d9eehPRgpNnpasDFvliTrC","navigation-system",void 0);var u;t.ccclass,t.property,t.executeInEditMode;!function(n){var r;function t(n){for(var t=r.nodes.length,o=Number.MAX_VALUE,e=-1,i=0;i<t;i++){var u=r.nodes[i];if(!(Math.abs(n.y-u.y)>1)){var s=a.distance(n,u);s<o&&(e=i,o=s)}}if(-1===e)throw new Error("'can not find target node.");return e}function u(n){return null==r?(console.warn(" Navigation data not init."),0):t(n)}n.Init=function(n){r=n},n.nodePosition=function(n){return r.nodes[n]},n.randomPoint=function(n){void 0===n&&(n=.5);var t=o(0,r.count),a=r.nodes[t],u=a.radius-n;return{closestNavigationPon:t,position:e(a.x+i(-u,u),a.y,a.z+i(-u,u))}},n.randomDropPoint=function(n){void 0===n&&(n=.5);var t=o(0,r.drops.length),a=r.drops[t],u=r.nodes[a],s=u.radius-n;return{closestNavigationPon:a,position:e(u.x+i(-s,s),u.y,u.z+i(-s,s))}},n.randomPaths=function(n,t,e,i){return void 0===i&&(i=-1),n.length=0,-1===i&&(i=u(t)),-1===i?[]:(function(n,t,e){if(null==r)return console.warn(" Navigation data not init."),0;n[0]=r.nodes[t];for(var i=t,a=1;a<e;a++){var u=r.links[i];i=u[o(0,u.length)],n[a]=r.nodes[i]}}(n,i,e),n)},n.randomFirePath=function(n,t){n.length=0;for(var a=o(5,11),u=r.nodes[t],s=0;s<a;s++){var d=e(u.x+i(-u.radius,u.radius),u.y,u.z+i(-u.radius,u.radius));n[s]={x:d.x,y:d.y,z:d.z,id:u.id,radius:u.radius}}return n},n.findNearest=t,n.findPaths=function(n,t,o,e){void 0===o&&(o=-1),n.length=0;var i=[],s=[];-1===o&&(o=u(t)),i.push({node:o,g:0,h:0,f:0,parent:void 0});var d=u(e);if(o===d)return n.push(r.nodes[o]),n;for(var v,f=function(n){for(var r=0;r<i.length;r++)if(i[r].node===n)return!0;return!1},c=function(n){for(var r=0;r<s.length;r++)if(s[r].node===n)return!0;return!1},l=function(n,o){var u=r.nodes[n];if(u.id==d)return{node:n,g:0,h:0,f:0,parent:o};var s=a.distance(t,u),v=a.distance(u,e),f=s+v;i.push({node:n,f:f,g:s,h:v,parent:o})},h=function(){var n=function(){if(i.length<=0)return-1;for(var n=Number.MAX_VALUE,r=-1,t=0;t<i.length;t++){var o=i[t];o.f<n&&(r=t,n=o.f)}return r}();if(-1==n)return null;var t=i[n];i.splice(n,1),s.push(t);var o=function(n){for(var t=r.links[n.node],o=0;o<t.length;o++){var e=t[o];if(!c(e)&&!f(e)){var i=l(e,n);if(i)return i}}return!1}(t);return o||void 0},g=-1;!(++g>112)&&void 0===(v=h()););return v&&(n.push(r.nodes[d]),function t(o){var e=o.parent;if(null!=e){var i=r.nodes[e.node];n.push(i),t(e)}}(v),n.reverse()),n}}(u||(u=n("NavSystem",{}))),r._RF.pop()}}}));

System.register("chunks:///_virtual/node-id-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./node-id.ts"],(function(e){var t,n,r,o,i,a,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.createClass},function(e){o=e.cclegacy,i=e._decorator,a=e.MeshRenderer,s=e.Component},function(e){c=e.NodeID}],execute:function(){var p,d;o._RF.push({},"668d83tqrxNQrAWrPlNMs6n","node-id-manager",void 0);var u=i.ccclass,l=i.property,h=i.executeInEditMode;e("NodeIDManager",u("NodeIDManager")(p=h((t((d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).nodeMap=new Map,t.mrMap=new Map,t}n(t,e);var o=t.prototype;return o.onEnable=function(){this.registerDefault()},o.registerDefault=function(){this.registerRoot(this.node)},o.registerRoot=function(e){var t=this;e.getComponentsInChildren(c).map((function(e){t.register(e)}))},o.register=function(e){this.nodeMap.set(e.id,e.node),this.mrMap.set(e.id,e.getComponent(a))},o.doGenerateChildrenID=function(){var e=this;this.nodeMap.clear(),this.mrMap.clear(),this.node.getComponentsInChildren(a).map((function(t,n){var r=t.getComponent(c);r||(r=t.addComponent(c)),r.id=n+1,e.register(r)}))},r(t,[{key:"generateChildrenID",get:function(){return!1},set:function(e){this.doGenerateChildrenID()}}]),t}(s)).prototype,"generateChildrenID",[l],Object.getOwnPropertyDescriptor(d.prototype,"generateChildrenID"),d.prototype),p=d))||p)||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/node-id.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,a,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,s=e._decorator,c=e.Component}],execute:function(){var p,u,l;a._RF.push({},"8a478Un2jVFiYWIaYdr7LZu","node-id",void 0);var d=s.ccclass,g=s.property,f=s.executeInEditMode;e("NodeID",d("NodeID")(p=f((l=t((u=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"__id",l,n(t)),t}r(t,e);var a=t.prototype;return a.onEnable=function(){this.register()},a.register=function(){globalThis.nodeIDManager&&globalThis.nodeIDManager.register(this)},o(t,[{key:"id",get:function(){return this.__id},set:function(e){this.__id=e,this.register()}}]),t}(c)).prototype,"__id",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(u.prototype,"id",[g],Object.getOwnPropertyDescriptor(u.prototype,"id"),u.prototype),p=u))||p)||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/notify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./singleton.ts","./data-structure.ts"],(function(t){var n,i,u,e,c;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy},function(t){u=t.Msg},function(t){e=t.Singleton},function(t){c=t.Queue}],execute:function(){i._RF.push({},"12630emi6VP7bUT1a2ng/CZ","notify",void 0);t("Notify",function(t){function i(){for(var n,i=arguments.length,u=new Array(i),e=0;e<i;e++)u[e]=arguments[e];return(n=t.call.apply(t,[this].concat(u))||this).queue=new c,n.cur=void 0,n.counter=0,n}n(i,t);var e=i.prototype;return e.push=function(t,n,i){this.queue.push({title:t,info:n,call:i}),this.counter++,this.check_notify(),u.on("msg_check_notify",this.check_notify.bind(this))},e.check_notify=function(){var t,n;null!==this.cur&&null!==(null==(t=this.cur)?void 0:t.call)&&(null==(n=this.cur)||n.call());0!==this.counter&&(this.queue.empty()?(this.counter=0,this.cur=void 0):(this.cur=this.queue.pop(),u.emit("push","notify")))},i}(e));i._RF.pop()}}}));

System.register("chunks:///_virtual/npm.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(e){var r,t,n,a,s,u,c;return{setters:[function(e){r=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){n=e.cclegacy,a=e.assetManager,s=e.path,u=e.resources},function(e){c=e.EDITOR}],execute:function(){e({getAssetPath:b,loadResource:function(e,r){return y.apply(this,arguments)},loadResources:function(e){return x.apply(this,arguments)},readFile:function(e){try{return p.readFileSync(e,"utf8")}catch(e){console.error(e)}},saveString:function(e,r){return v.apply(this,arguments)}}),n._RF.push({},"72fa1I8cXVJ6ZoMbd3O3NZf","npm",void 0);var i=globalThis.electron,o=e("GAME_VIEW",cc.GAME_VIEW),p=e("fse",i&&globalThis.require("fs-extra")),f=e("path",i&&globalThis.require("path")),l=e("Editor",i&&globalThis.Editor),h=(e("projectPath",c),e("projectAssetPath",c),e("globby",i&&globalThis.require("globby"))),d=e("InPlayMode",o||!c);e("resUrl","db://assets/resources/");function y(){return(y=r(t().mark((function e(r,n){var c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(r);case 2:return c=e.sent,e.abrupt("return",new Promise((function(e,t){function i(r,a){r?t(r):(n&&n(a),e(a))}if(d)r=s.changeExtname(r,""),u.load(r,i);else{var o=c+".meta";try{var f=p.readFileSync(o,"utf8");f=JSON.parse(f),a.loadAny([f.uuid],i)}catch(e){}}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return m.apply(this,arguments)}function m(){return(m=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Message.request("asset-db","query-path",r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=r(t().mark((function e(r,n){var a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(r);case 2:a=e.sent,p.ensureDirSync(f.dirname(a)),p.writeFileSync(a,n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=r(t().mark((function e(n){var s,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=11;break}return e.next=3,b(n);case 3:if(s=e.sent,!(c=h.sync(s+"/**/*.meta"))){e.next=9;break}return e.next=8,Promise.all(c.map(r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=p.readFileSync(r,"utf8");n=JSON.parse(n),a.loadAny([n.uuid],(function(r,n){if(r)return t(r);e(n)}))})));case 1:case"end":return e.stop()}}),e)})))));case 8:return e.abrupt("return",e.sent);case 9:e.next=14;break;case 11:return e.next=13,new Promise((function(e,r){u.loadDir(n,(function(t,n){if(t)return r(t);e(n)}))}));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n._RF.pop()}}}));

System.register("chunks:///_virtual/orbit-camera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,i,n,r,a,s,u,h,c,l,p,R;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,s=t._decorator,u=t.Vec3,h=t.Quat,c=t.input,l=t.Input,p=t.Component,R=t.Vec2}],execute:function(){var g,_,f,y,d,b;a._RF.push({},"b3832Lkx/dOBZ7+Tok0/UO4","orbit-camera",void 0);var T=s.ccclass,x=s.property,v=(s.type,new u,new u,new h);new u(0,0,1),t("default",T("OrbitCamera")((f=o((_=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return o=t.call.apply(t,[this].concat(r))||this,i(o,"enableTouch",f,n(o)),i(o,"rotateSpeed",y,n(o)),i(o,"xRotationRange",d,n(o)),i(o,"_startRotation",b,n(o)),o._touched=!1,o._targetRotation=new u,o._rotation=new h,o}e(o,t);var a=o.prototype;return a.start=function(){this.enableTouch&&(c.on(l.EventType.TOUCH_START,this.onTouchStart,this),c.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),c.on(l.EventType.TOUCH_END,this.onTouchEnd,this)),this._targetRotation.set(this.node.eulerAngles),this._rotation.set(this.node.rotation),this.limitRotation()},a.onTouchStart=function(){this._targetRotation.set(this.node.eulerAngles),this._rotation.set(this.node.rotation),this._touched=!0},a.onTouchMove=function(t){var o=t.getDelta();h.fromEuler(v,this._targetRotation.x,this._targetRotation.y,this._targetRotation.z),h.rotateX(v,v,.005*o.y),h.rotateAround(v,v,u.UP,.005*-o.x),h.toEuler(this._targetRotation,v),this.limitRotation()},a.onTouchEnd=function(){this._touched=!1},a.limitRotation=function(){var t=this._targetRotation;t.x<this.xRotationRange.x?t.x=this.xRotationRange.x:t.x>this.xRotationRange.y&&(t.x=this.xRotationRange.y),t.z=0},a.update=function(t){var o=this._targetRotation;h.fromEuler(v,o.x,o.y,o.z),h.slerp(this._rotation,this._rotation,v,7*t*this.rotateSpeed),this.node.rotation=this._rotation},r(o,[{key:"targetRotation",get:function(){return this._startRotation.set(this._targetRotation),this._startRotation},set:function(t){this._targetRotation.set(t),this._startRotation.set(t)}}]),o}(p)).prototype,"enableTouch",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=o(_.prototype,"rotateSpeed",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=o(_.prototype,"xRotationRange",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new R(5,70)}}),o(_.prototype,"targetRotation",[x],Object.getOwnPropertyDescriptor(_.prototype,"targetRotation"),_.prototype),b=o(_.prototype,"_startRotation",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),g=_))||g);a._RF.pop()}}}));

System.register("chunks:///_virtual/pipeline-assets.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,a,r,s,n,l,o,p,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.createClass},function(e){n=e.cclegacy,l=e._decorator,o=e.Material,p=e.path,c=e.Component}],execute:function(){var u,m,h,f,y,M;n._RF.push({},"18607fs9EVCRqm7WHMLFwTW","pipeline-assets",void 0);var g=l.ccclass,b=l.property,d=l.executeInEditMode;e("PipelineAssets",(u=g("PipelineAssets"),m=b(o),h=b(o),u(f=d((M=t((y=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return t=e.call.apply(e,[this].concat(s))||this,a(t,"_materials",M,r(t)),t.materialNames=[],t.materialMap=new Map,t}i(t,e);var n=t.prototype;return n.getMaterial=function(e){return this.materialMap.get(e)},n.updateMaterials=function(){var e=this;this.materialMap.clear(),this.materialNames=this.materials.map((function(t){if(t){var i=p.basename(t.effectName);return e.materialMap.set(i,t),i}})),this.materials.map((function(e){}))},n.onEnable=function(){globalThis.pipelineAssets=this,this.updateMaterials()},n.onDisable=function(){globalThis.pipelineAssets===this&&(globalThis.pipelineAssets=void 0)},s(t,[{key:"materials",get:function(){return this._materials},set:function(e){this._materials=e,this.updateMaterials()}}]),t}(c)).prototype,"_materials",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),t(y.prototype,"materials",[h],Object.getOwnPropertyDescriptor(y.prototype,"materials"),y.prototype),f=y))||f)||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/pipeline-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gbuffer-pass.ts","./deferred-post-pass.ts","./deferred-lighting-pass.ts","./bloom-pass.ts","./taa-pass.ts","./fsr-pass.ts","./zoom-screen-pass.ts","./href-setting.ts"],(function(){var e,s,n,t,o,r,i,a,c,p,u,f,l,P,d,g,m;return{setters:[function(s){e=s.inheritsLoose},function(e){s=e.cclegacy,n=e._decorator,t=e.rendering,o=e.game,r=e.Game,i=e.director,a=e.postProcess,c=e.Component},function(e){p=e.DeferredGBufferPass},function(e){u=e.DeferredPostPass},function(e){f=e.DeferredLightingPass},function(e){l=e.BloomPass},function(e){P=e.CustomTaaPass},function(e){d=e.CustomFSRPass},function(e){g=e.ZoomScreenPass},function(e){m=e.HrefSetting}],execute:function(){var h;s._RF.push({},"cd2dfC7AGtO66cmENnWM2Q3","pipeline-manager",void 0);var C=n.ccclass,E=t.getCustomPipeline("Custom");if(E){E.getCameraPipelineName=function(e){var s=e.pipeline;return s=!s&&e.usePostProcess?"deferred":"default"};var v=[new p,new f,new l,new P,new d,new g,new u];E.pipelines.set("deferred",v)}o.on(r.EVENT_RENDERER_INITED,(function(){i.root.pipeline.setMacroInt("CC_PIPELINE_TYPE",1),i.root.pipeline.setMacroInt("CC_USE_HDR",1)}));C("PipelineManager")(h=function(s){function n(){for(var e,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return(e=s.call.apply(s,[this].concat(t))||this).postProcess=void 0,e}e(n,s);var t=n.prototype;return t.onEnable=function(){this.postProcess=this.getComponent(a.PostProcess)},t.update=function(e){this.postProcess&&(this.postProcess.shadingScale=m.shadingScale)},n}(c));s._RF.pop()}}}));

System.register("chunks:///_virtual/polyfill.ts",["cc"],(function(){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"c3588YLsaBJgYssfOOVykr9","polyfill",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/pool.ts",["cc"],(function(t){var o,e,n,c,r,i;return{setters:[function(t){o=t.cclegacy,e=t.Vec2,n=t.Vec3,c=t.Vec4,r=t.Quat,i=t.Mat4}],execute:function(){o._RF.push({},"853590lOw9FE7+DhNoAzrtR","pool",void 0);var u=t("PrivatePool",function(){function t(t){this._pool=[],this._ctor=void 0,this._ctor=t}var o=t.prototype;return o.get=function(){var t=this._pool.pop();return t||(t=new this._ctor),t},o.put=function(t){this._pool.push(t)},t}());t("Pool",{Vec2:new u(e),Vec3:new u(n),Vec4:new u(c),Quat:new u(r),Mat4:new u(i)});o._RF.pop()}}}));

System.register("chunks:///_virtual/preload.ts",["./rollupPluginModLoBabelHelpers.js","cc","./game.ts","./msg.ts","./res-cache.ts","./g-scene.ts"],(function(e){var r,n,t,i,o,a,s,c,u,l,p,f,m,h,d,g,b,v,w,y,P,k,x,L;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.CCString,l=e.Node,p=e.JsonAsset,f=e.ProgressBar,m=e.Label,h=e.lerp,d=e.Component,g=e.setDisplayStats,b=e.director,v=e.resources,w=e.instantiate,y=e.UITransform},function(e){P=e.Game},function(e){k=e.Msg},function(e){x=e.ResCache},function(e){L=e.GScene}],execute:function(){var T,z,I,R,G,S,_,D,C,j,W,A,B,E,M,F,H,J,N;s._RF.push({},"59e03flVchPcYI+RuBOA7xg","preload",void 0);var O=c.ccclass,U=c.type,V=c.property;e("Preload",(T=O("Preload"),z=U(u),I=U(l),R=U(l),G=V(p),S=U(f),_=U(m),D=U(u),T((W=r((j=function(e){function r(){for(var r,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,t(r,"initGame",W,i(r)),t(r,"prefabToLoad",A,i(r)),t(r,"prefabRoot",B,i(r)),t(r,"removeWhenLoaded",E,i(r)),t(r,"savejson",M,i(r)),t(r,"progress",F,i(r)),t(r,"progressInfo",H,i(r)),t(r,"ui",J,i(r)),t(r,"inst_actions",N,i(r)),r.progressTarget=0,r.tasks=[],r.startTime=0,r}n(r,e);var s=r.prototype;return s.initGameTasks=function(){var e,r,n;this.initGame&&(this.startTime=performance.now(),L.isPreload=!0,P.Instance.preInit(this.savejson),this.tasks.push({name:"Loading Resources",task:(n=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.time("Load Resources"),e.next=3,new Promise((function(e){x.Instance.load((function(){P.Instance.init(),g(!1),console.timeEnd("Load Resources"),e(null)}))}));case 3:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{name:"Preload Scene",task:(r=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(["scene-menu","scene-editor","scene-map"].map((function(e){return new Promise((function(r){b.preloadScene(e,(function(){r(null)}))}))})));case 2:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{name:"Preload Material",task:(e=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){v.loadDir("materials",(function(){e(null)}))}));case 2:return e.next=4,new Promise((function(e){v.loadDir("preload_prefabs",(function(r,n){n.forEach((function(e){var r=w(e);r.parent=b.getScene(),r.parent=null})),e(null)}))}));case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}))},s.load=function(){var e=o(a().mark((function e(){var r,n,t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.isPreload=!0,this.progress&&(this.progress.getComponent(y),this.progress.progress=0),this.initGameTasks(),this.tasks,r=[],e.next=7,new Promise((function(e){var r=setInterval((function(){1-t.progress.progress<.01&&(e(null),clearInterval(r))}))}));case 7:for(r.forEach((function(e){e.node.active=!0})),n=0;n<this.removeWhenLoaded.length;n++)this.removeWhenLoaded[n].active=!1;return L.isPreload=!1,L.isLoadScene=!1,e.next=13,new Promise((function(e){setTimeout((function(){e(null)}),1e3)}));case 13:this.initGame&&k.emit("preload-inited-game",this.startTime);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.start=function(){var e=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.update=function(e){this.progress&&(this.progress.progress=h(this.progress.progress,this.progressTarget,e))},r}(d)).prototype,"initGame",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=r(j.prototype,"prefabToLoad",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=r(j.prototype,"prefabRoot",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=r(j.prototype,"removeWhenLoaded",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=r(j.prototype,"savejson",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=r(j.prototype,"progress",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=r(j.prototype,"progressInfo",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=r(j.prototype,"ui",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=r(j.prototype,"inst_actions",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=j))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/projectile-grenade.ts",["./rollupPluginModLoBabelHelpers.js","cc","./damage-core.ts","./fx.ts","./util2.ts","./res-pool.ts","./level.ts","./msg.ts","./sound.ts","./fx-base.ts","./fun.ts"],(function(e){var i,t,o,n,s,a,r,l,c,d,u,h,p,f,_,y,m,v,g,x,b,w,S,z;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,r=e.v3,l=e.geometry,c=e.CCFloat,d=e.Vec3,u=e.SphereCollider,h=e.RigidBody,p=e.Node,f=e.PhysicsSystem,_=e.Component},function(e){y=e.calculateDamage},function(e){m=e.fx},function(e){v=e.UtilVec3},function(e){g=e.ResPool},function(e){x=e.Level},function(e){b=e.Msg},function(e){w=e.Sound},function(e){S=e.FxBase},function(e){z=e.fun}],execute:function(){var P,T,E,F,k,D,C,R,L,j,B,H,I,G,M,O;s._RF.push({},"b56c0MoOdlHyKrrs0ShL+YC","projectile-grenade",void 0);var V=a.ccclass,A=a.property,N=r(0,0,0),W=new l.Ray;e("ProjectileGrenade",(P=V("ProjectileGrenade"),T=A(c),E=A(d),F=A(u),k=A(h),D=A({type:S}),C=A(p),P((j=i((L=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return(i=e.call.apply(e,[this].concat(s))||this)._data=void 0,i._size=r(1,1,1),o(i,"explodeTime",j,n(i)),o(i,"endSize",B,n(i)),o(i,"collider",H,n(i)),o(i,"rigidbody",I,n(i)),o(i,"useGravity",G,n(i)),o(i,"fxTrail",M,n(i)),i.updateFunction=void 0,i.actor=void 0,o(i,"view",O,n(i)),i.force=r(0,0,0),i.move_force=5,i.second_move_force=3,i.second_move_time=2.5,i.isSecond=!1,i.state=0,i.isHit=!1,i}t(i,e);var s=i.prototype;return s.start=function(){},s.onDestroy=function(){},s.onThrow=function(e,i,t){var o,n=this;this._data=e,this.move_force=this._data.move_force,this.second_move_force=this._data.second_move_force,this.second_move_time=this._data.second_move_time,this.actor=t,v.copy(N,this.node.worldPosition),N.add(i),this.node.lookAt(N),null==(o=this.rigidbody)||o.setAngularVelocity(d.ZERO),v.copy(this.force,i),this.onFirstSection(),this.explodeTime=this._data.explode_time,this.updateFunction=this.waitExplode,this.node.setWorldScale(d.ONE),this.isSecond=!1,this.state=0,this.view.active=!0,z.delay((function(){var e,i;null==(e=n.fxTrail)||e.setLoop(!0),null==(i=n.fxTrail)||i.play()}),.1)},s.onFirstSection=function(){var e;this.force.multiplyScalar(this.move_force),null==(e=this.rigidbody)||e.applyImpulse(this.force)},s.onSecondSection=function(){var e;this.isSecond||(this.isSecond=!0,this.force.multiplyScalar(this.second_move_force),null==(e=this.rigidbody)||e.applyImpulse(this.force),this.collider.isTrigger=!0,m.on("fx_grenade_2_trail_speedup",this.node.worldPosition,this.node.forward),w.onByDistance("sfx_second_launching",this.node.worldPosition))},s.onExplode=function(){var e;this.view.active=!1,this.updateFunction=this.exploding,w.onByDistance(this._data.sound_explode,this.node.worldPosition),m.on(this._data.fx_explode,this.node.worldPosition),null==(e=this.rigidbody)||e.setLinearVelocity(d.ZERO),this.checkDamage()},s.onExplodeEnd=function(){var e,i=this;this.updateFunction=void 0,null==(e=this.fxTrail)||e.setLoop(!1),z.delay((function(){var e;null==(e=i.fxTrail)||e.clear(),i.node.active=!1,g.Instance.push(i.node)}),.1)},s.waitExplode=function(e){this.explodeTime-=e,this.explodeTime<this.second_move_time&&this.onSecondSection(),this.explodeTime<=0?this.onExplode():this.checkHit()},s.exploding=function(e){d.lerp(this._size,this._size,this.endSize,5*e),this.node.setWorldScale(this._size),Math.abs(this._size.x-this.endSize.x)<.1&&this.onExplodeEnd()},s.update=function(e){void 0!==this.updateFunction&&this.updateFunction(e)},s.checkHit=function(){if(1!=this.state){var e=this.node.worldPosition,i=this.node.forward;v.copy(W.o,e),v.copy(W.d,i),f.instance.raycastClosest(W,28,.5)&&0==this.state&&(this.onExplode(),this.state=1)}},s.checkDamage=function(){var e=x.Instance._player;if(e){var i=this.node.worldPosition;v.copy(N,e.node.worldPosition),N.y+=.5;var t=N.subtract(this.node.worldPosition).normalize();v.copy(W.o,i),v.copy(W.d,t);var o,n=this._data.damage.distance;f.instance.raycastClosest(W,8,n)&&(o=f.instance.raycastClosestResult,b.emit("msg_camera_shake",{time:this._data.fire_shake_time,size:this._data.fire_shake_range})),y(this._data,o,this.actor)}},i}(_)).prototype,"explodeTime",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),B=i(L.prototype,"endSize",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return r(6,6,6)}}),H=i(L.prototype,"collider",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=i(L.prototype,"rigidbody",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=i(L.prototype,"useGravity",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),M=i(L.prototype,"fxTrail",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(L.prototype,"view",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=L))||R));s._RF.pop()}}}));

System.register("chunks:///_virtual/raycast-gpu.ts",["cc"],(function(n){var t,e;return{setters:[function(n){t=n.Mat4,e=n.cclegacy}],execute:function(){function r(n){var t=n[0]*n[0]+n[1]*n[1]+n[2]*n[2];return t=1/Math.sqrt(t),[n[0]*t,n[1]*t,n[2]*t]}function o(n,t){var e=n[0],r=n[1],o=n[2],u=t[0],a=t[1],i=t[2];return[r*i-o*a,o*u-e*i,e*a-r*u]}function u(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function a(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2])}function i(n,t,e){return[n,t,e]}function c(n,t){return[n[0]-t[0],n[1]-t[1],n[2]-t[2]]}function s(n,t){return[n[0]+t[0],n[1]+t[1],n[2]+t[2]]}function f(n,t,e,r){var o=1/t[0],u=1/t[1],a=1/t[2],i=(e[0]-n[0])*o,c=(r[0]-n[0])*o,s=(e[1]-n[1])*u,f=(r[1]-n[1])*u,h=(e[2]-n[2])*a,l=(r[2]-n[2])*a,d=Math.max(Math.max(Math.min(i,c),Math.min(s,f)),Math.min(h,l)),g=Math.min(Math.min(Math.max(i,c),Math.max(s,f)),Math.max(h,l));return g<0||d>g?0:d>0?d:g}function h(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function l(n,t){return[n[0]*t[0],n[1]*t[1],n[2]*t[2]]}function d(n,t,e,r,a){var i=1e-5,s=c(r,e),f=c(a,e),h=o(t,f),l=u(s,h);if(l<i&&
/*!doubleSided ||*/
l>-1e-5)return 0;var d=1/l,g=c(n,e),v=u(g,h)*d;if(v<-1e-5||v>1.00001)return 0;var p=o(g,s),m=u(t,p)*d;if(m<-1e-5||v+m>1.00001)return 0;var M=u(f,p)*d;return M<0?0:M}function g(n,t,e,r,o,u,a,i,c,s,f,h,l,d,g,v){var p=n*u-t*o,m=n*a-e*o,M=n*i-r*o,x=t*a-e*u,b=t*i-r*u,F=e*i-r*a,y=c*d-s*l,_=c*g-f*l,C=c*v-h*l,I=s*g-f*d,B=s*v-h*d,E=f*v-h*g,w=p*E-m*B+M*I+x*C-b*_+F*y;if(0===w)return[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];w=1/w;var z=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return z[0][0]=(u*E-a*B+i*I)*w,z[0][1]=(e*B-t*E-r*I)*w,z[0][2]=(d*F-g*b+v*x)*w,z[0][3]=(f*b-s*F-h*x)*w,z[1][0]=(a*C-o*E-i*_)*w,z[1][1]=(n*E-e*C+r*_)*w,z[1][2]=(g*M-l*F-v*m)*w,z[1][3]=(c*F-f*M+h*m)*w,z[2][0]=(o*B-u*C+i*y)*w,z[2][1]=(t*C-n*B-r*y)*w,z[2][2]=(l*b-d*M+v*p)*w,z[2][3]=(s*M-c*b-h*p)*w,z[3][0]=(u*_-o*I-a*y)*w,z[3][1]=(n*I-t*_+e*y)*w,z[3][2]=(d*m-l*x-g*p)*w,z[3][3]=(c*x-s*m+f*p)*w,z}function v(){return[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]}function p(n,t){for(var e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var o=0;o<4;o++)e[r][o]=n[o+4*r+t];return e}function m(n,t,e,r,o,u,a,c,s,f,h,l,d,v,p,m,M){var x=g(t,e,r,o,u,a,c,s,f,h,l,d,v,p,m,M),b=n[0],F=n[1],y=n[2],_=x[0][3]*b+x[1][3]*F+x[2][3]*y+x[3][3];return _=0!==_?Math.abs(1/_):1,i((x[0][0]*b+x[1][0]*F+x[2][0]*y+x[3][0])*_,(x[0][1]*b+x[1][1]*F+x[2][1]*y+x[3][1])*_,(x[0][2]*b+x[1][2]*F+x[2][2]*y+x[3][2])*_)}var M,x,b;e._RF.push({},"bb282UvgvBGcLg+YL3yYbAL","raycast-gpu",void 0);var F=0;n("default",{maxDirection:0,cornersCount:0,createKernel:function(n,t,e){if(this.maxDirection!==t||this.cornersCount!==e){this.maxDirection=t,this.cornersCount=e;for(var b=[],y=0;y<n.length;y++)for(var _=n[y],C=0;C<_.subModels.length;++C)b.push(_.subModels[C]);F=b.length;var I=Math.floor(Math.sqrt(t))+1,B=[I,I,e],E=(M||((M=new GPU({})).addFunction(i),M.addFunction(c),M.addFunction(s),M.addFunction(v),M.addFunction(p),M.addFunction(g),M.addFunction(m),M.addFunction(d),M.addFunction(h),M.addFunction(l),M.addFunction(f),M.addFunction(u),M.addFunction(r),M.addFunction(a),M.addFunction(o)),M);if(x=E.createKernel((function(n,t,e,o){var u=3*this.thread.z,h=i(t[u+0],t[u+1],t[u+2]),g=3*(this.thread.x+this.thread.y*this.constants.threadXCount),v=i(e[g],e[g+1],e[g+2]),M=c(v,h);M=r(M);for(var x=1e7,b=-1,F=0,y=-1,_=0,C=-1,I=0;_<o;)for(;_<o;){var B=n[F++],E=(n[F++],n[F++]),w=n[F++],z=n[F++],O=n[F++],k=p(n,O);O+=16;var q=i(n[O++],n[O++],n[O++]),A=i(n[O++],n[O++],n[O++]),D=i(n[O++],n[O++],n[O++]);if(f(h,M,c(A,D),s(A,D))<=0)_++;else{y=-2;var L=m(h,k[0][0],k[0][1],k[0][2],k[0][3],k[1][0],k[1][1],k[1][2],k[1][3],k[2][0],k[2][1],k[2][2],k[2][3],k[3][0],k[3][1],k[3][2],k[3][3]),Y=m(v,k[0][0],k[0][1],k[0][2],k[0][3],k[1][0],k[1][1],k[1][2],k[1][3],k[2][0],k[2][1],k[2][2],k[2][3],k[3][0],k[3][1],k[3][2],k[3][3]),G=a(l(Y=r(Y=c(Y,L)),q));for(C=Math.max(C,w),I=0;I<w;)for(;I<w;){var K=3*n[E+I],R=3*n[E+I+1],S=3*n[E+I+2],U=d(L,Y,i(n[B+K],n[B+K+1],n[B+K+2]),i(n[B+R],n[B+R+1],n[B+R+2]),i(n[B+S],n[B+S+1],n[B+S+2]));(U*=G)>0&&(y=-3,U<x&&(x=U,b=z)),I+=3}_++}}return y=-C,b<0&&(b=y),b}),{constants:{threadXCount:B[0],threadYCount:B[1],cornersCount:e},output:B}),this.createMeshBuffer(n),!M._hacked){M._hacked=!0;var w=function(){if("function"==typeof M.context[z]){var n=M.context[z];M.context[z]=function(){var t=n.apply(M.context,arguments);return t}}};for(var z in M.context)w()}}},createMeshBuffer:function(n){console.time("prepare buffers");for(var e=[],r=[],o=0,u=[],a=[],i=0;i<n.length;i++){for(var c=n[i],s=0;s<c.subModels.length;++s){e.push(c.subModels[s]);var f=c.subModels[s].subMesh,h=f,l=r.indexOf(f);-1===l&&(l=r.length,r.push(f),h._vbOffset=o,h._vbCount=f.geometricInfo.positions.length,o+=f.geometricInfo.positions.length,h._ibOffset=o,h._ibCount=f.geometricInfo.indices.length,o+=f.geometricInfo.indices.length),u.push(h._vbOffset),u.push(h._vbCount),u.push(h._ibOffset),u.push(h._ibCount),u.push(i),u.push(a.length)}t.toArray(a,c.node.worldMatrix,a.length);var d=c.node.worldScale;a.push(d.x,d.y,d.z);var g=c.worldBounds.center,v=c.worldBounds.halfExtents;a.push(g.x,g.y,g.z),a.push(v.x,v.y,v.z)}b=new Float32Array(1+o+a.length+u.length);for(var p=0;p<u.length;p+=6)u[p]+=u.length+a.length,u[p+2]+=u.length+a.length,u[p+5]+=u.length;b.set(u),b.set(a,u.length);var m=0;r.forEach((function(n){b.set(n.geometricInfo.positions,m+u.length+a.length),m+=n.geometricInfo.positions.length,b.set(n.geometricInfo.indices,m+u.length+a.length),m+=n.geometricInfo.indices.length,n.geometricInfo.indices.length/3})),console.timeEnd("prepare buffers"),console.log("submodelBuffers.length : "+u.length),console.log("modelBuffers.length : "+a.length),console.log("_meshBuffer.length : "+b.length)},raycastModels:function(n,t,e){var r=[];if(!x)return r;var o=[];e.forEach((function(n){return o.push(n.x,n.y,n.z)}));var u=[];return t.forEach((function(n){return u.push(n.x,n.y,n.z)})),x(b,u,o,F).forEach((function(t){t.forEach((function(t){t.forEach((function(t){var e=n[t];e&&-1===r.indexOf(e)&&r.push(e)}))}))})),r}});e._RF.pop()}}}));

System.register("chunks:///_virtual/raycast.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,o,t,n,a,i,d,s;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){o=e.Layers,t=e.renderer,n=e.Mat4,a=e.Vec3,i=e.cclegacy,d=e.geometry,s=e.gfx}],execute:function(){i._RF.push({},"660470/Qm1MiZ+cla3ojBaJ","raycast",void 0);var l=d.intersect,c=d.Ray,u=d.Triangle,f=[],v=new n,m=new c,M=u.create(),g=new a,y=1/0,p=function(e,r,o,t,n){if(void 0===n&&(n=1/0),y=n,o===s.PrimitiveMode.TRIANGLE_LIST)for(var i=r.length,d=0;d<i;d+=3){var c=3*r[d],u=3*r[d+1],f=3*r[d+2];a.set(M.a,e[c],e[c+1],e[c+2]),a.set(M.b,e[u],e[u+1],e[u+2]),a.set(M.c,e[f],e[f+1],e[f+2]);var v=l.rayTriangle(m,M,t);v<=0||v>=y||(y=v)}else if(o===s.PrimitiveMode.TRIANGLE_STRIP)for(var g=r.length-2,p=0,h=0;h<g;h+=1){var b=3*r[h-p],T=3*r[h+p+1],A=3*r[h+2];a.set(M.a,e[b],e[b+1],e[b+2]),a.set(M.b,e[T],e[T+1],e[T+2]),a.set(M.c,e[A],e[A+1],e[A+2]),p=~p;var B=l.rayTriangle(m,M,t);B<=0||B>=y||(y=B)}else if(o===s.PrimitiveMode.TRIANGLE_FAN){var I=r.length-1,L=3*r[0];a.set(M.a,e[L],e[L+1],e[L+2]);for(var w=1;w<I;w+=1){var E=3*r[w],F=3*r[w+1];a.set(M.b,e[E],e[E+1],e[E+2]),a.set(M.c,e[F],e[F+1],e[F+2]);var S=l.rayTriangle(m,M,t);S<=0||S>=y||(y=S)}}};e("default",{raycastAllModels:function(e,i,d,s){void 0===d&&(d=o.Enum.DEFAULT),void 0===s&&(s=1/0),f.length=0;for(var c,u=r(e.models);!(c=u()).done;){var M=c.value,h=M.transform;if(h&&M.enabled&&M.node.layer&d&&M.worldBounds){var b=l.rayAABB(i,M.worldBounds);if(!(b<=0||b>=s)){if(M.type===t.scene.ModelType.DEFAULT){n.invert(v,h.getWorldMatrix(v)),a.transformMat4(m.o,i.o,v),a.normalize(m.d,a.transformMat4Normal(m.d,i.d,v)),b=1/0;for(var T=0;T<M.subModels.length;++T){var A=M.subModels[T].subMesh;if(A&&A.geometricInfo){var B=A.geometricInfo,I=B.positions,L=B.indices,w=B.doubleSided;p(I,L,A.primitiveMode,w,s),b=Math.min(b,y*a.multiply(g,m.d,h.worldScale).length())}}}b<s&&f.push({node:M.node,distance:b})}}}return f.sort((function(e,r){return e.distance-r.distance})),f},raycastModels:function(e,i,d,s,c){void 0===d&&(d=o.Enum.DEFAULT),void 0===s&&(s=1/0),void 0===c&&(c=!1),f.length=0;for(var u,M=r(e);!(u=M()).done;){var h=u.value,b=h.transform;if(b&&(c||h.enabled)&&h.node.layer&d&&h.worldBounds){var T=l.rayAABB(i,h.worldBounds);if(!(T<=0||T>=s)){if(h.type===t.scene.ModelType.DEFAULT){n.invert(v,b.getWorldMatrix(v)),a.transformMat4(m.o,i.o,v),a.normalize(m.d,a.transformMat4Normal(m.d,i.d,v)),T=1/0;for(var A=0;A<h.subModels.length;++A){var B=h.subModels[A].subMesh;if(B&&B.geometricInfo){var I=B.geometricInfo,L=I.positions,w=I.indices,E=I.doubleSided;p(L,w,B.primitiveMode,E,s),T=Math.min(T,y*a.multiply(g,m.d,b.worldScale).length())}}}T<s&&f.push({node:h.node,distance:T})}}}return f.sort((function(e,r){return e.distance-r.distance})),f},raycastModel:function(e,r,o){void 0===o&&(o=1/0);var i=e.transform,d=l.rayAABB(r,e.worldBounds);if(d<=0||d>=o)return null;if(e.type===t.scene.ModelType.DEFAULT){n.invert(v,i.getWorldMatrix(v)),a.transformMat4(m.o,r.o,v),a.normalize(m.d,a.transformMat4Normal(m.d,r.d,v)),d=1/0;for(var s=0;s<e.subModels.length;++s){var c=e.subModels[s].subMesh;if(c&&c.geometricInfo){var u=c.geometricInfo,f=u.positions,M=u.indices,h=u.doubleSided;p(f,M,c.primitiveMode,h,o),d=Math.min(d,y*a.multiply(g,m.d,i.worldScale).length())}}}return d<o?{node:e.node,distance:d}:null}});i._RF.pop()}}}));

System.register("chunks:///_virtual/reflection-cluster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts","./world-cluster.ts"],(function(t){var e,s,i,r,a,o,n,l,c,u,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,n=t.Vec3,l=t.director,c=t.ReflectionProbe},function(t){u=t.packCubemapAtlas},function(t){f=t.WorldCluster}],execute:function(){var d,h,p;a._RF.push({},"74d5ezDh51Hd4NATqD2io/i","reflection-cluster",void 0);var b=o.ccclass,v=o.property,y=new n;t("ReflectionWorldCluster",b("sync.ReflectionWorldCluster")((p=e((h=function(t){function e(){for(var e,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this)._atlas=void 0,e.pixelsPerObjectFloat=3,i(e,"forceUpdateAtlas",p,r(e)),e.dirty=!0,e.probes=[],e}s(e,t);var a=e.prototype;return a.findObjects=function(){if(this.probes=l.getScene().getComponentsInChildren(c),!this._atlas||this.forceUpdateAtlas){var t=this.probes.map((function(t){return t._cubemap}));this._atlas=u(t),this.forceUpdateAtlas=!1}return this.probes},a.update=function(e){this.dirty&&(this.dirty=!1,t.prototype.update.call(this,e))},a.updateClusters=function(){this.clustersCounts.fill(0),this.clustersData.fill(0),this.clustersDistances.fill(1/0);for(var t=this._cells.x,e=this._cells.y,s=this._cells.z,i=this.clustersCounts,r=this.clustersDistances,a=this._maxCellObjectCount,o=this.clustersData,l=this._pixelsPerCellCount,c=this._usedObjects,u=1;u<c.length;u++){var f=c[u].object;f&&this.addObjectData(f,u)}for(var d=0;d<e;d++)for(var h=0;h<s;h++)for(var p=0;p<t;p++)for(var b=p+t*(h+d*s),v=y.set(this.boundsDelta).multiply3f((p+.5)/t,(d+.5)/e,(h+.5)/s).add(this.boundsMin),x=i[b],z=1;z<c.length;z++){var _=c[z],m=n.squaredDistance(v,_.center);if(x<a)o[l*b*4+x]=c.indexOf(_),i[b]=x,r[b]=m,x++;else for(var C=a;C>=0;C--){var D=l*b*4+C;if(m<r[D]){o[D]=c.indexOf(_),r[D]=m;break}}}},a.addObjectData=function(t,e){var s=this.dataInfoFloat,i=e*this.dataInfoTextureFloat.width*4,r=t.node.worldPosition,a=Math.max(t.size.x,t.size.y,t.size.z);s[i++]=r.x,s[i++]=r.y,s[i++]=r.z,s[i++]=a;var o=this._atlas.cubemaps.indexOf(t.cubemap),n=this._atlas.offsets[o];n&&(s[i++]=n[0],s[i++]=n[1],s[i++]=n[2],s[i++]=n[3])},a.getBoundingBox=function(t,e){var s=Math.max(t.size.x,t.size.y,t.size.z),i=t.node.worldPosition;e.min.set(i.x-s,i.y-s,i.z-s),e.max.set(i.x+s,i.y+s,i.z+s),e.radius=s,e.center.set(i)},a.drawObjects=function(){},e}(f)).prototype,"forceUpdateAtlas",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=h))||d);a._RF.pop()}}}));

System.register("chunks:///_virtual/reflection-probe-utils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,r,i,n;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,r=e._decorator,i=e.ReflectionProbe,n=e.Component}],execute:function(){var p;o._RF.push({},"b32cf5stuhFQIY+C5NC8FIp","reflection-probe-utils",void 0);var s=r.ccclass,c=(r.property,r.executeInEditMode),u=e("ReflectionProbes",{probes:[]});e("ReflectionProbeUtils",s("ReflectionProbeUtils")(p=c(p=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).probe=void 0,t.capturing=!1,t}t(o,e);var r=o.prototype;return r.onEnable=function(){this.probe=this.getComponent(i),-1===u.probes.indexOf(this.probe)&&u.probes.push(this.probe)},r.onDisable=function(){var e=u.probes.indexOf(this.probe);-1!==e&&u.probes.splice(e,1)},r.runtimeCapture=function(e){if(void 0===e&&(e=!0),this.capturing=e,e){if(!this.probe)return;this.probe.probe||this.probe._createProbe(),this.probe.probe.captureCubemap()}},r.update=function(){this.capturing&&(this.probe.probe._needRender=!0)},o}(n))||p)||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/render-id-material.ts",["./rollupPluginModLoBabelHelpers.js","cc","./node-id.ts"],(function(e){var t,r,i,a,n,l,o,s,c,u,d,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,o=e.Material,s=e.MeshRenderer,c=e.renderer,u=e.Vec4,d=e.Component,p=e.gfx},function(e){f=e.NodeID}],execute:function(){var h,M,m,v,y,g;n._RF.push({},"56faevY7W1FYL0Vhhsuddlw","render-id-material",void 0);var C=l.ccclass,b=l.property,I=l.executeInEditMode;e("RenderIDMaterial",(h=C("RenderIDMaterial"),M=b(o),h(m=I((y=t((v=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,i(t,"material",y,a(t)),i(t,"cullMode",g,a(t)),t}r(t,e);var n=t.prototype;return n.start=function(){this.setOCCMaterial()},n.setOCCMaterial=function(){var e=this.getComponent(f),t=e&&e.id,r=this.getComponent(s);if(r&&this.material)for(var i=r.sharedMaterials.length,a=0;a<i;a++){var n=new c.MaterialInstance({parent:this.material});n.overridePipelineStates({rasterizerState:{cullMode:this.cullMode}}),n.setProperty("params",new u(t,0,0,0)),r.setMaterialInstance(n,a)}},t}(d)).prototype,"material",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(v.prototype,"cullMode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.CullMode.BACK}}),m=v))||m)||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/render-tool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,o,i,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,o=e.EffectAsset,i=e.Material,c=e.Component}],execute:function(){var a;n._RF.push({},"626fePm0ulBBpiiJXvBNrQQ","render-tool",void 0);var u=r.ccclass;r.property,e("RenderTool",u("RenderTool")(a=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.createMat=function(e){o.get(e);var t=new i;return t.initialize({effectName:e}),t},n.changeEffect=function(e,t){o.get(e);t.initialize({effectName:e})},n}(c))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/res-cache.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts","./res.ts","./msg.ts","./fx-auto-remove.ts"],(function(n){var t,e,o,r,a,c,s,i,u,f;return{setters:[function(n){t=n.inheritsLoose,e=n.asyncToGenerator,o=n.regeneratorRuntime},function(n){r=n.cclegacy,a=n._decorator,c=n.Vec3},function(n){s=n.Singleton},function(n){i=n.Res},function(n){u=n.Msg},function(n){f=n.FxAutoRemove}],execute:function(){var d;r._RF.push({},"4a886JebGhDUZ9A8gI6mcjO","res-cache",void 0);var h=a.ccclass;a.property,n("ResCache",h("ResCache")(d=function(n){function r(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(t=n.call.apply(n,[this].concat(o))||this)._json={},t._prefab={},t._txt={},t._sprite={},t._sound={},t._callback=void 0,t.msg=void 0,t}t(r,n);var a=r.prototype;return a.load=function(){var n=e(o().mark((function n(t){var a=this;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this._callback=t,u.on("msg_check_res_cache_end",this.checkEnd.bind(this)),i.loadJson("data/data-res-cache",e(o().mark((function n(t,e){var c;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=3;break}return console.error("Load cache res error:",t),n.abrupt("return");case 3:if(a.msg={id:1,action:"load cache",current:"resource",wait_count:1,count:1},e&&e.json){n.next=7;break}return console.error("resource cache data is null",e),n.abrupt("return");case 7:(c=e.json.prefab)&&r.Instance.loadPrefab(c),r.Instance.loadJson(e.json.json),r.Instance.loadSprite(e.json.sprite),r.Instance.loadSound(e.json.sound),u.emit("msg_loading",a.msg);case 13:case"end":return n.stop()}}),n)}))));case 3:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),a.addLoad=function(){this.msg.wait_count++,this.msg.count++},a.removeLoad=function(){this.msg.wait_count--},a.getJson=function(n){var t=this._json[n];return t||(console.error("Res cache not find json res:",n),null)},a.getPrefab=function(n){var t=this._prefab[n];return t||void console.error("Res cache not find prefab res:",n)},a.getTxt=function(n){var t=this._txt[n];if(t)return t;console.error("Res cache not find text res:",n)},a.getSprite=function(n){var t=this._sprite[n];if(void 0!==t)return t;console.error("Res cache not find sprite res:",n)},a.getSound=function(n){var t=this._sound[n];if(void 0!==t)return t;console.error("Res cache not find sound res:",n)},a.setJson=function(n){var t=this;n.forEach((function(n){t._json[n.name]=n}))},a.preloadFxShader=function(n){n.name.includes("fx_")&&i.inst(n,void 0,c.ZERO).addComponent(f)},a.setPrefab=function(n){var t=this;n.forEach((function(n){t._prefab[n.name]=n}))},a.setText=function(n){var t=this;n.forEach((function(n){t._txt[n.name]=n}))},a.setSprite=function(n){var t=this;n.forEach((function(n){t._sprite[n.name]=n}))},a.setSound=function(n){var t=this;n.forEach((function(n){t._sound[n.name]=n}))},a.loadJson=function(n){var t=this;n.forEach((function(n){t.addLoad(),i.loadDirJson(n,(function(n,e){e&&(r.Instance.setJson(e),t.removeLoad())}))}))},a.loadPrefab=function(n){var t=this;n.forEach((function(n){t.addLoad(),i.loadDirPrefab(n,(function(n,e){e&&(r.Instance.setPrefab(e),t.removeLoad())}))}))},a.loadText=function(n){var t=this;n.forEach((function(n){t.addLoad(),i.loadDirText(n,(function(n,e){e&&(r.Instance.setText(e),t.removeLoad())}))}))},a.loadSprite=function(n){var t=this;n.forEach((function(n){t.addLoad(),i.loadDirSprite(n,(function(n,e){e&&(r.Instance.setSprite(e),t.removeLoad())}))}))},a.loadSound=function(n){var t=this;n.forEach((function(n){t.addLoad(),i.loadDirSound(n,(function(n,e){e&&(r.Instance.setSprite(e),t.removeLoad())}))}))},a.checkEnd=function(){this._callback&&i.count<=0&&(this._callback(),this._callback=void 0)},r}(s))||d);r._RF.pop()}}}));

System.register("chunks:///_virtual/res-destroy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(s){var t,e,o,r,n;return{setters:[function(s){t=s.inheritsLoose},function(s){e=s.cclegacy,o=s._decorator,r=s.Component},function(s){n=s.Msg}],execute:function(){var i;e._RF.push({},"d03933Pia1K3KIbUS6vPnB8","res-destroy",void 0);var c=o.ccclass;o.property,s("ResDestroy",c("ResDestroy")(i=function(s){function e(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(t=s.call.apply(s,[this].concat(o))||this).isDestroy=!1,t.msg=void 0,t}t(e,s);var o=e.prototype;return o.start=function(){var s=this;n.bind("msg_destroy_res",(function(){s.isDestroy=!0;var t=s.node.children.length-1;s.msg={id:0,action:"destroy",current:" objects node. ",wait_count:t,count:t},n.emit("msg_loading",s.msg),globalThis.ppSettings&&(globalThis.ppSettings.passVersion++,console.log("msg_destroy_res: passVersion - "+globalThis.ppSettings.passVersion))}),this)},o.update=function(s){if(this.isDestroy){var t=this.node.children.length-1;if(this.msg.wait_count=t,t<=-1)return this.isDestroy=!1,void console.log("res is destroy");this.node.children[t].destroy()}},e}(r))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/res-editor-cache.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res-cache.ts"],(function(e){var t,r,n,s,i,o,a,c,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,a=e.JsonAsset,c=e.Prefab,u=e.Component},function(e){p=e.ResCache}],execute:function(){var l,f,h,b,y,d,g;i._RF.push({},"e457eyimp1BeIQqii83QS/s","res-editor-cache",void 0);var v=o.ccclass,m=o.property;e("ResEditorCache",(l=v("ResEditorCache"),f=m(a),h=m(c),l((d=t((y=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"jsonAssets",d,s(t)),n(t,"prefabs",g,s(t)),t}return r(t,e),t.prototype.init=function(){p.Instance.setJson(this.jsonAssets),p.Instance.setPrefab(this.prefabs)},t}(u)).prototype,"jsonAssets",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=t(y.prototype,"prefabs",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=y))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/res-pool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./singleton.ts","./res.ts","./res-cache.ts","./data-core.ts"],(function(t){var i,o,e,s,n,r,a,h,_;return{setters:[function(t){i=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,s=t.find},function(t){n=t.Msg},function(t){r=t.Singleton},function(t){a=t.Res},function(t){h=t.ResCache},function(t){_=t.DataPoolInst}],execute:function(){var c;o._RF.push({},"b49ebXJauNL7piZ4hUve25/","res-pool",void 0);var l=e.ccclass,p=(t("ResPool",l("ResPool")(c=function(t){function o(){for(var i,o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];return(i=t.call.apply(t,[this].concat(e))||this)._root=void 0,i._pool={},i._poolNode=void 0,i._objectNode=void 0,i}i(o,t);var e=o.prototype;return e.init=function(){},e.initPool=function(t){var i;for(var o in this._poolNode=t,this._objectNode=null==(i=s("init"))?void 0:i.getChildByName("objects"),this._root=t,n.on("msg_pool_recycle",this.pool_recycle.bind(this)),_._data){var e=_._data[o];this.newPool(o,e)}},e.pool_recycle=function(){for(var t in this._pool)this._pool[t].recycle()},e.pop=function(t,i,o){if(!this._pool[t])throw new Error("Can not find pool: "+t);var e=this._pool[t].pop();return o&&(e.parent=o),e.setWorldPosition(i),e.active=!0,e},e.push=function(t){this._pool[t.name].push(t)},e.pushByName=function(t,i){console.log(t,i),this._pool[t].push(i)},e.newPool=function(t,i){var o=new p(t,this._root,i);this._pool[t]=o},o}(r))||c),t("pool",function(){function t(t,i,o){this._index=0,this._items=new Array,this._state=new Array,this._max=0,this._realMax=0,this._name="",this._prefab=void 0,this._root=void 0,this._max=o,this._name=t,this._prefab=h.Instance.getPrefab(this._name),this._root=i;for(var e=0;e<this._max;e++){var s=a.inst(this._prefab,this._root);s.pool_index=e,this._items[e]=s,this._state[e]=1,s.active=!1}}var i=t.prototype;return i.recycle=function(){for(var t=0;t<this._max;t++)this._state[t]=1,this._items[t].active=!1,this._items[t].setPosition(1e4,1e4,1e4)},i.pop=function(){for(var t=0;t<this._max;t++){if(1==this._state[this._index]){var i=this._items[this._index];return this._state[this._index]=2,i.active=!0,this.next(),i}this.next()}return this.increaseRes()},i.next=function(){this._index++,this._index>=this._max&&(this._index=0)},i.push=function(t){t.active=!1;var i=t.pool_index;this._state[i]=1,t.parent=this._root},i.increaseRes=function(){var t=a.inst(this._prefab,this._root);return this._index=this._max,this._max++,void 0!==t.pool_index&&console.log("pool create error."),t.pool_index=this._index,this._items[this._index]=t,this._state[this._index]=1,t},t}()));o._RF.pop()}}}));

System.register("chunks:///_virtual/res-texture.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(_){var e,o,i,r;return{setters:[function(_){e=_.asyncToGenerator,o=_.regeneratorRuntime},function(_){i=_.cclegacy,r=_.loader}],execute:function(){_("loadTextures",l),i._RF.push({},"0aad6yySg5JDryy0LMn9k/v","res-texture",void 0);var a=["CyborgEnemy01_BC","CyborgEnemy01_N","CyborgEnemy01_ORM","CyborgEnemy02_BC","CyborgEnemy02_N","CyborgEnemy02_ORM","DefaultMaterial_BaseColor","DefaultMaterial_MetallicRoughness","DefaultMaterial_Normal","MI_AirConditioners01_BaseColor","MI_AirConditioners01_MetallicRoughness","MI_AirConditioners01_Normal","MI_AirConditioners01_Occlusion","MI_AirConditioner_Decal01_BaseColor","MI_AirConditioner_Decal01_MetallicRoughness","MI_AirConditioner_Decal01_Normal","MI_AirConditioningPipe_01_BaseColor","MI_AirConditioningPipe_01_MetallicRoughness","MI_AirConditioningPipe_01_Normal","MI_AirConditioningPipe_01_Occlusion","MI_AirConditioning_01_BaseColor","MI_AirConditioning_01_MetallicRoughness","MI_AirConditioning_01_Normal","MI_AirConditioning_01_Occlusion","MI_CarsEmissive_Emissive","MI_ContainerP4_01_BaseColor","MI_ContainerP4_01_MetallicRoughness","MI_ContainerP4_01_Normal","MI_ContainerP4_01_Occlusion","MI_EnvirAssets_01_Emissive","MI_Fence_01_BaseColor","MI_Fence_01_MetallicRoughness","MI_Fence_01_Normal","MI_Fence_01_Occlusion","MI_FrontConcrete01_BaseColor","MI_FrontConcrete01_MetallicRoughness","MI_FrontConcrete01_Normal","MI_FrontConcrete02_BaseColor","MI_FrontConcrete02_MetallicRoughness","MI_FrontConcrete02_Normal","MI_FrontConDec03_BaseColor","MI_FrontConDec03_MetallicRoughness","MI_FrontConDec04_BaseColor","MI_Glass03_BaseColor","MI_Glass_02_BaseColor","MI_LampSet02_Emissive","MI_MetalBeam01_BaseColor","MI_MetalBeam01_MetallicRoughness","MI_MetalBeam01_Normal","MI_MetalBeam01_Occlusion","MI_MetalBeam_Painted01_BaseColor","MI_MetalBumpers_BaseColor","MI_MetalBumpers_MetallicRoughness","MI_MetalBumpers_Normal","MI_MetalBumpers_Occlusion","MI_MetalWallPart_01_BaseColor","MI_MetalWallPart_01_MetallicRoughness","MI_MetalWallPart_01_Normal","MI_MetalWallPart_01_Occlusion","MI_MetalWallPart_Painted_01_BaseColor","MI_PaperBoxes_01_BaseColor","MI_PaperBoxes_02_BaseColor","MI_PillarWithBreckets_BaseColor","MI_PillarWithBreckets_MetallicRoughness","MI_PillarWithBreckets_Normal","MI_PillarWithBreckets_Occlusion","MI_Pipes_square_01_BaseColor","MI_Pipes_square_01_MetallicRoughness","MI_Pipes_square_01_Normal","MI_Pipes_square_01_Occlusion","MI_Platform01_BaseColor","MI_Platform01_MetallicRoughness","MI_Platform01_Normal","MI_Platform01_Occlusion","MI_Platform02_BaseColor","MI_Platform02_MetallicRoughness","MI_Platform02_Normal","MI_Platform02_Occlusion","MI_PlatformRailing_01_BaseColor","MI_PlatformRailing_01_MetallicRoughness","MI_PlatformRailing_01_Normal","MI_PlatformRailing_01_Occlusion","MI_Platform_01_BaseColor","MI_Platform_01_MetallicRoughness","MI_Platform_01_Normal","MI_Platform_01_Occlusion","MI_PowderStorage_01_BaseColor","MI_PowderStorage_01_MetallicRoughness","MI_PowderStorage_01_Normal","MI_PowderStorage_01_Occlusion","MI_PropsSetEm01_BaseColor","MI_PropsSetEm01_Emissive","MI_PropsSetEm01_MetallicRoughness","MI_PropsSetEm01_Normal","MI_PropsSetEm01_Occlusion","MI_Round_Pipes_01_BaseColor","MI_Round_Pipes_01_MetallicRoughness","MI_Round_Pipes_01_Normal","MI_Round_Pipes_01_Occlusion","MI_Signboards02_Emissive","MI_SignboardText02_Emissive","MI_Stair_01_Painted_BaseColor","MI_Stair_02_BaseColor","MI_Stair_02_MetallicRoughness","MI_Stair_02_Normal","MI_Stair_02_Occlusion","MI_WGS_01_Emissive","MI_WGS_03_Emissive","M_AnimBoard01_BaseColor","M_AnimBoard01_Emissive","M_Building08_Emissive","M_Hair_Alpha_BaseColor","M_LampSet_01_Emissive","M_Signboards01_Emissive","M_SignboardsAnim03_Emissive","M_Sky_Panning_Clouds2_Inst_Sky_BaseColor","M_WindowsEmissive01_Emissive","T_Asphalt03_BC","T_Asphalt03_Normal","T_Asphalt03_ORM","T_Asphalt_BC","T_Asphalt_Normal","T_Asphalt_ORM","T_BackgroundBuildingTrim01_BC","T_BackgroundBuildingTrim01_N","T_BackgroundBuildingTrim01_ORM","T_BrokenAsphalt_BC","T_BrokenAsphalt_N","T_BrokenAsphalt_ORM","T_Building05_BC","T_Building05_N","T_Building05_ORM","T_Building07_BC","T_Building07_BC_1","T_Building07_N","T_Building07_N_1","T_Building07_ORM","T_Building07_ORM_1","T_Building08_BC","T_Building08_N","T_Building08_ORM","T_Building09_BC","T_Building09_N","T_Building09_ORM","T_Building10_BC","T_Building10_N","T_Building10_ORM","T_Building12_BC","T_Building12_N","T_Building12_ORM","T_Building13_BC","T_Building13_N","T_Building13_ORM","T_Building4_BC","T_Building4_N","T_Building4_ORM","T_car_BC","T_car_Emiss","T_car_N","T_car_ORM","T_Concrete_Poured_D","T_Concrete_Poured_N","T_CornerBuilding01_BC","T_CornerBuilding01_N","T_CornerBuilding01_ORM","T_CyberSignBoards_BC_sRGB","T_CyberSignBoards_N","T_CyberSignBoards_ORM","T_EnvirAssets01_BC_sRGB","T_EnvirAssets01_N","T_EnvirAssets01_ORM","T_FactoryConcreteFloor01_BC","T_FloorMats01_BC","T_FloorMats01_N","T_FloorMats01_ORM","T_GarbageBag02_BC","T_GarbageBag02_N","T_GarbageBag02_ORM","T_gun01_BC_sRGB","T_gun01_N","T_gun01_ORM","T_gun03_BC","T_gun03_N","T_gun03_ORM","T_Hair_BC","T_Hair_N","T_Hair_ORM","T_Hero_Body_BC","T_Hero_Body_N","T_Hero_Body_ORM","T_Hero_Head_BC","T_Hero_Head_N","T_Hero_Head_ORM","T_LampSet02_BC","T_LampSet02_N","T_LampSet02_ORM","T_LampSet_01_BC","T_LampSet_01_N","T_LampSet_01_ORM","T_Metalbeam01_N","T_Metalbeam01_ORM","T_NeonSign02_BC","T_NeonSign02_N","T_NeonSign02_ORM","T_PaperBoxes_01_N","T_PaperBoxes_01_ORM","T_PaperBoxes_02_N","T_PaperBoxes_02_ORM","T_PaperBoxes_03_BC","T_PaperBoxes_03_N","T_PaperBoxes_03_ORM","T_Pavement01_BC","T_Pavement01_N","T_Pavement01_ORM","T_PavementDetails01_BC","T_PavementDetails01_N","T_PavementDetails01_ORM","T_PropsSet01_BC","T_PropsSet01_N","T_PropsSet01_ORM","T_Roof01_BC","T_Roof01_N","T_Roof01_ORM","T_SignboardText01_BC","T_SignboardText01_N","T_SignboardText01_ORM","T_Stairs_02_N","T_Stairs_02_ORM","T_TiledGexGround01_BC","T_TiledGexGround01_N","T_TiledGexGround01_ORM","T_TrashBox01_BC","T_TrashBox01_N","T_TrashBox01_ORM","T_TrimSet02_BC","T_TrimSet02_N","T_TrimSet02_ORM","T_TrimSheet01_BC","T_TrimSheet01_N","T_TrimSheet01_ORM","T_WallTile01_BC","T_WallTile01_N","T_WallTile01_ORM","T_Wall_01_N","T_Wall_01_ORM","T_WGS_01_BC_sRGB","T_WGS_01_N","T_WGS_01_ORM","T_WGS_02_BC_sRGB","T_WGS_02_N","T_WGS_02_ORM","T_WGS_03_BC_sRGB","T_WGS_03_N","T_WGS_03_ORM","T_WGS_04_BC_sRGB","T_WGS_04_N","T_WGS_04_ORM","T_WindowsSet01_BC","T_WindowsSet01_N","T_WindowsSet01_ORM","Wall03_BC","Wall03_Normal","Wall03_ORM","WorldGridMaterial_BaseColor","WorldGridMaterial_MetallicRoughness","WorldGridMaterial_Normal"];function l(){return n.apply(this,arguments)}function n(){return(n=e(o().mark((function _(){var i;return o().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return i=a.splice(0,10),_.next=3,Promise.all(i.map(e(o().mark((function _(e){return o().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:e="textures/"+e,new Promise((function(_){r.loadRes(e,(function(e,o){_(null)}))}));case 2:case"end":return _.stop()}}),_)})))));case 3:if(!a.length){_.next=8;break}return _.next=6,new Promise((function(_){setTimeout((function(){_(null)}),60)}));case 6:return _.next=8,l();case 8:case"end":return _.stop()}}),_)})))).apply(this,arguments)}i._RF.pop()}}}));

System.register("chunks:///_virtual/res.ts",["cc","./msg.ts"],(function(t){var o,i,n,e,s,a,d,c,l,r,u,f,h,m,S,_,g,D,v,p,A;return{setters:[function(t){o=t.cclegacy,i=t.resources,n=t.error,e=t.JsonAsset,s=t.TextAsset,a=t.Prefab,d=t.Texture2D,c=t.ImageAsset,l=t.SpriteFrame,r=t.SpriteAtlas,u=t.EffectAsset,f=t.AudioClip,h=t.AnimationClip,m=t.Mesh,S=t.Material,_=t.Skeleton,g=t.SceneAsset,D=t.Vec3,v=t.instantiate,p=t.director},function(t){A=t.Msg}],execute:function(){o._RF.push({},"746d90hQc1HQ5mGBCnQ2+fK","res",void 0),t("Res",function(){function t(){}return t.load=function(o,e,s){this.count++,i.load(o,e,(function(i,e){i&&(n(o,i.message||i),A.emit("msg_res_error")),s&&s(i,e),t.count--,A.emit("msg_check_res_cache_end")}))},t.loadJson=function(t,o){this.load(t,e,o)},t.loadTxt=function(t,o){this.load(t,s,o)},t.loadPrefab=function(t,o){this.load(t,a,o)},t.loadTex2D=function(t,o){this.load(t,d,o)},t.loadImage=function(t,o){this.load(t,c,o)},t.loadSprite=function(t,o){this.load(t,l,o)},t.loadSpriteAtlas=function(t,o){this.load(t,r,o)},t.loadEffect=function(t,o){this.load(t,u,o)},t.loadAudio=function(t,o){this.load(t,f,o)},t.loadAnimationClip=function(t,o){this.load(t,h,o)},t.loadMesh=function(t,o){this.load(t,m,o)},t.loadMateiral=function(t,o){this.load(t,S,o)},t.loadSkeleton=function(t,o){this.load(t,_,o)},t.loadScene=function(t,o){this.load(t,g,o)},t.inst=function(t,o,i){void 0===o&&(o=void 0),void 0===i&&(i=D.ZERO);var n,e=v(t);void 0===o?null==(n=p.getScene())||n.addChild(e):e.setParent(o);return e.setPosition(i),e.setScale(D.ONE),e},t.instNode=function(t,o,i){void 0===o&&(o=void 0),void 0===i&&(i=D.ZERO);var n,e=v(t);void 0===o?null==(n=p.getScene())||n.addChild(e):e.setParent(o);return e.setPosition(i),e.setScale(D.ONE),e},t.loadDir=function(o,e,s){this.count++,i.loadDir(o,e,(function(o,i){o&&(n(o.message||o),A.emit("msg_res_error")),s&&s(o,i),t.count--,A.emit("msg_check_res_cache_end")}))},t.loadDirJson=function(t,o){this.loadDir(t,e,o)},t.loadDirPrefab=function(t,o){this.loadDir(t,a,o)},t.loadDirText=function(t,o){this.loadDir(t,s,o)},t.loadDirSprite=function(t,o){this.loadDir(t,l,o)},t.loadDirSound=function(t,o){this.loadDir(t,f,o)},t}()).count=0,o._RF.pop()}}}));

System.register("chunks:///_virtual/save-gltf.ts",["./rollupPluginModLoBabelHelpers.js","cc","./editor.ts","./npm.ts"],(function(e){var t,n,r,s,o,a,i,u,c;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,s=e.Vec3,o=e.assetManager},function(e){a=e.base642arraybuffer},function(e){i=e.fse,u=e.path,c=e.Editor}],execute:function(){e({saveGltf:function(e,t,n){return m.apply(this,arguments)},toGltfMesh:function(e,t){var n={asset:{generator:"Khronos glTF Blender I/O v1.2.75",version:"2.0"},scene:0,scenes:[{name:"Scene",nodes:[0]}],nodes:[{mesh:0,name:"Mesh"}],meshes:[{name:e,primitives:[]}],accessors:[],bufferViews:[],buffers:[]},r=n.meshes[0],o=0,i=t,u={indices:-1,attributes:{},mode:4};r.primitives.push(u);var c=0,f=n.bufferViews;for(var y in p){var m=i[y];if(m&&m.length){var l=p[y];l===p.indices?u.indices=o:u.attributes[l.attr]=o;var h={bufferView:o,componentType:l.componentType,count:m.length/l.count,type:l.type};l===p.vertices&&(h.min=s.toArray([],t.min),h.max=s.toArray([],t.max)),n.accessors.push(h);var b=m.length*l.bytesPerElement;f.push({buffer:0,byteOffset:c,byteLength:b}),c+=b,o++}}var v=new ArrayBuffer(c),d=new Float32Array(v,0,f[u.indices].byteOffset/4),E=new Uint16Array(v);for(var g in p){var T=i[g];if(T&&T.length){var O=p[g],w=void 0;w=O===p.indices?u.indices:u.attributes[O.attr],2===O.bytesPerElement?E.set(T,f[w].byteOffset/2):4===O.bytesPerElement&&d.set(T,f[w].byteOffset/4)}}return n.buffers.push({byteLength:c,uri:"data:application/octet-stream;base64,"+a.encode(v)}),n}}),r._RF.push({},"e13ff+XpahLU5jlboeVustC","save-gltf",void 0);var p={vertices:{attr:"POSITION",componentType:5126,count:3,bytesPerElement:4,type:"VEC3"},normals:{attr:"NORMAL",componentType:5126,count:3,bytesPerElement:4,type:"VEC3"},colors:{attr:"COLOR_0",componentType:5126,count:4,bytesPerElement:4,type:"VEC4"},uv:{attr:"TEXCOORD_0",componentType:5126,count:2,bytesPerElement:4,type:"VEC2"},uv1:{attr:"TEXCOORD_1",componentType:5126,count:2,bytesPerElement:4,type:"VEC2"},boneWeights:{attr:"WEIGHTS_0",componentType:5126,count:4,bytesPerElement:4,type:"VEC4"},joints:{attr:"JOINTS_0",componentType:5126,count:4,bytesPerElement:4,type:"VEC4"},indices:{componentType:5123,count:1,bytesPerElement:2,type:"SCALAR"}};e("MeshData",(function(){this.vertices=[],this.uv=[],this.uv1=[],this.normals=[],this.colors=[],this.boneWeights=[],this.tangents=[],this.joints=[],this.indices=[],this.min=new s(1/0,1/0,1/0),this.max=new s(-1/0,-1/0,-1/0)}));function f(e,t){return y.apply(this,arguments)}function y(){return(y=t(n().mark((function e(t,r){var s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=10),e.next=3,c.Message.request("asset-db","query-uuid",t);case 3:return s=e.sent,e.abrupt("return",new Promise((function(e,n){if(!s)return console.error("Can not find uuid for : "+t),e(null);setTimeout((function(){o.loadAny(s,(function(t,n){if(t)return console.error(t),e(null);e(n)}))}),r)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=t(n().mark((function e(t,r,s){var o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Message.request("asset-db","query-path",r);case 2:return o=e.sent,i.ensureDirSync(u.dirname(o)),i.writeJSONSync(o,t),e.next=7,c.Message.request("asset-db","refresh-asset",r);case 7:return e.next=9,f(s,100);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r._RF.pop()}}}));

System.register("chunks:///_virtual/save.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts","./g-math.ts","./io.ts","./util2.ts","./json-tool.ts","./msg.ts","./res-cache.ts"],(function(t){var i,s,e,c,r,n,h,u,a,o;return{setters:[function(t){i=t.inheritsLoose,s=t.createClass},function(t){e=t.cclegacy},function(t){c=t.Singleton},function(t){r=t.GMath},function(t){n=t.IO},function(t){h=t.UtilArray},function(t){u=t.JsonTool},function(t){a=t.Msg},function(t){o=t.ResCache}],execute:function(){e._RF.push({},"370a3Db3ktMC5T5vTd5RopR","save",void 0);t("Save",function(t){function e(){for(var i,s=arguments.length,e=new Array(s),c=0;c<s;c++)e[c]=arguments[c];return(i=t.call.apply(t,[this].concat(e))||this)._uuid="",i._cur={},i._uuidKey="uuid",i._archiveKey="archive_list",i._archiveList=void 0,i._saveJson=void 0,i._backup_counter=0,i._currentStatistics={},i}i(e,t);var c=e.prototype;return c.init=function(){var t=this;this._saveJson=o.Instance.getJson("data-save").json,n.exist(this._archiveKey+".json")?(this._archiveList=u.toIOObject(this._archiveKey),this._uuid=this._archiveList[0],this.loadArchive(this._uuid),this._uuid=n.read(this._uuidKey+".json")):(this._archiveList=[],this.newArchive()),a.on("msg_save_set",(function(i){t.set(i.key,i.value)})),a.on("msg_stat_times",this.statisticsTimes.bind(this)),a.on("msg_stat_time",this.statisticsTime.bind(this)),a.on("msg_stat_distance",this.statisticsDistance.bind(this)),a.on("msg_save_archive",this.saveArchive.bind(this))},c.backup=function(){this._backup_counter--,this._backup_counter>0||(this._backup_counter=5)},c.saveArchiveList=function(){n.write(this._archiveKey+".json",u.toJson(this._archiveList))},c.saveArchive=function(){try{var t=u.toJson(this._cur);n.write(this._uuid+".json",t),this.backup()}catch(t){console.error("save archive error.")}},c.hasArchive=function(){return this._archiveList.length>0},c.newArchive=function(){this._cur=this._saveJson,this._uuid=r.uuid(),this._archiveList.push(this._uuid),n.write(this._uuidKey+".json",this._uuid),this.saveArchive(),this.saveArchiveList()},c.loadArchive=function(t){this._uuid=t,n.write(this._uuidKey+".json",this._uuid);var i=n.read(t+".json");void 0===i?(console.error("can not read data uuid key:",this._uuid),this._cur=Object.assign(this._saveJson)):this._cur=u.toObject(i),void 0===this._cur.input_index&&(this._cur.input_index=0)},c.loadBackup=function(t){this._uuid=t;var i=n.read(t+"_b0.json");this._cur=u.toObject(i)},c.deleteArchive=function(t){h.remove(this._archiveList,t),this.saveArchiveList(),n.delete(t+".json")},c.deleteAllArchive=function(){this._archiveList&&(this._archiveList.forEach((function(t){n.delete(t+".json")})),this._archiveList=void 0),n.delete(this._archiveKey+".json"),n.delete(this._uuid+".json")},c.get=function(t){try{return this._cur[t]}catch(i){throw new Error("Save not find key's value. The key is : "+t)}},c.set=function(t,i){this._cur[t]=i,this.saveArchive()},c.setValue=function(t,i){this._cur[t]=i},c.setStatistics=function(t,i){this._currentStatistics[t]=i},c.getStatistics=function(t){var i=this._currentStatistics[t];return void 0===i?0:i},c.saveGameOver=function(){this.statisticsFinalScore()},c.clearByKey=function(t){this._cur[t]={},this.saveArchive()},c.statisticsTimes=function(t){var i=t+"Times";void 0===this._currentStatistics[i]&&(this._currentStatistics[i]=0),this._currentStatistics[i]+=1},c.statisticsTime=function(t){var i=t.key+"Time";void 0===this._currentStatistics[i]&&(this._currentStatistics[i]=0),this._currentStatistics[i]+=t.time},c.statisticsDistance=function(t){var i=t.key+"Distance";void 0===this._currentStatistics[i]&&(this._currentStatistics[i]=0),this._currentStatistics[i]+=t.distance},c.statisticsValue=function(t){return this._currentStatistics[t]},c.statisticsFinalScore=function(){for(var t in this._currentStatistics)this._cur.statistics[t]+=this._currentStatistics[t]},c.nextStatistics=function(){void 0===this._cur.history_index&&(this._cur.history_index=-1),this._cur.history_index++,this._cur.history_index>30&&(this._cur.history_index=0),void 0===this._cur.history&&(this._cur.history=[]),this._cur.history_index>=this._cur.history.length&&this._cur.history.push({}),this._currentStatistics=this._cur.history[this._cur.history_index]},s(e,[{key:"PlayerID",get:function(){return void 0===this._cur.player_id&&(this._cur.player_id=27),this._cur.player_id}}]),e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/scene-particles.ts",["./rollupPluginModLoBabelHelpers.js","cc","./href-setting.ts"],(function(e){var t,n,r,c,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,c=e.Component},function(e){s=e.HrefSetting}],execute:function(){var i;n._RF.push({},"d06b3tLbEhJPrVhEOTmjCrY","scene-particles",void 0);var o=r.ccclass;e("SceneParticles",o("SceneParticles")(i=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.start=function(){s.sceneParticles||this.node.removeFromParent()},n}(c))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-actions.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,o,r,s;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,s=t.Component}],execute:function(){var e;o._RF.push({},"3ba35uF7IZGq57bXY7w0h7U","sensor-actions",void 0);var c=r.ccclass;r.property,t("SensorActions",c("SensorActions")(e=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.start=function(){},o}(s))||e);o._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-anig.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var i,t,e,r,o,l,s,a,c;return{setters:[function(n){i=n.applyDecoratedDescriptor,t=n.inheritsLoose,e=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){o=n.cclegacy,l=n._decorator,s=n.animation,a=n.Collider,c=n.Component}],execute:function(){var u,p,h,g,y,f;o._RF.push({},"60403ZFtTFG0p3UJdPkKLiL","sensor-anig",void 0);var d=l.ccclass,v=l.property;n("SensorAnig",(u=d("SensorAnig"),p=v(s.AnimationController),u((y=i((g=function(n){function i(){for(var i,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return(i=n.call.apply(n,[this].concat(o))||this)._collider=null,e(i,"graph",y,r(i)),e(i,"key",f,r(i)),i}t(i,n);var o=i.prototype;return o.start=function(){this._collider=this.getComponent(a),this._collider.on("onTriggerEnter",this.onTriggerEnter,this),this._collider.on("onCollisionEnter",this.onCollisionEnter,this)},o.onTriggerEnter=function(n){this.play(this.key,!0)},o.onCollisionEnter=function(n){this.play(this.key,!0)},o.play=function(n,i){var t;null==(t=this.graph)||t.setValue(n,i)},i}(c)).prototype,"graph",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=i(g.prototype,"key",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=g))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-audio.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,n,r,e;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,r=o._decorator,e=o.Component}],execute:function(){var s;n._RF.push({},"bb019sTpbJHNKTd1iatEsWd","sensor-audio",void 0);var i=r.ccclass;r.property,o("SensorAudio",i("SensorAudio")(s=function(o){function n(){return o.apply(this,arguments)||this}return t(n,o),n.prototype.start=function(){},n}(e))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-effect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,o=e.Component}],execute:function(){var c;n._RF.push({},"01389zdX6JEQIIUN0yJ/6JF","sensor-effect",void 0);var s=r.ccclass;r.property,e("SensorEffect",s("SensorEffect")(c=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.start=function(){},n}(o))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-ground.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(i){var t,e,s,o,n,r,a,c,h,u,l,d,y,_,f;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,s=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){n=i.cclegacy,r=i._decorator,a=i.CCFloat,c=i.Vec3,h=i.geometry,u=i.v3,l=i.Collider,d=i.RigidBody,y=i.PhysicsSystem,_=i.Component},function(i){f=i.UtilVec3}],execute:function(){var p,k,g,m,v,G,b,S,C;n._RF.push({},"bf45fM2hwNNIr8TzJOa0XCl","sensor-ground",void 0);var w=r.ccclass,z=r.property;i("SensorGround",(p=w("SensorGround"),k=z(a),g=z([c]),m=z([a]),p((b=t((G=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this)._collider=void 0,t._isGround=!1,t._isSky=!1,t._ray=new h.Ray,t._velocity=u(0,0,0),t._rigid=void 0,s(t,"checkDistance",b,o(t)),s(t,"original",S,o(t)),s(t,"masks",C,o(t)),t._mask=0,t.pos=u(0,0,0),t.velocity=u(0,0,0),t.test_index=0,t}e(t,i);var n=t.prototype;return n.start=function(){this._collider=this.getComponent(l),this._ray.d.x=0,this._ray.d.y=-1,this._ray.d.z=0,this._rigid=this.getComponent(d),this._isGround=!0;for(var i=0;i<this.masks.length;i++)this._mask=this._mask|1<<this.masks[i]},n.update=function(i){this.checkGroundRays()},n.checkGroundRays=function(){var i;null==(i=this._rigid)||i.getLinearVelocity(this.velocity);for(var t=0;t<this.original.length;t++)if(f.copy(this._ray.o,this.node.worldPosition),this._ray.o.add(this.original[t]),y.instance.raycastClosest(this._ray,this._mask,this.checkDistance)){var e=y.instance.raycastClosestResult;return void(!this._isGround&&this.velocity.y>-1&&this.velocity.y<=0&&e.distance<.3?(this.node.emit("onGround"),this._isGround=!0,this._isSky=!1,this.test_index++):this.checkOffGround())}this.checkToSky()},n.checkOffGround=function(){this._isGround&&this.velocity.y>.5&&(this.node.emit("offGround"),this._isGround=!1)},n.checkToSky=function(){this._isSky||(this._isGround&&(this.node.emit("offGround"),this._isGround=!1),this.node.emit("moveToSky"),this._isSky=!0)},t}(_)).prototype,"checkDistance",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),S=t(G.prototype,"original",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(G.prototype,"masks",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=G))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-msg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(i){var t,e,o,r,n,s,l,a,h,c,u;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){n=i.cclegacy,s=i._decorator,l=i.CCString,a=i.Collider,h=i.game,c=i.Component},function(i){u=i.Msg}],execute:function(){var m,g,d,f,_,p,x,C,E,b;n._RF.push({},"921f4aN2JlDAKMS1fApt6Y4","sensor-msg",void 0);var T=s.ccclass,v=s.property;i("SensorMsg",(m=T("SensorMsg"),g=v([l]),m((_=t((f=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(t=i.call.apply(i,[this].concat(n))||this)._collider=null,o(t,"msg",_,r(t)),o(t,"data",p,r(t)),o(t,"exit_msg",x,r(t)),o(t,"exit_data",C,r(t)),o(t,"isHitRemove",E,r(t)),o(t,"filter",b,r(t)),t._safeTime=500,t._curTime=0,t}e(t,i);var n=t.prototype;return n.onEnable=function(){this._collider=this.getComponent(a),this.init()},n.onDisable=function(){this._collider.off("onTriggerEnter",this.onCollisionEnter,this),this._collider.off("onCollisionEnter",this.onCollisionEnter,this),this.exit_msg.length>0&&(this._collider.off("onTriggerExit",this.onTriggerExit,this),this._collider.off("onCollisionExit",this.onCollisionExit,this))},n.init=function(){if(""===this.msg){var i=this.node.name.split("#");this.msg=i[0],i.length>=2&&(this.data=i[1])}this._collider.on("onTriggerEnter",this.onTriggerEnter,this),this._collider.on("onCollisionEnter",this.onCollisionEnter,this),this.exit_msg.length>0&&(this._collider.on("onTriggerExit",this.onTriggerExit,this),this._collider.on("onCollisionExit",this.onCollisionExit,this)),this._curTime=h.totalTime},n.onTriggerEnter=function(i){this.checkFilter(i.otherCollider.name)||("actor_event"===this.msg?i.otherCollider.node.emit("do",this.data):(u.emit(this.msg,this.data),i.otherCollider.emit("do",this.data)),this.isHitRemove&&(this.node.active=!1))},n.onTriggerExit=function(i){this.checkFilter(i.otherCollider.name)||("actor_event"===this.exit_msg?i.otherCollider.node.emit("do",this.exit_data):(u.emit(this.exit_msg,this.exit_data),i.otherCollider.emit("do",this.exit_data)))},n.onCollisionEnter=function(i){this.checkFilter(i.otherCollider.name)||("actor_event"===this.msg?i.otherCollider.node.emit("do",this.data):u.emit(this.msg,this.data),this.isHitRemove&&(this.node.active=!1))},n.onCollisionExit=function(i){this.checkFilter(i.otherCollider.name)||("actor_event"===this.exit_msg?i.otherCollider.node.emit("do",this.exit_data):u.emit(this.exit_msg,this.exit_data))},n.unSafeEnter=function(){h.totalTime,this._curTime;return!(h.totalTime-this._curTime>this._safeTime)||(this._curTime=h.totalTime,!1)},n.checkFilter=function(i){for(var t=0;t<this.filter.length;t++){var e=this.filter[t];if(i.includes(e))return!0}return!1},t}(c)).prototype,"msg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=t(f.prototype,"data",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=t(f.prototype,"exit_msg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),C=t(f.prototype,"exit_data",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=t(f.prototype,"isHitRemove",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=t(f.prototype,"filter",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=f))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-probe.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var e,n,r,t,i;return{setters:[function(o){e=o.inheritsLoose},function(o){n=o.cclegacy,r=o._decorator,t=o.Collider,i=o.Component}],execute:function(){var l;n._RF.push({},"fdcf6g/V0JAx4JtAlpB7Yeq","sensor-probe",void 0);var s=r.ccclass;r.property,o("SensorProbe",s("SensorProbe")(l=function(o){function n(){for(var e,n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return(e=o.call.apply(o,[this].concat(r))||this)._collider=void 0,e}e(n,o);var r=n.prototype;return r.start=function(){this._collider=this.getComponent(t),this._collider.on("onCollisionEnter",this.onCollisionEnter,this)},r.onCollisionEnter=function(o){console.log("on collision enter:",o.otherCollider.name),this.node.emit("onHit",o.otherCollider.name)},n}(i))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-ray-node-to-node.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){var e,i,o,r,n,s,a,c,l,h,d,u,y,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.Node,c=t.CCFloat,l=t.v3,h=t.geometry,d=t.PhysicsSystem,u=t.Vec3,y=t.Component},function(t){p=t.UtilVec3}],execute:function(){var _,m,f,b,P,N,g,k,v,w;n._RF.push({},"4e0eeac2SVGPrWQmkdCyeFe","sensor-ray-node-to-node",void 0);var z=s.ccclass,R=s.property;t("SensorRayNodeToNode",(_=z("SensorRayNodeToNode"),m=R(a),f=R(a),b=R([c]),_((g=e((N=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,o(e,"startNode",g,r(e)),o(e,"endNode",k,r(e)),o(e,"masks",v,r(e)),o(e,"check_time",w,r(e)),e._mask=0,e._time=0,e._direction=l(0,0,0),e._ray=new h.Ray,e.hitPoint=l(0,0,0),e}i(e,t);var n=e.prototype;return n.start=function(){for(var t=0;t<this.masks.length;t++)this._mask=this._mask|1<<this.masks[t]},n.update=function(t){if(this._time-=t,this._time<0){p.copy(this._ray.o,this.startNode.worldPosition),p.copy(this._direction,this.endNode.worldPosition),this._direction.subtract(this.startNode.worldPosition);var e=this._direction.length();if(this._direction.normalize(),p.copy(this._ray.d,this._direction),d.instance.raycastClosest(this._ray,this._mask,e)){var i;p.copy(this.hitPoint,d.instance.raycastClosestResult.hitPoint),null==(i=this.hitPoint)||i.subtract(this._direction);this.hitPoint.clone().subtract(this.startNode.worldPosition).length()}else p.copy(this.hitPoint,u.ZERO)}},e}(y)).prototype,"startNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(N.prototype,"endNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(N.prototype,"masks",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=e(N.prototype,"check_time",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),P=N))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-rays-angle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){var i,e,r,n,s,a,o,h,c,l,u,d,y,g,m,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,o=t.Vec3,h=t.CCFloat,c=t.geometry,l=t.v3,u=t.math,d=t.PhysicsSystem,y=t.randomRangeInt,g=t.Component},function(t){m=t.UtilVec3,p=t.UtilNode}],execute:function(){var f,_,v,b,k,R,D,w,S,z,C,P,A;s._RF.push({},"2154dIBOBFE8akijr2j3PV8","sensor-rays-angle",void 0);var E=a.ccclass,H=a.property,F=a.executeInEditMode;t("SensorRaysAngle",(f=E("SensorRaysAngle"),_=H([o]),v=H(h),b=H(h),k=H([h]),f(R=F((w=i((D=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,r(i,"dir",w,n(i)),r(i,"angle",S,n(i)),r(i,"segment",z,n(i)),r(i,"masks",C,n(i)),r(i,"check_time",P,n(i)),r(i,"distance",A,n(i)),i._ray=new c.Ray,i.checked=!1,i.checkedNode=void 0,i.hitPoint=l(0,0,0),i._time=0,i._mask=0,i._curDir=l(0,0,0),i._dirs=void 0,i.hitStates=void 0,i.notHitCount=0,i}e(i,t);var s=i.prototype;return s.onEnable=function(){for(var t=0;t<this.masks.length;t++)this._mask=this._mask|1<<this.masks[t];var i=this.dir.length*this.segment;this._dirs=new Array(i),this.hitStates=new Array(i);for(var e=this.angle/this.segment,r=l(0,0,0),n=0;n<this.dir.length;n++)for(var s=this.dir[n],a=-this.angle/2,h=0;h<this.segment;h++){a+=e;var c=l(s.x,s.y,s.z);o.rotateY(c,c,r,u.toRadian(a));var d=n*this.segment+h;this._dirs[d]=c}},s.update=function(t){if(this._time-=t,this._time<0){this._time=this.check_time,m.copy(this._ray.o,this.node.worldPosition);for(var i=p.getWorldEulerAngles(this.node),e=u.toRadian(i.y),r=0;r<this._dirs.length;r++)if(m.copy(this._curDir,this._dirs[r]),o.rotateY(this._curDir,this._curDir,o.ZERO,e),m.copy(this._ray.d,this._curDir),this.hitStates[r]=d.instance.raycastClosest(this._ray,this._mask,this.distance),this.notHitCount=0,this.hitStates[r]){var n=d.instance.raycastClosestResult;m.copy(this.hitPoint,n.hitPoint),this.checked=!0,this.checkedNode=n.collider.node}else this.checkedNode=void 0,this.checked=!1,this.notHitCount++}},s.getRandomWalkableDirection=function(){for(var t=y(0,this.notHitCount),i=-1,e=0;e<this.hitStates.length&&(0==this.hitStates[e]&&i++,i!==t);e++);if(-1!==i){this._curDir=this.dir[i];var r=p.getWorldEulerAngles(this.node),n=u.toRadian(r.y);return o.rotateY(this._curDir,this._curDir,o.ZERO,n)}},i}(g)).prototype,"dir",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=i(D.prototype,"angle",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),z=i(D.prototype,"segment",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),C=i(D.prototype,"masks",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=i(D.prototype,"check_time",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),A=i(D.prototype,"distance",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),R=D))||R)||R));s._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-rays.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,r,s,o,n,a,c,h,l,u,d;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,r=i.initializerDefineProperty,s=i.assertThisInitialized},function(i){o=i.cclegacy,n=i._decorator,a=i.Vec3,c=i.CCFloat,h=i.geometry,l=i.v3,u=i.PhysicsSystem,d=i.Component}],execute:function(){var y,_,p,m,f,k,b,g,v,z,w;o._RF.push({},"ee6c5/PncFApKo6tEquK38K","sensor-rays",void 0);var D=n.ccclass,P=n.property;i("SensorRays",(y=D("SensorRays"),_=P([a]),p=P([a]),m=P([c]),y((b=t((k=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=i.call.apply(i,[this].concat(o))||this,r(t,"dir",b,s(t)),r(t,"origin",g,s(t)),r(t,"masks",v,s(t)),r(t,"check_time",z,s(t)),r(t,"distance",w,s(t)),t._ray=new h.Ray,t.checked=!1,t.checkedNode=void 0,t._time=0,t._mask=0,t._curDir=l(0,0,0),t}e(t,i);var o=t.prototype;return o.start=function(){for(var i=0;i<this.masks.length;i++)this._mask=this._mask|1<<this.masks[i]},o.update=function(i){if(this._time-=i,this._time<0){this._time=this.check_time;for(var t=0;t<this.dir.length;t++){if(a.transformMat4(this._curDir,this.dir[t],this.node.worldMatrix),this._curDir=this._curDir.subtract(this.node.worldPosition).normalize(),this._ray.d.x=this._curDir.x,this._ray.d.y=this._curDir.y,this._ray.d.z=this._curDir.z,this._ray.o.x=this.origin[t].x+this.node.worldPosition.x,this._ray.o.y=this.origin[t].y+this.node.worldPosition.y,this._ray.o.z=this.origin[t].z+this.node.worldPosition.z,u.instance.raycastClosest(this._ray,this._mask,this.distance)){var e=u.instance.raycastClosestResult;return this.checked=!0,void(this.checkedNode=e.collider.node)}this.checkedNode=void 0}this.checked=!1}},t}(d)).prototype,"dir",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=t(k.prototype,"origin",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(k.prototype,"masks",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=t(k.prototype,"check_time",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),w=t(k.prototype,"distance",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),f=k))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/sensor-slope.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){var i,e,o,r,n,s,a,c,l,h,p,y,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.CCFloat,c=t.Vec3,l=t.geometry,h=t.v3,p=t.PhysicsSystem,y=t.Component},function(t){u=t.UtilVec3}],execute:function(){var d,f,m,_,b,v,P,S,g,k,w;n._RF.push({},"f435bDe2jxF178IPHmyzwrp","sensor-slope",void 0);var z=s.ccclass,R=s.property;t("SensorSlope",(d=z("SensorSlope"),f=R([a]),m=R(a),_=R(c),b=R(c),d((S=i((P=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i=t.call.apply(t,[this].concat(n))||this,o(i,"masks",S,r(i)),o(i,"distance",g,r(i)),o(i,"direction",k,r(i)),i._mask=0,i._ray=new l.Ray,i.hitPoint=h(.5,0,.5),o(i,"vectorSlop",w,r(i)),i}e(i,t);var n=i.prototype;return n.start=function(){for(var t=0;t<this.masks.length;t++)this._mask=this._mask|1<<this.masks[t]},n.checkSlope=function(t){return u.copy(this.direction,t),this.direction.y=0,this.direction.normalize(),u.copy(this._ray.o,this.direction),this._ray.o.multiplyScalar(.1),this._ray.o.add(this.node.worldPosition),this._ray.o.y+=.3,this._ray.d.y=-1,this._ray.d.x=0,this._ray.d.z=0,p.instance.raycastClosest(this._ray,this._mask,this.distance)?(u.copy(this.hitPoint,p.instance.raycastClosestResult.hitPoint),Math.abs(this.hitPoint.y-this.node.worldPosition.y)>.05&&(u.copy(this.vectorSlop,this.hitPoint),this.vectorSlop.subtract(this.node.worldPosition),!0)):(u.copy(this.hitPoint,c.ZERO),u.copy(this.vectorSlop,c.ZERO),!1)},i}(y)).prototype,"masks",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=i(P.prototype,"distance",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),k=i(P.prototype,"direction",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h(0,0,1)}}),w=i(P.prototype,"vectorSlop",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h(0,0,0)}}),v=P))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/setting.ts",["cc"],(function(e){var s;return{setters:[function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"a1279LA9ZZEfZ0llw/MjKiJ","setting",void 0);var t=e("settings",{bakingReflection:!1,outputRGBE:!1,tonemapped:!1,shadowPass:void 0,gbufferPass:void 0,renderProfiler:!1,passPathName:"",passVersion:0,renderCameras:[]});globalThis.ppSettings=t,s._RF.pop()}}}));

System.register("chunks:///_virtual/sfx-heart.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./level.ts","./sound.ts"],(function(e){var t,o,s,u,n,i,c,r,l;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,s=e._decorator,u=e.AudioSource,n=e.math,i=e.Component},function(e){c=e.Msg},function(e){r=e.Level},function(e){l=e.Sound}],execute:function(){var h;o._RF.push({},"e5186zh4vhAxY8zIRm0AZcA","sfx-heart",void 0);var m=s.ccclass;s.property,e("SfxHeart",m("SfxHeart")(h=function(e){function o(){for(var t,o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];return(t=e.call.apply(e,[this].concat(s))||this)._sfxAudio=void 0,t.volume=0,t.currentVolume=0,t.sceneVolume=1,t.currentSceneVolume=1,t.isLow=!1,t}t(o,e);var s=o.prototype;return s.onEnable=function(){null==this._sfxAudio&&(this._sfxAudio=this.getComponent(u)),this._sfxAudio.volume=0,this._sfxAudio.loop=!0,this._sfxAudio.play()},s.onDisable=function(){var e;null==(e=this._sfxAudio)||e.stop()},s.update=function(e){var t,o=r.Instance._player;o?(null!=o&&null!=(t=o._data)&&t.is_low_hp&&!o.is_dead?(0==this.isLow&&(this.isLow=!0,c.emit("msg_ui_fx_open","effect_low_hp")),this.currentVolume=l.volumeSound,this.currentSceneVolume=.1):(this.isLow&&(this.isLow=!1,c.emit("msg_ui_fx_close","effect_low_hp")),this.currentVolume=0,this.currentSceneVolume=1),this.volume=n.lerp(this.volume,this.currentVolume,e),this.sceneVolume=n.lerp(this.sceneVolume,this.currentSceneVolume,e),this._sfxAudio.volume=this.volume,l.sceneMusicPercent=this.sceneVolume,l.updateBGM()):this.onClose()},s.onClose=function(){1!=this.currentSceneVolume&&(this.isLow=!1,c.emit("msg_ui_fx_close","effect_low_hp"),this.currentVolume=0,this.currentSceneVolume=1,this._sfxAudio.volume=this.currentVolume,l.sceneMusicPercent=this.currentSceneVolume,l.updateBGM())},o}(i))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/singleton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"f3e08OCtCBKXY83CjMmxlQC","singleton",void 0),n("Singleton",function(){function n(){}var e=n.prototype;return e.init=function(){},e.clear=function(){n._instance=null},t(n,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new this),this._instance}}]),n}())._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/sky.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,o,s,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,o=e.MeshRenderer,s=e.director,c=e.Component}],execute:function(){var i;n._RF.push({},"8d02agJKzZCQ4Bli+ytrP6R","sky",void 0);var a=r.ccclass,u=r.executeInEditMode;e("Sky",a("custom.Sky")(i=u(i=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.start=function(){var e=this.getComponent(o),t=s.getScene().globals.skybox;e.material.setProperty("envMap",t.reflectionMap||t.envmap)},n}(c))||i)||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/slider-2d.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,s,h,e,n,o,r,p;return{setters:[function(t){i=t.inheritsLoose},function(t){s=t.cclegacy,h=t._decorator,e=t.Node,n=t.UITransform,o=t.v3,r=t.v2,p=t.Component}],execute:function(){var c;s._RF.push({},"1c7fcAGirFNIJ7X24Ejpnf0","slider-2d",void 0);var a=h.ccclass;h.property,t("Slider2D",a("Slider2D")(c=function(t){function s(){for(var i,s=arguments.length,h=new Array(s),e=0;e<s;e++)h[e]=arguments[e];return(i=t.call.apply(t,[this].concat(h))||this).pos=o(0,0,0),i.uipos=r(0,0),i.point=Object.create(null),i.uitran=Object.create(null),i.size=r(0,0),i.halfx=0,i.halfy=0,i.px=0,i.py=0,i.children=Object.create(null),i}i(s,t);var h=s.prototype;return h.start=function(){this.node.on(e.EventType.TOUCH_MOVE,this.onMove,this),this.point=this.node.children[0].children[0],this.children=this.point.children,this.uitran=this.node.getComponent(n),this.size.x=this.uitran.contentSize.x,this.size.y=this.uitran.contentSize.y,this.halfx=this.size.x/2,this.halfy=this.size.y/2,this.set({x:Math.random(),y:Math.random()})},h.set=function(t){this.pos.x=this.size.x*t.x-this.halfx,this.pos.y=this.size.y*t.y-this.halfy,this.point.setPosition(this.pos)},h.onMove=function(t){var i=t.getUIDelta(),s=i.x,h=i.y;this.pos.x+=s,this.pos.y+=h,this.pos.x+=this.halfx,this.pos.y+=this.halfy,this.pos.x%=this.size.x,this.pos.y%=this.size.y,this.px=this.pos.x/this.size.x,this.py=this.pos.y/this.size.y,this.px=this.px<0?1+this.px:this.px,this.py=this.py<0?1+this.py:this.py,this.pos.x-=this.halfx,this.pos.y-=this.halfy,this.point.setPosition(this.pos)},h.getPercent=function(){return{x:this.px,y:this.py}},s}(p))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/smooth-local-z.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./util2.ts"],(function(t){var i,o,s,e,n,r,c,h,f,a,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,s=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,c=t.v3,h=t.Vec3,f=t.Component},function(t){a=t.Msg},function(t){u=t.UtilVec3}],execute:function(){var l,p,m,y;n._RF.push({},"74de3MEYBhD5q52b9G2UUCm","smooth-local-z",void 0);var g=r.ccclass,d=r.property;t("SmoothLocalZ",g("SmoothLocalZ")((m=i((p=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return i=t.call.apply(t,[this].concat(n))||this,s(i,"smooth",m,e(i)),s(i,"wait",y,e(i)),i.pos=c(0,0,0),i.cur=c(0,0,0),i.offset=0,i.offset_x=0,i.original=c(0,0,0),i}o(i,t);var n=i.prototype;return n.init=function(){u.copy(this.pos,this.node.position),u.copy(this.original,this.pos),this.pos.z=this.offset+this.original.z,u.copy(this.cur,this.pos),this.cur.z=30,this.pos.z=30,this.node.setPosition(this.cur),a.on("set_offset_x",this.setOffsetX.bind(this))},n.onDestroy=function(){a.off("set_offset_x",this.setOffset.bind(this))},n.setOffset=function(t){this.offset=t,this.pos.z=this.offset+this.original.z},n.setOffsetX=function(t){this.pos.x=t+this.original.x},n.lateUpdate=function(t){this.wait>0?this.wait-=t:this.smoothLerp(t)},n.smoothLerp=function(t){h.lerp(this.cur,this.cur,this.pos,t*this.smooth),this.node.setPosition(this.cur)},i}(f)).prototype,"smooth",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),y=i(p.prototype,"wait",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),l=p))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/sound-actor-main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sound.ts"],(function(n){var o,t,r,e,c;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,r=n._decorator,e=n.Component},function(n){c=n.Sound}],execute:function(){var u;t._RF.push({},"8a74fEV/pdKBLSh/xATApKX","sound-actor-main",void 0);var i=r.ccclass;r.property,n("SoundActorMain",i("SoundActorMain")(u=function(n){function t(){return n.apply(this,arguments)||this}o(t,n);var r=t.prototype;return r.start=function(){c.node=this.node},r.onDestroy=function(){c.node=void 0},t}(e))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/sound-actor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sound.ts"],(function(n){var t,e,o,r,i,a,c,s,u;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){i=n.cclegacy,a=n._decorator,c=n.CCString,s=n.Component},function(n){u=n.Sound}],execute:function(){var l,p,f,d,h;i._RF.push({},"5127fk5a+hOWLZrpg8oBF9u","sound-actor",void 0);var y=a.ccclass,g=a.property;n("SoundActor",(l=y("SoundActor"),p=g(c),l((h=t((d=function(n){function t(){for(var t,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=n.call.apply(n,[this].concat(i))||this,o(t,"sfx_name",h,r(t)),t}return e(t,n),t.prototype.onEnable=function(){u.addSfx(this.node,this.sfx_name)},t}(s)).prototype,"sfx_name",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=d))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/sound-enable-play.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sound.ts"],(function(e){var i,t,n,o,a,r,u,l,s,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,u=e.CCString,l=e.AudioSource,s=e.Component},function(e){c=e.Sound}],execute:function(){var h,_,d,p,m,f,b,y,g,x,v;a._RF.push({},"aaf92cB+ZNOXYISejst2Bd5","sound-enable-play",void 0);var S=r.ccclass,w=r.property;e("SoundEnablePlay",(h=S("SoundEnablePlay"),_=w(u),h((m=i((p=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a))||this,n(i,"sfx_name",m,o(i)),n(i,"enable_distance",f,o(i)),n(i,"max_distance",b,o(i)),n(i,"max_sound",y,o(i)),n(i,"min_sound",g,o(i)),n(i,"relate_height",x,o(i)),n(i,"max_height",v,o(i)),i._audioSource=Object.create(null),i._distance_percent=1,i._volume=1,i}t(i,e);var a=i.prototype;return a.__preload=function(){if(this._audioSource=this.node.addComponent(l),c.addSfx(this.node,this.sfx_name),this.relate_height){var e=this.node.worldPosition.y;e>this.max_height&&(e=this.max_height),this._volume=e/this.max_height,this._volume>this.max_sound&&(this._volume=this.max_sound),this._volume<this.min_sound&&(this._volume=this.min_sound)}},a.onEnable=function(){this._audioSource.play()},a.onDisable=function(){this._audioSource.stop()},a.update=function(e){},i}(s)).prototype,"sfx_name",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=i(p.prototype,"enable_distance",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=i(p.prototype,"max_distance",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),y=i(p.prototype,"max_sound",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=i(p.prototype,"min_sound",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),x=i(p.prototype,"relate_height",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=i(p.prototype,"max_height",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),d=p))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/sound.ts",["cc","./save.ts","./msg.ts","./res.ts","./res-cache.ts","./res-pool.ts","./data-core.ts"],(function(o){var i,t,n,s,u,e,d,l,c;return{setters:[function(o){i=o.cclegacy,t=o.AudioSource,n=o.Vec3},function(o){s=o.Save},function(o){u=o.Msg},function(o){e=o.Res},function(o){d=o.ResCache},function(o){l=o.ResPool},function(o){c=o.DataSoundInst}],execute:function(){i._RF.push({},"89c79RmqFxGcJ3YiE3Q/7K+","sound",void 0);var h=o("Sound",function(){function o(){}return o.init=function(){var o,i,n=d.Instance.getPrefab("sound"),c=e.inst(n,l.Instance._poolNode);this._sfxAudio=null==(o=c.getChildByName("sfx"))?void 0:o.getComponent(t),this._bgmAudio=null==(i=c.getChildByName("bgm"))?void 0:i.getComponent(t),this._poolRoot=c.getChildByName("pool_root"),this._templateSource=c.getChildByName("template");for(var h=0;h<this._sourcePoolCount;h++)this.addPool();var r=s.Instance.get("sfx_volume");void 0===r&&(r=1),this.volumeSound=r;var a=s.Instance.get("sfx_volume_music");void 0===a&&(a=1),this.volumeMusic=a,this.Refresh(),u.on("sli_sound",this.setVolume.bind(this)),u.on("sli_music",this.setVolumeMusic.bind(this)),u.bind("sound_load",this.onLoad,this),u.bind("sound_load_end",this.onLoadEnd,this)},o.addPool=function(){var o=e.instNode(this._templateSource,this._poolRoot);this._pool.push(o.getComponent(t))},o.setVolume=function(o){this.volumeSound=o,this._sfxAudio.volume=this.volumeSound,s.Instance.set("sfx_volume",o)},o.setVolumeMusic=function(o){this.volumeMusic=o,this._bgmAudio.volume=this.volumeMusic,s.Instance.set("sfx_volume_music",o)},o.Refresh=function(){this._sfxAudio.volume=this.volumeSound,this._bgmAudio.volume=this.volumeMusic},o.playLoop=function(o,i){var t=this;void 0===i&&(i=1);for(var n=-1,s=0;s<this._pool.length;s++)if(null===this._pool[s].clip){n=s;break}return-1===n&&(this.addPool(),n=this._pool.length-1),e.loadAudio("sound/"+o,(function(s,u){if(s)throw new Error("Can not find sound resource : sound/"+o);u&&(t._pool[n].clip=u,t._pool[n].volume=t.volumeSound*i,t._pool[n].loop=!0,t._pool[n].play())})),n},o.offing=function(o){this._pool[o].stop(),this._pool[o].loop=!1,this._pool[o].clip=null},o.onByDistance=function(o,i){if(null!=this.node){var t=n.distance(this.node.worldPosition,i),s=c._data.distance_rate,u=(s-t)/s;u>1&&(u=1),u<0&&(u=0),this.on(o,u)}},o.on=function(o,i){var t=this;void 0===i&&(i=1),this.res[o]?this._sfxAudio.playOneShot(this.res[o],this.volumeSound*i*this.sceneMusicPercent):e.loadAudio("sound/"+o,(function(n,s){s&&(t.res[o]=s,t._sfxAudio.playOneShot(s,t.volumeSound*i*t.sceneMusicPercent))}))},o.addSfx=function(o,i,n){var s=this;void 0===n&&(n=1),e.loadAudio("sound/"+i,(function(u,e){if(u)throw new Error("Can not find sound resource : sound/"+i);if(e){if(!o.isValid)return;var d=o.getComponent(t);d.clip=e,d.loop=!0,d.volume=n*s._volumeLoad}}))},o.off=function(o){},o.onBGM=function(o){var i=this;if(this.currentBGMName!=o){if(this.currentBGMName=o,this.res[o])return this._bgmAudio.stop(),this._bgmAudio.clip=this.res[o],this._bgmAudio.loop=!0,this._bgmAudio.volume=this.volumeMusic,void this._bgmAudio.play();e.loadAudio("sound/"+o,(function(t,n){if(t)throw new Error("Can not find sound resource : sound/"+o);n&&(i._bgmAudio.stop(),i._bgmAudio.clip=n,i._bgmAudio.loop=!0,i._bgmAudio.volume=i.volumeMusic,i._bgmAudio.play())}))}},o.offBGM=function(o){this._bgmAudio.stop(),this._bgmAudio.clip=null,this._bgmAudio.loop=!1,this.currentBGMName=""},o.updateBGM=function(){this._bgmAudio.volume=this.volumeMusic*this.sceneMusicPercent},o.pauseBGM=function(){this._bgmAudio.pause()},o.onLoad=function(){this._volumeLoad=0},o.onLoadEnd=function(){this._volumeLoad=1},o}());h._sfxAudio=void 0,h._bgmAudio=void 0,h.volumeSound=.5,h.volumeMusic=1,h.sceneMusicPercent=1,h._volumeLoad=1,h._sourcePoolCount=30,h._pool=[],h._templateSource=void 0,h._poolRoot=void 0,h.currentBGMName="",h.node=void 0,h.res={},i._RF.pop()}}}));

System.register("chunks:///_virtual/spector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./href-setting.ts"],(function(){var e,t,n,o,r,a,i,c,s;return{setters:[function(n){e=n.asyncToGenerator,t=n.regeneratorRuntime},function(e){n=e.cclegacy,o=e.game,r=e.input,a=e.Input,i=e.KeyCode,c=e.Game},function(e){s=e.HrefSetting}],execute:function(){if(n._RF.push({},"05e76hplqRPUaior27cZIz0","spector",void 0),s.spector){var u,p=function(){var n=e(t().mark((function e(){var n,p;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([new Promise((function(e){u.Loader.onReady((function(){e(null)}))})),new Promise((function(e){o.on(c.EVENT_GAME_INITED,(function(){e(null)}))}))]);case 2:n=2===s.spector,(p=new globalThis.SPECTOR.Spector).fullCapture=n,p.timeSpy.spyRequestAnimationFrame("requestAnimationFrame",window),p.displayUI(void 0,void 0,!1,!1),p.spyCanvas(o.canvas),globalThis.SPECTOR.Spector.getFirstAvailable3dContext(o.canvas),globalThis.spector=p,globalThis.rAF=window.requestAnimationFrame,o._pacer._rAF=globalThis.rAF,p.capture=function(){o.frameRate;o.frameRate=60,p.captureCanvas(o.canvas,void 0,void 0,n)},r.on(a.EventType.KEY_DOWN,(function(e){e.keyCode===i.KEY_H&&p.capture()}));case 14:case"end":return e.stop()}}),e)})));return function(){return n.apply(this,arguments)}}();!function(e){var t=new(function(){var e,t,n="http://"+location.host.split(":")[0];function o(){e=[],t=null}return o.prototype.dequeue=function(){if(0==e.length)return t&&t(),void console.log("Scripts loaded");var n=e.shift(),o=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.src=n;var a=this;r.onload=function(){a.dequeue()},o.appendChild(r)},o.prototype.loadScript=function(t){e.push(t)},o.prototype.loadSPECTORScripts=function(){this.loadScript(n+":1337/.temp/spector.bundle.js")},o.prototype.onReady=function(e){return t=e,this},o.prototype.load=function(e){var t=this;if(t.loadScript(n+":35729/livereload.js?snipver=1"),t.loadSPECTORScripts(),e)for(var o=0;o<e.length;o++){var r=e[o];t.loadScript(r)}t.dequeue()},o}());e.Loader=t}(u||(u={})),u.Loader.load(),p()}n._RF.pop()}}}));

System.register("chunks:///_virtual/spwans-group.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,o,r,u;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,r=n.MeshRenderer,u=n.Component}],execute:function(){var s;e._RF.push({},"aa3b7bN4C1NW7tPeG9UruSw","spwans-group",void 0);var c=o.ccclass;o.property,n("SpawnsGroup",c("SpawnsGroup")(s=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var o=e.prototype;return o.onEnable=function(){this.node.children.forEach((function(n){var t=n.getComponent(r);t&&(t.enabled=!1)}))},o.start=function(){},o.update=function(n){},e}(u))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/ssr.ts",["cc"],(function(e){var s;return{setters:[function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"de2987Mo1VBm59OZcYDhZX/","ssr",void 0);e("isSSR","undefined"==typeof window);s._RF.pop()}}}));

System.register("chunks:///_virtual/static-area-batch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./math.ts","./save-gltf.ts","./static-batch-comp.ts"],(function(e){var t,r,n,o,a,i,s,c,u,l,p,h,f,b,d,m,g,y,w,v,k,x,C,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.createClass,n=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,s=e.regeneratorRuntime,c=e.createForOfIteratorHelperLoose},function(e){u=e.cclegacy,l=e._decorator,p=e.Vec3,h=e.Node,f=e.Component,b=e.geometry,d=e.Vec4,m=e.Mat4,g=e.gfx,y=e.MeshRenderer,w=e.director},function(e){v=e.powerOfTwo},function(e){k=e.MeshData,x=e.toGltfMesh,C=e.saveGltf},function(e){M=e.StaticBatchComp}],execute:function(){var S,O,_,z,A,T,B,D,R,P,j,E,I,L,N;u._RF.push({},"d7239uj5aNLBJGJBD1rTayB","static-area-batch",void 0);var G=l.ccclass,F=l.executeInEditMode,H=l.property,J=G("SubMeshRenderer")(S=function(e,t){this.index=void 0,this.mr=void 0,this.index=e,this.mr=t})||S,V=G("StaticAreaBatchBlock")((z=t((_=function(){function e(){this.name="",this.aabb=new b.AABB,this.renderers=new Map,o(this,"_totalCount",z,this),this._materialCount=0}return r(e,[{key:"totalCount",get:function(){return this._totalCount}},{key:"materialCount",get:function(){return this._materialCount}}]),e}()).prototype,"_totalCount",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(_.prototype,"totalCount",[H],Object.getOwnPropertyDescriptor(_.prototype,"totalCount"),_.prototype),t(_.prototype,"materialCount",[H],Object.getOwnPropertyDescriptor(_.prototype,"materialCount"),_.prototype),O=_))||O,X=new p;e("StaticAreaBatch",(A=G("StaticAreaBatch"),T=H(h),B=H(V),A(D=F((P=t((R=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,o(t,"root",P,a(t)),o(t,"blockSize",j,a(t)),o(t,"offset",E,a(t)),o(t,"maxLightMapSize",I,a(t)),t.blockMap=new Map,o(t,"blocks",L,a(t)),t.totalRenderers=[],o(t,"_totalCount",N,a(t)),t}n(t,e);var u=t.prototype;return u.doClear=function(){this.root.active=!0,this.node.removeAllChildren(),this.blocks.length=0,this.blockMap.clear()},u.doRevert=function(){this.root.active=!this.root.active;for(var e=this.node.children,t=0;t<e.length;t++)e[t].active=!this.root.active},u.doMerge=function(){var e=i(s().mark((function e(){var t,r,n,o,a,u,l,f,b,S,O=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doSearch();case 2:t=0,r=this._totalCount,n=Date.now(),o=new p,a=new p,u=new d,l=new m,this.node.removeAllChildren(),f=s().mark((function e(){var f,b,_,z,A,T,B;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f=S.value,b=f[1],_=b.aabb.center,(z=new h(b.name)).parent=O.node,z.position=_,z.active=!1,A=s().mark((function e(){var c,f,S,A,T,D,R,P,j,E,I,L,N,G,F,H,J,V,Y,q,K,Q,U,W,Z,$,ee,te;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=B.value,f=c[1],S=Math.ceil(Math.pow(f.length,.5)),A=0,T=new k,D=new p(1/0,1/0,1/0),R=new p(-1/0,-1/0,-1/0),P=0,j=0,E=function(){var e=i(s().mark((function e(){var t,r,n,o,a,i,u,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.min.set(D).subtract(_),T.max.set(R).subtract(_),t=c[0],r=b.name+"_"+t.name,n=x(r,T),o="db://assets/"+w.getScene().name+"/merged-meshes/"+r+".gltf",a=o+"/"+r+".mesh",e.next=9,C(n,o,a);case 9:i=e.sent,u=new h(t.name+j++),(l=u.addComponent(y)).mesh=i,l.material=t,u.addComponent(M),l.bakeSettings.bakeable=!0,l.bakeSettings.castShadow=!0,l.bakeSettings.receiveShadow=!0,l.bakeSettings.lightmapSize=Math.min(O.maxLightMapSize,v(P)),u.parent=z;case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=0;case 11:if(!(I<f.length)){e.next=48;break}if(N=f[I].mr,G=f[I].index,F=N.mesh.readAttribute(G,g.AttributeName.ATTR_POSITION),!((T.vertices.length+F.length)/3>65535)){e.next=24;break}return console.warn(b.name+"-"+c[0].name+" vertex count overflow 65535"),e.next=20,E();case 20:A=0,T=new k,D=new p(1/0,1/0,1/0),R=new p(-1/0,-1/0,-1/0);case 24:for(H=0;H<F.length;H+=3)X.set(F[H],F[H+1],F[H+2]),p.transformMat4(X,X,N.node.worldMatrix),T.vertices.push(X.x-_.x,X.y-_.y,X.z-_.z);for(J=N.mesh.readAttribute(G,g.AttributeName.ATTR_TEX_COORD),(L=T.uv).push.apply(L,J),m.inverseTranspose(l,N.node.worldMatrix),V=N.mesh.readAttribute(G,g.AttributeName.ATTR_NORMAL),Y=0;Y<V.length;Y+=3)u.set(V[Y],V[Y+1],V[Y+2],0),d.transformMat4(u,u,l),u.normalize(),T.normals.push(u.x,u.y,u.z);for(N.model.worldBounds.getBoundary(o,a),p.min(D,D,o),p.max(R,R,a),q=N.mesh.readAttribute(G,g.AttributeName.ATTR_TEX_COORD1),K=I%S,Q=Math.floor(I/S),U=0;U<q.length;U+=2)T.uv1.push((K+q[U])/S,(Q+q[U+1])/S);for(W=N.mesh.readIndices(G),Z=0;Z<W.length;Z++)T.indices.push(W[Z]+A);A+=F.length/3,P+=N.bakeSettings.lightmapSize,$=++t/r,ee=(Date.now()-n)/1e3,te=Math.floor(ee/$*(1-$)),console.log("static merge progress : "+$+", leftTime: "+te+"s");case 45:I++,e.next=11;break;case 48:return e.next=50,E();case 50:case"end":return e.stop()}}),e)})),T=c(b.renderers);case 9:if((B=T()).done){e.next=13;break}return e.delegateYield(A(),"t0",11);case 11:e.next=9;break;case 13:case"end":return e.stop()}}),e)})),b=c(this.blockMap);case 12:if((S=b()).done){e.next=16;break}return e.delegateYield(f(),"t0",14);case 14:e.next=12;break;case 16:this.doRevert(),console.log("finished static merge progress.");case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.doSearch=function(){var e=i(s().mark((function e(){var t,r,n,o,a=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.root){e.next=2;break}return e.abrupt("return");case 2:return this.root.active=!0,globalThis.cce.Engine.repaintInEditMode(),e.next=6,new Promise((function(e){setTimeout(e,500)}));case 6:t=(t=this.root.getComponentsInChildren(y)).filter((function(e){return e.enabledInHierarchy})),this.totalRenderers=t,r=this.blockSize,(n=this.blockMap).clear(),(o=this.blocks).length=0,t.forEach((function(e){var t=e.model.worldBounds.center,i=Math.floor((t.x+a.offset.x)/r.x),s=Math.floor((t.y+a.offset.y)/r.y),c=Math.floor((t.z+a.offset.z)/r.z),u=i+"_"+s+"_"+c,l=n.get(u);l||((l=new V).aabb.halfExtents.multiply(r).multiplyScalar(.5),l.aabb.center.set(i,s,c).multiply(r),l.aabb.center.add(l.aabb.halfExtents),l.aabb.center.subtract(a.offset),l.name=u,n.set(u,l),o.push(l)),e.sharedMaterials.forEach((function(t,r){var n=new J(r,e);if(t){if(e.model.subModels[r]){var o=l.renderers.get(t);o||(o=[],l._materialCount++,l.renderers.set(t,o)),l._totalCount++,a._totalCount++,o.push(n)}}else console.warn(e.model.node.name+" material "+r+" is empty")}))}));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r(t,[{key:"merge",get:function(){return!1},set:function(e){this.doMerge()}},{key:"search",get:function(){return!1},set:function(e){this.doSearch()}},{key:"revert",get:function(){return!1},set:function(e){this.doRevert()}},{key:"clear",get:function(){return!1},set:function(e){this.doClear()}},{key:"totalBatch",get:function(){var e=0;return this.blocks.forEach((function(t){e+=t.materialCount})),e}},{key:"totalCount",get:function(){return this._totalCount}}]),t}(f)).prototype,"root",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(R.prototype,"merge",[H],Object.getOwnPropertyDescriptor(R.prototype,"merge"),R.prototype),t(R.prototype,"search",[H],Object.getOwnPropertyDescriptor(R.prototype,"search"),R.prototype),t(R.prototype,"revert",[H],Object.getOwnPropertyDescriptor(R.prototype,"revert"),R.prototype),t(R.prototype,"clear",[H],Object.getOwnPropertyDescriptor(R.prototype,"clear"),R.prototype),j=t(R.prototype,"blockSize",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(30,30,30)}}),E=t(R.prototype,"offset",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(-15,-15,-15)}}),I=t(R.prototype,"maxLightMapSize",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1024}}),t(R.prototype,"totalBatch",[H],Object.getOwnPropertyDescriptor(R.prototype,"totalBatch"),R.prototype),L=t(R.prototype,"blocks",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=t(R.prototype,"_totalCount",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(R.prototype,"totalCount",[H],Object.getOwnPropertyDescriptor(R.prototype,"totalCount"),R.prototype),D=R))||D)||D));u._RF.pop()}}}));

System.register("chunks:///_virtual/static-batch-comp.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,c,n,o,a;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,c=t._decorator,n=t.MeshRenderer,o=t.renderer,a=t.Component}],execute:function(){var i;r._RF.push({},"05f80qLK7tC04BolmJwrKOp","static-batch-comp",void 0);var s=c.ccclass;c.property,c.executeInEditMode,t("StaticBatchComp",s("StaticBatchComp")(i=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.prototype.start=function(){var t=this.getComponent(n),e=new o.MaterialInstance({parent:t.material});e.recompileShaders({USE_INSTANCING:!1}),t.material=e},r}(a))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/static-culling.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,c,i,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,c=t._decorator,i=t.MeshRenderer,o=t.Component}],execute:function(){var u;e._RF.push({},"b68edupTklC4aG6s/2VtgcP","static-culling",void 0);var r=c.ccclass;c.executeInEditMode,t("StaticCulling",r("StaticCulling")(u=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var c=e.prototype;return c.start=function(){var t=this;setTimeout((function(){t.hack()}),1500)},c.hack=function(){this.node.getComponentsInChildren(i).forEach((function(t){t.model.updateUBOs=function(){}}))},e}(o))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/static-occlusion-area.ts",["./rollupPluginModLoBabelHelpers.js","cc","./static-occlusion-block.ts"],(function(t){var e,o,r,i,n,l,c,a,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,n=t.createClass},function(t){l=t.cclegacy,c=t._decorator,a=t.Component,s=t.Vec3},function(t){u=t.CullingBlock}],execute:function(){var p,b,f,y,k,h,g,d,C;l._RF.push({},"5f769CpuqVCs4IY+zx3fpd9","static-occlusion-area",void 0);var z=c.ccclass,v=(c.type,c.property);t("StaticOcclusionArea",(p=z("sync.StaticOcclusionArea"),b=v({type:u,visible:!1}),p((k=e((y=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n))||this,r(e,"blockCells",k,i(e)),r(e,"blocks",h,i(e)),r(e,"blockSize",g,i(e)),r(e,"useSelfBlockSize",d,i(e)),r(e,"discardCulling",C,i(e)),e}return o(e,t),e.prototype.initBlocks=function(t){var e=t.blockSize;this.useSelfBlockSize&&(e=this.blockSize);var o=e/2,r=this.blocks;if(r.length=0,this.discardCulling)this.blockCells.set(0,0,0);else{var i=this.node.worldPosition,n=this.node.getWorldScale(),l=Math.max(Math.floor(n.x/e),1),c=Math.max(Math.floor(n.y/e),1),a=Math.max(Math.floor(n.z/e),1);this.blockCells.set(l,c,a);for(var s=0;s<l;s++)for(var p=0;p<c;p++)for(var b=0;b<a;b++){var f=s*c*a+p*a+b,y=r[f]=new u;y.blockIdx=f,y.center.set(i).add3f(s*e,p*e,b*e).add3f(o,o,o).subtract3f(n.x/2,n.y/2,n.z/2),y.halfExtents.set(o,o,o)}}},n(e,[{key:"blockCount",get:function(){return this.blocks.length}},{key:"isEmpty",get:function(){for(var t=0;t<this.blocks.length;t++)if(!this.blocks[t].rendererCount)return!0;return!1}},{key:"bake",get:function(){return!1},set:function(t){var e=this.node.parent.getComponent("sync.StaticOcclusionCulling");e&&e.startBake([this])}}]),e}(a)).prototype,"blockCells",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),h=e(y.prototype,"blocks",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),e(y.prototype,"blockCount",[v],Object.getOwnPropertyDescriptor(y.prototype,"blockCount"),y.prototype),e(y.prototype,"isEmpty",[v],Object.getOwnPropertyDescriptor(y.prototype,"isEmpty"),y.prototype),g=e(y.prototype,"blockSize",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),d=e(y.prototype,"useSelfBlockSize",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=e(y.prototype,"discardCulling",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(y.prototype,"bake",[v],Object.getOwnPropertyDescriptor(y.prototype,"bake"),y.prototype),f=y))||f));l._RF.pop()}}}));

System.register("chunks:///_virtual/static-occlusion-baker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./camera-setting.ts","./setting.ts","./async.ts","./render-id-material.ts"],(function(e){var t,n,r,a,i,o,s,c,u,l,h,d,f,p,m,g,k,_,b,w,v,C;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e._decorator,i=e.geometry,o=e.ccenum,s=e.Vec3,c=e.js,u=e.game,l=e.Node,h=e.Camera,d=e.Layers,f=e.RenderTexture,p=e.gfx,m=e.MeshRenderer,g=e.director,k=e.instantiate,_=e.assetManager},function(e){b=e.CameraSetting},function(e){w=e.settings},function(e){v=e.sequence},function(e){C=e.RenderIDMaterial}],execute:function(){r._RF.push({},"50dd9obF49BargO5Sw6FfHt","static-occlusion-baker",void 0);a.ccclass,a.property,a.type,a.executeInEditMode,new i.OBB,new i.Ray;var B=new Map,x=function(e){return e[e.Center=0]="Center",e[e.Corner8_Center=1]="Corner8_Center",e[e.Seprate_Corner8_Center=2]="Seprate_Corner8_Center",e}(x||{});o(x);var T=[new s(0,0,0),new s(0,90,0),new s(0,180,0),new s(0,270,0),new s(90,0,0),new s(-90,0,0)];e("StaticOcclusionBaker",function(){function e(e,t){this.culling=void 0,this._bakingBlockIndex=0,this._startTime=0,this._startBlockTime=0,this._areasToBake=[],this.tempRoot=void 0,this.tempCameras=[],this.tempBuffer=void 0,this._targetActive=!0,this.culling=e,this._areasToBake=t}var r=e.prototype;return r.stop=function(){this.culling._backer=null,this.culling=null},r._initTemp=function(){var e=t(n().mark((function e(){var t,r,a,i,o,s,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),(r=new l("test-bake")).parent=g.getScene(),this.tempRoot=r,a=this.culling,(i=k(a.root)).name="temp-root",i._prefab=null,i.parent=r,i.getComponentsInChildren("load_in_editor").forEach((function(e){e.enabled=!1})),e.next=13,new Promise((function(e){_.loadAny("a9bbb759-771b-43cc-b648-59db0bace2d6",(function(t,n){e(n)}))}));case 13:o=e.sent,s=.25*u.canvas.width,c=.25*u.canvas.height,this.tempCameras=T.map((function(e){var t=new l("render-id-camera");t.eulerAngles=e,t.parent=r;var n=t.addComponent(h);n.visibility=d.Enum["RENDER-ID"],n.fov=90,n.near=.1,n.far=1e3;var a=n.addComponent(b);a.pipeline="forward",a.isMainCamera=!1;var i=new f;return i.reset({width:s,height:c,passInfo:new p.RenderPassInfo([new p.ColorAttachment(p.Format.RGBA32F)],new p.DepthStencilAttachment(p.Format.DEPTH_STENCIL))}),n.targetTexture=i,w.renderCameras.push(n.camera),n})),this.tempBuffer=new Float32Array(s*c*4),this.tempRoot.getComponentsInChildren(m).forEach((function(e,t){var n=e.addComponent(C),r=e.sharedMaterials[0].passes[0].rasterizerState.cullMode;n.cullMode=r,n.material=o,n.setOCCMaterial(),e.node.layer=d.Enum["RENDER-ID"]})),console.log("initBake: "+(Date.now()-t)/1e3+"s"),globalThis.cce.Camera._camera.visibility&=~d.Enum["RENDER-ID"];case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.start=function(){var e=t(n().mark((function e(){var t,r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.culling){e.next=3;break}return e.abrupt("return");case 3:return this.culling._findIDManager(),B.clear(),this._bakingBlockIndex=0,t._renderers=t.root.getComponentsInChildren(m),t._renderers.forEach((function(e,t){e.model&&(e.model.enabled=!0)})),t._rendererCount=t._renderers.length,e.next=11,this._initTemp();case 11:this._areasToBake.forEach((function(e){e.initBlocks(r.culling)})),this._startTime=Date.now(),this._startBlockTime=Date.now(),this._targetActive=t.root.active,t.root.active=!1,this._bake();case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r._bakeBlock=function(){var e=t(n().mark((function e(r){var a,i,o,s,c,u=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.getCorners(),i={},o=this.tempCameras,e.next=6,v(a.map((function(e,r){return t(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){o.forEach((function(t){t.node.worldPosition=e})),window.cce.Engine.repaintInEditMode(),o[o.length-1].node.once("rendered",(function(){setTimeout((function(){o.forEach((function(e){for(var t=e.targetTexture,n=t.readPixels(0,0,t.width,t.height,u.tempBuffer),r=0;r<n.length;r+=4){var a=n[r];i[a]=1}})),t(null)}),10)}))}));case 2:case"end":return t.stop()}}),t)})))})));case 6:for(c in s=[],i)s.push(parseInt(c));r.rendererIDs=s;case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r._bake=function(){var e=t(n().mark((function e(){var t,r,a,i,o,s,c,u,l=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.culling)&&t.root){e.next=3;break}return e.abrupt("return");case 3:if(this._areasToBake.length){e.next=5;break}return e.abrupt("return");case 5:if(r=this._areasToBake[this._areasToBake.length-1],a=r.blocks,i=r.blockCount,!(o=a[this._bakingBlockIndex])){e.next=12;break}return e.next=12,this._bakeBlock(o);case 12:if(s=this._bakingBlockIndex/i,console.log("baking process : area - "+r.node.name+",  block "+this._bakingBlockIndex+", progress - "+s),c=(Date.now()-this._startBlockTime)/1e3,u=c/s*(1-s),console.log("left time : "+u+" s"),this._bakingBlockIndex++,this._bakingBlockIndex>=r.blocks.length&&this.onEndArea(),!(this._areasToBake.length<=0)){e.next=22;break}return this.onEnd(),e.abrupt("return");case 22:setTimeout((function(){l._bake()}),10);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.onEndArea=function(){this._bakingBlockIndex=0,this._areasToBake.length-=1,this._startBlockTime=Date.now()},r.onEnd=function(){var e=this.culling;this.tempCameras.forEach((function(e){c.array.remove(w.renderCameras,e.camera);var t=e.targetTexture;e.targetTexture=null,t.destroy()})),this.tempRoot.parent=null,this.tempRoot=null,e._backer=null,e.root.active=this._targetActive,window.cce.Engine.repaintInEditMode(),console.log("bake static culling : "+(Date.now()-this._startTime)/1e3+" s")},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/static-occlusion-block.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,i,o,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.createClass,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t._decorator,s=t.Vec3}],execute:function(){var a,c,l,u,p,h,f,b;i._RF.push({},"59faamDpapJep4tj/Qe3q7n","static-occlusion-block",void 0);var g=o.ccclass,y=o.property;t("CullingBlock",(a=g("sync.CullingBlock"),c=y({visible:!1}),a((p=e((u=function(){function t(){n(this,"center",p,this),n(this,"halfExtents",h,this),n(this,"rendererIDs",f,this),n(this,"blockIdx",b,this),this.bakingTotalCount=0,this.bakingDirections=void 0}return t.prototype.getCorners=function(){for(var t=[this.center],e=-1;e<=1;e+=2)for(var r=-1;r<=1;r+=2)for(var n=-1;n<=1;n+=2)t.push(new s(this.center).add3f(this.halfExtents.x*e,this.halfExtents.y*r,this.halfExtents.z*n));return t},r(t,[{key:"rendererCount",get:function(){return this.rendererIDs.length}},{key:"bakingProcess",get:function(){return 0===this.bakingTotalCount?this.rendererIDs.length?1:0:(this.bakingTotalCount-this.bakingDirections.length)/this.bakingTotalCount}}]),t}()).prototype,"center",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),h=e(u.prototype,"halfExtents",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),f=e(u.prototype,"rendererIDs",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),e(u.prototype,"rendererCount",[y],Object.getOwnPropertyDescriptor(u.prototype,"rendererCount"),u.prototype),b=e(u.prototype,"blockIdx",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=u))||l));i._RF.pop()}}}));

System.register("chunks:///_virtual/static-occlusion-culling.ts",["./rollupPluginModLoBabelHelpers.js","cc","./pool.ts","./static-occlusion-area.ts","./debug.ts","./node-id-manager.ts","./static-occlusion-baker.ts","./node-id.ts"],(function(e){var t,r,n,o,i,a,l,c,s,u,d,p,h,f,g,b,y,_,k,C,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createClass},function(e){a=e.cclegacy,l=e._decorator,c=e.geometry,s=e.ccenum,u=e.Node,d=e.MeshRenderer,p=e.Color,h=e.Mat4,f=e.Quat,g=e.Component},function(e){b=e.Pool},function(e){y=e.StaticOcclusionArea},function(e){_=e.getGeometryRenderer},function(e){k=e.NodeIDManager},function(e){C=e.StaticOcclusionBaker},function(e){m=e.NodeID}],execute:function(){var v,B,w,z,D,M,S,I,x,O,E;a._RF.push({},"cf7e8OV8rRGq6r1drFcWWry","static-occlusion-culling",void 0);var L=l.ccclass,P=l.property,A=l.type,j=l.executeInEditMode,R=new c.OBB,N=(new c.Ray,function(e){return e[e.Center=0]="Center",e[e.Corner8_Center=1]="Corner8_Center",e[e.Seprate_Corner8_Center=2]="Seprate_Corner8_Center",e}(N||{}));s(N);e("StaticOcclusionCulling",(v=L("sync.StaticOcclusionCulling"),B=A(u),w=A(u),v(z=j((M=t((D=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"root",M,o(t)),n(t,"target",S,o(t)),n(t,"_blockSize",I,o(t)),n(t,"_rendererCount",x,o(t)),t._backer=void 0,n(t,"renderBlocks",O,o(t)),n(t,"_enabledCulling",E,o(t)),t.nodeIDManager=void 0,t._renderers=[],t._loadCompeleted=!1,t._currentLocatedBlock=null,t._lastLocatedBlock=null,t.areas=[],t}r(t,e);var a=t.prototype;return a._updateAreas=function(){this.areas=this.getComponentsInChildren(y)},a.onDisable=function(){for(var e=this.renderers,t=0;t<e.length;t++)e[t]&&e[t].model&&(e[t].model.enabled=!0);this._lastLocatedBlock=null},a.start=function(){this._init()},a.startBake=function(e){this._backer=new C(this,e),this._backer.start()},a._findIDManager=function(){this.nodeIDManager=null;for(var e=this.root;!this.nodeIDManager&&e;)this.nodeIDManager=e.getComponent(k),e=e.parent},a._init=function(){var e;this._updateAreas(),this._findIDManager();var t=null==(e=this.root)?void 0:e.getComponentsInChildren(m);this._renderers=t.map((function(e){return e.getComponent(d)})),this._loadCompeleted=!0},a.calcCulling=function(){if(this.target&&this.target.isValid&&this._loadCompeleted&&!this._backer&&this.target){this._currentLocatedBlock=null;for(var e=this.renderers,t=this.target.worldPosition,r=this.areas,n=0;n<r.length;n++){var o=r[n];if(o.enabledInHierarchy){R.center.set(o.node.worldPosition);var i=o.node.getWorldScale();if(R.halfExtents.set(i.x/2,i.y/2,i.z/2),c.intersect.obbPoint(R,t)){if(o.discardCulling){this._currentLocatedBlock=null;for(var a=0;a<e.length;a++){var l=e[a]&&e[a].model;l&&(l.enabled=!0)}return}var s=this.blockSize;o.useSelfBlockSize&&(s=o.blockSize);var u=Math.floor((t.x-(R.center.x-R.halfExtents.x))/s),d=Math.floor((t.y-(R.center.y-R.halfExtents.y))/s),p=Math.floor((t.z-(R.center.z-R.halfExtents.z))/s),h=(Math.floor(i.x/s),Math.floor(i.y/s)),f=Math.floor(i.z/s),g=o.blocks[u*h*f+d*f+p];if(g){this._currentLocatedBlock=g;break}}}}if(this._lastLocatedBlock!==this._currentLocatedBlock){if(this._currentLocatedBlock){for(var b=this._currentLocatedBlock,y=0;y<e.length;y++){var _=e[y]&&e[y].model;_&&(_.enabled=!1)}for(var k=b.rendererIDs,C=0;C<k.length;C++){var m=this.nodeIDManager.mrMap.get(k[C]),v=m&&m.model;v&&(v.enabled=!0)}}else for(var B=0;B<e.length;B++){var w=e[B]&&e[B].model;w&&(w.enabled=!0)}this._lastLocatedBlock=this._currentLocatedBlock}}},a.update=function(){this._enabledCulling&&this.calcCulling()},a.debugDraw=function(){var e=_();if(e){for(var t=new p(0,0,0,100),r=new p(255,0,0,100),n=(new p(0,0,255,20),new h),o=new c.AABB(0,0,0,.5,.5,.5),i=0;i<this.areas.length;i++){var a=this.areas[i];a.enabledInHierarchy&&e.addBoundingBox(o,t,!1,!1,void 0,!0,a.node.worldMatrix)}if(this._currentLocatedBlock){var l=this._currentLocatedBlock,s=b.Vec3.get().set(2*l.halfExtents.x,2*l.halfExtents.y,2*l.halfExtents.z*l.bakingProcess);n.fromRTS(f.IDENTITY,l.center,s),b.Vec3.put(s),e.addBoundingBox(o,r,!1,!1,void 0,!0,n),l.getCorners().forEach((function(t){e.addSphere(t,.1,r,5,5)}))}}},i(t,[{key:"blockSize",get:function(){return this._blockSize},set:function(e){this._blockSize=e}},{key:"rendererCount",get:function(){return this._rendererCount}},{key:"bake",get:function(){return!1},set:function(e){this.startBake(this.areas.concat())}},{key:"stop",get:function(){return!1},set:function(e){this._backer&&this._backer.stop()}},{key:"checkEmptyArea",get:function(){return!1},set:function(e){console.log("--------------"),this._updateAreas(),this.areas.forEach((function(e){e.isEmpty&&console.log("Area ["+e.node.name+"] is empty")}))}},{key:"enabledCulling",get:function(){return this._enabledCulling},set:function(e){if(this._enabledCulling=e,!e)for(var t=this.renderers,r=0;r<t.length;r++)t[r]&&t[r].model&&(t[r].model.enabled=!0);this._lastLocatedBlock=null,window.cce.Engine.repaintInEditMode()}},{key:"renderers",get:function(){return this._renderers}}]),t}(g)).prototype,"root",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(D.prototype,"target",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(D.prototype,"_blockSize",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),t(D.prototype,"blockSize",[P],Object.getOwnPropertyDescriptor(D.prototype,"blockSize"),D.prototype),x=t(D.prototype,"_rendererCount",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(D.prototype,"rendererCount",[P],Object.getOwnPropertyDescriptor(D.prototype,"rendererCount"),D.prototype),t(D.prototype,"bake",[P],Object.getOwnPropertyDescriptor(D.prototype,"bake"),D.prototype),t(D.prototype,"stop",[P],Object.getOwnPropertyDescriptor(D.prototype,"stop"),D.prototype),t(D.prototype,"checkEmptyArea",[P],Object.getOwnPropertyDescriptor(D.prototype,"checkEmptyArea"),D.prototype),O=t(D.prototype,"renderBlocks",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=t(D.prototype,"_enabledCulling",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(D.prototype,"enabledCulling",[P],Object.getOwnPropertyDescriptor(D.prototype,"enabledCulling"),D.prototype),z=D))||z)||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/steering-basic.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,c,i;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator,c=e.v3,i=e.Component}],execute:function(){var o;r._RF.push({},"12bba6qAJVF9KUl2UJ6BBWu","steering-basic",void 0);var s=n.ccclass;n.property,e("SteeringBasic",s("SteeringBasic")(o=function(e){function r(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).moveVelocity=c(0,0,0),t.desiredVelocity=c(0,0,0),t.target=void 0,t}return t(r,e),r}(i))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/steering-behaviors.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(e){var t,i,r,o,n,s;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,r=e._decorator,o=e.v3,n=e.Component},function(e){s=e.UtilVec3}],execute:function(){var c;i._RF.push({},"c08e7bK2PNJA6GsiSX8MXXh","steering-behaviors",void 0);var u=r.ccclass;r.property,e("SteeringBehaviors",u("SteeringBehaviors")(c=function(e){function i(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).moveVelocity=o(0,0,0),t.desiredVelocity=o(0,0,0),t}t(i,e);var r=i.prototype;return r.start=function(){},r.update=function(e){},r.Seek=function(e){return s.copy(this.desiredVelocity,e),this.desiredVelocity.subtract(this.node.worldPosition),this.desiredVelocity.subtract(this.moveVelocity)},i}(n))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/steering-seek.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./steering-basic.ts"],(function(e){var t,i,n,o,r,s,c;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,o=e.v3,r=e.Component},function(e){s=e.UtilVec3},function(e){c=e.SteeringBasic}],execute:function(){var u;i._RF.push({},"28c76uWY+lEg6tvKcunJ0CP","steering-seek",void 0);var a=n.ccclass;n.property,e("SteeringSeek",a("SteeringSeek")(u=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).moveVelocity=o(0,0,0),t.desiredVelocity=o(0,0,0),t.steeringBasic=void 0,t}t(i,e);var n=i.prototype;return n.start=function(){this.steeringBasic=this.getComponent(c)},n.update=function(e){},n.SeekToward=function(){},n.Seek=function(e){var t,i=null==(t=this.steeringBasic)?void 0:t.target;return s.copy(this.desiredVelocity,i.position),this.desiredVelocity.subtract(this.node.worldPosition),this.desiredVelocity.subtract(this.moveVelocity)},i}(r))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/stretched-billboard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./camera-setting.ts","./g-math.ts"],(function(t){var e,r,o,n,i,a;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,o=t._decorator,n=t.Component},function(t){i=t.CameraSetting},function(t){a=t.GMath}],execute:function(){var l;r._RF.push({},"22d11P1lh9N5I87WTz6jjKR","stretched-billboard",void 0);var s=o.ccclass;o.property,t("StretchedBillboard",s("StretchedBillboard")(l=function(t){function r(){for(var e,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this).target=void 0,e}return e(r,t),r.prototype.update=function(t){var e,r;if(this.target=null==(e=i.main)||null==(r=e.camera)?void 0:r.node,void 0!==this.target){var o=a.StretchedBillboardAngle(this.node.up,this.node.worldPosition,this.target.worldPosition,this.node.forward);if(o){var n=this.node.eulerAngles;this.node.setRotationFromEuler(n.x,n.y,o)}}},r}(n))||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/substance-core.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts"],(function(e){var n,t,r,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,r=e._decorator},function(e){o=e.Singleton}],execute:function(){var c;t._RF.push({},"619bbvH0qNCa43dr3czCnLm","substance-core",void 0);var u=r.ccclass,s=(r.property,e("SubstanceCore",u("SubstanceCore")(c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.checkNodeType=function(e){for(var n in s)if(e.name.includes(n))return n;return s.GROUND},t}(o))||c),e("SubstanceType",function(e){return e.None="none",e.GROUND="ground",e.METAL="metal",e.WALL="wall",e.WATER="water",e}({})));t._RF.pop()}}}));

System.register("chunks:///_virtual/switch-lod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./npm.ts"],(function(e){var t,r,n,o,s,a,i,c,u,l,p,h,f,d,g,w,m,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,s=e.createClass,a=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){c=e.cclegacy,u=e._decorator,l=e.Node,p=e.Component,h=e.MeshRenderer,f=e.assetManager,d=e.path},function(e){g=e.globby,w=e.path,m=e.projectPath,y=e.Editor}],execute:function(){var b,v,x,L,M,P;c._RF.push({},"6f9c0+MO8hENrcA+2Jf65P5","switch-lod",void 0);var k=u.ccclass,D=u.property;e("SwitchLod",(b=k("SwitchLod"),v=D(l),b((M=t((L=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,n(t,"lodLevel",M,o(t)),n(t,"target",P,o(t)),t}return r(t,e),t.prototype.doSwitch=function(){var e=a(i().mark((function e(){var t,r,n=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.target){e.next=2;break}return e.abrupt("return");case 2:return console.log("start switch lod"),t=Date.now(),r=this.target.getComponentsInChildren(h),e.next=7,Promise.all(r.map(a(i().mark((function e(t,o){var s,a,c,u,l,p,h,b,v,x;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.mesh.nativeUrl,a=(a=d.basename(s)).split("@")[0],e.next=5,y.Message.request("asset-db","query-path",a);case 5:if(c=e.sent,d.basename(c).startsWith("lod_")){e.next=8;break}return e.abrupt("return");case 8:return(u=g.sync(d.dirname(c)+"/**/*.gltf")).sort((function(e,t){return e.localeCompare(t)})),l=u[Math.min(u.length-1,n.lodLevel)],p=w.relative(m,l).replace(/\\/g,"/"),h=w.basename(w.dirname(l)),b="db://"+p+"/"+h+".mesh",console.log("switch progress : "+o/(r.length-1)),e.next=17,y.Message.request("asset-db","query-uuid",b);case 17:return v=e.sent,e.next=20,new Promise((function(e,t){f.loadAny([v],(function(r,n){if(r)return t(r);e(n)}))}));case 20:x=e.sent,t.mesh=x;case 22:case"end":return e.stop()}}),e)})))));case 7:console.log("finish switch lod : "+(Date.now()-t)/1e3+"s");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s(t,[{key:"switch",get:function(){return!1},set:function(e){this.doSwitch()}}]),t}(p)).prototype,"lodLevel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(L.prototype,"switch",[D],Object.getOwnPropertyDescriptor(L.prototype,"switch"),L.prototype),P=t(L.prototype,"target",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=L))||x));c._RF.pop()}}}));

System.register("chunks:///_virtual/switch-probe.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,o,n,i,c,s,u,p,a;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.createClass},function(e){c=e.cclegacy,s=e._decorator,u=e.MeshRenderer,p=e.ReflectionProbeType,a=e.Component}],execute:function(){var l,h,b;c._RF.push({},"fd67airPCVM8p6VTrrI3O9S","switch-probe",void 0);var f=s.ccclass,P=s.executeInEditMode,y=s.property;e("SwitchProbe",f("SwitchProbe")(l=P((b=r((h=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];return r=e.call.apply(e,[this].concat(i))||this,o(r,"_useProbe",b,n(r)),r}return t(r,e),i(r,[{key:"useProbe",get:function(){return this._useProbe},set:function(e){this._useProbe=e;for(var r=this.node.children,t=0;t<r.length;t++)r[t].getComponents;this.node.getComponentsInChildren(u).forEach((function(r){r.reflectionProbe=e?p.BAKED_CUBEMAP:p.NONE}))}}]),r}(a)).prototype,"_useProbe",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),r(h.prototype,"useProbe",[y],Object.getOwnPropertyDescriptor(h.prototype,"useProbe"),h.prototype),l=h))||l)||l);c._RF.pop()}}}));

System.register("chunks:///_virtual/taa-mask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./href-setting.ts"],(function(t){var a,e,n,s,i,r,o,c;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,s=t.Camera,i=t.RenderTexture,r=t.game,o=t.Component},function(t){c=t.HrefSetting}],execute:function(){var h;e._RF.push({},"8f3d37AG+hBHLnlaJVDWwdN","taa-mask",void 0);var l=n.ccclass,u=n.executeInEditMode;t("TAAMask",l("TAAMask")(h=u(h=function(t){function e(){for(var a,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(a=t.call.apply(t,[this].concat(n))||this).mask=void 0,a}a(e,t);var n=e.prototype;return n.start=function(){var t=this.getComponent(s);if(t)if(c.taaMask){var a=new i;a.reset({width:r.canvas.width*c.shadingScale,height:r.canvas.height*c.shadingScale}),this.mask=a,t.targetTexture=a,globalThis.taaMask=this}else t.enabled=!1},n.onDestroy=function(){globalThis.taaMask===this&&(globalThis.taaMask=void 0)},e}(o))||h)||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/taa-pass.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./href-setting.ts"],(function(t){var a,e,r,i,n,s,l;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy,r=t.renderer,i=t.builtinResMgr,n=t.postProcess},function(t){s=t.EDITOR},function(t){l=t.HrefSetting}],execute:function(){e._RF.push({},"80bacPiot5PeKftx3TGR///","taa-pass",void 0);t("CustomTaaPass",function(t){function e(){for(var a,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(a=t.call.apply(t,[this].concat(r))||this).materialMap=new Map,a._originalMaterial=void 0,a}a(e,t);var n=e.prototype;return n.checkEnable=function(a){return t.prototype.checkEnable.call(this,a)&&!!l.taa},n.render=function(a,e){this._originalMaterial||(this._originalMaterial=globalThis.pipelineAssets.getMaterial("deferred-taa"));var n=this.materialMap.get(a);n&&n.parent===this._originalMaterial||((n=new r.MaterialInstance({parent:this._originalMaterial})).recompileShaders({USE_TAA_MASK:!s}),this.materialMap.set(a,n)),this._material=n;var o=globalThis.taaMask&&globalThis.taaMask.mask;o&&l.taaMask||(o=i.get("black-texture")),n.setProperty("motionMaskTex",o),t.prototype.render.call(this,a,e)},e}(n.TAAPass));e._RF.pop()}}}));

System.register("chunks:///_virtual/taa.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,a,r,l,o,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,o=e.Vec2,s=e.game,c=e.Component}],execute:function(){var u,p,f,h,b,w,d,m,y,g;r._RF.push({},"20b0dTocaRF2ou2Z6iizPPW","taa",void 0);var x=l.ccclass,T=l.property,v=l.executeInEditMode,A=[new o(.5,1/3),new o(.25,2/3),new o(.75,1/9),new o(.125,4/9),new o(.625,7/9),new o(.375,2/9),new o(.875,5/9),new o(.0625,8/9)];A.forEach((function(e){e.x-=.5,e.y-=.5}));var S={x2:[new o(-.25,-.25),new o(.25,.25)],x3:[new o(-2/3,-2/3),new o(2/3,0),new o(0,2/3)],x4:[new o(-2/16,-6/16),new o(6/16,-2/16),new o(2/16,6/16),new o(-6/16,2/16)],x5:[new o(0,-.5),new o(.5,0),new o(0,.5),new o(-.5,0)],halton8:A},z=e("TAASetting",x("TAASetting")(u=v(((g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,i(t,"enable",f,a(t)),i(t,"sampleScale",h,a(t)),i(t,"feedback",b,a(t)),i(t,"shaowHistoryTexture",w,a(t)),i(t,"clampHistoryTexture",d,a(t)),i(t,"forceRender",m,a(t)),i(t,"dirty",y,a(t)),t.sampleOffset=new o,t.taaTextureIndex=-2,t.samples=S.halton8,t.sampleIndex=-1,t}n(t,e);var r=t.prototype;return r.onEnable=function(){globalThis.TAASetting.instance=this},r.onDisable=function(){globalThis.TAASetting.instance===this&&(globalThis.TAASetting.instance=void 0)},r.updateSample=function(e,t){(this.dirty||this.forceRender)&&(this.sampleIndex++,this.taaTextureIndex++,this.dirty=!1);var n=this.samples[this.sampleIndex%this.samples.length];-1===this.sampleIndex&&(n=o.ZERO),this.sampleOffset.x=n.x*this.sampleScale/e,this.sampleOffset.y=n.y*this.sampleScale/t},r.lateUpdate=function(e){this.updateSample(s.canvas.width,s.canvas.height)},t}(c)).instance=void 0,f=t((p=g).prototype,"enable",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=t(p.prototype,"sampleScale",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=t(p.prototype,"feedback",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.95}}),w=t(p.prototype,"shaowHistoryTexture",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=t(p.prototype,"clampHistoryTexture",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=t(p.prototype,"forceRender",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=t(p.prototype,"dirty",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=p))||u)||u);globalThis.TAASetting=z,r._RF.pop()}}}));

System.register("chunks:///_virtual/tap-play.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,r,p,u,a,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,r=e.game,p=e.input,u=e.Input,a=e.KeyCode,c=e.Component}],execute:function(){var s;n._RF.push({},"28ec1JHVrVAfoPTrWOJr0Oz","tap-play",void 0);var i=o.ccclass;o.property,e("TapPlay",i("TapPlay")(s=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.start=function(){r.pause(),p.on(u.EventType.KEY_UP,(function(e){e.keyCode===a.SPACE&&r.resume(),e.keyCode,a.KEY_R}),this)},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/task.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"cfb92JEgqREVYJb6JPkB9TR","task",void 0);t("TaskRuner",(function(){this._queue=[],this._active=0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/test-actor-move-cct.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-move-cct.ts"],(function(e){var o,t,i,n,r,c,s,d,_,h,u,a;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,s=e.v3,d=e.input,_=e.Input,h=e.KeyCode,u=e.Component},function(e){a=e.ActorMoveCCT}],execute:function(){var y,v,l,p,C;r._RF.push({},"255b2dLzRlHa5ZYv1s3Iuem","test-actor-move-cct",void 0);var R=c.ccclass,M=c.property;e("TestActorMoveCCT",(y=R("TestActorMoveCCT"),v=M({type:a,tooltip:" Reference Actor Move Slope."}),y((C=o((p=function(e){function o(){for(var o,t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return o=e.call.apply(e,[this].concat(r))||this,i(o,"actorMove",C,n(o)),o._dir=s(0,0,0),o.direction_up=0,o.direction_down=0,o.direction_left=0,o.direction_right=0,o}t(o,e);var r=o.prototype;return r.start=function(){d.on(_.EventType.KEY_DOWN,this.onKeyDown,this),d.on(_.EventType.KEY_UP,this.onKeyUp,this),d.on(_.EventType.MOUSE_DOWN,this.onMouseDown,this),d.on(_.EventType.MOUSE_MOVE,this.onMouseMove,this)},r.onKeyDown=function(e){var o;e.keyCode!==h.KEY_W&&e.keyCode!==h.ARROW_UP||(this.direction_up=-1),e.keyCode!==h.KEY_S&&e.keyCode!==h.ARROW_DOWN||(this.direction_down=1),e.keyCode!==h.KEY_A&&e.keyCode!==h.ARROW_LEFT||(this.direction_left=-1),e.keyCode!==h.KEY_D&&e.keyCode!==h.ARROW_RIGHT||(this.direction_right=1),e.keyCode==h.SPACE&&(null==(o=this.actorMove)||o.jump()),this.onMove()},r.onKeyUp=function(e){e.keyCode!==h.KEY_W&&e.keyCode!==h.ARROW_UP||(this.direction_up=0),e.keyCode!==h.KEY_S&&e.keyCode!==h.ARROW_DOWN||(this.direction_down=0),e.keyCode!==h.KEY_A&&e.keyCode!==h.ARROW_LEFT||(this.direction_left=0),e.keyCode!==h.KEY_D&&e.keyCode!==h.ARROW_RIGHT||(this.direction_right=0),this.onMove()},r.onMouseDown=function(e){},r.onMouseMove=function(e){var o;null==(o=this.actorMove)||o.onRotation(e.movementX/5,e.movementY/10)},r.onMove=function(){var e;this._dir.x=this.direction_left+this.direction_right,this._dir.z=this.direction_up+this.direction_down,this._dir.y=0,null==(e=this.actorMove)||e.moveDirection(this._dir.normalize())},o}(u)).prototype,"actorMove",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=p))||l));r._RF.pop()}}}));

System.register("chunks:///_virtual/test-actor-move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-move.ts"],(function(e){var o,t,i,n,r,c,s,d,_,h,u,a;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,s=e.v3,d=e.input,_=e.Input,h=e.KeyCode,u=e.Component},function(e){a=e.ActorMove}],execute:function(){var y,p,v,l,f;r._RF.push({},"f1cc2YQpdtCPoKUwJo+pOG5","test-actor-move",void 0);var M=c.ccclass,R=c.property;e("TestActorMove",(y=M("TestActorMove"),p=R({type:a,tooltip:" Reference Actor Move Slope."}),y((f=o((l=function(e){function o(){for(var o,t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return o=e.call.apply(e,[this].concat(r))||this,i(o,"actorMove",f,n(o)),o._dir=s(0,0,0),o.direction_up=0,o.direction_down=0,o.direction_left=0,o.direction_right=0,o}t(o,e);var r=o.prototype;return r.start=function(){d.on(_.EventType.KEY_DOWN,this.onKeyDown,this),d.on(_.EventType.KEY_UP,this.onKeyUp,this),d.on(_.EventType.MOUSE_DOWN,this.onMouseDown,this),d.on(_.EventType.MOUSE_MOVE,this.onMouseMove,this)},r.onKeyDown=function(e){var o;e.keyCode!==h.KEY_W&&e.keyCode!==h.ARROW_UP||(this.direction_up=-1),e.keyCode!==h.KEY_S&&e.keyCode!==h.ARROW_DOWN||(this.direction_down=1),e.keyCode!==h.KEY_A&&e.keyCode!==h.ARROW_LEFT||(this.direction_left=-1),e.keyCode!==h.KEY_D&&e.keyCode!==h.ARROW_RIGHT||(this.direction_right=1),e.keyCode==h.SPACE&&(null==(o=this.actorMove)||o.jump()),this.onMove()},r.onKeyUp=function(e){e.keyCode!==h.KEY_W&&e.keyCode!==h.ARROW_UP||(this.direction_up=0),e.keyCode!==h.KEY_S&&e.keyCode!==h.ARROW_DOWN||(this.direction_down=0),e.keyCode!==h.KEY_A&&e.keyCode!==h.ARROW_LEFT||(this.direction_left=0),e.keyCode!==h.KEY_D&&e.keyCode!==h.ARROW_RIGHT||(this.direction_right=0),this.onMove()},r.onMouseDown=function(e){},r.onMouseMove=function(e){var o;null==(o=this.actorMove)||o.onRotation(e.movementX/5,e.movementY/10)},r.onMove=function(){var e;this._dir.x=this.direction_left+this.direction_right,this._dir.z=this.direction_up+this.direction_down,this._dir.y=0,null==(e=this.actorMove)||e.moveDirection(this._dir.normalize())},o}(u)).prototype,"actorMove",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=l))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/test-amoy-animation-cct.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-animation-graph.ts","./msg.ts","./actor-move-cct.ts"],(function(e){var t,i,o,n,a,r,l,s,h,c,_,p,d,u,y,m,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,s=e.v3,h=e.input,c=e.Input,_=e.KeyCode,p=e.Vec3,d=e.math,u=e.Component},function(e){y=e.ActorAnimationGraph},function(e){m=e.Msg},function(e){g=e.ActorMoveCCT}],execute:function(){var v,C,f,k,R,b,E,A,K;a._RF.push({},"98c6823ou9KK74/N08P9H+9","test-amoy-animation-cct",void 0);var T=r.ccclass,Y=r.property;e("TestAmoyAnimationCCT",(v=T("TestAmoyAnimationCCT"),C=Y(l),f=Y(g),v((b=t((R=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this)._animationGraph=void 0,t.bool_crouch=!1,t.bool_iron_sights=!1,t.direction_up=0,t.direction_down=0,t.direction_left=0,t.direction_right=0,t.cameraTargetIndex=0,o(t,"moveSpeedRate",b,n(t)),o(t,"angleSpeedRate",E,n(t)),t.angleVelocity=s(0,0,0),t.linearVelocity=s(0,0,0),t.moveSpeed=1,o(t,"view",A,n(t)),o(t,"actorMove",K,n(t)),t}i(t,e);var a=t.prototype;return a.start=function(){var e;console.log(this.node.name),this._animationGraph=null==(e=this.view)?void 0:e.getComponent(y),h.on(c.EventType.KEY_DOWN,this.keyDown,this),h.on(c.EventType.KEY_UP,this.keyUp,this),h.on(c.EventType.MOUSE_DOWN,this.onMouseDown,this)},a.lateUpdate=function(e){this.updateMove()},a.keyDown=function(e){var t,i,o,n,a,r,l,s;(e.keyCode!==_.KEY_W&&e.keyCode!==_.ARROW_UP||(this.direction_up=-1),e.keyCode!==_.KEY_S&&e.keyCode!==_.ARROW_DOWN||(this.direction_down=1),e.keyCode!==_.KEY_A&&e.keyCode!==_.ARROW_LEFT||(this.direction_left=-1),e.keyCode!==_.KEY_D&&e.keyCode!==_.ARROW_RIGHT||(this.direction_right=1),e.keyCode==_.KEY_I)&&(this.bool_iron_sights=!this.bool_iron_sights,console.log(this.bool_iron_sights),null==(t=this._animationGraph)||t.play("bool_iron_sights",this.bool_iron_sights),this.cameraTargetIndex=this.bool_iron_sights?1:0,m.emit("msg_change_tps_camera_target",this.cameraTargetIndex));e.keyCode==_.KEY_C&&(this.bool_crouch=!this.bool_crouch,null==(i=this._animationGraph)||i.play("bool_crouch",this.bool_crouch),m.emit("msg_change_tps_camera_height",this.bool_crouch?1:1.377));e.keyCode==_.SPACE&&(null==(o=this._animationGraph)||o.play("trigger_jump",!0),null==(n=this._animationGraph)||n.setValue("num_jump_speed",.8));e.keyCode===_.KEY_D&&(null==(a=this._animationGraph)||a.play("trigger_draw",!0));e.keyCode===_.KEY_R&&(null==(r=this._animationGraph)||r.play("trigger_reload",!0));e.keyCode===_.KEY_E&&(null==(l=this._animationGraph)||l.play("trigger_reload_empty",!0));e.keyCode===_.KEY_H&&(null==(s=this._animationGraph)||s.play("trigger_hit",!0));if(e.keyCode==_.KEY_Z){if(1===this.cameraTargetIndex)return;this.cameraTargetIndex=0===this.cameraTargetIndex?2:0,m.emit("msg_change_tps_camera_target",this.cameraTargetIndex)}},a.onMouseDown=function(e){var t;null==(t=this._animationGraph)||t.play("trigger_fire",!0)},a.keyUp=function(e){e.keyCode!==_.KEY_W&&e.keyCode!==_.ARROW_UP||(this.direction_up=0),e.keyCode!==_.KEY_S&&e.keyCode!==_.ARROW_DOWN||(this.direction_down=0),e.keyCode!==_.KEY_A&&e.keyCode!==_.ARROW_LEFT||(this.direction_left=0),e.keyCode!==_.KEY_D&&e.keyCode!==_.ARROW_RIGHT||(this.direction_right=0)},a.updateMove=function(){var e,t,i;p.copy(this.linearVelocity,this.actorMove.velocity),this.linearVelocity.y=0;var o=this.linearVelocity.length(),n=this.actorMove.node.eulerAngles.y;p.rotateY(this.linearVelocity,this.linearVelocity,p.ZERO,d.toRadian(-n));var a=this.linearVelocity.x,r=this.linearVelocity.z;this.moveSpeed=o*this.moveSpeedRate,this.direction_up+this.direction_left+this.direction_right+this.direction_down==0&&Math.abs(this.angleVelocity.y)>1&&(this.moveSpeed=this.angleVelocity.y*this.angleSpeedRate,a=this.angleVelocity.y/10),null==(e=this._animationGraph)||e.setValue("num_velocity_x",a),null==(t=this._animationGraph)||t.setValue("num_velocity_y",-r),null==(i=this._animationGraph)||i.setValue("num_move_speed",this.moveSpeed)},t}(u)).prototype,"moveSpeedRate",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.7}}),E=t(R.prototype,"angleSpeedRate",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),A=t(R.prototype,"view",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(R.prototype,"actorMove",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=R))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/test-amoy-animation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-animation-graph.ts","./msg.ts"],(function(e){var i,t,o,n,a,r,l,s,h,_,c,d,p,y,g,u,m;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,s=e.RigidBody,h=e.v3,_=e.input,c=e.Input,d=e.KeyCode,p=e.Vec3,y=e.math,g=e.Component},function(e){u=e.ActorAnimationGraph},function(e){m=e.Msg}],execute:function(){var R,v,f,k,C,b,E,A,V;a._RF.push({},"a7be801KZBAg71N+w894EgY","test-amoy-animation",void 0);var K=r.ccclass,Y=r.property;e("TestAmoyAnimation",(R=K("TestAmoyAnimation"),v=Y(l),f=Y(s),R((b=i((C=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(i=e.call.apply(e,[this].concat(a))||this)._animationGraph=void 0,i.bool_crouch=!1,i.bool_iron_sights=!1,i.direction_up=0,i.direction_down=0,i.direction_left=0,i.direction_right=0,i.cameraTargetIndex=0,o(i,"moveSpeedRate",b,n(i)),o(i,"angleSpeedRate",E,n(i)),i.angleVelocity=h(0,0,0),i.linearVelocity=h(0,0,0),i.moveSpeed=1,o(i,"view",A,n(i)),o(i,"targetRigid",V,n(i)),i}t(i,e);var a=i.prototype;return a.start=function(){var e;console.log(this.node.name),this._animationGraph=null==(e=this.view)?void 0:e.getComponent(u),_.on(c.EventType.KEY_DOWN,this.keyDown,this),_.on(c.EventType.KEY_UP,this.keyUp,this),_.on(c.EventType.MOUSE_DOWN,this.onMouseDown,this)},a.lateUpdate=function(e){this.updateMove()},a.keyDown=function(e){var i,t,o,n,a,r,l,s;(e.keyCode!==d.KEY_W&&e.keyCode!==d.ARROW_UP||(this.direction_up=-1),e.keyCode!==d.KEY_S&&e.keyCode!==d.ARROW_DOWN||(this.direction_down=1),e.keyCode!==d.KEY_A&&e.keyCode!==d.ARROW_LEFT||(this.direction_left=-1),e.keyCode!==d.KEY_D&&e.keyCode!==d.ARROW_RIGHT||(this.direction_right=1),e.keyCode==d.KEY_I)&&(this.bool_iron_sights=!this.bool_iron_sights,console.log(this.bool_iron_sights),null==(i=this._animationGraph)||i.play("bool_iron_sights",this.bool_iron_sights),this.cameraTargetIndex=this.bool_iron_sights?1:0,m.emit("msg_change_tps_camera_target",this.cameraTargetIndex));e.keyCode==d.KEY_C&&(this.bool_crouch=!this.bool_crouch,null==(t=this._animationGraph)||t.play("bool_crouch",this.bool_crouch),m.emit("msg_change_tps_camera_height",this.bool_crouch?1:1.377));e.keyCode==d.SPACE&&(null==(o=this._animationGraph)||o.play("trigger_jump",!0),null==(n=this._animationGraph)||n.setValue("num_jump_speed",.8));e.keyCode===d.KEY_D&&(null==(a=this._animationGraph)||a.play("trigger_draw",!0));e.keyCode===d.KEY_R&&(null==(r=this._animationGraph)||r.play("trigger_reload",!0));e.keyCode===d.KEY_E&&(null==(l=this._animationGraph)||l.play("trigger_reload_empty",!0));e.keyCode===d.KEY_H&&(null==(s=this._animationGraph)||s.play("trigger_hit",!0));if(e.keyCode==d.KEY_Z){if(1===this.cameraTargetIndex)return;this.cameraTargetIndex=0===this.cameraTargetIndex?2:0,m.emit("msg_change_tps_camera_target",this.cameraTargetIndex)}},a.onMouseDown=function(e){var i;null==(i=this._animationGraph)||i.play("trigger_fire",!0)},a.keyUp=function(e){e.keyCode!==d.KEY_W&&e.keyCode!==d.ARROW_UP||(this.direction_up=0),e.keyCode!==d.KEY_S&&e.keyCode!==d.ARROW_DOWN||(this.direction_down=0),e.keyCode!==d.KEY_A&&e.keyCode!==d.ARROW_LEFT||(this.direction_left=0),e.keyCode!==d.KEY_D&&e.keyCode!==d.ARROW_RIGHT||(this.direction_right=0)},a.updateMove=function(){var e,i,t;this.targetRigid.getLinearVelocity(this.linearVelocity),this.targetRigid.getAngularVelocity(this.angleVelocity),this.linearVelocity.y=0;var o=this.linearVelocity.length(),n=this.targetRigid.node.eulerAngles.y;p.rotateY(this.linearVelocity,this.linearVelocity,p.ZERO,y.toRadian(-n));var a=this.linearVelocity.x,r=this.linearVelocity.z;this.moveSpeed=o*this.moveSpeedRate,this.direction_up+this.direction_left+this.direction_right+this.direction_down==0&&Math.abs(this.angleVelocity.y)>1&&(this.moveSpeed=this.angleVelocity.y*this.angleSpeedRate,a=this.angleVelocity.y/10),null==(e=this._animationGraph)||e.setValue("num_velocity_x",a),null==(i=this._animationGraph)||i.setValue("num_velocity_y",-r),null==(t=this._animationGraph)||t.setValue("num_move_speed",this.moveSpeed)},i}(g)).prototype,"moveSpeedRate",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.7}}),E=i(C.prototype,"angleSpeedRate",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),A=i(C.prototype,"view",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=i(C.prototype,"targetRigid",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=C))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/test-anig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-animation-graph-group.ts"],(function(t){var n,i,a,e,r,o,p,l;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,a=t._decorator,e=t.input,r=t.Input,o=t.KeyCode,p=t.Component},function(t){l=t.ActorAnimationGraphGroup}],execute:function(){var s;i._RF.push({},"454cbIMSGBMN5BT5nW5F9ji","test-anig",void 0);var u=a.ccclass;a.property,t("TestAnimationGraph",u("TestAnimationGraph")(s=function(t){function i(){for(var n,i=arguments.length,a=new Array(i),e=0;e<i;e++)a[e]=arguments[e];return(n=t.call.apply(t,[this].concat(a))||this)._animationGraph=void 0,n}n(i,t);var a=i.prototype;return a.start=function(){var t=this.node.getChildByName("view");this._animationGraph=t.addComponent(l),e.on(r.EventType.KEY_DOWN,this.keyDown,this)},a.keyDown=function(t){var n,i,a,e,r;t.keyCode===o.KEY_D&&(null==(n=this._animationGraph)||n.play("trigger_draw",!0));t.keyCode===o.KEY_F&&(null==(i=this._animationGraph)||i.play("trigger_fire",!0));t.keyCode===o.KEY_R&&(null==(a=this._animationGraph)||a.play("trigger_reload",!0));t.keyCode===o.KEY_E&&(null==(e=this._animationGraph)||e.play("trigger_reload_empty",!0));t.keyCode===o.KEY_H&&(null==(r=this._animationGraph)||r.play("trigger_holster",!0))},a.update=function(t){},i}(p))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/test-camera-debug.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,r,n;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,n=t.Component}],execute:function(){var c;o._RF.push({},"4175bLazyRLxo5ia1UGb/9Y","test-camera-debug",void 0);var s=r.ccclass;r.property,t("test_camera_debug",s("test_camera_debug")(c=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var r=o.prototype;return r.start=function(){},r.update=function(t){console.log(this.node.worldPosition)},o}(n))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/test-cct-vector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-move-cct.ts"],(function(t){var e,o,i,r,n,c,s,l,a,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,c=t._decorator,s=t.Vec3,l=t.Component,a=t.v3},function(t){u=t.ActorMoveCCT}],execute:function(){var v,p,h,y,d,f,m;n._RF.push({},"0e4419Xd8VJhr3DHHsJ4B2S","test-cct-vector",void 0);var b=c.ccclass,g=c.property;t("TestCCTVector",(v=b("TestCCTVector"),p=g(u),h=g(s),v((f=e((d=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];return e=t.call.apply(t,[this].concat(n))||this,i(e,"move",f,r(e)),i(e,"velocity",m,r(e)),e}o(e,t);var n=e.prototype;return n.start=function(){},n.lateUpdate=function(t){this.node.setWorldPosition(this.move.node.worldPosition),s.copy(this.velocity,this.move.velocity),this.velocity.length()>.5&&(this.velocity.add(this.node.worldPosition),this.node.lookAt(this.velocity))},e}(l)).prototype,"move",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=e(d.prototype,"velocity",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a(0,0,0)}}),y=d))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/test-collider-mesh-switch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data-core.ts"],(function(e){var t,r,n,i,s,o,a,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,a=e.MeshRenderer,c=e.Component},function(e){l=e.DataGameInst}],execute:function(){var h,u,d;s._RF.push({},"cd636V2SHdJgI0Yu7mqT0QT","test-collider-mesh-switch",void 0);var p=o.ccclass,f=o.property;e("TestColliderMeshSwitch",p("TestColliderMeshSwitch")((d=t((u=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,n(t,"meshRenderState",d,i(t)),t}return r(t,e),t.prototype.start=function(){this.meshRenderState=l._data.show_collider;for(var e=this.getComponentsInChildren(a),t=0;t<e.length;t++)e[t].enabled=this.meshRenderState},t}(c)).prototype,"meshRenderState",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=u))||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/test-curve.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,a,o,u,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,u=e.CurveRange,c=e.RealCurve,s=e.Component}],execute:function(){var l,p,v,f,g,h,m;a._RF.push({},"e91a1vpp95Ogp4mCoSxgV81","test-curve",void 0);var y=o.ccclass,_=o.property;e("test_cuve",(l=y("test_cuve"),p=_({type:u}),v=_({type:c}),l((h=t((g=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"curveRange",h,n(t)),i(t,"curve",m,n(t)),t._time=0,t}r(t,e);var a=t.prototype;return a.start=function(){},a.update=function(e){var t=this.curveRange.evaluate(this._time,1);console.log("time:",this._time," value:",t),this._time+=e,this._time>1&&(this._time=0)},t}(s)).prototype,"curveRange",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),m=t(g.prototype,"curve",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),f=g))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/test-custom.ts",["cc","./utils2.ts"],(function(e){var a,r,t,i,n,s,d,o;return{setters:[function(e){a=e.cclegacy,r=e.rendering,t=e.gfx,i=e.Material},function(e){n=e.getCameraUniqueID,s=e.getRenderArea,d=e.SRGBToLinear,o=e.getLoadOpOfClearFlag}],execute:function(){e({buildDeferred:function(e,a){if(!e.scene)return;var r=_(e,a),t=S(e,a,r);O(e,a,t.rtName)},buildGBufferPass:_,buildLightingPass:S,buildPostprocessPass:O}),a._RF.push({},"887a1YxhGlKlK2cbFmBo6eM","test-custom",void 0);var l=r.RasterView,R=r.AttachmentType,c=r.AccessType,E=r.ResourceResidency,u=r.LightInfo,w=r.SceneFlags,g=r.QueueHint,T=r.ComputeView,h=t.Format,f=t.LoadOp,p=t.StoreOp,m=t.ClearFlagBit,C=t.Color,A=t.Viewport,N=e("GBufferInfo",(function(){this.color=void 0,this.normal=void 0,this.emissive=void 0,this.ds=void 0}));function _(e,a){var r=n(e),t=s(e,e.window.width,e.window.height),i=t.width,o=t.height,T="gBufferPassColorCamera",_="gBufferPassNormal",v="gBufferPassEmissive",D="gBufferPassDSCamera";if(!a.containsResource(T)){var S=h.RGBA16F;a.addRenderTarget(T,S,i,o,E.MANAGED),a.addRenderTarget(_,S,i,o,E.MANAGED),a.addRenderTarget(v,S,i,o,E.MANAGED),a.addDepthStencil(D,h.DEPTH_STENCIL,i,o,E.MANAGED)}var P=a.addRasterPass(i,o,"Geometry");P.name="CameraGBufferPass"+r,P.setViewport(new A(t.x,t.y,t.width,t.height));var L=new C(0,0,0,0);e.clearFlag&m.COLOR&&(a.pipelineSceneData.isHDR?d(L,e.clearColor):(L.x=e.clearColor.x,L.y=e.clearColor.y,L.z=e.clearColor.z));var O=new l("_",c.WRITE,R.RENDER_TARGET,f.CLEAR,p.STORE,e.clearFlag,L),M=new l("_",c.WRITE,R.RENDER_TARGET,f.CLEAR,p.STORE,e.clearFlag,new C(0,0,0,0)),G=new l("_",c.WRITE,R.RENDER_TARGET,f.CLEAR,p.STORE,e.clearFlag,new C(0,0,0,0)),I=new l("_",c.WRITE,R.DEPTH_STENCIL,f.CLEAR,p.STORE,e.clearFlag,new C(e.clearDepth,e.clearStencil,0,0));P.addRasterView(T,O),P.addRasterView(_,M),P.addRasterView(v,G),P.addRasterView(D,I),P.addQueue(g.RENDER_OPAQUE).addSceneOfCamera(e,new u,w.OPAQUE_OBJECT|w.CUTOUT_OBJECT|w.DRAW_INSTANCING);var F=new N;return F.color=T,F.normal=_,F.emissive=v,F.ds=D,F}var v=function(){function e(){this._init()}return e.prototype._init=function(){this.deferredLightingMaterial=new i,this.deferredLightingMaterial.name="builtin-deferred-material",this.deferredLightingMaterial.initialize({effectName:"pipeline/deferred-lighting",defines:{CC_RECEIVE_SHADOW:1}});for(var e=0;e<this.deferredLightingMaterial.passes.length;++e)this.deferredLightingMaterial.passes[e].tryCompile()},e}(),D=null;function S(e,a,r){D||(D=new v);var t=n(e),i=s(e,e.window.width,e.window.height),d=i.width,o=i.height,N="deferredLightingPassRTName",_="deferredLightingPassDS";a.containsResource(N)||(a.addRenderTarget(N,h.RGBA8,d,o,E.MANAGED),a.addDepthStencil(_,h.DEPTH_STENCIL,d,o,E.MANAGED));var S=a.addRasterPass(d,o,"Lighting");if(S.name="CameraLightingPass"+t,S.setViewport(new A(i.x,i.y,d,o)),a.containsResource(r.color)){var P=new T;P.name="gbuffer_albedoMap",S.addComputeView(r.color,P);var L=new T;L.name="gbuffer_normalMap",S.addComputeView(r.normal,L);var O=new T;O.name="gbuffer_emissiveMap",S.addComputeView(r.emissive,O);var M=new T;M.name="depth_stencil",S.addComputeView(r.ds,M)}var G=new C(0,0,0,0);e.clearFlag&m.COLOR&&(G.x=e.clearColor.x,G.y=e.clearColor.y,G.z=e.clearColor.z),G.w=0;var I=new l("_",c.WRITE,R.RENDER_TARGET,f.CLEAR,p.STORE,e.clearFlag,G);S.addRasterView(N,I);var F=globalThis.pipelineAssets.getMaterial("deferred-lighting")||D.deferredLightingMaterial;return S.addQueue(g.RENDER_TRANSPARENT).addCameraQuad(e,F,0,w.VOLUMETRIC_LIGHTING),S.addQueue(g.RENDER_TRANSPARENT).addSceneOfCamera(e,new u,w.TRANSPARENT_OBJECT|w.PLANAR_SHADOW|w.GEOMETRY),{rtName:N,dsName:_}}var P=function(){function e(){this._init()}return e.prototype._init=function(){this.postMaterial=new i,this.postMaterial.name="builtin-post-process-material",this.postMaterial.initialize({effectName:"pipeline/post-process",defines:{ANTIALIAS_TYPE:0}});for(var e=0;e<this.postMaterial.passes.length;++e)this.postMaterial.passes[e].tryCompile()},e}(),L=null;function O(e,a,r){L||(L=new P);var t=n(e),i=s(e,e.window.width,e.window.height),d=i.width,f=i.height,N="postprocessPassRTName"+t,_="postprocessPassDS"+t;a.containsResource(N)||(a.addRenderTexture(N,h.RGBA8,d,f,e.window),a.addDepthStencil(_,h.DEPTH_STENCIL,d,f,E.MANAGED)),a.updateRenderWindow(N,e.window);var v=a.addRasterPass(d,f,"Postprocess");if(v.name="CameraPostprocessPass"+t,v.setViewport(new A(i.x,i.y,i.width,i.height)),a.containsResource(r)){var D=new T;D.name="outputResultMap",v.addComputeView(r,D)}var S=new C(0,0,0,e.clearColor.w);e.clearFlag&m.COLOR&&(S.x=e.clearColor.x,S.y=e.clearColor.y,S.z=e.clearColor.z);var O=new l("_",c.WRITE,R.RENDER_TARGET,o(e.clearFlag,R.RENDER_TARGET),p.STORE,e.clearFlag,S),M=new l("_",c.WRITE,R.DEPTH_STENCIL,o(e.clearFlag,R.DEPTH_STENCIL),p.STORE,e.clearFlag,new C(e.clearDepth,e.clearStencil,0,0));return v.addRasterView(N,O),v.addRasterView(_,M),v.addQueue(g.NONE).addFullscreenQuad(L.postMaterial,0,w.NONE),v.addQueue(g.RENDER_TRANSPARENT).addSceneOfCamera(e,new u,w.UI|w.PROFILER),{rtName:N,dsName:_}}a._RF.pop()}}}));

System.register("chunks:///_virtual/test-forward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){var e,r,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,o=t.Component},null],execute:function(){var u;r._RF.push({},"eb9295i0PhGOLESqCIdDSSn","test-forward",void 0);var c=n.ccclass,s=(n.property,n.executeInEditMode);t("test_forward",c("test_forward")(u=s(u=function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var n=r.prototype;return n.onEnable=function(){},n.update=function(t){},r}(o))||u)||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/test-ghost.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,s,e,o,n,r,c,a,h,u,d,l;return{setters:[function(t){i=t.inheritsLoose},function(t){s=t.cclegacy,e=t._decorator,o=t.SkinnedMeshRenderer,n=t.input,r=t.Input,c=t.clamp01,a=t.Vec3,h=t.KeyCode,u=t.v4,d=t.v3,l=t.Component}],execute:function(){var p;s._RF.push({},"91dcecdLxdLX4U2wOSNwoNm","test-ghost",void 0);var f=e.ccclass;e.executeInEditMode,t("SolderController",f("SolderController")(p=function(t){function s(){for(var i,s=arguments.length,e=new Array(s),o=0;o<s;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).materials=[],i.directionUniform=u(),i.direction=d(),i.currentPosition=d(0,0,0),i.lastPosition=d(0,0,0),i.t=0,i.xAxis=0,i.zAxis=0,i.speed=10,i}i(s,t);var e=s.prototype;return e.start=function(){var t=this;this.currentPosition=this.node.position.clone(),this.lastPosition=this.currentPosition.clone(),this.node.getComponentsInChildren(o).forEach((function(i){t.materials.push(i.material)})),n.on(r.EventType.KEY_DOWN,this.onKeyDown,this),n.on(r.EventType.KEY_UP,this.onKeyUp,this)},e.update=function(t){var i=this;this.currentPosition.x+=this.speed*t*this.xAxis,this.currentPosition.z+=this.speed*t*this.zAxis,this.node.setPosition(this.currentPosition),this.currentPosition.equals(this.lastPosition)&&(this.t=0),this.t+=t,this.t=c(this.t),a.lerp(this.lastPosition,this.lastPosition,this.currentPosition,this.t),a.subtract(this.direction,this.lastPosition,this.currentPosition),this.materials.forEach((function(t){var s=t.passes[0].getHandle("direction");t.passes[0].getUniform(s,i.directionUniform),i.directionUniform.set(i.direction.x,i.direction.y,i.direction.z,i.directionUniform.w),t.passes[0].setUniform(s,i.directionUniform)}))},e.onKeyDown=function(t){switch(t.keyCode){case h.KEY_A:this.xAxis=-1;break;case h.KEY_D:this.xAxis=1;break;case h.KEY_W:this.zAxis=-1;break;case h.KEY_S:this.zAxis=1}},e.onKeyUp=function(t){switch(t.keyCode){case h.KEY_A:case h.KEY_D:this.xAxis=0;break;case h.KEY_W:case h.KEY_S:this.zAxis=0}},s}(l))||p);s._RF.pop()}}}));

System.register("chunks:///_virtual/test-gun-fire.ts",["./rollupPluginModLoBabelHelpers.js","cc","./test-anig.ts"],(function(t){var n,e,r,o,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,o=t.Component},function(t){i=t.TestAnimationGraph}],execute:function(){var s;e._RF.push({},"887bczrxrNJlpbQxk/M1zDy","test-gun-fire",void 0);var c=r.ccclass;r.property,t("test_gun_fire",c("test_gun_fire")(s=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.start=function(){for(var t=0;t<this.node.children.length;t++){this.node.children[t].addComponent(i)}},r.update=function(t){},e}(o))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/test-gun-tracer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(t){var e,n,r,o,s,u,c,i,a,p,f;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.input,s=t.Input,u=t.KeyCode,c=t.Vec3,i=t.v3,a=t.randomRange,p=t.Component},function(t){f=t.Msg}],execute:function(){var y;n._RF.push({},"9ae652i2EdG3LuuhHG9D6Gq","test-gun-tracer",void 0);var d=r.ccclass;r.property,t("TestGunTracer",d("TestGunTracer")(y=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.start=function(){o.on(s.EventType.KEY_DOWN,this.keyDown,this)},r.keyDown=function(t){if(t.keyCode===u.KEY_R){var e=c.ZERO,n=i(a(0,30),1,a(0,30));f.emit("msg_set_tracer",{start:e,end:n})}},r.update=function(t){},n}(p))||y);n._RF.pop()}}}));

System.register("chunks:///_virtual/test-ik.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-animation-graph.ts","./aim-control.ts"],(function(t){var i,e,o,n,r,a,l,s,h,g,p,u,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,s=t.input,h=t.Input,g=t.KeyCode,p=t.Component},function(t){u=t.ActorAnimationGraph},function(t){c=t.default}],execute:function(){var d,_,y,m,b,f,k,C,v,E,I;r._RF.push({},"df315rKC7tE5alpkOkPqTOP","test-ik",void 0);var x=a.ccclass,G=a.property;t("TestIk",(d=x("TestIk"),_=G(l),y=G(l),m=G(l),b=G(l),d((C=i((k=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,o(i,"anim",C,n(i)),o(i,"targetRoot",v,n(i)),o(i,"ikNode",E,n(i)),o(i,"target",I,n(i)),i.aimControl=void 0,i.animationGraph=void 0,i.targetIndex=0,i.bool_iron_sights=!1,i}e(i,t);var r=i.prototype;return r.start=function(){var t,i;this.aimControl=null==(t=this.ikNode)?void 0:t.getComponent(c),this.animationGraph=null==(i=this.anim)?void 0:i.getComponent(u),s.on(h.EventType.KEY_DOWN,this.keyDown,this)},r.keyDown=function(t){var i,e;t.keyCode===g.KEY_I&&(this.bool_iron_sights=!this.bool_iron_sights,null==(i=this.animationGraph)||i.play("bool_iron_sights",this.bool_iron_sights),console.log("bool_iron_sights:",this.bool_iron_sights));t.keyCode===g.KEY_F&&(null==(e=this.animationGraph)||e.play("trigger_fire",!0));t.keyCode===g.KEY_N&&this.nextTarget(),t.keyCode===g.KEY_R&&this.animationGraph.play("trigger_reload",!0),t.keyCode===g.KEY_E&&this.animationGraph.play("trigger_reload_empty",!0),t.keyCode===g.KEY_H&&this.animationGraph.play("trigger_holster",!0),t.keyCode===g.SPACE&&this.animationGraph.play("trigger_jump",!0)},r.nextTarget=function(){var t,i,e=this.targetRoot.children[this.targetIndex].getWorldPosition();null==(t=this.aimControl.target)||t.setWorldPosition(e),null==(i=this.target)||i.setWorldPosition(e),console.log("current target index:",this.targetIndex),this.targetIndex++,this.targetIndex>=this.targetRoot.children.length&&(this.targetIndex=0)},i}(p)).prototype,"anim",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=i(k.prototype,"targetRoot",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(k.prototype,"ikNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=i(k.prototype,"target",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=k))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/test-mouse-move.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,n,i,s,r,u;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,n=e._decorator,i=e.input,s=e.Input,r=e.game,u=e.Component}],execute:function(){var c;o._RF.push({},"19815VnhH5PMbyUZEF7Ro5Z","test-mouse-move",void 0);var m=n.ccclass;n.property,e("test_mouse_move",m("test_mouse_move")(c=function(e){function o(){for(var t,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).pre_mouse_time=0,t.pre_info="",t}t(o,e);var n=o.prototype;return n.start=function(){i.on(s.EventType.MOUSE_MOVE,this.onMouseMove,this)},n.update=function(e){},n.onMouseMove=function(e){var t=r.totalTime-this.pre_mouse_time,o="time: "+r.totalTime+" mouse move delta time:  "+t+"  engine delta time: "+r.deltaTime;t>20&&(console.log("pre:",this.pre_info),console.log("cur:",o)),this.pre_info=o,this.pre_mouse_time=r.totalTime},o}(u))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/test-move-target.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor-brain.ts"],(function(t){var e,r,i,n,o,a,s,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Component},function(t){c=t.ActorBrain}],execute:function(){var l,u,p,f,v;o._RF.push({},"48d70TzkaFPvLUrKsdNHJzH","test-move-target",void 0);var d=a.ccclass,g=a.property;t("test_move_target",(l=d("test_move_target"),u=g({type:c}),l((v=e((f=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"brain",v,n(e)),e}r(e,t);var o=e.prototype;return o.start=function(){},o.lateUpdate=function(t){this.node.setWorldPosition(this.brain.targetPosition)},e}(s)).prototype,"brain",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=f))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/test-normal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){var i,o,n,s,e,a,r,c,l,d,h,y,p,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){e=t.cclegacy,a=t._decorator,r=t.v3,c=t.geometry,l=t.PhysicsSystem,d=t.Color,h=t.Vec3,y=t.Component},function(t){p=t.UtilVec3,u=t.Gizmo}],execute:function(){var v,w,L;e._RF.push({},"53f33cIeq5D/LxcgXsZE/Dx","test-normal",void 0);var m=a.ccclass,P=a.property,f=a.executeInEditMode;t("TestNormal",m("TestNormal")(v=f((L=i((w=function(t){function i(){for(var i,o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];return(i=t.call.apply(t,[this].concat(e))||this).direction=r(0,0,0),i.normal=r(0,0,0),i.startPos=r(0,0,0),n(i,"moveDirection",L,s(i)),i.ray=new c.Ray,i.p0=r(0,0,0),i}o(i,t);var e=i.prototype;return e.start=function(){},e.update=function(t){},e.calculateSlopeDirection=function(){var t=this.ray,i=(r(0,0,0),r(0,0,0),r(0,-1,0)),o=this.node.position.clone();if(o.add(i),p.copy(t.o,this.node.position),t.d=r(0,-1,0),u.drawLine(t.o,o),l.instance.raycastClosest(t,void 0,.4)){var n=l.instance.raycastClosestResult,s=n.hitPoint.clone(),e=n.hitPoint.clone();console.log(n.hitNormal),u.drawLine(n.hitPoint,s.add(n.hitNormal).multiplyScalar(2),d.RED),u.drawLine(this.node.worldPosition,e,d.GREEN),t.o.z=.03,t.o.x=.03;var a=t.o.clone();if(u.drawLine(t.o,a.add(i)),l.instance.raycastClosest(t,void 0,.4)){var c=l.instance.raycastClosestResult,y=(c.hitPoint.clone(),c.hitPoint.clone());u.drawLine(this.node.worldPosition,y,d.YELLOW),p.copy(this.direction,y),this.direction.subtract(e).normalize(),h.cross(this.normal,e.subtract(this.node.worldPosition),y.subtract(this.node.worldPosition));var v=r(0,0,0);p.copy(v,this.node.worldPosition),v.add(this.normal),u.drawLine(this.node.worldPosition,v,d.CYAN)}}},e.calculateSlopNormal=function(){var t=this.ray,i=(r(0,0,0),r(0,0,0)),o=r(0,0,0),n=r(0,-1,0),s=this.node.position.clone();if(s.add(n),p.copy(t.o,this.node.position),t.d=r(0,-1,0),u.drawLine(t.o,s),l.instance.raycastClosest(t,void 0,.4)){var e=l.instance.raycastClosestResult.hitPoint.clone();u.drawLine(this.node.worldPosition,e,d.GREEN),t.o.z=.03,t.o.x=.03;t.o.clone();if(l.instance.raycastClosest(t,void 0,.4)){var a=l.instance.raycastClosestResult;u.drawLine(t.o,a.hitPoint),p.copy(i,a.hitPoint),u.drawLine(this.node.worldPosition,t.o,d.YELLOW)}if(t.o.z=-.03,t.o.x=-.03,l.instance.raycastClosest(t,void 0,.4)){var c=l.instance.raycastClosestResult;p.copy(o,c.hitPoint),u.drawLine(t.o,c.hitPoint),u.drawLine(this.node.worldPosition,t.o,d.YELLOW),u.drawLine(e,i,d.RED),u.drawLine(e,o,d.RED),h.cross(this.normal,i.subtract(e),o.subtract(e));var y=r(0,0,0);p.copy(y,e),y.add(this.normal),u.drawLine(e,y,d.RED),p.copy(this.startPos,e)}}},e.calculateSlopDirection=function(){var t=this.moveDirection.length();if(console.log(t),void 0===this.ray&&(this.ray=new c.Ray),p.copy(this.ray.o,this.node.worldPosition),p.copy(this.direction,this.moveDirection),this.ray.d=r(0,-1,0),l.instance.raycastClosest(this.ray,void 0,1)){var i=l.instance.raycastClosestResult;if(p.copy(this.p0,i.hitPoint),u.drawLine(this.ray.o,this.p0,d.YELLOW),this.ray.o.add(this.moveDirection),u.drawLine(this.p0,this.p0.clone().add(this.moveDirection),d.YELLOW),l.instance.raycastClosest(this.ray,void 0,1)){var o=l.instance.raycastClosestResult;u.drawLine(this.ray.o,o.hitPoint,d.GREEN),p.copy(this.direction,o.hitPoint),this.direction.subtract(this.p0).normalize().multiplyScalar(t),u.drawLine(this.p0,this.p0.clone().add(this.direction),d.GREEN)}}},i}(y)).prototype,"moveDirection",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return r(0,0,0)}}),v=w))||v)||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/test-open-gizmo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(t){var o,e,n,i,r,s,u,c;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,i=t.input,r=t.Input,s=t.KeyCode,u=t.Component},function(t){c=t.Gizmo}],execute:function(){var p;e._RF.push({},"0aa34LqNE9MYLvvZRioC0Vv","test-open-gizmo",void 0);var a=n.ccclass;n.property,t("test_open_gizmo",a("test_open_gizmo")(p=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.start=function(){i.on(r.EventType.KEY_DOWN,this.onKeyDown,this)},n.onKeyDown=function(t){t.keyCode==s.KEY_M&&c.SetState()},e}(u))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/test-physic.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,i,n,r,s,l,c,a,h;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,l=t.Collider,c=t.geometry,a=t.PhysicsSystem,h=t.Component}],execute:function(){var y,p,u;r._RF.push({},"a89c2Na6/BCLoEglGysQBPT","test-physic",void 0);var d=s.ccclass,g=s.property;t("test_physic",d("test_physic")((u=o((p=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return(o=t.call.apply(t,[this].concat(r))||this).collider=void 0,i(o,"mask",u,n(o)),o}e(o,t);var r=o.prototype;return r.start=function(){this.collider=this.getComponent(l),this.collider.on("onCollisionEnter",this.onCollisionEnter,this),this.collider.on("onTriggerEnter",this.onTriggerEnter,this),this.mask=1<<this.mask;var t=new c.Ray;if(t.o.x=this.node.worldPosition.x,t.o.y=this.node.worldPosition.y,t.o.z=this.node.worldPosition.z,t.d.x=0,t.d.y=-1,t.d.z=0,a.instance.raycastClosest(t,this.mask,100)){var o=a.instance.raycastClosestResult;console.log("ray hit:",o.collider.name)}},r.onCollisionEnter=function(t){console.log("on collider enter.")},r.onTriggerEnter=function(t){console.log("on trigger enter.")},o}(h)).prototype,"mask",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),y=p))||y);r._RF.pop()}}}));

System.register("chunks:///_virtual/test-pose-move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./anim-pose.ts"],(function(e){var t,i,o,n,s,r,a,h,c,m,p,l,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,a=e.v2,h=e.input,c=e.Input,m=e.KeyCode,p=e.Vec2,l=e.Component},function(e){v=e.AnimPose}],execute:function(){var _,u,y,d,D,f;s._RF.push({},"0c059iREGJJeri6um7j85Do","test-pose-move",void 0);var K=r.ccclass,E=r.property;e("TestPoseMove",(_=K("TestPoseMove"),u=E({type:v}),_((D=t((d=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,o(t,"animGraph",D,n(t)),o(t,"smooth",f,n(t)),t.direction=a(0,0),t.readDirection=a(0,0),t.leanDirection=a(0,0),t.move_w=0,t.move_s=0,t.move_a=0,t.move_d=0,t}i(t,e);var s=t.prototype;return s.start=function(){this.animGraph=this.getComponent(v),h.on(c.EventType.KEY_DOWN,this.onKeyDown,this),h.on(c.EventType.KEY_UP,this.onKeyUp,this)},s.onDestroy=function(){h.off(c.EventType.KEY_DOWN,this.onKeyDown,this),h.off(c.EventType.KEY_UP,this.onKeyUp,this)},s.onKeyDown=function(e){var t=e.keyCode;t==m.KEY_W&&(this.move_w=1),t==m.KEY_S&&(this.move_s=-1),t==m.KEY_A&&(this.move_a=-1),t==m.KEY_D&&(this.move_d=1),this.direction.x=this.move_w+this.move_s,this.direction.y=this.move_a+this.move_d},s.onKeyUp=function(e){var t=e.keyCode;t==m.KEY_W&&(this.move_w=0),t==m.KEY_S&&(this.move_s=0),t==m.KEY_A&&(this.move_a=0),t==m.KEY_D&&(this.move_d=0),this.direction.x=this.move_w+this.move_s,this.direction.y=this.move_a+this.move_d},s.update=function(e){p.lerp(this.readDirection,this.readDirection,this.direction,this.smooth*e),p.lerp(this.leanDirection,this.leanDirection,this.direction,this.smooth/2*e);var t=this.readDirection.length()>.01;this.animGraph.setValue("is_move",t);var i=Math.abs(this.readDirection.length()),o=i,n=this.readDirection.x,s=this.readDirection.y;this.animGraph.setValue("walk_run",i),this.animGraph.setValue("stride",o),this.animGraph.setValue("move_x",s),this.animGraph.setValue("move_y",n),this.animGraph.setValue("lean_x",this.leanDirection.x),this.animGraph.setValue("lean_y",this.leanDirection.y)},t}(l)).prototype,"animGraph",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=t(d.prototype,"smooth",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=d))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/test-reflect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,o,n,a,p,s,c,l,u,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,n=e.createClass},function(e){a=e.cclegacy,p=e._decorator,s=e.ReflectionProbe,c=e.Material,l=e.MeshRenderer,u=e.renderer,f=e.Component}],execute:function(){var h,b,y,m,_,g,d,v,w;a._RF.push({},"bb015ccmppAUo2gqVi764ql","test-reflect",void 0);var M=p.ccclass,P=p.property,D=p.executeInEditMode;e("test_reflect",(h=M("test_reflect"),b=P(s),y=P(s),m=P(c),_=P(c),h(g=D((v=t((d=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,i(t,"_probe",v,o(t)),i(t,"_material",w,o(t)),t}r(t,e);var a=t.prototype;return a.refresh=function(){if(this.material&&this.probe){var e=this.getComponent(l),t=new u.MaterialInstance({parent:this.material});t.setProperty("mainTexture",this.probe._cubemap),e.setMaterialInstance(t,0)}},a.start=function(){this.refresh()},a.create=function(){},a.update=function(e){},n(t,[{key:"probe",get:function(){return this._probe},set:function(e){this._probe=e,this.refresh()}},{key:"material",get:function(){return this._material},set:function(e){this._material=e,this.refresh()}}]),t}(f)).prototype,"_probe",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(d.prototype,"probe",[y],Object.getOwnPropertyDescriptor(d.prototype,"probe"),d.prototype),w=t(d.prototype,"_material",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(d.prototype,"material",[_],Object.getOwnPropertyDescriptor(d.prototype,"material"),d.prototype),g=d))||g)||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/test-res-load.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,e,s,n,r,c,a;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,s=o._decorator,n=o.resources,r=o.JsonAsset,c=o.Prefab,a=o.Component}],execute:function(){var l;e._RF.push({},"9b284phZThFqLDpZ0s3nJcV","test-res-load",void 0);var u=s.ccclass;s.property,o("test_res_load",u("test_res_load")(l=function(o){function e(){return o.apply(this,arguments)||this}t(e,o);var s=e.prototype;return s.start=function(){n.load("data-res-cache",r,(function(o,t){o?console.log(o):console.log("load json:",t)})),n.load("actor/actor-boss_0",c,(function(o,t){o?console.log(o):console.log("load actor-boss_0:",t)}))},s.update=function(o){},e}(a))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/test-rifle-state.ts",["./rollupPluginModLoBabelHelpers.js","cc","./anim-pose.ts"],(function(e){var t,s,i,a,n,r,o,p,l,_,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,r=e._decorator,o=e.input,p=e.Input,l=e.KeyCode,_=e.Component},function(e){h=e.AnimPose}],execute:function(){var c,u,f,m,y;n._RF.push({},"c48d4soceFPqZpgI5yh7zpQ","test-rifle-state",void 0);var G=r.ccclass,b=r.property;e("TestRifleState",(c=G("TestRifleState"),u=b({type:h}),c((y=t((m=function(e){function t(){for(var t,s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return t=e.call.apply(e,[this].concat(n))||this,i(t,"animGraph",y,a(t)),t.base_pose_n=1,t.base_pose_clf=0,t}s(t,e);var n=t.prototype;return n.start=function(){this.animGraph=this.getComponent(h),o.on(p.EventType.KEY_DOWN,this.onKeyDown,this)},n.onKeyDown=function(e){var t=e.keyCode;t==l.DIGIT_0&&this.animGraph.setValue("rifle_state",0),t==l.DIGIT_1&&this.animGraph.setValue("rifle_state",1),t==l.DIGIT_2&&this.animGraph.setValue("rifle_state",2),t==l.DIGIT_3&&this.animGraph.setValue("rifle_state",3),t==l.KEY_C&&(1==this.base_pose_n?(this.base_pose_n=0,this.base_pose_clf=1):(this.base_pose_n=1,this.base_pose_clf=0),this.animGraph.setValue("base_pose_n",this.base_pose_n),this.animGraph.setValue("base_pose_clf",this.base_pose_clf)),t==l.KEY_F&&this.animGraph.setValue("isFire",!0),t==l.KEY_T&&this.animGraph.setValue("isFire",!1),t==l.KEY_N&&this.animGraph.setValue("n_turn_in_place",.5)},n.onRifleFireEnd=function(){console.log(" on rifle fire end.")},n.update=function(e){},t}(_)).prototype,"animGraph",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=m))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/test-rigidbody-vector.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,o,r,n,c,l,s,a,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,c=t._decorator,l=t.RigidBody,s=t.Vec3,a=t.Component,d=t.v3}],execute:function(){var u,p,y,g,h,v,f;n._RF.push({},"1ed65Hxm/5PM6pKmZnOJe1A","test-rigidbody-vector",void 0);var b=c.ccclass,m=c.property;t("TestRigidBodyVector",(u=b("TestRigidBodyVector"),p=m(l),y=m(s),u((v=i((h=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];return i=t.call.apply(t,[this].concat(n))||this,o(i,"rigid",v,r(i)),o(i,"velocity",f,r(i)),i}e(i,t);var n=i.prototype;return n.start=function(){},n.lateUpdate=function(t){this.node.setWorldPosition(this.rigid.node.worldPosition),this.rigid.getLinearVelocity(this.velocity),this.velocity.length()>.5&&(this.velocity.add(this.node.worldPosition),this.node.lookAt(this.velocity))},i}(a)).prototype,"rigid",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=i(h.prototype,"velocity",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d(0,0,0)}}),g=h))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/test-slope-direction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./test-normal.ts","./test-slope-vector.ts"],(function(e){var t,i,o,r,n,l,c,s,a,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,c=e.Vec3,s=e.v3,a=e.Component},null,function(e){p=e.TestNormal},function(e){u=e.TestSlopeVector}],execute:function(){var f,d,y,b,v,m,D,g,h;n._RF.push({},"e5fb3ZKGlFNUL8ucHOfA/bk","test-slope-direction",void 0);var z=l.ccclass,T=l.property,w=l.executeInEditMode;e("TestSlopeDirection",(f=z("TestSlopeDirection"),d=T(p),y=T(c),b=T(u),f(v=w((D=t((m=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,o(t,"playerNode",D,r(t)),o(t,"moveDirection",g,r(t)),o(t,"slopeDirection",h,r(t)),t.endPosition=s(0,0,0),t}return i(t,e),t.prototype.update=function(e){},t}(a)).prototype,"playerNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(m.prototype,"moveDirection",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s(0,0,0)}}),h=t(m.prototype,"slopeDirection",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=m))||v)||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/test-slope-move.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.Component}],execute:function(){var s;o._RF.push({},"ddfffHzXzZEZ6spcXcxRIkt","test-slope-move",void 0);var c=n.ccclass;n.property,t("TestSlopeMove",c("TestSlopeMove")(s=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;return n.start=function(){},n.update=function(t){},o}(r))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/test-slope-vector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(e){var t,r,i,n,o,a,c,s,l,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.CCFloat,s=e.Vec3,l=e.geometry,u=e.v3,p=e.Component},null],execute:function(){var f,d,y,m,b,h,v,g,k,_,w;o._RF.push({},"79d73TdenFAL7LlYd7U4e9n","test-slope-vector",void 0);var z=a.ccclass,S=a.property,F=a.executeInEditMode;e("TestSlopeVector",(f=z("TestSlopeVector"),d=S([c]),y=S(c),m=S(s),b=S(s),f(h=F((g=t((v=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"masks",g,n(t)),i(t,"distance",k,n(t)),i(t,"direction",_,n(t)),t._mask=0,t._ray=new l.Ray,t.hitPoint=u(.5,0,.5),i(t,"vectorSlop",w,n(t)),t}r(t,e);var o=t.prototype;return o.start=function(){for(var e=0;e<this.masks.length;e++)this._mask=this._mask|1<<this.masks[e]},o.update=function(e){},t}(p)).prototype,"masks",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=t(v.prototype,"distance",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),_=t(v.prototype,"direction",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u(0,0,1)}}),w=t(v.prototype,"vectorSlop",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u(0,0,0)}}),h=v))||h)||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/test-stairs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts","./res.ts"],(function(e){var t,r,i,n,o,a,l,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Vec3,c=e.Component,u=e.v3},null,null],execute:function(){var s,p,f,b,g,y,h,v;o._RF.push({},"f4cd0RMTKlJ5pPN/Hbgx5zp","test-stairs",void 0);var d=a.ccclass,z=a.property,m=a.executeInEditMode;e("TestStairs",(s=d("TestStairs"),p=z(l),s(f=m((g=t((b=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"count",g,n(t)),i(t,"height",y,n(t)),i(t,"angle",h,n(t)),i(t,"vector",v,n(t)),t}return r(t,e),t.prototype.onEnable=function(){},t}(c)).prototype,"count",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),y=t(b.prototype,"height",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),h=t(b.prototype,"angle",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),v=t(b.prototype,"vector",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u(0,0,0)}}),f=b))||f)||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/test-steering-init.ts",["./rollupPluginModLoBabelHelpers.js","cc","./navigation-system.ts","./res-cache.ts","./data-core.ts","./level.ts","./actor.ts","./sound.ts","./save.ts","./game-set.ts"],(function(e){var t,n,i,o,r,s,a,l,c,u,p,y,f,d,v,g,m,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.JsonAsset,l=e.Node,c=e.Component},function(e){u=e.NavSystem},function(e){p=e.ResCache},function(e){y=e.Init,f=e.DataLevelInst},function(e){d=e.Level},function(e){v=e.Actor},function(e){g=e.Sound},function(e){m=e.Save},function(e){h=e.GameSet}],execute:function(){var b,I,S,A,C,N,_,j,z;r._RF.push({},"28f03uEZntM46bDTM6i7qr8","test-steering-init",void 0);var D=s.ccclass,w=s.property;e("TestSteeringInit",(b=D("TestSteeringInit"),I=w(a),S=w(l),A=w({type:v}),b((_=t((N=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"jsonAsset",_,o(t)),i(t,"enemiesNode",j,o(t)),i(t,"player",z,o(t)),t}n(t,e);var r=t.prototype;return r.start=function(){var e,t=this;u.Init(null==(e=this.jsonAsset)?void 0:e.json),p.Instance.load((function(){var e,n,i=t.node.getChildByName("player-tps-cct-pose");t.player=null==i?void 0:i.getComponent(v),y(),m.Instance.init(),h.Instance.init(),g.init(),null==(e=t.player)||e.init("data-player"),d.Instance._player=t.player,g.init();for(var o=null==(n=t.enemiesNode)?void 0:n.getComponentsInChildren(v),r=0;r<o.length;r++)o[r].init("data-enemy_0"),o[r].isReady=!0;f.stop=!1}))},r.update=function(e){},t}(c)).prototype,"jsonAsset",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(N.prototype,"enemiesNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(N.prototype,"player",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=N))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/test-stretched-billboard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./g-math.ts"],(function(e){var t,r,i,n,o,a,l,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Node,c=e.Component},null],execute:function(){var u,s,p,d,b,f,h,y;o._RF.push({},"786200QDZZLrKZ2Jid1u7ZT","test-stretched-billboard",void 0);var g=a.ccclass,m=a.property,v=a.executeInEditMode;e("TestStretchedBillboard",(u=g("TestStretchedBillboard"),s=m(l),p=m(l),u(d=v((f=t((b=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"target",f,n(t)),i(t,"current",h,n(t)),i(t,"updateTime",y,n(t)),t}r(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){},t}(c)).prototype,"target",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=t(b.prototype,"current",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(b.prototype,"updateTime",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),d=b))||d)||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/test-taa.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,a,r,i,n,o,s,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,s=t.Node,c=t.instantiate,p=t.Component}],execute:function(){var l,u,h,f,d;n._RF.push({},"dfd71p8wkJHMaSoDhEndP14","test-taa",void 0);var y=o.ccclass,v=o.property;t("test_taa",(l=y("test_taa"),u=v(s),l((d=e((f=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,r(e,"temp",d,i(e)),e}a(e,t);var n=e.prototype;return n.start=function(){this.temp&&(globalThis.test_taa=this)},n.create=function(){c(this.temp).parent=this.node.parent,this.node.active=!1},e}(p)).prototype,"temp",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=f))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/test-ui.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,n,i;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,i=t.Component}],execute:function(){var s;e._RF.push({},"6af18D6TbtNH6AYhK5mvjsZ","test-ui",void 0);var r=n.ccclass;n.property,t("test_ui",r("test_ui")(s=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.start=function(){console.log(this.node.name,this.node.position,this.node.worldPosition)},n.update=function(t){},e}(i))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/time-scale-hack.ts",["cc"],(function(e){var t,i,r,c;return{setters:[function(e){t=e.cclegacy,i=e.game,r=e.error,c=e.Director}],execute:function(){e("timeScale",(function(e){u().multiplier=e})),t._RF.push({},"f7881oBIF5ICJyPCccQwU9S","time-scale-hack",void 0);var n,u=function(){if(!n){var e={multiplier:1},t=c.prototype.tick;c.prototype.tick=function(i){for(var r=arguments.length,c=new Array(r>1?r-1:0),n=1;n<r;n++)c[n-1]=arguments[n];t.call.apply(t,[this,i*e.multiplier].concat(c))},n=e}return n};"__debugTickSlow"in globalThis||Object.defineProperty(globalThis,"__debugTickSlow",{value:function(e){if(i.isPaused()){var t=1/60*u().multiplier,c=e/t,n=Math.trunc(c),l=c-n,o=function(){return setTimeout((function(){return i.step()}),1e3*l)};if(0===n)o();else var a=setInterval((function(){i.step(),0===--n&&(clearInterval(a),o())}),1e3*t)}else r("You should pause to use __debugTickN()")}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/time-scale-ui.ts",["./rollupPluginModLoBabelHelpers.js","cc","./time-scale-hack.ts"],(function(e){var t,n,i,o,r,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,o=e.Slider,r=e.Component},function(e){c=e.timeScale}],execute:function(){var a;n._RF.push({},"00aa40ZCddN+IFcSF5x6VEW","time-scale-ui",void 0);var s=i.ccclass;i.property,e("TimeScaleUI",s("TimeScaleUI")(a=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var i=n.prototype;return i.start=function(){var e=this.node.getComponent(o);e&&this.onSliderValueChanged(e)},i.onSliderValueChanged=function(e){c(e.progress)},n}(r))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/touch-cancel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,c,o,u,r,i;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,c=n._decorator,o=n.Touch,u=n.EventTouch,r=n.Input,i=n.Component}],execute:function(){var s;e._RF.push({},"2fd681A8khCEJwwyPC7+nQn","touch-cancel",void 0);var a=c.ccclass;c.property,n("TouchCancel",a("TouchCancel")(s=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e.prototype.onDisable=function(){var n=new o(0,0,0),t=new u([n],!0,r.EventType.TOUCH_CANCEL);t.touch=n,this.node.dispatchEvent(t)},e}(i))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/ui-aim-range.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(t){var i,e,n,r,o,s;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,r=t.SpriteComponent,o=t.Component},function(t){s=t.Msg}],execute:function(){var a;e._RF.push({},"67693VFPHZJxozmdCVahxpU","ui-aim-range",void 0);var c=n.ccclass;n.property,t("UIAimRange",c("UIAimRange")(a=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(i=t.call.apply(t,[this].concat(n))||this).sprite=void 0,i.dirs=[[1,0],[0,1],[-1,0],[0,-1]],i.baseSize=10,i}i(e,t);var n=e.prototype;return n.start=function(){if(this.sprite=this.getComponent(r),void 0===this.sprite)throw new Error(this.node.name+" node UIAimRange can not find sprite component.");s.bind("msg_update_aim",this.updateAim,this),this.updateAim(0)},n.updateAim=function(t){for(var i=50*t+this.baseSize,e=0;e<this.node.children.length;e++){var n=this.node.children[e],r=this.dirs[e];n.setPosition(r[0]*i,r[1]*i,0)}},e}(o))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/ui-animation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,o,i,r,e;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,i=n._decorator,r=n.animation,e=n.Component}],execute:function(){var a;o._RF.push({},"351ecDBP0RMHrGz1xzrr0oK","ui-animation",void 0);var s=i.ccclass;i.property,n("ui_animation",s("UIAnimation")(a=function(n){function o(){for(var t,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(t=n.call.apply(n,[this].concat(i))||this)._graph=void 0,t}t(o,n);var i=o.prototype;return i.onEnable=function(){if(this._graph=this.getComponent(r.AnimationController),null===this._graph)throw new Error(this.node.name+" node can not find AnimationController.");this.node.on("set_anim",this.play,this)},i.play=function(n,t){this._graph.setValue(n,t)},o}(e))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/ui-auto-hidden.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,o,e,r,n,s,a,c,l,u,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.CCFloat,c=t.Color,l=t.SpriteComponent,u=t.math,h=t.Component}],execute:function(){var p,_,d,f,y,w,m;n._RF.push({},"136df29SN5J5KukUd6VJXVN","ui-auto-hidden",void 0);var v=s.ccclass,b=s.property;t("UiAutoHidden",(p=v("UiAutoHidden"),_=b(a),d=b(a),p((w=i((y=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this)._color_a=0,i._color=new c(255,255,255,0),e(i,"smooth",w,r(i)),e(i,"wait",m,r(i)),i._sprite=void 0,i._wait=3,i}o(i,t);var n=i.prototype;return n.__preload=function(){this._sprite=this.getComponent(l),this._sprite.color=this._color},n.onEnable=function(){this.setDisplay(255)},n.setDisplay=function(t){255===t&&(this._color.a=t,this._sprite.color=this._color,this._color_a=0),this._wait=this.wait},n.update=function(t){this._wait-=t,this._wait>0||(this._color.a=u.lerp(this._color.a,this._color_a,t*this.smooth),this._sprite.color=this._color,this._color.a<=.01&&(this.node.active=!1))},i}(h)).prototype,"smooth",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),m=i(y.prototype,"wait",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),f=y))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/ui-base.ts",["cc","./ui-bind.ts"],(function(t){var i,n;return{setters:[function(t){i=t.cclegacy},function(t){n=t.UIBind}],execute:function(){i._RF.push({},"cc094e8w7lEsq+Xg5atbhjQ","ui-base",void 0);t("UIBase",function(){function t(t){this.node=void 0,this.isOn=!1,this._map=Object.create(null),this.node=t,this._map=n.get(this.node)}var i=t.prototype;return i.refresh=function(){if(this.isOn)for(var t=0;t<this._map.length;t++)this._map[t].refresh()},i.on=function(){this.isOn=!0;for(var t=0;t<this._map.length;t++)this._map[t].on();this.node.active=!0},i.off=function(){this.isOn=!1;for(var t=0;t<this._map.length;t++)this._map[t].off();this.node.active=!1},i.destroy=function(){},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/ui-bind.ts",["cc","./bind.ts","./local-label.ts","./util2.ts"],(function(n){var i,t,e,a;return{setters:[function(n){i=n.cclegacy},function(n){t=n.Bind},function(n){e=n.LocalLabel},function(n){a=n.UtilNode}],execute:function(){i._RF.push({},"9dc3fa4tydP97VWKjhLpqZV","ui-bind",void 0),n("UIBind",function(){function n(){}return n.init=function(){},n.on=function(n,i){this._map[n]=i},n.get=function(n){for(var i=a.getChildren(n),c=[],u=0;u<i.length;u++){var o=i[u];if(o.name.includes("local_")&&o.addComponent(e),this._map[o.name]){var s=o.name;if(void 0!==this._map[s]){c.push(this._map[s](o));continue}}if(t.Instance.hasBind(o.name)){var r=o.name.slice(0,3),f=this._map[r];f&&c.push(f(o))}}return c},n}())._map={},i._RF.pop()}}}));

System.register("chunks:///_virtual/ui-blood-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res.ts","./ui-blood.ts","./msg.ts"],(function(t){var e,o,i,n,r,s,a,l,u,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Vec3,l=t.Component},function(t){u=t.Res},function(t){c=t.UIBlood},function(t){p=t.Msg}],execute:function(){var h,f,g;r._RF.push({},"d2092gQtkFKj58V4FIo3V7N","ui-blood-manager",void 0);var d=s.ccclass,v=s.property;t("UIBloodManager",d("UIBloodManager")((g=e((f=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"poolDeep",g,n(e)),e.list=[],e}o(e,t);var r=e.prototype;return r.start=function(){var t=this.node.children[0];t.active=!1;var e=t.getComponent(c);this.list.push(e);for(var o=1;o<this.poolDeep;o++){var i=u.instNode(t,this.node,a.ZERO).getComponent(c);this.list.push(i)}p.on("msg_show_hit_info",this.setBloodInfo.bind(this))},r.onDestroy=function(){p.off("msg_show_hit_info",this.setBloodInfo.bind(this))},r.setBloodInfo=function(t){for(var e,o=0;o<this.poolDeep;o++){var i=this.list[o];i.target==t.target&&(e=i)}(null!=e||(e=this.getNullTarget()))&&(e.node.active=!0,e.target=t.target,e.setHpPercent(t.hpPercent),e.setDamageValue(t.damageValue,t.hitPoint),t.isHead&&e.setHitHead())},r.getNullTarget=function(){for(var t=0;t<this.poolDeep;t++){var e=this.list[t];if(null==e.target)return e}},e}(l)).prototype,"poolDeep",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),h=f))||h);r._RF.pop()}}}));

System.register("chunks:///_virtual/ui-blood.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ui.ts","./fil-smooth.ts","./ui-hp-score.ts","./ui-hit-head.ts","./util2.ts","./camera-player.ts","./sound.ts","./fun.ts"],(function(e){var t,i,o,r,n,a,l,s,c,u,h,p,d,f,y,b,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,l=e.Node,s=e.v3,c=e.Component},function(e){u=e.UI},function(e){h=e.FilSmooth},function(e){p=e.UIHpScore},function(e){d=e.UIHitHead},function(e){f=e.UtilVec3},function(e){y=e.CameraPlayer},function(e){b=e.Sound},function(e){m=e.fun}],execute:function(){var g,w,v,P,H,T,z,I,N,V,S,U,_;n._RF.push({},"f0e348/3rhK8qXoRgV5NNp9","ui-blood",void 0);var D=a.ccclass,B=a.property;e("UIBlood",(g=D("UIBlood"),w=B({type:h}),v=B({type:l}),P=B({type:p}),H=B({type:d}),g((I=t((z=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,o(t,"target",I,r(t)),o(t,"hpView",N,r(t)),o(t,"hpNode",V,r(t)),o(t,"scores",S,r(t)),o(t,"hitHead",U,r(t)),o(t,"clearTime",_,r(t)),t.screenPos=s(0,0,0),t.worldPos=s(0,0,0),t}i(t,e);var n=t.prototype;return n.setTarget=function(e){this.target=e},n.setHpPercent=function(e){var t;this.hpNode.active=!1,this.hpNode.active=!0,null==(t=this.hpView)||t.setValue(e)},n.setDamageValue=function(e,t){var i;this.clearTime=3,null==(i=this.scores)||i.setScore(e,t)},n.setHitHead=function(){var e;null==(e=this.hitHead)||e.showHead(),m.delay((function(){b.on("sfx_hit_head")}),.05)},n.update=function(e){null!=this.target&&f.copy(this.worldPos,this.target.worldPosition);var t=y.camera;if(t){var i,o=u.Instance.camera;if(t.worldToScreen(this.worldPos,this.screenPos),o.screenToWorld(this.screenPos,this.worldPos),this.node.setWorldPosition(this.worldPos),this.clearTime-=e,this.clearTime<=0)this.target=void 0,null==(i=this.scores)||i.clear(),this.node.active=!1}},t}(c)).prototype,"target",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(z.prototype,"hpView",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(z.prototype,"hpNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(z.prototype,"scores",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(z.prototype,"hitHead",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(z.prototype,"clearTime",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=z))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/ui-com.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bind.ts","./sound.ts","./util2.ts","./g-math.ts","./msg.ts","./fil-smooth.ts","./ui-bind.ts"],(function(n){var t,e,o,i,r,s,l,u,a,c,f,d,p,h,_;return{setters:[function(n){t=n.inheritsLoose,e=n.assertThisInitialized},function(n){o=n.cclegacy,i=n.Button,r=n.Label,s=n.Slider,l=n.Sprite,u=n.Toggle},function(n){a=n.Bind},function(n){c=n.Sound},function(n){f=n.UtilNode},function(n){d=n.GMath},function(n){p=n.Msg},function(n){h=n.FilSmooth},function(n){_=n.UIBind}],execute:function(){o._RF.push({},"5c046p+PahMRYwQpzLKD93J","ui-com",void 0),_.on("btn",(function(n){return new m(n)})),_.on("txt",(function(n){return new v(n)})),_.on("grp",(function(n){return new C(n)})),_.on("spr",(function(n){return new B(n)})),_.on("sli",(function(n){return new y(n)})),_.on("tgl",(function(n){return new w(n)})),_.on("fil",(function(n){return new I(n)}));var g=n("UICom",function(){function n(n){this._node=void 0,this._node=n}var t=n.prototype;return t.on=function(){},t.off=function(){},t.refresh=function(){},n}()),m=n("BtnBase",function(n){function o(t){var o,r,s;(s=n.call(this,t)||this)._name="",s._btn=void 0;var l=e(s);return s._name=t.name,s._btn=null==(o=l._node)?void 0:o.getComponent(i),null==(r=s._node)||r.on(i.EventType.CLICK,(function(){a.Instance.on(l._name),c.on("sfx_click")}),e(s)),s}return t(o,n),o}(g)),v=n("TxtBase",function(n){function e(t){var e,o;return(o=n.call(this,t)||this).text=void 0,o.text=f.getComponent(o._node,r),o.text.string=a.Instance.get(null==(e=o._node)?void 0:e.name),o}t(e,n);var o=e.prototype;return o.on=function(){n.prototype.on.call(this),this.refresh()},o.refresh=function(){n.prototype.refresh.call(this),this.text.string=a.Instance.get(this._node.name)},e}(g)),y=n("SliBase",function(n){function o(t){var o,i;if((i=n.call(this,t)||this).slider=void 0,i.fill=void 0,i.slider=f.getComponent(i._node,s),i.fill=f.getChildComponent(i._node,"fill",l),i.fill.type!==l.Type.FILLED)throw new Error(i._node.name+" node Sprite not set Sprite.Type.FILLED");var r=a.Instance.get(i._node.name);return i.slider.progress=r,i.fill.fillRange=r,null==(o=i.slider)||o.node.on("slide",(function(){var n;i.fill.fillRange=d.range(1,0,i.slider.progress),p.emit(i._node.name,null==(n=i.slider)?void 0:n.progress)}),e(i)),i}return t(o,n),o.prototype.on=function(){n.prototype.on.call(this);var t=a.Instance.get(this._node.name);this.slider.progress=t,this.fill.fillRange=t},o}(g)),I=n("FilBase",function(n){function e(t){var e;return(e=n.call(this,t)||this).fil_value=void 0,e.fil_smooth=void 0,e.fil_value=f.getComponent(e._node,l),e.fil_value.fillRange=0,e.fil_smooth=e._node.addComponent(h),p.on(e._node.name,(function(n){e.fil_smooth.setValue(n)})),e}return t(e,n),e.prototype.on=function(){this.fil_value.fillRange=0},e}(g)),B=n("SprBase",function(n){function e(t){var e;return(e=n.call(this,t)||this).sprite=void 0,e.sprite=f.getComponent(e._node,l),p.on(e._node.name,(function(n){e.sprite.spriteFrame=n})),e}return t(e,n),e.prototype.on=function(){n.prototype.on.call(this);var t=a.Instance.get(this._node.name);this.sprite.spriteFrame=t},e}(g)),C=n("GrpBase",function(n){function e(t){return n.call(this,t)||this}return t(e,n),e}(g)),w=n("TglBase",function(n){function e(t){var e;return(e=n.call(this,t)||this)._toggle=void 0,e._toggle=f.getComponent(e._node,u),e._node.on(u.EventType.TOGGLE,(function(){a.Instance.on(e._node.name)})),e}return t(e,n),e}(g));o._RF.pop()}}}));

System.register("chunks:///_virtual/ui-display-by-state-auto-hidden.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ui-display-by-state.ts"],(function(t){var e,i,n,a,r,o,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator},function(t){s=t.UIDisplayByState}],execute:function(){var d,u,c;r._RF.push({},"88beeDVUAVBrpfti4Hsxq59","ui-display-by-state-auto-hidden",void 0);var l=o.ccclass,p=o.property;t("UIDisplayByStateAutoHidden",l("UIDisplayByStateAutoHidden")((c=e((u=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"hiddenTime",c,a(e)),e._hiddenTime=5,e}i(e,t);var r=e.prototype;return r.onChangeState=function(e){t.prototype.onChangeState.call(this,e),this._hiddenTime=this.hiddenTime},r.update=function(e){t.prototype.update.call(this,e),this._hiddenTime<0||(this._hiddenTime-=e,this._hiddenTime<0&&(this._color_a=0))},e}(s)).prototype,"hiddenTime",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),d=u))||d);r._RF.pop()}}}));

System.register("chunks:///_virtual/ui-display-by-state.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(t){var o,e,i,n,r,s,a,c,l,p,h,u;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.CCFloat,c=t.Color,l=t.SpriteComponent,p=t.math,h=t.Component},function(t){u=t.Msg}],execute:function(){var _,f,y,m,d;r._RF.push({},"bae6dR6zoNN3ozfjxYC0AV0","ui-display-by-state",void 0);var g=s.ccclass,C=s.property;t("UIDisplayByState",(_=g("UIDisplayByState"),f=C(a),_((d=o((m=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return(o=t.call.apply(t,[this].concat(r))||this)._color_a=0,o._color=new c(0,0,0,0),i(o,"smooth",d,n(o)),o._sprite=void 0,o}e(o,t);var r=o.prototype;return r.start=function(){this._sprite=this.getComponent(l),u.bind("msg_"+this.node.name,this.onChangeState,this)},r.onDestroy=function(){u.off("msg_"+this.node.name,this.onChangeState)},r.onChangeState=function(t){this._color_a=t},r.update=function(t){this._color.a=p.lerp(this._color.a,this._color_a,t*this.smooth),this._sprite.color=this._color},o}(h)).prototype,"smooth",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),y=m))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/ui-enable-play-anim.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var a,t,i,e,o;return{setters:[function(n){a=n.inheritsLoose},function(n){t=n.cclegacy,i=n._decorator,e=n.animation,o=n.Component}],execute:function(){var r;t._RF.push({},"32365YaXqJA2JXwB0O6kMAm","ui-enable-play-anim",void 0);var l=i.ccclass;i.property,n("UIEnablePlayAnimation",l("UIEnablePlayAnimation")(r=function(n){function t(){for(var a,t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return(a=n.call.apply(n,[this].concat(i))||this)._animationGraph=void 0,a}return a(t,n),t.prototype.onEnable=function(){var n;this._animationGraph||(this._animationGraph=this.getComponent(e.AnimationController)),null==(n=this._animationGraph)||n.setValue("trigger_replay",!0)},t}(o))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/ui-enable-play-animation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,a,i,o,e;return{setters:[function(n){t=n.inheritsLoose},function(n){a=n.cclegacy,i=n._decorator,o=n.Animation,e=n.Component}],execute:function(){var l;a._RF.push({},"eaa4558aLdN1oUip5tLSnpH","ui-enable-play-animation",void 0);var r=i.ccclass;i.property,n("UIEnablePlayAnimation",r("UIEnablePlayAnimation")(l=function(n){function a(){for(var t,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=n.call.apply(n,[this].concat(i))||this)._anim=void 0,t}return t(a,n),a.prototype.onEnable=function(){var n,t;this._anim||(this._anim=this.getComponent(o)),null==(n=this._anim)||n.stop(),null==(t=this._anim)||t.play()},a}(e))||l);a._RF.pop()}}}));

System.register("chunks:///_virtual/ui-enable-play.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fun.ts"],(function(t){var n,e,i,a,o,r,l,p,s,u,c,b;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.Animation,p=t.SpriteComponent,s=t.Color,u=t.Button,c=t.Component},function(t){b=t.fun}],execute:function(){var y,d,f,m,h;o._RF.push({},"afa4eXY8ZVEh7JzvyiB3Q5L","ui-enable-play",void 0);var v=r.ccclass,g=r.property;t("UIEnablePlay",v("UIEnablePlay")((f=n((d=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return n=t.call.apply(t,[this].concat(o))||this,i(n,"speed",f,a(n)),i(n,"delay_time",m,a(n)),i(n,"enable_opacity",h,a(n)),n.animation=void 0,n.btn=void 0,n}return e(n,t),n.prototype.onEnable=function(){var t=this;void 0===this.animation&&(this.animation=this.getComponent(l)),this.animation.stop(),this.enable_opacity&&(this.node.getComponent(p).color=new s(1,1,1,0)),void 0===this.btn&&(this.btn=this.getComponent(u)),this.btn&&(this.btn.enabled=!1),b.delay((function(){var n;t.animation&&null!=(n=t.animation)&&n.defaultClip&&(t.animation.defaultClip.speed=t.speed,t.animation.stop(),t.animation.play())}),this.delay_time),b.delay((function(){t.btn&&(t.btn.enabled=!0)}),.5)},n}(c)).prototype,"speed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=n(d.prototype,"delay_time",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=n(d.prototype,"enable_opacity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=d))||y);o._RF.pop()}}}));

System.register("chunks:///_virtual/ui-fadein.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,i,o,a,l,c,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Color,c=t.SpriteComponent,s=t.tween,u=t.Component}],execute:function(){var p,f,d,h,b,y,C;o._RF.push({},"2b34ac+NWpHqYriJPd3WqwM","ui-fadein",void 0);var w=a.ccclass,m=a.property,v=(t("UIFadeIn",(p=w("UIFadeIn"),f=m(l),p((b=e((h=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"time",b,i(e)),n(e,"startColor",y,i(e)),n(e,"endColor",C,i(e)),e._sprite=Object.create(null),e}r(e,t);var o=e.prototype;return o.onEnable=function(){this.tweenUpdateColor()},o.tweenUpdateColor=function(){null===this._sprite&&(this._sprite=this.getComponent(c));var t=new v;this._sprite.color=this.startColor,s(t).by(this.time,{color:this.endColor},{onUpdate:function(t){this._sprite.color=t}}).start()},o.update=function(t){},e}(u)).prototype,"time",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=e(h.prototype,"startColor",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),C=e(h.prototype,"endColor",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),d=h))||d)),function(){this.color=void 0});o._RF.pop()}}}));

System.register("chunks:///_virtual/ui-fx.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(n){var t,i,e,o,r;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy,e=n._decorator,o=n.Component},function(n){r=n.Msg}],execute:function(){var c;i._RF.push({},"6223eY6BH5Hro5ZLuCoJkOw","ui-fx",void 0);var s=e.ccclass;e.property,n("UIFx",s("UIFx")(c=function(n){function i(){for(var t,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(t=n.call.apply(n,[this].concat(e))||this).map={},t}t(i,n);var e=i.prototype;return e.start=function(){for(var n=0;n<this.node.children.length;n++){var t=this.node.children[n];this.map[t.name]=t}r.on("msg_ui_fx_open",this.open.bind(this)),r.on("msg_ui_fx_close",this.close.bind(this))},e.open=function(n){var t=this.map[n];void 0!==t&&(t.active=!0)},e.close=function(n){var t=this.map[n];void 0!==t&&(t.active=!1)},e.onDisable=function(){this.clear(),this.node.children[3].emit("clear")},e.clear=function(){for(var n=0;n<3;n++)this.node.children[n].active=!1},i}(o))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/ui-grp-picked-tips.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"c341f1ZYuZHII2xh06oeTtu","ui-grp-picked-tips",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ui-guide-platform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./save.ts","./msg.ts"],(function(e){var t,r,i,s,o,n,a,p,l,u,c,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){o=e.cclegacy,n=e._decorator,a=e.SpriteFrame,p=e.Sprite,l=e.sys,u=e.Component},function(e){c=e.Save},function(e){f=e.Msg}],execute:function(){var h,d,m,g,y,S,b;o._RF.push({},"afcf2Ysp4tC4bctyRG1y23d","ui-guide-platform",void 0);var v=n.ccclass,I=n.property;e("UIGuidePlatform",(h=v("UIGuidePlatform"),d=I({type:[a]}),m=I({type:p}),h((S=t((y=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,i(t,"guideSprites",S,s(t)),i(t,"sprite",b,s(t)),t}r(t,e);var o=t.prototype;return o.start=function(){f.on("refresh_local",this.refresh.bind(this)),this.refresh()},o.onDestroy=function(){f.off("refresh_local",this.refresh.bind(this))},o.refresh=function(){var e=0==c.Instance._cur.languageIndex?0:2;l.platform===l.Platform.MOBILE_BROWSER||l.platform===l.Platform.ANDROID||l.platform===l.Platform.IOS?this.sprite.spriteFrame=this.guideSprites[e+1]:this.sprite.spriteFrame=this.guideSprites[e+0],this.sprite.sizeMode=p.SizeMode.RAW},t}(u)).prototype,"guideSprites",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=t(y.prototype,"sprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=y))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/ui-hit-head.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res.ts"],(function(e){var t,i,n,o,r,s,a,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Vec3,c=e.Component},function(e){l=e.Res}],execute:function(){var p,u,h;r._RF.push({},"b251bzF8yZL0bgtR3JXAu3s","ui-hit-head",void 0);var d=s.ccclass,v=s.property;e("UIHitHead",d("UIHitHead")((h=t((u=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"poolDeep",h,o(t)),t.list=[],t.index=0,t}i(t,e);var r=t.prototype;return r.onLoad=function(){var e=this.node.children[0];e.active=!1,this.list.push(e);for(var t=1;t<this.poolDeep;t++){var i=l.instNode(e,this.node,a.ZERO);this.list.push(i)}},r.showHead=function(){var e=this.list[this.index];e.active&&(e.active=!1),e.active=!0,this.index++,this.index>=this.poolDeep&&(this.index=0)},t}(c)).prototype,"poolDeep",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),p=u))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/ui-hp-score.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res.ts","./ui.ts","./camera-player.ts"],(function(e){var t,i,r,o,s,n,c,a,l,p,u,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,n=e._decorator,c=e.v3,a=e.Vec3,l=e.Component},function(e){p=e.Res},function(e){u=e.UI},function(e){h=e.CameraPlayer}],execute:function(){var d,f,v;s._RF.push({},"7590enpZ0lAxKOzTcLaBNs7","ui-hp-score",void 0);var y=n.ccclass,P=n.property;e("UIHpScore",y("UIHpScore")((v=t((f=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return t=e.call.apply(e,[this].concat(s))||this,r(t,"poolDeep",v,o(t)),t.list=[],t.index=0,t.screenPos=c(0,0,0),t.worldPos=c(0,0,0),t}i(t,e);var s=t.prototype;return s.onLoad=function(){var e=this.node.children[0];e.active=!1,this.list.push(e);for(var t=1;t<this.poolDeep;t++){var i=p.instNode(e,this.node,a.ZERO);this.list.push(i)}},s.setScore=function(e,t){var i=this.list[this.index];i.active=!0,i.emit("set_score",e);var r=h.camera;if(r){var o=u.Instance.camera;r.worldToScreen(t,this.screenPos),o.screenToWorld(this.screenPos,this.worldPos),i.setWorldPosition(this.worldPos),this.index++,this.index>=this.poolDeep&&(this.index=0)}},s.clear=function(){for(var e=0;e<this.poolDeep;e++){this.list[e].active=!1}},t}(l)).prototype,"poolDeep",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),d=f))||d);s._RF.pop()}}}));

System.register("chunks:///_virtual/ui-loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts","./data-core.ts","./fun.ts"],(function(t){var i,n,e,a,o,r,s,c,u,l,h,d,g;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Label,c=t.Sprite,u=t.math,l=t.Component},function(t){h=t.Msg},function(t){d=t.DataGameInst},function(t){g=t.fun}],execute:function(){var p,_,f,L,m,v,w;o._RF.push({},"ece98FSjSJAsp9adTbaY7eK","ui-loading",void 0);var b=r.ccclass,y=r.property;t("UILoading",(p=b("UILoading"),_=y(s),f=y(c),p((v=i((m=function(t){function i(){for(var i,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=t.call.apply(t,[this].concat(o))||this,e(i,"txtLoading",v,a(i)),e(i,"img_loading_bar",w,a(i)),i._percent=0,i._realPercent=0,i.waitList={},i.viewNode=void 0,i.count=0,i.wait_count=0,i.current_msg="",i.isLoading=!1,i}n(i,t);var o=i.prototype;return o.start=function(){h.on("msg_loading",this.onWaitList.bind(this)),this.viewNode=this.node.children[0]},o.onWaitList=function(t){this.waitList[t.id]=t,this.isLoading=!0,this.viewNode.active=!0,this._percent=0},o.update=function(t){this.isLoading&&(this.calculateLoading(),this._percent=u.lerp(this._percent,this._realPercent,t),this.txtLoading.string=this.current_msg,this.img_loading_bar.fillRange=this._percent,this._percent>=.9999&&this.onLoadFinished())},o.onLoadFinished=function(){var t=this;"menu"===d._currentGameNodeName&&h.emit("msg_play_animation"),g.delay((function(){t.isLoading=!1,t.viewNode.active=!1}),.1)},o.calculateLoading=function(){for(var t in this.count=0,this.wait_count=0,this.waitList){var i=this.waitList[t];this.count+=i.count,this.wait_count+=i.wait_count}this._realPercent=(this.count-this.wait_count)/this.count},i}(l)).prototype,"txtLoading",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=i(m.prototype,"img_loading_bar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=m))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/ui-move-show.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,o,n,r,s,h,c,u,l,p,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,h=e.Color,c=e.input,u=e.Input,l=e.SpriteComponent,p=e.Button,a=e.Component}],execute:function(){var _,d,f,v,m;r._RF.push({},"d9580+5+wlJj7S9RtWzYGa4","ui-move-show",void 0);var T=s.ccclass,M=s.property;e("UIMoveShow",T("UIMoveShow")((f=t((d=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,o(t,"hiddenTime",f,n(t)),o(t,"showSpeed",v,n(t)),o(t,"hiddenSpeed",m,n(t)),t._curTime=0,t._sprite=void 0,t._color=new h(255,255,255,0),t._a=0,t._btn=void 0,t}i(t,e);var r=t.prototype;return r.start=function(){c.on(u.EventType.MOUSE_MOVE,this.onMouseMove,this),c.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this),this._sprite=this.getComponent(l),this._sprite.color=this._color,this._curTime=this.hiddenTime,this._btn=this.getComponent(p)},r.onDestroy=function(){c.off(u.EventType.MOUSE_MOVE,this.onMouseMove,this),c.off(u.EventType.TOUCH_MOVE,this.onTouchMove,this)},r.onMouseMove=function(e){this._curTime=0},r.onTouchMove=function(e){this._curTime=0},r.update=function(e){if(this._curTime+=e,this._curTime>this.hiddenTime){if(this._color.a>0){var t=e*this.hiddenSpeed;this._color.a-=t,this._sprite.color=this._color.clone(),this._btn.enabled=!1}}else if(this._color.a<255){t=e*this.showSpeed;this._color.a+=t,this._sprite.color=this._color.clone(),this._btn.enabled=!0}},t}(a)).prototype,"hiddenTime",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=t(d.prototype,"showSpeed",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),m=t(d.prototype,"hiddenSpeed",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),_=d))||_);r._RF.pop()}}}));

System.register("chunks:///_virtual/ui-play-anim.ts",["./rollupPluginModLoBabelHelpers.js","cc","./msg.ts"],(function(t){var i,n,o,r,e,s,a,l,p,c,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){e=t.cclegacy,s=t._decorator,a=t.Color,l=t.Animation,p=t.SpriteComponent,c=t.Component},function(t){u=t.Msg}],execute:function(){var h,m,y;e._RF.push({},"2612btWqYlGQ5v7AIWNr0ew","ui-play-anim",void 0);var f=s.ccclass,g=s.property;t("UIPlayAnim",f("UIPlayAnim")((y=i((m=function(t){function i(){for(var i,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return(i=t.call.apply(t,[this].concat(e))||this).anim=void 0,o(i,"msg",y,r(i)),i.sprite=void 0,i.spriteColor=new a(255,255,255,255),i}n(i,t);var e=i.prototype;return e.start=function(){this.anim=this.getComponent(l),u.on(this.msg,this.play.bind(this))},e.onDestroy=function(){u.off(this.msg,this.play.bind(this))},e.onEnable=function(){var t;null==(t=this.anim)||t.stop(),null==this.sprite&&(this.sprite=this.getComponent(p)),this.spriteColor.a=255,this.sprite.color=this.spriteColor},e.play=function(){var t,i;null==(t=this.anim)||t.stop(),null==(i=this.anim)||i.play()},i}(c)).prototype,"msg",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"msg"}}),h=m))||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/ui-roller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util2.ts"],(function(i){var t,o,e,n,r,s,l,a,c;return{setters:[function(i){t=i.applyDecoratedDescriptor,o=i.inheritsLoose,e=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){r=i.cclegacy,s=i._decorator,l=i.v3,a=i.Component},function(i){c=i.UtilVec3}],execute:function(){var p,u,h,_;r._RF.push({},"4b419FOYZtB3aVthaUrBynt","ui-roller",void 0);var f=s.ccclass,y=s.property;i("ui_roller",f("ui_roller")((h=t((u=function(i){function t(){for(var t,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(t=i.call.apply(i,[this].concat(r))||this)._orignal=void 0,e(t,"final",h,n(t)),e(t,"speed",_,n(t)),t._pos=l(0,0,0),t}o(t,i);var r=t.prototype;return r.start=function(){},r.onEnable=function(){void 0===this._orignal&&(this._orignal=this.node.position.clone()),this.node.setPosition(this._orignal.x,this._orignal.y,this._orignal.z),c.copy(this._pos,this._orignal)},r.update=function(i){this._pos.y<this.final.y&&(this._pos.y+=i*this.speed,this.node.setPosition(this._pos.x,this._pos.y,this._pos.z))},t}(a)).prototype,"final",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l(0,0,0)}}),_=t(u.prototype,"speed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),p=u))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/ui-score.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,o,r,n,s,c,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,c=e.Label,a=e.Component}],execute:function(){var l,u,p,h,f;n._RF.push({},"0a630khnqNAOa09fNyNU07B","ui-score",void 0);var y=s.ccclass,d=s.property;e("ui_score",(l=y("ui_score"),u=d({type:c}),l((f=t((h=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,o(t,"label",f,r(t)),t.time=2,t}i(t,e);var n=t.prototype;return n.onLoad=function(){this.node.on("set_score",this.setScore,this)},n.onDestroy=function(){this.node.off("set_score",this.setScore,this)},n.setScore=function(e){this.time=2,this.label.string=e},n.update=function(e){this.time-=e,this.time<0&&(this.node.active=!1)},t}(a)).prototype,"label",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=h))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/ui-svc-reset-pos.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fun.ts"],(function(e){var t,n,o,r,i,a,l,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.Layout,s=e.Component},function(e){c=e.fun}],execute:function(){var u,p,f;i._RF.push({},"b37d0R9lelPkovonSTkJ/wx","ui-svc-reset-pos",void 0);var y=a.ccclass,d=a.property;e("UIScrollViewResetPos",y("UIScrollViewResetPos")((f=t((p=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"delay",f,r(t)),t}return n(t,e),t.prototype.onEnable=function(){var e=this;c.delay((function(){var t=e.node.getComponent(l);t.enabled=!1,t.enabled=!0}),this.delay)},t}(s)).prototype,"delay",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),u=p))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/ui.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts","./log.ts","./ui-base.ts","./res.ts","./msg.ts","./util2.ts","./data-core.ts","./res-cache.ts","./fun.ts"],(function(n){var t,o,e,i,a,s,r,c,u,f,l,h,d,p,v;return{setters:[function(n){t=n.inheritsLoose,o=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){i=n.cclegacy,a=n.find,s=n.Camera},function(n){r=n.Singleton},function(n){c=n.Log},function(n){u=n.UIBase},function(n){f=n.Res},function(n){l=n.Msg},function(n){h=n.UtilNode},function(n){d=n.DataGameInst},function(n){p=n.ResCache},function(n){v=n.fun}],execute:function(){i._RF.push({},"d43b4aUQulCsZMavo7g1FoR","ui",void 0);n("UI",function(n){function i(){for(var t,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(t=n.call.apply(n,[this].concat(e))||this)._map={},t.node=void 0,t.panelRoot=void 0,t.camera=void 0,t}t(i,n);var r=i.prototype;return r.init=function(){var n,t;if(this.node=a("init/canvas"),this.panelRoot=h.getChildByName(this.node,"panels"),void 0===this.node||null==this.node)throw new Error("can not find canvas ui root.");l.on("refresh_ui",this.refresh.bind(this)),l.on("msg_ui_on",this.on.bind(this)),l.on("msg_ui_off",this.off.bind(this));for(var o=d._data.ui_cache_list,e=0;e<o.length;e++)this.load(o[e]);this.camera=null==(n=this.node)||null==(t=n.getChildByName("Camera"))?void 0:t.getComponent(s)},r.refresh=function(){for(var n in this._map)this._map[n].refresh()},r.load=function(n){var t=this,o=p.Instance.getPrefab(n);if(o){var e=f.inst(o,i.Instance.panelRoot),a=d._data.ui_order[n];e.setPosition(0,0,a);for(var s=!1,r=i.Instance.panelRoot.children.length,l=1;l<r;l++){if(this.panelRoot.children[l].position.z>a){var h=l;e.setSiblingIndex(h),s=!0;break}}s||e.setSiblingIndex(r);var g=new u(e);g.on(),this._map[n]=g,v.delay((function(){"ui_logo"!=n&&t._map[n].off()}),.05)}else c.warn("Can not load res : "+n)},r.on=function(n){var t=this;(function(){var a=o(e().mark((function o(){var a;return e().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:(a=t._map[n])?a.on():f.loadPrefab("ui/"+n,(function(o,e){if(e){var a=f.inst(e,i.Instance.panelRoot),s=d._data.ui_order[n];a.setPosition(0,0,s);for(var r=!1,l=i.Instance.panelRoot.children.length,h=1;h<l;h++){if(t.panelRoot.children[h].position.z>s){var p=h;a.setSiblingIndex(p),r=!0;break}}r||a.setSiblingIndex(l);var v=new u(a);v.on(),t._map[n]=v}else c.warn("Can not load res : "+n)}));case 2:case"end":return o.stop()}}),o)})));return function(){return a.apply(this,arguments)}})()()},r.off=function(n){var t=this._map[n];t&&t.off()},r.destroy=function(n){var t=this._map[n];t?(t.destroy(),this._map[n]=void 0):c.warn("You want destroy a ui object that does not exist. - "+n)},i}(r));i._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("isDefined",(function(t){return null!=t})),e._RF.push({},"772fb+2AwdKJIgYVaqQJfSr","util",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/util2.ts",["cc"],(function(n){var t,e,r,o,i,a,u,c,l,f,d,v,s;return{setters:[function(n){t=n.cclegacy,e=n._decorator,r=n.Quat,o=n.v3,i=n.geometry,a=n.Mat4,u=n.quat,c=n.randomRangeInt,l=n.MeshRenderer,f=n.director,d=n.Color,v=n.Vec3,s=n.PhysicsSystem}],execute:function(){n({Const:void 0,Gizmo:void 0,UtilActor:void 0,UtilTmp:void 0,waitFor:function(n){return new Promise((function(t){setTimeout((function(){t()}),1e3*n)}))}}),t._RF.push({},"95cd1rb+2NMubrAy5DIVXcl","util",void 0);e.ccclass,e.property;var h=n("Util",function(){function n(){}return n.deltaLimit=function(n,t,e,r,o){return(n+=t*e)<r&&(n=r),n>o&&(n=o),n},n.calculateMaxBounders=function(n){for(var t=0,e=0,r=0;r<n.length;r++)if(n[r].node.active){var o=n[r].model.worldBounds.halfExtents.x*n[r].node.scale.x;o>t&&(t=o);var i=n[r].model.worldBounds.halfExtents.y*n[r].node.scale.y;i>e&&(e=i)}return{x:t,y:e,max:t>e?t:e}},n.calculateMask=function(n){for(var t=0,e=0;e<n.length;e++)t|=1<<n[e];return t},n.deepCopy=function(n){return JSON.parse(JSON.stringify(n))},n}()),y=(n("UtilStr",function(){function n(){}return n.equal=function(n,t){for(var e=t.length,r=0;r<e;r++){if(n===t[r])return!0}return!1},n.include=function(n,t){for(var e=t.length,r=0;r<e;r++){var o=t[r];if(n.includes(o))return!0}return!1},n.selectFromItems=function(n,t){void 0===t&&(t=-1);var e=-1===t?n.length:t;return n[c(0,e)]},n}()),n("UtilMaterial",function(){function n(){}return n.setColor=function(n,t){var e,r=n.getComponent(l);null==r||null==(e=r.material)||e.setProperty("mainColor",t)},n}()),n("UtilVec3",function(){function n(){}return n.deltaLimit=function(n,t,e,r,o){n.x=h.deltaLimit(n.x,t.x,e,r.x,o.y),n.y=h.deltaLimit(n.y,t.y,e,r.y,o.y),n.z=h.deltaLimit(n.z,t.z,e,r.z,o.z)},n.copy=function(n,t){n.x=t.x,n.y=t.y,n.z=t.z},n.scaleDirection=function(n,t,e){n.x+=t.x*e,n.y+=t.y*e,n.z+=t.z*e},n.clampMagnitude=function(n,t){n.length()>t&&n.normalize().multiplyScalar(t)},n}()),n("UtilVec2",function(){function n(){}return n.deltaLimit=function(n,t,e,r,o){n.x=h.deltaLimit(n.x,t.x,e,r.x,o.y),n.y=h.deltaLimit(n.y,t.y,e,r.y,o.y)},n.c=function(n,t){n.x=t.x,n.y=t.y},n}()),n("UtilArray",function(){function n(){}return n.remove=function(n,t){var e=n.indexOf(t,0);-1!==e&&n.splice(e,0)},n.init=function(n,t){void 0===t&&(t=0);for(var e=[],r=0;r<n;r++)e.push(t);return e},n.init_3=function(n,t,e){for(var r=[],o=0;o<n;o++){for(var i=[],a=0;a<t;a++){for(var u=[],c=0;c<e;c++)u.push(0);i.push(u)}r.push(i)}return r},n.reset_3=function(n,t){void 0===t&&(t=0);for(var e=n.length,r=n[0].length,o=n[0][0].length,i=0;i<e;i++)for(var a=0;a<r;a++)for(var u=0;u<o;u++)n[i][a][u]=t},n.addArray=function(n,t){for(var e=0;e<t.length;e++)n.push(t[e])},n}()),n("UtilNode",function(){function n(){}return n.getChildByName=function(n,t){var e=n.getChildByName(t);if(null===e)throw new Error(n.name+" node children not find '"+t+"'");return e},n.getComponent=function(n,t){var e=n.getComponent(t);if(null===e)throw new Error(n.name+" node not find '"+name+"'");return e},n.getChildComponent=function(n,t,e){var r=this.getChildByName(n,t);return this.getComponent(r,e)},n.getChildren=function(n){var t=[];return function n(e){t.push(e),e.children.forEach((function(t){t.children&&n(t)}))}(n),t},n.find=function(n,t){var e=Object.create(null),r=function n(t,r){t.name!==r?t.children.forEach((function(t){t.children&&n(t,r)})):e=t};return r(n,t),e},n.getChildrenByNameBlur=function(n,t){var e={};return function n(r){r.name.concat(t)&&(e[r.name]=r),e[r.name]=r,r.children.forEach((function(t){t.children&&n(t)}))}(n),e},n.getParentComponent=function(n,t){if(null!==n){var e=null==n?void 0:n.getComponent(t);return null!==e?e:this.getParentComponent(n.parent,t)}},n.getWorldEulerAngles=function(n){return n.getWorldRotation(this._worldRotation),this._worldRotation.getEulerAngles(this._angle),this._angle},n}()));y._worldRotation=new r,y._angle=o(0,0,0);n("UtilLog",function(){function n(){}return n.children=function(n){var t=n.name+":"+n.children.length+":";n.children.forEach((function(n){t+=n.name+","})),console.log(t)},n}());var g;n("UtilCurve",function(){function n(){}return n.Bezier=function(n,t){n.length},n.ParaCurve=function(n,t,e,r,o,i,a,u,c){for(var l=[],f=Math.sqrt(2*n/u)/c,d=0,v=0;v<=c;v++){var s=o*d+t,h=a*d+r,y=i*d-.5*u*d*d+e;l.push(s),l.push(y),l.push(h),d+=f}return l},n.ParaCurveByDir=function(n,t,e,r,o,i,a,u,c,l,f,d){for(var v=[],s=Math.sqrt(2*n/u)/d,h=0,y=0;y<=d;y++){var g=o*h+t,m=a*h+r,p=i*h-.5*u*h*h+e;v.push(g*c),v.push(p*l),v.push(m*f),h+=s}return v},n}()),n("UtilRandom",function(){function n(){}return n.pos=function(n,t,e,r){void 0===r&&(r=1e3);var i=o(0,0,0);return i.x=n.range(t.x,e.x)/r,i.y=n.range(t.y,e.y)/r,i.z=n.range(t.z,e.z)/r,i},n.angle=function(n,t,e){var r=o(0,0,0);return r.x=n.range(t.x,e.x),r.y=n.range(t.y,e.y),r.z=n.range(t.z,e.z),r},n.scale=function(n,t,e,r){void 0===r&&(r=1e3);var i=o(0,0,0);return i.x=n.range(t.x,e.x)/r,i.y=n.range(t.y,e.y)/r,i.z=n.range(t.z,e.z)/r,i},n}());!function(n){var t,e=o(0,0,0),r=o(0,0,0),a=!0;function u(){if(!a){var n,e=void 0;if(e=t)return e.initGeometryRenderer(),e&&e.geometryRenderer||(null==(n=f.root)?void 0:n.pipeline.geometryRenderer)}}n.SetState=function(){a=!a},n.setCamera=function(n){t=n.camera},n.getGeometryRender=u,n.drawLine=function(n,t,e){void 0===e&&(e=d.GREEN);var r=u();r&&(null==r||r.addLine(n,t,e,void 0))},n.drawLineDirection=function(n,t,o,i){void 0===o&&(o=1),void 0===i&&(i=d.GREEN),v.copy(e,n),v.copy(r,t),r.multiplyScalar(o),e.add(r);var a=u();a&&(null==a||a.addLine(n,e,i,!1))},n.drawCircle=function(n,t,e){void 0===e&&(e=d.YELLOW);var r=u();r&&(null==r||r.addCircle(n,t,e,10,!0,void 0,void 0))},n.drawBox=function(n,t,e){void 0===e&&(e=d.BLUE);var r=u();if(r){var o=new i.AABB(n.x,n.y,n.z,t.x,t.y,t.z);null==r||r.addBoundingBox(o,e,!0,!1)}},n.drawCapsule=function(n,t,r,o,i){void 0===i&&(i=d.GREEN);var a=u();a&&(v.copy(e,n),e.add(t),a.addCapsule(e,r,o,i,12,4,!0,!1))},n.drawSphere=function(n,t,r){void 0===r&&(r=d.GREEN);var o=u();o&&(v.copy(e,n),o.addSphere(n,t,r,4,4))}}(g||(g=n("Gizmo",{})));var m,p,x,w,C;n("UtilTime",function(){function n(){}return n.toHours=function(n){return Math.ceil(n/3600)},n.yearMonth=function(){var n=new Date,t=n.getFullYear().toString(),e=n.getMonth().toString();e.length<2&&(e="0"+e);var r=n.getDate().toString();return r.length<2&&(r="0"+r),t+"."+e+"."+r+":"+n.getHours().toString()},n.timeStamp=function(){return Date.parse((new Date).toString())},n}());!function(n){o(0,0,0);var t,e=new r(0,0,0,1),a=o(0,-1,0),u=o(0,0,0);n.calculateSlope=function(n,o,c,l){if(void 0===c&&(c=.3),void 0===l&&(l=1),null==t&&(t=new i.Ray),v.copy(t.o,n.worldPosition),v.copy(t.d,a),s.instance.raycastClosest(t,l,c)){var f=s.instance.raycastClosestResult;r.rotationTo(e,v.UP,f.hitNormal),v.transformQuat(u,o,e),v.copy(o,u)}}}(m||(m=n("UtilActor",{}))),(x=p||(p=n("UtilTmp",{}))).Ray=new i.Ray,x.V3_0=o(0,0,0),x.V3_1=o(0,0,0),x.V3_2=o(0,0,0),x.Quat_0=new r,x.Quat_1=new r,x.Quat_2=new r,x.Mat4_0=new a,x.Mat4_1=new a,x.Mat4_2=new a,(C=w||(w=n("Const",{}))).V3Up=o(0,1,0),C.V3Down=o(0,-1,0),C.V3Left=o(-1,0,0),C.V3Right=o(1,0,0),C.V3Forward=o(0,0,-1),C.V3Back=o(0,0,1),C.QUAT0=u(0,0,0,1),t._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc"],(function(t){var e,r,a;return{setters:[function(t){e=t.cclegacy,r=t.director,a=t.gfx}],execute:function(){t("packCubemapAtlas",(function(t){for(var e=r.root.device,u=Math.min(e.capabilities.maxTextureSize,4096),o=0,n=0,s=[],f=[],h=8,c=0;c<t.length;c++)h=Math.min(h,t[c].mipmapAtlas.layout.length);for(var p=[],l=0;l<h;l++){for(var x=0,m=0,v=0,T=0;T<t.length;T++){var g=t[T];g.mipmapAtlas.layout;var d=g.mipmaps[l],y=6*d.front.width,w=d.front.height;v=Math.max(w,v),x+y>u&&(m+=v,x=0,v=0),p.push([x,m,y,w]);for(var A=0;A<i.length;A++){var M=d[i[A]];s.push(M.data),f.push(new a.BufferTextureCopy(void 0,void 0,M.height,new a.Offset(x,m),new a.Extent(M.width,M.height),new a.TextureSubresLayers(l))),x+=M.width}}0===l&&(o=x,n=m+v)}p.forEach((function(t){t[0]=t[0]/o,t[1]=t[1]/n,t[2]=t[2]/o,t[3]=t[3]/n}));var b=e.createTexture(new a.TextureInfo(a.TextureType.TEX2D,a.TextureUsageBit.SAMPLED|a.TextureUsageBit.TRANSFER_DST,a.Format.RGBA8,o,n,a.TextureFlagBit.GEN_MIPMAP,void 0,h));return e.copyTexImagesToTexture(s,b,f),{texture:b,cubemaps:t,offsets:p}})),e._RF.push({},"68af6kyIXBF/aMlp33lZRPZ","utils",void 0);var i=["right","left","top","bottom","front","back"];e._RF.pop()}}}));

System.register("chunks:///_virtual/utils2.ts",["cc"],(function(e){var t,i,r,n,s,o,a,h;return{setters:[function(e){t=e.cclegacy,i=e.geometry,r=e.gfx,n=e.rendering,s=e.renderer,o=e.utils,a=e.Vec3,h=e.director}],execute:function(){e({SRGBToLinear:function(e,t){e.x=t.x*t.x,e.y=t.y*t.y,e.z=t.z*t.z},getCameraUniqueID:function(e){T.includes(e)||T.push(e);return e.name+"_"+T.indexOf(e)},getLoadOpOfClearFlag:function(e,t){var i=d.CLEAR;e&l.COLOR||t!==p.RENDER_TARGET||(i=e&v?d.CLEAR:d.LOAD);(e&l.DEPTH_STENCIL)!==l.DEPTH_STENCIL&&t===p.DEPTH_STENCIL&&(e&l.DEPTH||(i=d.LOAD),e&l.STENCIL||(i=d.LOAD));return i},getQuadIA:function(){if(!y){var e=h.root.pipeline.device,t=x();y=e.createInputAssembler(t.renderingSubMeshes[0].iaInfo)}return y},getQuadMesh:x,getRenderArea:function(e,t,i,r,n,s){void 0===n&&(n=null);void 0===s&&(s=0);var o=t.viewport,a=i,h=r;if(e.x=o.x*a,e.y=o.y*h,e.width=o.width*a,e.height=o.height*h,n)switch(n.type){case g.DIRECTIONAL:var u=n;u.shadowFixedArea||u.csmLevel===w.LEVEL_1?(e.x=0,e.y=0,e.width=a,e.height=h):(e.x=s%2*.5*a,e.y=.5*(1-Math.floor(s/2))*h,e.width=.5*a,e.height=.5*h);break;case g.SPOT:e.x=0,e.y=0,e.width=a,e.height=h}return e.width=Math.floor(e.width),e.height=Math.floor(e.height),e},readPixels:function(e,t,i){void 0===i&&(i=0);var n=e.window.framebuffer.colorTextures[i],s=[],o=[],a=new r.BufferTextureCopy;a.texOffset.x=0,a.texOffset.y=0,a.texExtent.width=e.width,a.texExtent.height=e.height,o.push(a),s.push(t),h.root.device.copyTextureToBuffers(n,s,o)},validPunctualLightsCulling:function(e,t){var i=e.pipelineSceneData.validPunctualLights;i.length=0;for(var r=u.create(0,0,0,1),n=t.scene.spotLights,s=0;s<n.length;s++){var o=n[s];o.baked||(u.set(r,o.position.x,o.position.y,o.position.z,o.range),c.sphereFrustum(r,t.frustum)&&i.push(o))}for(var a=t.scene.sphereLights,h=0;h<a.length;h++){var d=a[h];d.baked||(u.set(r,d.position.x,d.position.y,d.position.z,d.range),c.sphereFrustum(r,t.frustum)&&i.push(d))}}}),t._RF.push({},"79840YqDEtOk56P7BIQNbwJ","utils",void 0);var u=i.Sphere,c=i.intersect,d=(r.Format,r.LoadOp),l=(r.StoreOp,r.ClearFlagBit),p=(r.Color,r.Viewport,n.RasterView,n.AttachmentType),f=(n.AccessType,n.ResourceResidency,n.LightInfo,n.SceneFlags,n.QueueHint,n.ComputeView,s.scene),g=(f.ShadowType,f.LightType),v=f.SKYBOX_FLAG,w=f.CSMLevel,L=null;function x(){return L||(L=o.createMesh({positions:[-1,-1,0,-1,1,0,1,1,0,1,-1,0],uvs:[0,0,0,1,1,1,1,0],indices:[0,2,1,0,3,2],minPos:new a(-1,-1,0),maxPos:new a(1,1,0)})).initialize(),L}var y=null;e("CameraInfo",(function(){this.shadowEnabled=!1,this.mainLightShadowNames=new Array,this.spotLightShadowNames=new Array}));var T=[];t._RF.pop()}}}));

System.register("chunks:///_virtual/utils3.ts",["cc","./halton.ts","./pool.ts"],(function(t){var e,n,o,r,s;return{setters:[function(t){e=t.cclegacy,n=t.Vec3,o=t.gfx},function(t){r=t.HaltonUtils},function(t){s=t.Pool}],execute:function(){t({modelPoints:function(t){for(var e=[],u=0;u<t.length;u++){var l=t[u],c=l.node.worldMatrix;l.worldBounds.getBoundary(a,i);for(var f=0,h=l.subModels,d=0;d<h.length;d++){var v=h[d].subMesh.geometricInfo.positions;f+=v.length/3}if(f>36)for(var M=0;M<36;M++){var g=r.instance.Generate3DRandomOffset(36),p=new n(l.worldBounds.halfExtents);p.multiplyScalar(2).multiply(g),p.add(a),n.transformMat4(p,p,c),e.push(p)}else for(var m=l.subModels,w=0;w<m.length;w++){var I=m[w].subMesh,b=I.geometricInfo,y=b.positions,x=b.indices;b.doubleSided;if(I.primitiveMode===o.PrimitiveMode.TRIANGLE_LIST&&x&&y)for(var R=0;R<y.length;R+=3){var S=s.Vec3.get().set(y[R],y[R+1],y[R+2]);n.transformMat4(S,S,c),e.push(S)}}}return e},sphereDirections:function(t){for(var e=[],o=(1+Math.sqrt(5))/2,r=2*Math.PI*o,a=0;a<t;a++){var i=a/t,u=Math.acos(1-2*i),l=r*a,c=Math.sin(u)*Math.cos(l),f=Math.sin(u)*Math.sin(l),h=Math.cos(u),d=s.Vec3.get()||new n;d.set(c,f,h),e.push(d)}return e}}),e._RF.push({},"a39deAISQJIBKjDbgEfxyMR","utils",void 0);var a=new n,i=new n;e._RF.pop()}}}));

System.register("chunks:///_virtual/weapon-aim.ts",["./rollupPluginModLoBabelHelpers.js","cc","./math-util.ts"],(function(t){var e,i,a,n,r,o,u,c,s,h,l,p,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,u=t._decorator,c=t.ccenum,s=t.Quat,h=t.Vec3,l=t.view,p=t.Component},function(t){m=t.default}],execute:function(){var y,f,R,d,g,b,A,w,C,T,W,_,v;o._RF.push({},"6da2brKURRDMIxhl+5NZ87v","weapon-aim",void 0);var P=u.ccclass,z=u.property,B=u.type,M=t("AimControls",function(t){return t[t.Auto=0]="Auto",t[t.Center=1]="Center",t[t.Mouse=2]="Mouse",t}({}));c(M);var k=t("AimRotateType",function(t){return t[t.ByNone=0]="ByNone",t[t.ByCharacter=1]="ByCharacter",t[t.ByWeapon=2]="ByWeapon",t}({}));c(k);var D=new s,Y=new h;t("WeaponAim",(y=P("WeaponAim"),f=B(k),R=B(k),y((b=e((g=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(e,"yawRotateType",b,n(e)),a(e,"pitchRotateType",A,n(e)),e.aimControl=M.Mouse,a(e,"isAutoAim",w,n(e)),a(e,"pitchWhenYawInRange",C,n(e)),a(e,"maxPitch",T,n(e)),a(e,"minPitch",W,n(e)),a(e,"aimReadyValue",_,n(e)),a(e,"aimRange",v,n(e)),e.currentYaw=0,e.currentPitch=0,e._currentAim=new h,e._lookRotation=new s,e.aimWasReady=!1,e._currentTarget=null,e}i(e,t);var o=e.prototype;return o.start=function(){this.initialization()},o.initialization=function(){},o.updateCurrentAim=function(){switch(this.aimControl){case M.Center:this.updateCenterAim();break;case M.Mouse:this.updateMouseAim();break;case M.Auto:this.updateAutoAim()}},o.updateAutoAim=function(){this._currentTarget?(this._currentTarget.getWorldPosition(this._currentAim),this.calculateCurrentAim()):(this.currentPitch=0,this.aimWasReady=!1)},o.updateCenterAim=function(){var t=l.getViewportRect();t.width,t.height;this.calculateCurrentAim()},o.updateMouseAim=function(){this.calculateCurrentAim()},o.calculateCurrentAim=function(){var t=this.node;if(m.convertToNodeSpace(Y,this._currentAim,t),!(Y.length()<this.aimRange)){Y.normalize();var e=m.radiansToDegrees(Math.atan2(Y.x,Y.z)),i=-m.radiansToDegrees(Math.atan2(Y.y,Y.z));Math.abs(e)>this.pitchWhenYawInRange&&(i=0),this.currentYaw=m.clampDegrees(this.currentYaw+e),this.currentPitch=m.clamp(m.clampDegrees(this.currentPitch+i),this.minPitch,this.maxPitch),this.aimReady(e,i)&&(this.aimWasReady=!0)}},o.aimReady=function(t,e){return Math.abs(t)<this.aimReadyValue&&Math.abs(e)<this.aimReadyValue},o.earlyProcess=function(t){},o.process=function(t){this.updateCurrentAim(),this.determineWeaponRotation()},o.lateProcess=function(t){},o.determineWeaponRotation=function(){if(this.yawRotateType==k.ByWeapon||this.pitchRotateType==k.ByWeapon){var t=0,e=0;this.yawRotateType==k.ByWeapon&&(t=this.currentYaw),this.pitchRotateType==k.ByWeapon&&(e=this.currentPitch),this.node.getRotation(D),s.fromEuler(this._lookRotation,e,t,0),s.multiply(this._lookRotation,D,this._lookRotation)}},r(e,[{key:"currentAim",get:function(){return this._currentAim}},{key:"currentTarget",set:function(t){t!=this._currentTarget&&(this.aimWasReady=!1,this._currentTarget=t)}}]),e}(p)).prototype,"yawRotateType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.ByCharacter}}),A=e(g.prototype,"pitchRotateType",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.ByCharacter}}),w=e(g.prototype,"isAutoAim",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=e(g.prototype,"pitchWhenYawInRange",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),T=e(g.prototype,"maxPitch",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),W=e(g.prototype,"minPitch",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-80}}),_=e(g.prototype,"aimReadyValue",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),v=e(g.prototype,"aimRange",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),d=g))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/webgl-constants.ts",["cc"],(function(_){var E;return{setters:[function(_){E=_.cclegacy}],execute:function(){E._RF.push({},"0ab75hj+nFLNqyYEYUosWbY","webgl-constants",void 0);_("GL_DEPTH_BUFFER_BIT",256),_("GL_STENCIL_BUFFER_BIT",1024),_("GL_COLOR_BUFFER_BIT",16384),_("GL_POINTS",0),_("GL_LINES",1),_("GL_LINE_LOOP",2),_("GL_LINE_STRIP",3),_("GL_TRIANGLES",4),_("GL_TRIANGLE_STRIP",5),_("GL_TRIANGLE_FAN",6),_("GL_ZERO",0),_("GL_ONE",1),_("GL_SRC_COLOR",768),_("GL_ONE_MINUS_SRC_COLOR",769),_("GL_SRC_ALPHA",770),_("GL_ONE_MINUS_SRC_ALPHA",771),_("GL_DST_ALPHA",772),_("GL_ONE_MINUS_DST_ALPHA",773),_("GL_DST_COLOR",774),_("GL_ONE_MINUS_DST_COLOR",775),_("GL_SRC_ALPHA_SATURATE",776),_("GL_CONSTANT_COLOR",32769),_("GL_ONE_MINUS_CONSTANT_COLOR",32770),_("GL_CONSTANT_ALPHA",32771),_("GL_ONE_MINUS_CONSTANT_ALPHA",32772),_("GL_FUNC_ADD",32774),_("GL_FUNC_SUBSTRACT",32778),_("GL_FUNC_REVERSE_SUBTRACT",32779),_("GL_BLEND_EQUATION",32777),_("GL_BLEND_EQUATION_RGB",32777),_("GL_BLEND_EQUATION_ALPHA",34877),_("GL_BLEND_DST_RGB",32968),_("GL_BLEND_SRC_RGB",32969),_("GL_BLEND_DST_ALPHA",32970),_("GL_BLEND_SRC_ALPHA",32971),_("GL_BLEND_COLOR",32773),_("GL_ARRAY_BUFFER_BINDING",34964),_("GL_ELEMENT_ARRAY_BUFFER_BINDING",34965),_("GL_LINE_WIDTH",2849),_("GL_ALIASED_POINT_SIZE_RANGE",33901),_("GL_ALIASED_LINE_WIDTH_RANGE",33902),_("GL_CULL_FACE_MODE",2885),_("GL_FRONT_FACE",2886),_("GL_DEPTH_RANGE",2928),_("GL_DEPTH_WRITEMASK",2930),_("GL_DEPTH_CLEAR_VALUE",2931),_("GL_DEPTH_FUNC",2932),_("GL_STENCIL_CLEAR_VALUE",2961),_("GL_STENCIL_FUNC",2962),_("GL_STENCIL_FAIL",2964),_("GL_STENCIL_PASS_DEPTH_FAIL",2965),_("GL_STENCIL_PASS_DEPTH_PASS",2966),_("GL_STENCIL_REF",2967),_("GL_STENCIL_VALUE_MASK",2963),_("GL_STENCIL_WRITEMASK",2968),_("GL_STENCIL_BACK_FUNC",34816),_("GL_STENCIL_BACK_FAIL",34817),_("GL_STENCIL_BACK_PASS_DEPTH_FAIL",34818),_("GL_STENCIL_BACK_PASS_DEPTH_PASS",34819),_("GL_STENCIL_BACK_REF",36003),_("GL_STENCIL_BACK_VALUE_MASK",36004),_("GL_STENCIL_BACK_WRITEMASK",36005),_("GL_VIEWPORT",2978),_("GL_SCISSOR_BOX",3088),_("GL_COLOR_CLEAR_VALUE",3106),_("GL_COLOR_WRITEMASK",3107),_("GL_UNPACK_ALIGNMENT",3317),_("GL_PACK_ALIGNMENT",3333),_("GL_MAX_TEXTURE_SIZE",3379),_("GL_MAX_VIEWPORT_DIMS",3386),_("GL_SUBPIXEL_BITS",3408),_("GL_RED_BITS",3410),_("GL_GREEN_BITS",3411),_("GL_BLUE_BITS",3412),_("GL_ALPHA_BITS",3413),_("GL_DEPTH_BITS",3414),_("GL_STENCIL_BITS",3415),_("GL_POLYGON_OFFSET_UNITS",10752),_("GL_POLYGON_OFFSET_FACTOR",32824),_("GL_TEXTURE_BINDING_2D",32873),_("GL_SAMPLE_BUFFERS",32936),_("GL_SAMPLES",32937),_("GL_SAMPLE_COVERAGE_VALUE",32938),_("GL_SAMPLE_COVERAGE_INVERT",32939),_("GL_COMPRESSED_TEXTURE_FORMATS",34467),_("GL_VENDOR",7936),_("GL_RENDERER",7937),_("GL_VERSION",7938),_("GL_IMPLEMENTATION_COLOR_READ_TYPE",35738),_("GL_IMPLEMENTATION_COLOR_READ_FORMAT",35739),_("GL_BROWSER_DEFAULT_WEBGL",37444),_("GL_STATIC_DRAW",35044),_("GL_STREAM_DRAW",35040),_("GL_DYNAMIC_DRAW",35048),_("GL_ARRAY_BUFFER",34962),_("GL_ELEMENT_ARRAY_BUFFER",34963),_("GL_BUFFER_SIZE",34660),_("GL_BUFFER_USAGE",34661),_("GL_CURRENT_VERTEX_ATTRIB",34342),_("GL_VERTEX_ATTRIB_ARRAY_ENABLED",34338),_("GL_VERTEX_ATTRIB_ARRAY_SIZE",34339),_("GL_VERTEX_ATTRIB_ARRAY_STRIDE",34340),_("GL_VERTEX_ATTRIB_ARRAY_TYPE",34341),_("GL_VERTEX_ATTRIB_ARRAY_NORMALIZED",34922),_("GL_VERTEX_ATTRIB_ARRAY_POINTER",34373),_("GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",34975),_("GL_CULL_FACE",2884),_("GL_FRONT",1028),_("GL_BACK",1029),_("GL_FRONT_AND_BACK",1032),_("GL_BLEND",3042),_("GL_DEPTH_TEST",2929),_("GL_DITHER",3024),_("GL_POLYGON_OFFSET_FILL",32823),_("GL_SAMPLE_ALPHA_TO_COVERAGE",32926),_("GL_SAMPLE_COVERAGE",32928),_("GL_SCISSOR_TEST",3089),_("GL_STENCIL_TEST",2960),_("GL_NO_ERROR",0),_("GL_INVALID_ENUM",1280),_("GL_INVALID_VALUE",1281),_("GL_INVALID_OPERATION",1282),_("GL_OUT_OF_MEMORY",1285),_("GL_CONTEXT_LOST_WEBGL",37442),_("GL_CW",2304),_("GL_CCW",2305),_("GL_DONT_CARE",4352),_("GL_FASTEST",4353),_("GL_NICEST",4354),_("GL_GENERATE_MIPMAP_HINT",33170),_("GL_BYTE",5120),_("GL_UNSIGNED_BYTE",5121),_("GL_SHORT",5122),_("GL_UNSIGNED_SHORT",5123),_("GL_INT",5124),_("GL_UNSIGNED_INT",5125),_("GL_FLOAT",5126),_("GL_DEPTH_COMPONENT",6402),_("GL_ALPHA",6406),_("GL_RGB",6407),_("GL_RGBA",6408),_("GL_LUMINANCE",6409),_("GL_LUMINANCE_ALPHA",6410),_("GL_UNSIGNED_SHORT_4_4_4_4",32819),_("GL_UNSIGNED_SHORT_5_5_5_1",32820),_("GL_UNSIGNED_SHORT_5_6_5",33635),_("GL_FRAGMENT_SHADER",35632),_("GL_VERTEX_SHADER",35633),_("GL_COMPILE_STATUS",35713),_("GL_DELETE_STATUS",35712),_("GL_LINK_STATUS",35714),_("GL_VALIDATE_STATUS",35715),_("GL_ATTACHED_SHADERS",35717),_("GL_ACTIVE_ATTRIBUTES",35721),_("GL_ACTIVE_UNIFORMS",35718),_("GL_MAX_VERTEX_ATTRIBS",34921),_("GL_MAX_VERTEX_UNIFORM_VECTORS",36347),_("GL_MAX_VARYING_VECTORS",36348),_("GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS",35661),_("GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS",35660),_("GL_MAX_TEXTURE_IMAGE_UNITS",34930),_("GL_MAX_FRAGMENT_UNIFORM_VECTORS",36349),_("GL_SHADER_TYPE",35663),_("GL_SHADING_LANGUAGE_VERSION",35724),_("GL_CURRENT_PROGRAM",35725),_("GL_NEVER",512),_("GL_ALWAYS",519),_("GL_LESS",513),_("GL_EQUAL",514),_("GL_LEQUAL",515),_("GL_GREATER",516),_("GL_GEQUAL",518),_("GL_NOTEQUAL",517),_("GL_KEEP",7680),_("GL_REPLACE",7681),_("GL_INCR",7682),_("GL_DECR",7683),_("GL_INVERT",5386),_("GL_INCR_WRAP",34055),_("GL_DECR_WRAP",34056),_("GL_NEAREST",9728),_("GL_LINEAR",9729),_("GL_NEAREST_MIPMAP_NEAREST",9984),_("GL_LINEAR_MIPMAP_NEAREST",9985),_("GL_NEAREST_MIPMAP_LINEAR",9986),_("GL_LINEAR_MIPMAP_LINEAR",9987),_("GL_TEXTURE_MAG_FILTER",10240),_("GL_TEXTURE_MIN_FILTER",10241),_("GL_TEXTURE_WRAP_S",10242),_("GL_TEXTURE_WRAP_T",10243),_("GL_TEXTURE_2D",3553),_("GL_TEXTURE",5890),_("GL_TEXTURE_CUBE_MAP",34067),_("GL_TEXTURE_BINDING_CUBE_MAP",34068),_("GL_TEXTURE_CUBE_MAP_POSITIVE_X",34069),_("GL_TEXTURE_CUBE_MAP_NEGATIVE_X",34070),_("GL_TEXTURE_CUBE_MAP_POSITIVE_Y",34071),_("GL_TEXTURE_CUBE_MAP_NEGATIVE_Y",34072),_("GL_TEXTURE_CUBE_MAP_POSITIVE_Z",34073),_("GL_TEXTURE_CUBE_MAP_NEGATIVE_Z",34074),_("GL_MAX_CUBE_MAP_TEXTURE_SIZE",34076),_("GL_TEXTURE0",33984),_("GL_TEXTURE1",33985),_("GL_TEXTURE2",33986),_("GL_TEXTURE3",33987),_("GL_TEXTURE4",33988),_("GL_TEXTURE5",33989),_("GL_TEXTURE6",33990),_("GL_TEXTURE7",33991),_("GL_TEXTURE8",33992),_("GL_TEXTURE9",33993),_("GL_TEXTURE10",33994),_("GL_TEXTURE11",33995),_("GL_TEXTURE12",33996),_("GL_TEXTURE13",33997),_("GL_TEXTURE14",33998),_("GL_TEXTURE15",33999),_("GL_TEXTURE16",34e3),_("GL_TEXTURE17",34001),_("GL_TEXTURE18",34002),_("GL_TEXTURE19",34003),_("GL_TEXTURE20",34004),_("GL_TEXTURE21",34005),_("GL_TEXTURE22",34006),_("GL_TEXTURE23",34007),_("GL_TEXTURE24",34008),_("GL_TEXTURE25",34009),_("GL_TEXTURE26",34010),_("GL_TEXTURE27",34011),_("GL_TEXTURE28",34012),_("GL_TEXTURE29",34013),_("GL_TEXTURE30",34014),_("GL_TEXTURE31",34015),_("GL_ACTIVE_TEXTURE",34016),_("GL_REPEAT",10497),_("GL_CLAMP_TO_EDGE",33071),_("GL_MIRRORED_REPEAT",33648),_("GL_FLOAT_VEC2",35664),_("GL_FLOAT_VEC3",35665),_("GL_FLOAT_VEC4",35666),_("GL_INT_VEC2",35667),_("GL_INT_VEC3",35668),_("GL_INT_VEC4",35669),_("GL_BOOL",35670),_("GL_BOOL_VEC2",35671),_("GL_BOOL_VEC3",35672),_("GL_BOOL_VEC4",35673),_("GL_FLOAT_MAT2",35674),_("GL_FLOAT_MAT3",35675),_("GL_FLOAT_MAT4",35676),_("GL_SAMPLER_2D",35678),_("GL_SAMPLER_CUBE",35680),_("GL_LOW_FLOAT",36336),_("GL_MEDIUM_FLOAT",36337),_("GL_HIGH_FLOAT",36338),_("GL_LOW_INT",36339),_("GL_MEDIUM_INT",36340),_("GL_HIGH_INT",36341),_("GL_FRAMEBUFFER",36160),_("GL_RENDERBUFFER",36161),_("GL_RGBA4",32854),_("GL_RGB5_A1",32855),_("GL_RGB565",36194),_("GL_DEPTH_COMPONENT16",33189),_("GL_STENCIL_INDEX",6401),_("GL_STENCIL_INDEX8",36168),_("GL_DEPTH_STENCIL",34041),_("GL_RENDERBUFFER_WIDTH",36162),_("GL_RENDERBUFFER_HEIGHT",36163),_("GL_RENDERBUFFER_INTERNAL_FORMAT",36164),_("GL_RENDERBUFFER_RED_SIZE",36176),_("GL_RENDERBUFFER_GREEN_SIZE",36177),_("GL_RENDERBUFFER_BLUE_SIZE",36178),_("GL_RENDERBUFFER_ALPHA_SIZE",36179),_("GL_RENDERBUFFER_DEPTH_SIZE",36180),_("GL_RENDERBUFFER_STENCIL_SIZE",36181),_("GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36048),_("GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36049),_("GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36050),_("GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36051),_("GL_COLOR_ATTACHMENT0",36064),_("GL_DEPTH_ATTACHMENT",36096),_("GL_STENCIL_ATTACHMENT",36128),_("GL_DEPTH_STENCIL_ATTACHMENT",33306),_("GL_NONE",0),_("GL_FRAMEBUFFER_COMPLETE",36053),_("GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36054),_("GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36055),_("GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36057),_("GL_FRAMEBUFFER_UNSUPPORTED",36061),_("GL_FRAMEBUFFER_BINDING",36006),_("GL_RENDERBUFFER_BINDING",36007),_("GL_MAX_RENDERBUFFER_SIZE",34024),_("GL_INVALID_FRAMEBUFFER_OPERATION",1286),_("GL_UNPACK_FLIP_Y_WEBGL",37440),_("GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL",37441),_("GL_UNPACK_COLORSPACE_CONVERSION_WEBGL",37443),_("GL_READ_BUFFER",3074),_("GL_UNPACK_ROW_LENGTH",3314),_("GL_UNPACK_SKIP_ROWS",3315),_("GL_UNPACK_SKIP_PIXELS",3316),_("GL_PACK_ROW_LENGTH",3330),_("GL_PACK_SKIP_ROWS",3331),_("GL_PACK_SKIP_PIXELS",3332),_("GL_TEXTURE_BINDING_3D",32874),_("GL_UNPACK_SKIP_IMAGES",32877),_("GL_UNPACK_IMAGE_HEIGHT",32878),_("GL_MAX_3D_TEXTURE_SIZE",32883),_("GL_MAX_ELEMENTS_VERTICES",33e3),_("GL_MAX_ELEMENTS_INDICES",33001),_("GL_MAX_TEXTURE_LOD_BIAS",34045),_("GL_MAX_FRAGMENT_UNIFORM_COMPONENTS",35657),_("GL_MAX_VERTEX_UNIFORM_COMPONENTS",35658),_("GL_MAX_ARRAY_TEXTURE_LAYERS",35071),_("GL_MIN_PROGRAM_TEXEL_OFFSET",35076),_("GL_MAX_PROGRAM_TEXEL_OFFSET",35077),_("GL_MAX_VARYING_COMPONENTS",35659),_("GL_FRAGMENT_SHADER_DERIVATIVE_HINT",35723),_("GL_RASTERIZER_DISCARD",35977),_("GL_VERTEX_ARRAY_BINDING",34229),_("GL_MAX_VERTEX_OUTPUT_COMPONENTS",37154),_("GL_MAX_FRAGMENT_INPUT_COMPONENTS",37157),_("GL_MAX_SERVER_WAIT_TIMEOUT",37137),_("GL_MAX_ELEMENT_INDEX",36203),_("GL_RED",6403),_("GL_RGB8",32849),_("GL_RGBA8",32856),_("GL_RGB10_A2",32857),_("GL_TEXTURE_3D",32879),_("GL_TEXTURE_WRAP_R",32882),_("GL_TEXTURE_MIN_LOD",33082),_("GL_TEXTURE_MAX_LOD",33083),_("GL_TEXTURE_BASE_LEVEL",33084),_("GL_TEXTURE_MAX_LEVEL",33085),_("GL_TEXTURE_COMPARE_MODE",34892),_("GL_TEXTURE_COMPARE_FUNC",34893),_("GL_SRGB",35904),_("GL_SRGB8",35905),_("GL_SRGB8_ALPHA8",35907),_("GL_COMPARE_REF_TO_TEXTURE",34894),_("GL_RGBA32F",34836),_("GL_RGB32F",34837),_("GL_RGBA16F",34842),_("GL_RGB16F",34843),_("GL_TEXTURE_2D_ARRAY",35866),_("GL_TEXTURE_BINDING_2D_ARRAY",35869),_("GL_R11F_G11F_B10F",35898),_("GL_RGB9_E5",35901),_("GL_RGBA32UI",36208),_("GL_RGB32UI",36209),_("GL_RGBA16UI",36214),_("GL_RGB16UI",36215),_("GL_RGBA8UI",36220),_("GL_RGB8UI",36221),_("GL_RGBA32I",36226),_("GL_RGB32I",36227),_("GL_RGBA16I",36232),_("GL_RGB16I",36233),_("GL_RGBA8I",36238),_("GL_RGB8I",36239),_("GL_RED_INTEGER",36244),_("GL_RGB_INTEGER",36248),_("GL_RGBA_INTEGER",36249),_("GL_R8",33321),_("GL_RG8",33323),_("GL_R16F",33325),_("GL_R32F",33326),_("GL_RG16F",33327),_("GL_RG32F",33328),_("GL_R8I",33329),_("GL_R8UI",33330),_("GL_R16I",33331),_("GL_R16UI",33332),_("GL_R32I",33333),_("GL_R32UI",33334),_("GL_RG8I",33335),_("GL_RG8UI",33336),_("GL_RG16I",33337),_("GL_RG16UI",33338),_("GL_RG32I",33339),_("GL_RG32UI",33340),_("GL_R8_SNORM",36756),_("GL_RG8_SNORM",36757),_("GL_RGB8_SNORM",36758),_("GL_RGBA8_SNORM",36759),_("GL_RGB10_A2UI",36975),_("GL_TEXTURE_IMMUTABLE_FORMAT",37167),_("GL_TEXTURE_IMMUTABLE_LEVELS",33503),_("GL_UNSIGNED_INT_2_10_10_10_REV",33640),_("GL_UNSIGNED_INT_10F_11F_11F_REV",35899),_("GL_UNSIGNED_INT_5_9_9_9_REV",35902),_("GL_FLOAT_32_UNSIGNED_INT_24_8_REV",36269),_("GL_UNSIGNED_INT_24_8",34042),_("GL_HALF_FLOAT",5131),_("GL_RG",33319),_("GL_RG_INTEGER",33320),_("GL_INT_2_10_10_10_REV",36255),_("GL_CURRENT_QUERY",34917),_("GL_QUERY_RESULT",34918),_("GL_QUERY_RESULT_AVAILABLE",34919),_("GL_ANY_SAMPLES_PASSED",35887),_("GL_ANY_SAMPLES_PASSED_CONSERVATIVE",36202),_("GL_MAX_DRAW_BUFFERS",34852),_("GL_DRAW_BUFFER0",34853),_("GL_DRAW_BUFFER1",34854),_("GL_DRAW_BUFFER2",34855),_("GL_DRAW_BUFFER3",34856),_("GL_DRAW_BUFFER4",34857),_("GL_DRAW_BUFFER5",34858),_("GL_DRAW_BUFFER6",34859),_("GL_DRAW_BUFFER7",34860),_("GL_DRAW_BUFFER8",34861),_("GL_DRAW_BUFFER9",34862),_("GL_DRAW_BUFFER10",34863),_("GL_DRAW_BUFFER11",34864),_("GL_DRAW_BUFFER12",34865),_("GL_DRAW_BUFFER13",34866),_("GL_DRAW_BUFFER14",34867),_("GL_DRAW_BUFFER15",34868),_("GL_MAX_COLOR_ATTACHMENTS",36063),_("GL_COLOR_ATTACHMENT1",36065),_("GL_COLOR_ATTACHMENT2",36066),_("GL_COLOR_ATTACHMENT3",36067),_("GL_COLOR_ATTACHMENT4",36068),_("GL_COLOR_ATTACHMENT5",36069),_("GL_COLOR_ATTACHMENT6",36070),_("GL_COLOR_ATTACHMENT7",36071),_("GL_COLOR_ATTACHMENT8",36072),_("GL_COLOR_ATTACHMENT9",36073),_("GL_COLOR_ATTACHMENT10",36074),_("GL_COLOR_ATTACHMENT11",36075),_("GL_COLOR_ATTACHMENT12",36076),_("GL_COLOR_ATTACHMENT13",36077),_("GL_COLOR_ATTACHMENT14",36078),_("GL_COLOR_ATTACHMENT15",36079),_("GL_SAMPLER_3D",35679),_("GL_SAMPLER_2D_SHADOW",35682),_("GL_SAMPLER_2D_ARRAY",36289),_("GL_SAMPLER_2D_ARRAY_SHADOW",36292),_("GL_SAMPLER_CUBE_SHADOW",36293),_("GL_INT_SAMPLER_2D",36298),_("GL_INT_SAMPLER_3D",36299),_("GL_INT_SAMPLER_CUBE",36300),_("GL_INT_SAMPLER_2D_ARRAY",36303),_("GL_UNSIGNED_INT_SAMPLER_2D",36306),_("GL_UNSIGNED_INT_SAMPLER_3D",36307),_("GL_UNSIGNED_INT_SAMPLER_CUBE",36308),_("GL_UNSIGNED_INT_SAMPLER_2D_ARRAY",36311),_("GL_MAX_SAMPLES",36183),_("GL_SAMPLER_BINDING",35097),_("GL_PIXEL_PACK_BUFFER",35051),_("GL_PIXEL_UNPACK_BUFFER",35052),_("GL_PIXEL_PACK_BUFFER_BINDING",35053),_("GL_PIXEL_UNPACK_BUFFER_BINDING",35055),_("GL_COPY_READ_BUFFER",36662),_("GL_COPY_WRITE_BUFFER",36663),_("GL_COPY_READ_BUFFER_BINDING",36662),_("GL_COPY_WRITE_BUFFER_BINDING",36663),_("GL_FLOAT_MAT2X3",35685),_("GL_FLOAT_MAT2X4",35686),_("GL_FLOAT_MAT3X2",35687),_("GL_FLOAT_MAT3X4",35688),_("GL_FLOAT_MAT4X2",35689),_("GL_FLOAT_MAT4X3",35690),_("GL_UNSIGNED_INT_VEC2",36294),_("GL_UNSIGNED_INT_VEC3",36295),_("GL_UNSIGNED_INT_VEC4",36296),_("GL_UNSIGNED_NORMALIZED",35863),_("GL_SIGNED_NORMALIZED",36764),_("GL_VERTEX_ATTRIB_ARRAY_INTEGER",35069),_("GL_VERTEX_ATTRIB_ARRAY_DIVISOR",35070),_("GL_TRANSFORM_FEEDBACK_BUFFER_MODE",35967),_("GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",35968),_("GL_TRANSFORM_FEEDBACK_VARYINGS",35971),_("GL_TRANSFORM_FEEDBACK_BUFFER_START",35972),_("GL_TRANSFORM_FEEDBACK_BUFFER_SIZE",35973),_("GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",35976),_("GL_MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",35978),_("GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",35979),_("GL_INTERLEAVED_ATTRIBS",35980),_("GL_SEPARATE_ATTRIBS",35981),_("GL_TRANSFORM_FEEDBACK_BUFFER",35982),_("GL_TRANSFORM_FEEDBACK_BUFFER_BINDING",35983),_("GL_TRANSFORM_FEEDBACK",36386),_("GL_TRANSFORM_FEEDBACK_PAUSED",36387),_("GL_TRANSFORM_FEEDBACK_ACTIVE",36388),_("GL_TRANSFORM_FEEDBACK_BINDING",36389),_("GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",33296),_("GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",33297),_("GL_FRAMEBUFFER_ATTACHMENT_RED_SIZE",33298),_("GL_FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",33299),_("GL_FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",33300),_("GL_FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",33301),_("GL_FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",33302),_("GL_FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",33303),_("GL_FRAMEBUFFER_DEFAULT",33304),_("GL_DEPTH24_STENCIL8",35056),_("GL_DRAW_FRAMEBUFFER_BINDING",36006),_("GL_READ_FRAMEBUFFER",36008),_("GL_DRAW_FRAMEBUFFER",36009),_("GL_READ_FRAMEBUFFER_BINDING",36010),_("GL_RENDERBUFFER_SAMPLES",36011),_("GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",36052),_("GL_FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",36182),_("GL_UNIFORM_BUFFER",35345),_("GL_UNIFORM_BUFFER_BINDING",35368),_("GL_UNIFORM_BUFFER_START",35369),_("GL_UNIFORM_BUFFER_SIZE",35370),_("GL_MAX_VERTEX_UNIFORM_BLOCKS",35371),_("GL_MAX_FRAGMENT_UNIFORM_BLOCKS",35373),_("GL_MAX_COMBINED_UNIFORM_BLOCKS",35374),_("GL_MAX_UNIFORM_BUFFER_BINDINGS",35375),_("GL_MAX_UNIFORM_BLOCK_SIZE",35376),_("GL_MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",35377),_("GL_MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",35379),_("GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT",35380),_("GL_ACTIVE_UNIFORM_BLOCKS",35382),_("GL_UNIFORM_TYPE",35383),_("GL_UNIFORM_SIZE",35384),_("GL_UNIFORM_BLOCK_INDEX",35386),_("GL_UNIFORM_OFFSET",35387),_("GL_UNIFORM_ARRAY_STRIDE",35388),_("GL_UNIFORM_MATRIX_STRIDE",35389),_("GL_UNIFORM_IS_ROW_MAJOR",35390),_("GL_UNIFORM_BLOCK_BINDING",35391),_("GL_UNIFORM_BLOCK_DATA_SIZE",35392),_("GL_UNIFORM_BLOCK_ACTIVE_UNIFORMS",35394),_("GL_UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",35395),_("GL_UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",35396),_("GL_UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",35398),_("GL_OBJECT_TYPE",37138),_("GL_SYNC_CONDITION",37139),_("GL_SYNC_STATUS",37140),_("GL_SYNC_FLAGS",37141),_("GL_SYNC_FENCE",37142),_("GL_SYNC_GPU_COMMANDS_COMPLETE",37143),_("GL_UNSIGNALED",37144),_("GL_SIGNALED",37145),_("GL_ALREADY_SIGNALED",37146),_("GL_TIMEOUT_EXPIRED",37147),_("GL_CONDITION_SATISFIED",37148),_("GL_WAIT_FAILED",37149),_("GL_SYNC_FLUSH_COMMANDS_BIT",1),_("GL_COLOR",6144),_("GL_DEPTH",6145),_("GL_STENCIL",6146),_("GL_MIN",32775),_("GL_MAX",32776),_("GL_DEPTH_COMPONENT24",33190),_("GL_STREAM_READ",35041),_("GL_STREAM_COPY",35042),_("GL_STATIC_READ",35045),_("GL_STATIC_COPY",35046),_("GL_DYNAMIC_READ",35049),_("GL_DYNAMIC_COPY",35050),_("GL_DEPTH_COMPONENT32F",36012),_("GL_DEPTH32F_STENCIL8",36013),_("GL_INVALID_INDEX",4294967295),_("GL_TIMEOUT_IGNORED",-1),_("GL_MAX_CLIENT_WAIT_TIMEOUT_WEBGL",37447),_("GL_VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",35070),_("GL_UNMASKED_VENDOR_WEBGL",37445),_("GL_UNMASKED_RENDERER_WEBGL",37446),_("GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT",34047),_("GL_TEXTURE_MAX_ANISOTROPY_EXT",34046),_("GL_COMPRESSED_RGB_S3TC_DXT1_EXT",33776),_("GL_COMPRESSED_RGBA_S3TC_DXT1_EXT",33777),_("GL_COMPRESSED_RGBA_S3TC_DXT3_EXT",33778),_("GL_COMPRESSED_RGBA_S3TC_DXT5_EXT",33779),_("GL_COMPRESSED_SRGB_S3TC_DXT1_EXT",35916),_("GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",35917),_("GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",35918),_("GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",35919),_("GL_COMPRESSED_R11_EAC",37488),_("GL_COMPRESSED_SIGNED_R11_EAC",37489),_("GL_COMPRESSED_RG11_EAC",37490),_("GL_COMPRESSED_SIGNED_RG11_EAC",37491),_("GL_COMPRESSED_RGB8_ETC2",37492),_("GL_COMPRESSED_RGBA8_ETC2_EAC",37493),_("GL_COMPRESSED_SRGB8_ETC2",37494),_("GL_COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",37495),_("GL_COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",37496),_("GL_COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",37497),_("GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG",35840),_("GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",35842),_("GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG",35841),_("GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",35843),_("GL_COMPRESSED_RGB_ETC1_WEBGL",36196),_("GL_COMPRESSED_RGB_ATC_WEBGL",35986),_("GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",35986),_("GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",34798),_("GL_COMPRESSED_RGBA_ASTC_4X4_KHR",37808),_("GL_COMPRESSED_RGBA_ASTC_5X4_KHR",37809),_("GL_COMPRESSED_RGBA_ASTC_5X5_KHR",37810),_("GL_COMPRESSED_RGBA_ASTC_6X5_KHR",37811),_("GL_COMPRESSED_RGBA_ASTC_6X6_KHR",37812),_("GL_COMPRESSED_RGBA_ASTC_8X5_KHR",37813),_("GL_COMPRESSED_RGBA_ASTC_8X6_KHR",37814),_("GL_COMPRESSED_RGBA_ASTC_8X8_KHR",37815),_("GL_COMPRESSED_RGBA_ASTC_10X5_KHR",37816),_("GL_COMPRESSED_RGBA_ASTC_10X6_KHR",37817),_("GL_COMPRESSED_RGBA_ASTC_10X8_KHR",37818),_("GL_COMPRESSED_RGBA_ASTC_10X10_KHR",37819),_("GL_COMPRESSED_RGBA_ASTC_12X10_KHR",37820),_("GL_COMPRESSED_RGBA_ASTC_12X12_KHR",37821),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR",37840),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR",37841),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR",37842),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR",37843),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR",37844),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR",37845),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR",37846),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR",37847),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR",37848),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR",37849),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR",37850),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR",37851),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR",37852),_("GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR",37853),_("GL_UNSIGNED_INT_24_8_WEBGL",34042),_("GL_HALF_FLOAT_OES",36193),_("GL_RGBA32F_EXT",34836),_("GL_RGB32F_EXT",34837),_("GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",33297),_("GL_UNSIGNED_NORMALIZED_EXT",35863),_("GL_MIN_EXT",32775),_("GL_MAX_EXT",32776),_("GL_SRGB_EXT",35904),_("GL_SRGB_ALPHA_EXT",35906),_("GL_SRGB8_ALPHA8_EXT",35907),_("GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",33296),_("GL_FRAGMENT_SHADER_DERIVATIVE_HINT_OES",35723),_("GL_COLOR_ATTACHMENT0_WEBGL",36064),_("GL_COLOR_ATTACHMENT1_WEBGL",36065),_("GL_COLOR_ATTACHMENT2_WEBGL",36066),_("GL_COLOR_ATTACHMENT3_WEBGL",36067),_("GL_COLOR_ATTACHMENT4_WEBGL",36068),_("GL_COLOR_ATTACHMENT5_WEBGL",36069),_("GL_COLOR_ATTACHMENT6_WEBGL",36070),_("GL_COLOR_ATTACHMENT7_WEBGL",36071),_("GL_COLOR_ATTACHMENT8_WEBGL",36072),_("GL_COLOR_ATTACHMENT9_WEBGL",36073),_("GL_COLOR_ATTACHMENT10_WEBGL",36074),_("GL_COLOR_ATTACHMENT11_WEBGL",36075),_("GL_COLOR_ATTACHMENT12_WEBGL",36076),_("GL_COLOR_ATTACHMENT13_WEBGL",36077),_("GL_COLOR_ATTACHMENT14_WEBGL",36078),_("GL_COLOR_ATTACHMENT15_WEBGL",36079),_("GL_DRAW_BUFFER0_WEBGL",34853),_("GL_DRAW_BUFFER1_WEBGL",34854),_("GL_DRAW_BUFFER2_WEBGL",34855),_("GL_DRAW_BUFFER3_WEBGL",34856),_("GL_DRAW_BUFFER4_WEBGL",34857),_("GL_DRAW_BUFFER5_WEBGL",34858),_("GL_DRAW_BUFFER6_WEBGL",34859),_("GL_DRAW_BUFFER7_WEBGL",34860),_("GL_DRAW_BUFFER8_WEBGL",34861),_("GL_DRAW_BUFFER9_WEBGL",34862),_("GL_DRAW_BUFFER10_WEBGL",34863),_("GL_DRAW_BUFFER11_WEBGL",34864),_("GL_DRAW_BUFFER12_WEBGL",34865),_("GL_DRAW_BUFFER13_WEBGL",34866),_("GL_DRAW_BUFFER14_WEBGL",34867),_("GL_DRAW_BUFFER15_WEBGL",34868),_("GL_MAX_COLOR_ATTACHMENTS_WEBGL",36063),_("GL_MAX_DRAW_BUFFERS_WEBGL",34852),_("GL_VERTEX_ARRAY_BINDING_OES",34229),_("GL_QUERY_COUNTER_BITS_EXT",34916),_("GL_CURRENT_QUERY_EXT",34917),_("GL_QUERY_RESULT_EXT",34918),_("GL_QUERY_RESULT_AVAILABLE_EXT",34919),_("GL_TIME_ELAPSED_EXT",35007),_("GL_TIMESTAMP_EXT",36392),_("GL_GPU_DISJOINT_EXT",36795),_("GL_COMPLETION_STATUS_KHR",37297);E._RF.pop()}}}));

System.register("chunks:///_virtual/world-cluster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./debug.ts","./math.ts"],(function(t){var e,s,i,l,r,n,a,o,u,c,h,d,x,C,f,p,v,b,y,D,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.inheritsLoose,i=t.initializerDefineProperty,l=t.assertThisInitialized,r=t.createClass},function(t){n=t.cclegacy,a=t._decorator,o=t.Vec3,u=t.Vec4,c=t.geometry,h=t.director,d=t.gfx,x=t.Mat4,C=t.Color,f=t.Quat,p=t.Component},function(t){v=t.getGeometryRenderer},function(t){b=t.roundUp,y=t.vec3_min,D=t.vec3_max,m=t.vec3_floor}],execute:function(){var _,w,g,T,B;n._RF.push({},"79074YfIOVJoIaJ+SemjB3f","world-cluster",void 0);var O=a.ccclass,z=a.property,j=a.executeInEditMode,M=new o,I=new o,F=(new o,t("ClusterObject",(function(){this.object=null,this.min=new o,this.max=new o,this.radius=0,this.center=new o,this.minCell=new o,this.maxCell=new o})));t("WorldCluster",O("WorldCluster")(_=j((g=e((w=function(t){function e(){for(var e,s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this)._cellsLimit=new o,i(e,"_cells",g,l(e)),i(e,"_maxCellObjectCount",T,l(e)),e._usedObjects=[new F],e.dataInfoFloat=void 0,e.dataInfoTextureFloat=void 0,e.infoTextureInvSizeData=new u,e.clusterTexture=void 0,e.clustersData=void 0,e.clustersCounts=void 0,e.clustersDistances=void 0,e.clusterCellsMaxData=new u,e.clusterCellsDotData=new u,e.clusterTextureSizeData=new u,e.clusterCellsCountByBoundsSizeData=new u,e._bounds=new c.AABB,e.boundsMin=new o,e.boundsMax=new o,e.boundsDelta=new o,e.maxCount=255,e.reportCount=0,e._cellsDirty=!0,e._pixelsPerCellCount=0,e.pixelsPerObjectFloat=1,i(e,"renderDebug",B,l(e)),e}s(e,t);var n=e.prototype;return n.getBoundingBox=function(t,e){},n.addObjectData=function(t,e){},n.createTexture=function(t,e,s){return h.root.device.createTexture(new d.TextureInfo(d.TextureType.TEX2D,d.TextureUsageBit.SAMPLED|d.TextureUsageBit.TRANSFER_DST,s,t,e))},n.__preload=function(){this.maxCellObjectCount=this.maxCellObjectCount,this._cellsLimit.set(this._cells).subtract(o.ONE),this.initTexture()},n.initTexture=function(){var t=this.pixelsPerObjectFloat;this.dataInfoFloat=new Float32Array(4*t*this.maxCount),this.dataInfoTextureFloat=this.createTexture(t,this.maxCount,d.Format.RGBA32F),this.infoTextureInvSizeData.x=1/this.dataInfoTextureFloat.width,this.infoTextureInvSizeData.y=1/this.dataInfoTextureFloat.height},n.updateCells=function(){if(this._cellsDirty){this._cellsDirty=!1;var t=this._cells.x,e=this._cells.y,s=this._cells.z,i=t*e*s,l=this._pixelsPerCellCount*i,r=Math.ceil(Math.sqrt(l));r=b(r,this._pixelsPerCellCount);var n=Math.ceil(l/r);(r>4096||n>4096)&&console.error("LightCluster parameters cause the texture size to be over the limit."),this.clusterCellsMaxData.x=t,this.clusterCellsMaxData.y=e,this.clusterCellsMaxData.z=s,this.clusterCellsDotData.x=this._pixelsPerCellCount,this.clusterCellsDotData.y=t*s*this._pixelsPerCellCount,this.clusterCellsDotData.z=t*this._pixelsPerCellCount,this.clustersData=new Uint8Array(4*r*n),this.clustersCounts=new Int32Array(i),this.clustersDistances=new Float32Array(4*r*n),this.clusterTextureSizeData.x=r,this.clusterTextureSizeData.y=1/r,this.clusterTextureSizeData.z=1/n,this.clusterTexture&&this.clusterTexture.destroy(),this.clusterTexture=this.createTexture(r,n,d.Format.RGBA8)}},n.collectObjects=function(t){for(var e=this._usedObjects,s=1,i=0;i<t.length;i++){var l=t[i];if(!(s<this.maxCount)){console.warn("Clustered lighting: more than "+(this.maxCount-1)+" lights in the frame, ignoring some.");break}var r=void 0;s<e.length?r=e[s]:(r=new F,e.push(r)),r.object=l,this.getBoundingBox(l,r),s++}e.length=s},n.evaluateBounds=function(){var t=this._usedObjects,e=this.boundsMin,s=this.boundsMax;if(t.length>1){o.copy(e,t[1].min),o.copy(s,t[1].max);for(var i=2;i<t.length;i++)y(e,e,t[i].min),D(s,s,t[i].max)}else e.set(0,0,0),s.set(1,1,1);o.subtract(this.boundsDelta,s,e);var l=this.boundsDelta;if(this.clusterCellsCountByBoundsSizeData.x=this._cells.x/l.x,this.clusterCellsCountByBoundsSizeData.y=this._cells.y/l.y,this.clusterCellsCountByBoundsSizeData.z=this._cells.z/l.z,this.clusterCellsCountByBoundsSizeData.w=this._pixelsPerCellCount,t.length>1)for(var r=0;r<t.length;r++){var n=t[r];this.evalCellMinMax(n,n.minCell,n.maxCell)}},n.evalCellMinMax=function(t,e,s){e.set(t.min),e.subtract(this.boundsMin),e.divide(this.boundsDelta),e.multiply(this._cells),m(e,e),s.set(t.max),s.subtract(this.boundsMin),s.divide(this.boundsDelta),s.multiply(this._cells),m(s,s),D(e,e,o.ZERO),y(s,s,this._cellsLimit)},n.updateClusters=function(){this.clustersCounts.fill(0),this.clustersData.fill(0),this.clustersDistances.fill(1/0);for(var t=this._cells.x,e=this._cells.y,s=this._cells.z,i=this.clustersCounts,l=(this.clustersDistances,this._maxCellObjectCount),r=this.clustersData,n=this._pixelsPerCellCount,a=this._usedObjects,u=1;u<a.length;u++){var c=a[u].object;c&&this.addObjectData(c,u)}for(var h=new o,d=[],x=function(t,e){return o.distance(t.center,h)-o.distance(e.center,h)},C=0;C<e;C++)for(var f=0;f<s;f++)for(var p=0;p<t;p++){d.length=0;for(var v=1;v<a.length;v++){var b=a[v];b.minCell.x>p||b.minCell.y>C||b.minCell.z>f||b.maxCell.x<p||b.maxCell.y<C||b.maxCell.z<f||d.push(b)}h.set(this.boundsDelta).multiply3f((p+.5)/t,(C+.5)/e,(f+.5)/s).add(this.boundsMin),d.sort(x);for(var y=p+t*(f+C*s),D=i[y],m=0;m<d.length;m++){var _=d[m];D<l&&(r[n*y*4+D]=a.indexOf(_),i[y]=++D)}}},n.findObjects=function(){return[]},n.update=function(t){var e=this.findObjects();this.collectObjects(e),this.evaluateBounds(),this.updateCells(),this.updateClusters(),this.uploadTextures(),this.drawDebug()},n.uploadTextures=function(){var t=h.root.device,e=this.clusterTexture,s=this.clustersData;if(e&&s){var i=new d.BufferTextureCopy(void 0,void 0,e.height,void 0,new d.Extent(e.width,e.height));t.copyBuffersToTexture([s],e,[i])}var l=this.dataInfoFloat,r=this.dataInfoTextureFloat;if(l&&r){var n=new d.BufferTextureCopy(void 0,void 0,r.height,void 0,new d.Extent(r.width,r.height));t.copyBuffersToTexture([l],r,[n])}},n.onDestroy=function(){var t,e;null==(t=this.clusterTexture)||t.destroy(),null==(e=this.dataInfoTextureFloat)||e.destroy()},n.drawDebug=function(){if(this.renderDebug){var t=v();t&&this.drawCluster(t)}},n.drawCluster=function(t){var e=this.cells;M.set(this.boundsDelta).divide(e);for(var s=M.x,i=M.y,l=M.z,r=new x,n=new c.AABB(0,0,0,.5,.5,.5),a=new C(255,255,255,50),u=new o(0,0,0),h=e,d=u.x;d<h.x;d++)for(var p=u.y;p<h.y;p++)for(var v=u.z;v<h.z;v++)I.set(this.boundsMin).add3f(s*(d+.5),i*(p+.5),l*(v+.5)),M.set(s,i,l),r.fromRTS(f.IDENTITY,I,M),t.addBoundingBox(n,a,!1,!1,void 0,!0,r)},r(e,[{key:"cells",get:function(){return this._cells},set:function(t){M.set(t),m(M,M),this._cells.equals(M)||(this._cells.set(M),this._cellsLimit.set(M).subtract(o.ONE),this._cellsDirty=!0)}},{key:"maxCellObjectCount",get:function(){return this._maxCellObjectCount},set:function(t){var e=b(t,4);this._maxCellObjectCount=t,this._pixelsPerCellCount=e/4,this._cellsDirty=!0}}]),e}(p)).prototype,"_cells",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new o(12,12,12)}}),e(w.prototype,"cells",[z],Object.getOwnPropertyDescriptor(w.prototype,"cells"),w.prototype),T=e(w.prototype,"_maxCellObjectCount",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(w.prototype,"maxCellObjectCount",[z],Object.getOwnPropertyDescriptor(w.prototype,"maxCellObjectCount"),w.prototype),B=e(w.prototype,"renderDebug",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=w))||_)||_);n._RF.pop()}}}));

System.register("chunks:///_virtual/zoom-screen-pass.ts",["./rollupPluginModLoBabelHelpers.js","cc","./href-setting.ts"],(function(e){var t,s,o,n,i,a,c,h,r,p,u;return{setters:[function(e){t=e.inheritsLoose,s=e.assertThisInitialized},function(e){o=e.cclegacy,n=e.gfx,i=e.input,a=e.Input,c=e.game,h=e.postProcess,r=e.Vec2,p=e.Vec4},function(e){u=e.HrefSetting}],execute:function(){o._RF.push({},"01bd9SMHHpB/b4jIIbV5B67","zoom-screen-pass",void 0);var l=new n.Sampler(new n.SamplerInfo(n.Filter.POINT,n.Filter.POINT),0);l.custom=!0;e("ZoomScreenPass",function(e){function o(){var t;return(t=e.call(this)||this).name="ZoomScreenPass",t.outputNames=["ZoomScreenColor"],t._scale=1,t._offset=new r,t.screenParams=new p,t.touchPos=new r,t.lastTouchDist=0,t.pressed=!1,i.on(a.EventType.MOUSE_WHEEL,t.onMouseWheel,s(t)),i.on(a.EventType.TOUCH_START,t.onTouchDown,s(t)),i.on(a.EventType.TOUCH_MOVE,t.onTouchMove,s(t)),i.on(a.EventType.TOUCH_END,t.onTouchUp,s(t)),t}t(o,e);var h=o.prototype;return h.destroy=function(){i.off(a.EventType.MOUSE_WHEEL,this.onMouseWheel,this),i.off(a.EventType.TOUCH_START,this.onTouchDown,this),i.off(a.EventType.TOUCH_MOVE,this.onTouchMove,this),i.off(a.EventType.TOUCH_END,this.onTouchUp,this)},h.reset=function(){this.updateMousePosition(),this.updateScale()},h.checkEnable=function(t){return e.prototype.checkEnable.call(this,t)&&!!u.zoomScreen},h.onTouchDown=function(e){e.propagationStopped=!0,this.lastTouchDist=0,this.pressed=!0,this.updateMousePosition(e)},h.onTouchMove=function(e){e.propagationStopped=!0,this.pressed&&(this.updateMousePosition(e),this._offset.x-=e.getDeltaX()/c.canvas.width*this._scale,this._offset.y-=e.getDeltaY()/c.canvas.width*this._scale)},h.onTouchUp=function(e){e.propagationStopped=!0,this.pressed=!1},h.updateMousePosition=function(e){var t=0,s=0;e&&(t=e.getLocationX()/c.canvas.width,s=e.getLocationY()/c.canvas.height),this.touchPos.set(t,s)},h.onMouseWheel=function(e){if(e.propagationStopped=!0,e){var t=e.getScrollY(),s=.1*-Math.sign(t)*this._scale;this.updateScale(e.getLocation(),s)}else this._scale=1,this._offset.set(0,0)},h.updateScale=function(e,t){void 0===t&&(t=0),e?(this._scale+=t,this._scale=Math.max(0,this._scale),e.x/=c.canvas.width,e.y/=c.canvas.height,this._offset.x-=e.x*t,this._offset.y-=e.y*t):(this._scale=1,this._offset.set(0,0))},h.render=function(e,t){var s=this.context;s.clearBlack();var o=globalThis.pipelineAssets.getMaterial("zoom-screen");s.material=o,o.setProperty("screenParams",this.screenParams.set(this._scale,this._scale,this._offset.x,this._offset.y));var i=o.passes[0];i.bindSampler(i.getBinding("outputResultMap"),l);var a=this.lastPass.slotName(e,0),c=this.slotName(e,0),h=s.shadingScale;s.updatePassViewPort(1/h,1/h).addRenderPass("post-process","Pass_"+c),s.setPassInput(a,"outputResultMap").addRasterView(c,n.Format.RGBA16F).blitScreen(0).version()},o}(h.BasePass));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});